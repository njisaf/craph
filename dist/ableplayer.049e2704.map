{"version":3,"sources":["../vendors/ableplayer/ableplayer.js"],"names":["$","document","ready","each","index","element","data","undefined","AblePlayer","window","onYouTubeIframeAPIReady","youtubeIframeAPIReady","trigger","keydown","e","nextIndex","lastCreated","onPlayerKeyPress","media","length","provideFallback","setDefaults","attr","autoplay","loop","startTime","debug","rootPath","replace","getRootWebSitePath","defaultVolume","volume","useChaptersButton","useTranscriptButton","useDescriptionsButton","transcriptType","transcriptSrc","transcriptSrcHasRequiredParts","find","transcriptDivLocation","lyricsMode","transcriptTitle","defaultCaptionsPosition","chaptersDivLocation","chaptersTitle","defaultChapter","chapterId","prevNextUnit","speedIcons","seekbarScope","youTubeId","youTubeDescId","iconType","forceIconType","allowFullScreen","defaultSeekInterval","useFixedSeekInterval","seekInterval","test","showNowPlaying","fallback","fallbackPath","testFallback","lang","forceLang","metaType","metaDiv","searchString","searchDiv","ableIndex","title","tt","thisObj","when","getTranslationText","then","countProperties","setup","prototype","reinitialize","player","setupInstance","recreatePlayer","loadingYoutubeIframeAPI","jQuery","playing","getUserAgent","setIconColor","setButtonImages","_location","location","toString","domainNameIndex","indexOf","domainName","substring","webFolderIndex","webFolderFullPath","$elements","i","$el","bgColor","rgb","red","green","blue","luminance","iconColor","hide","append","css","split","toolbarIconColor","remove","imgPath","playButtonImg","pauseButtonImg","restartButtonImg","rewindButtonImg","forwardButtonImg","previousButtonImg","nextButtonImg","fasterButtonImg","slowerButtonImg","captionsButtonImg","chaptersButtonImg","signButtonImg","transcriptButtonImg","descriptionsButtonImg","fullscreenExpandButtonImg","fullscreenCollapseButtonImg","prefsButtonImg","helpButtonImg","deferred","promise","errorMsg","srcFile","Deferred","console","startedPlaying","autoScrollTranscript","$media","first","is","mediaType","get","tagName","mediaId","fail","$sources","getPlayer","error","setIconType","setDimensions","resolve","playerMaxWidth","parseInt","playerMaxHeight","$tempButton","$testButton","controllerFont","getComputedStyle","getPropertyValue","log","setupInstancePlaylist","hasPlaylist","$playlist","playlistIndex","dataEmbedded","playlistEmbed","parent","$playlistDom","clone","prefsGroups","setMediaAttributes","loadCurrentPreferences","injectPlayerCode","initSignLanguage","setupTracks","setupAltCaptions","captions","$transcriptLanguageSelect","initDescription","initDefaultCaption","initPlayer","initializing","getPreferencesGroups","injectPrefsForm","setupPopups","updateCaption","updateTranscript","populateChaptersDiv","showSearchResults","seekToDefaultChapter","playerPromise","initHtml5Player","initJwPlayer","initYouTubePlayer","done","setSeekInterval","addControls","addEventListeners","Volume","setMute","setFullscreen","setVolume","refreshControls","isIOS","load","reject","duration","useChapterTimes","chapterDuration","getDuration","seekIntervalCalculated","usingYouTubeCaptions","ytCaptions","def","captionLang","language","selectedCaptions","syncTrackLanguages","jwHeight","ajax","async","url","dataType","success","textStatus","jqXHR","jwId","$mediaContainer","playerHeight","sources","ii","source","push","file","flashplayer","html5player","jwPlayer","jwplayer","playlist","image","controls","width","primary","wmode","height","errorThrown","textTracks","mode","sourceType","$newItem","isUserAgent","jwCanPlay","canPlayType","$firstItem","getAttribute","eq","setCookie","cookieValue","Cookies","set","expires","getCookie","defaultCookie","preferences","sign","transcript","cookie","getJSON","err","updateCookie","setting","$window","windowPos","available","prefName","$transcriptArea","position","top","left","$signWindow","getAvailablePreferences","groups","prefs","prefAltKey","prefCtrlKey","prefShiftKey","prefHighlight","prefTabbable","prefCaptionsPosition","prefCaptionsFont","sans","prefCaptionsSize","prefCaptionsColor","prefCaptionsBGColor","prefCaptionsOpacity","prefDescFormat","prefDescPause","prefVisibleDesc","defaultValue","form","$prefsDiv","formTitle","introText","$prefsIntro","$prefsIntroP2","p3Text","$prefsIntroP3","j","$fieldset","fieldsetClass","fieldsetId","$descFieldset1","$descLegend1","$descFieldset2","$descLegend2","$legend","thisPref","$thisDiv","thisClass","thisId","$thisLabel","$thisField","$div1","id1","$radio1","$label1","$div2","id2","$radio2","$label2","options","$thisOption","optionValue","optionText","sampleCapsDiv","changedPref","changedSpan","changedText","currentDescState","$kbHeading","$kbList","kbLabels","keys","kbListText","$kbListItem","dialog","saveButton","cancelButton","customClass","addClass","prefTitleCaptions","prefIntroCaptions","text","prefTitleDescriptions","prefIntroDescription1","$prefsIntroUL","$prefsIntroLI1","prefDescFormatOption1","$prefsIntroLI2","prefDescFormatOption2","hasOpenDesc","hasClosedDesc","prefIntroDescription2","prefDescFormatOption1b","and","prefDescFormatOption2b","prefIntroDescriptionNone","html","prefIntroDescription3","prefIntroDescription4","prefTitleKeyboard","prefIntroKeyboard1","prefIntroKeyboard2","prefIntroKeyboard3","prefTitleTranscript","prefIntroTranscript","prefHeadingTextDescription","prefHeadingKeyboard1","capitalizeFirstLetter","type","name","id","value","change","stylizeCaptions","$sampleCapsDiv","getCaptionsOptions","captionsPositionOverlay","captionsPositionBelow","transparent","solid","sampleCaptionText","prefHeadingKeyboard2","play","pause","or","spacebar","restart","rewind","forward","mute","unmute","captionsOn","hideCaptions","showCaptions","descOn","turnOffDescriptions","turnOnDescriptions","help","escapeKey","escapeKeyFunction","AccessibleDialog","$prefsButton","closeButtonLabel","save","cancel","click","savePrefsFromForm","resetPrefsForm","captionPrefsDialog","descPrefsDialog","keyboardPrefsDialog","transcriptPrefsDialog","event","which","thisDiv","prop","val","numChanges","numCapChanges","capSizeChanged","capSizeValue","newValue","showAlert","prefSuccess","prefNoChange","youTubePlayer","setOption","ytCaptionModule","translatePrefs","updatePrefs","$captionsDiv","$descDiv","modHelp","removeAttr","refreshingDesc","usingModifierKeys","altKey","ctrlKey","shiftKey","parseWebVTT","parserState","src","metadata","cues","line","column","act","parseFileBody","errString","warn","actList","state","list","results","action","updatePosition","cutText","cut","returnText","cutLine","nextEOL","peekLine","eatOptionalBOM","eatSignature","c","eatUntilEOLInclusive","parseMetadataHeaders","eatAtLeast1EmptyLines","parseCuesAndComments","nextLine","keyValue","getMetadataKeyValue","nextSpaceOrNewline","s","possible","spaceIndex","tabIndex","lineIndex","Math","min","apply","next","pair","colon","pairName","pairValue","getSettingsKeyValue","eatComment","eatEmptyLines","trim","parseCue","cueId","cueTimings","getTiming","eatAtLeast1SpacesOrTabs","eatArrow","endTime","eatSpacesOrTabs","cueSettings","getCueSettings","components","getCuePayload","start","end","settings","result","classes","annotation","children","current","languageStack","token","getCueToken","inArray","pop","tempState","timing","tokenState","buffer","join","match","noteLine","eatSingleSpaceOrTab","numEaten","linesEaten","nextSpace","timestamp","exec","time","hours","minutes","seconds","vidcapContainer","wrap","$ableDiv","$ableWrapper","injectOffscreenHeading","injectBigPlayButton","$vidcapContainer","injectPlayerControlArea","injectTextDescriptionArea","injectTranscriptArea","setupManualTranscript","addTranscriptAreaEvents","injectAlert","injectPlaylist","headingType","playerHeadingLevel","getNextHeadingLevel","$headingDiv","prepend","playerHeading","$bigPlayButton","handlePlay","$playerDiv","$nowPlayingDiv","$controllerDiv","$statusBarDiv","$timer","$elapsedTimeContainer","$durationContainer","$speed","speed","$status","getDefaultWidth","positionDraggableWindow","cookiePos","dragged","currentWindowPos","firstTime","zIndex","isEmptyObject","updateZIndex","getOptimumPosition","targetWindow","targetWidth","gap","ableWidth","ableHeight","ableOffset","ableTop","ableLeft","windowWidth","otherWindowWidth","offset","injectPoster","$element","context","poster","ytWidth","ytHeight","playerWidth","$posterImg","$alertBox","appendTo","round","$srAlertBox","playlistClone","insertBefore","swapSource","createPopup","$popup","$thisButton","$thisListItem","$prevButton","$nextButton","selectedTrackIndex","selectedTrack","on","last","prev","removeClass","focus","closePopups","preventDefault","chaptersPopup","$chaptersButton","captionsPopup","$ccButton","prefsPopup","$windowPopup","$windowButton","show","$volumeSlider","$volumeAlert","volumeSliderClosed","$volumeButton","popups","hasDefault","tracks","trackList","trackItem","track","radioName","radioId","trackButton","trackLabel","prefCats","prefCat","prefLabel","chapters","popup","selectedChapters","prefMenuCaptions","prefMenuDescriptions","prefMenuKeyboard","prefMenuTranscript","whichPref","label","getCaptionClickFunction","flattenCueForCaption","formatSecondsAsColonTime","getClickFunction","seekTo","hidingPopup","setTimeout","captionsOff","prefCaptions","getCaptionOffFunction","reason","$fallbackDiv","mediaClone","fallbackText","showBrowserList","browsers","b","browserList","fallbackError1","fallbackError2","getSupportingBrowsers","minVersion","orHigher","before","calculateControlLayout","controlLayout","browserSupportsVolume","volumeButton","getVolumeName","bll","blr","isPlaybackRateSupported","hasCaptions","hasSignLanguage","hasChapters","concat","useSpeedButtons","useFullScreen","k","$controllerSpan","tooltipId","tooltipX","tooltipY","control","buttonImg","buttonImgSrc","buttonTitle","newButton","iconClass","buttonIcon","buttonUse","leftWidth","rightWidth","totalWidth","leftWidthStyle","rightWidthStyle","controllerStyles","vidcapStyles","captionLabel","popupMenuId","baseSliderWidth","sectionByOrder","$tooltipDiv","sliderDiv","sliderLabel","seekbarLabel","seekBar","AccessibleSlider","pipe","pipeImg","alt","role","getButtonTitle","buttonLabel","buttonHeight","buttonWidth","centerTooltip","closest","hasClass","tooltipStyle","right","tooltipWidth","tooltip","showTooltip","prefDesc","$playpauseButton","$signButton","$descButton","$muteButton","$transcriptButton","$transcriptDiv","showTranscript","$fullscreenButton","addVolumeSlider","sec","useSvg","cache","Object","create","checkUseElems","tid","debouncedCheck","clearTimeout","unobserveChanges","observeChanges","observer","addEventListener","MutationObserver","observe","documentElement","childList","subtree","attributes","disconnect","removeEventListener","ignore","xlinkNS","base","bcr","hash","Request","inProgressCount","isHidden","uses","xhr","XMLHttpRequest","withCredentials","XDomainRequest","observeIfDone","attrUpdateFunc","spec","useEl","setAttributeNS","onloadFunc","body","x","createElement","svg","onload","innerHTML","responseText","getElementsByTagName","setAttribute","style","overflow","firstChild","onErrorTimeout","onerror","ontimeout","getBoundingClientRect","getAttributeNS","bottom","getElementById","open","send","abort","sourceIndex","itemTitle","itemLang","jwSource","$newSource","nowPlayingSpan","Array","swappingSrc","captionsCount","hideTranscript","faster","slower","charAt","toUpperCase","slice","$tracks","captionLabels","descriptions","meta","loadingPromises","kind","trackSrc","isDefaultTrack","loadingPromise","loadTextObject","trackText","setupCaptions","setupDescriptions","setupChapters","setupMetadata","trackLang","getLanguageName","removeAttribute","$captionsWrapper","currentCaption","$unknownTranscriptOption","option","inserted","capLabel","toLowerCase","splice","currentDescription","$metaDiv","hasMeta","visibleSelectors","$tempDiv","status","req","youTubeDataAPIKey","setupYouTubeCaptions","googleApiPromise","json","activeYouTubeId","finalizeYoutubeInit","getScript","containerId","ccLoadPolicy","videoDimensions","youTubeCaptionsReady","getYouTubeDimensions","ytAspectRatio","YT","Player","videoId","playerVars","enablejsapi","cc_load_policy","hl","modestbranding","rel","html5","events","onReady","playMedia","resizeYouTubePlayer","onError","onStateChange","playerState","getPlayerState","stoppingYouTube","seeking","onPlaybackQualityChange","onApiChange","initYouTubeCaptionModule","youTubeContainerId","d","$iframe","restoringAfterFullScreen","setSize","restoreYouTubePlayerSize","doWhen","googleApiReady","interval","attempts","getYouTubeCaptionData","trackId","trackKind","isDraft","gapi","client","setApiKey","request","youtube","items","snippet","message","fontSize","displaySettings","getOptions","unloadModule","div","orientation","max","bigInterval","className","trackingMedia","initialState","tracking","trackDevice","keyTrackPosition","lastTrackPosition","nextStep","inertiaCount","bodyDiv","loadedDiv","playedDiv","seekHead","timeTooltip","wrapperDiv","setDuration","hover","overHead","refreshTooltip","overBody","stopTracking","pageXToPosition","pageX","mousemove","trackHeadAtPageX","blur","overBodyMousePos","y","pageY","mousedown","startTracking","mouseup","trackImmediatelyTo","arrowKeyDown","keyup","multiplier","boundPos","trackHeadAtPosition","resetHeadLocation","setWidth","resizeDivs","getWidth","buffered","ratio","center","setPosition","updateLive","updateAriaValues","setBuffered","redrawDivs","device","newLeft","reportTrackAtPosition","pHours","floor","pMinutes","pSeconds","pHourWord","pMinuteWord","pSecondWord","descriptionText","liveAriaRegion","positionToStr","setTooltipPosition","dHours","dMinutes","dSeconds","$div","volumeSliderId","volumeHelpId","volumePct","volumeTrackHeight","volumeHeadHeight","volumeTickHeight","$volumeSliderTooltip","$volumeSliderTrack","$volumeSliderTrackOn","$volumeSliderHead","volumeUpDown","$volumeHelp","volumeHelp","refreshVolumeSlider","draggingVolume","volumeHeadPositionTop","moveVolumeHead","handleVolume","hideVolumePopup","showVolumePopup","volumePctText","trackOnHeight","trackOnTop","headTop","refreshVolumeButton","volumeName","volumeLabel","volumeIconClass","volumeImg","diff","direction","ticksDiff","newVolume","maxedOut","abs","getVolume","isMuted","handleMute","muted","getMute","lastVolume","unMute","signVideo","focusableElementsSelector","modalDiv","$returnElement","dialogRole","fullscreen","escapeHook","focusedElementBeforeModal","baseId","random","modal","closeButton","titleH1","parts","focusable","filter","focused","currentIndex","stopPropagation","not","overlay","$parents","$foundHeadings","numHeadings","headingNumber","parents","obj","count","hasOwnProperty","string","descFile","useDescFormat","prevDescFormat","usingAudioDescription","swapDescription","showDescription","getElapsed","origSrc","descSrc","srcType","jwSourceIndex","newSource","swapTime","alertDescribedVersion","alertNonDescribedVersion","loadVideoById","cueVideoById","now","thisDescription","flattenComponentForDescription","component","selectedDescriptions","pauseMedia","userAgent","browser","navigator","version","RegExp","$1","vendor","os","iOS","noVolume","nativeFullscreenSupported","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","newTime","liveUpdatePending","seekable","currentTime","jwSeekPause","seek","isNaN","getState","getPosition","getCurrentTime","paused","ended","readyState","playbackRate","getAvailablePlaybackRates","setPlaybackRate","rate","toFixed","getPlaybackRate","isPaused","pauseVideo","playVideo","elapsed","lastChapterIndex","displayElapsed","textByState","widthUsed","leftControls","rightControls","seekbarWidth","seekbarSpacer","newTop","svgLink","newSvgLink","statusBarHeight","speedHeight","statusBarWidthBreakpoint","getChapterDuration","chapterElapsed","getChapterElapsed","currentChapter","activeElement","statusStopped","statusPaused","statusPlaying","statusBuffering","statusEnd","Date","getTime","statusDebounceStart","statusTimeout","isFullscreen","hidingSpeed","enterFullScreen","exitFullScreen","hideBigPlayButton","prefAutoScrollTranscript","$autoScrollTranscriptCheckbox","currentHighlight","scrollTop","scrollingTranscript","getBuffer","getVideoLoadedFraction","getHiddenWidth","$hiddenElement","outerWidth","handleRestart","handleRewind","targetTime","handleFastForward","handleRateIncrease","changeRate","handleRateDecrease","dir","rates","currentRate","handleCaptionToggle","loadModule","outerHeight","handleChapters","handleDescriptionToggle","handlePrefsClick","pref","prefsButtonPosition","prefsMenuRight","prefsMenuLeft","handleHelpClick","helpDialog","handleTranscriptToggle","prefTranscript","handleSignToggle","showSign","prefSign","hideSign","fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","modalFullscreenActive","el","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","restoringAfterFullscreen","resizePlayer","fullscreenDialog","$dialogDiv","$fsDialogAlert","handleFullscreenToggle","wasPaused","$modalFullscreenPlaceholder","insertAfter","$ableColumnLeft","newHeight","stillPaused","handleTranscriptLockToggle","$tooltip","stop","delay","fadeOut","msg","$parentWindow","alertLeft","alertTop","$transcriptAlert","$signAlert","$transcriptToolbar","showedAlert","showedTranscriptAlert","showedSignAlert","captionSizeOkMin","captionSizeOkMax","captionSize","newCaptionSize","newLineHeight","retrieveOffscreenWindow","fallbackRatio","$fallbackWrapper","resize","windowTop","windowLeft","windowRight","windowBottom","windowHeight","getHighestZIndex","z","Number","isInteger","transcriptZ","signZ","newHighZ","newLowZ","transcriptLang","selectedMeta","transcriptCaptions","transcriptChapters","transcriptDescriptions","updateChaptersList","resettingYouTubeCaptions","thisCaption","captionText","cue","flattenComponent","serif","cursive","fantasy","monospace","white","yellow","cyan","magenta","black","captionsStylePopOn","captionsStyleRollUp","outputFormat","property","opacity","lineHeight","positionCaptions","parseFloat","$captionWrapper","headingLevel","headingId","$chaptersHeading","$chaptersList","$chaptersDiv","$chaptersNav","thisChapter","$chapterItem","$chapterButton","buttonId","$clickedItem","thisChapterIndex","updateChapter","chapterLabel","newChapter","videoDuration","chapterEnd","videoElapsed","convertChapterTimeToVideoTime","chapterTime","updateMeta","showMeta","m","thisMeta","cueText","cueLines","focusTarget","currentMeta","flattenCueForMeta","autoScroll","unknown","languageSelectWrapper","$transcriptLanguageSelectContainer","initDragDrop","bind","$transcriptSeekpoints","generateTranscript","spanStart","highlightTranscript","$main","lyricsTitle","chapterHeadingNumber","transcriptHeading","$transcriptHeadingTag","nextChapter","nextCap","nextDesc","addChapter","chap","chapterHeading","$chapterHeadingTag","flattenComponentForChapter","comp","$chapSpan","jj","addDescription","desc","$descHiddenSpan","$descSpan","addCaption","cap","$capSpan","flattenComponentForCaption","flattenString","str","openBracket","closeBracket","openParen","closeParen","hasBrackets","hasParens","$silentSpan","$vSpan","subResults","$tag","firstStart","$components","spanCount","openBlock","wrapAll","SearchDiv","resultsArray","searchFor","resultsSummary","resultsSummaryText","resultsList","resultsItem","itemStartTime","secondsToTime","itemStartSpan","itemText","noResults","caption","searchTerms","highlightSearchTerm","resultString","searchTerm","termIndex","termLength","str1","str2","str3","totalSeconds","onMediaUpdateTime","onMediaPause","onMediaComplete","onMediaNewSourceLoad","onWindowResize","newWidth","innerHeight","addSeekbarListeners","pausedBeforeTracking","onClickPlayerButton","whichButton","substr","okToHandleKeyPress","thisElement","addHtml5MediaListeners","code","addJwMediaListeners","onTime","onComplete","fallbackDefaultWidth","fallbackDefaultHeight","onSeek","onPlay","onPause","onBuffer","onBufferChange","onIdle","onMeta","onPlaylist","target","mutations","forEach","mutation","attributeName","config","characterData","setInterval","$toolbar","windowName","$resizeHandle","resizeZIndex","$signToolbar","windowMenuClickRegistered","startMouseX","startMouseY","dragDevice","startDrag","dragging","endDrag","startResize","resizing","endResize","finishingDrag","addWindowMenu","$windowAlert","$newButton","$buttonIcon","$buttonImg","$buttonLabel","$optionList","$optionItem","$radioButton","$radioLabel","$activeWindow","windowButtonLabel","windowMove","windowResize","handleMenuChoice","clickedId","handleWindowButtonClick","$transcriptPopupButton","$transcriptPopup","$signPopupButton","$signPopup","addResizeDialog","widthId","heightId","startingWidth","startingHeight","aspectRatio","$resizeForm","$resizeWrapper","$resizeWidthDiv","$resizeWidthInput","$resizeWidthLabel","$resizeHeightDiv","$resizeHeightInput","$resizeHeightLabel","tempWidth","tempHeight","$saveButton","$cancelButton","resizeDialog","windowResizeHeading","transcriptResizeDialog","signResizeDialog","popupTop","choice","eventType","$thisRadio","windowMoveAlert","startPos","newX","newY","dragStartX","dragStartY","dragKeyX","dragKeyY","startingDrag","dragOffsetX","dragOffsetY","resetDraggedObject","dragKeys","key","keySpeed","resizeObject","off","isCloseToCorner","mouseX","mouseY","tolerance","dragStartWidth","dragStartHeight","signFile","injectSignPlayerCode","signVideoId","signVideoWidth","signSrc","$signSource","$signVideo","isoLangs","getLanguageNativeName","nativeName","getSupportedLangs","langs","gettingText","de","en","es","fr","ja","eval","dfd","opt","extend","delayed","checkId","startChecking","call","clearInterval"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA,CAAC,UAAUA,CAAV,EAAa;AACZA,IAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC5BF,MAAE,cAAF,EAAkBG,IAAlB,CAAuB,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC/C,UAAIL,EAAEK,OAAF,EAAWC,IAAX,CAAgB,aAAhB,MAAmCC,SAAvC,EAAkD;AAChD,YAAIC,UAAJ,CAAeR,EAAE,IAAF,CAAf,EAAuBA,EAAEK,OAAF,CAAvB;AACD;AACF,KAJD;AAKD,GAND;;AAQA;AACAI,SAAOC,uBAAP,GAAiC,YAAW;AAC1CF,eAAWG,qBAAX,GAAmC,IAAnC;AACAX,MAAE,MAAF,EAAUY,OAAV,CAAkB,uBAAlB,EAA2C,EAA3C;AACD,GAHD;;AAKA;AACA;AACAZ,IAAES,MAAF,EAAUI,OAAV,CAAkB,UAASC,CAAT,EAAY;AAC5B,QAAIN,WAAWO,SAAX,KAAyB,CAA7B,EAAgC;AAC9BP,iBAAWQ,WAAX,CAAuBC,gBAAvB,CAAwCH,CAAxC;AACD;AACF,GAJD;;AAMA;AACA;AACA;AACAL,SAAOD,UAAP,GAAoB,UAASU,KAAT,EAAgB;;AAElC;AACAV,eAAWQ,WAAX,GAAyB,IAAzB;;AAEA,SAAKE,KAAL,GAAaA,KAAb;AACA,QAAIlB,EAAEkB,KAAF,EAASC,MAAT,KAAoB,CAAxB,EAA2B;AACzB,WAAKC,eAAL,CAAqB,4BAArB;AACA;AACD;;AAED;AACA,SAAKC,WAAL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,QAAIrB,EAAEkB,KAAF,EAASI,IAAT,CAAc,UAAd,MAA8Bf,SAA9B,IAA2CP,EAAEkB,KAAF,EAASI,IAAT,CAAc,UAAd,MAA8B,OAA7E,EAAsF;AACpF,WAAKC,QAAL,GAAgB,IAAhB;AACD,KAFD,MAGK;AACH,WAAKA,QAAL,GAAgB,KAAhB;AACD;;AAED;AACA,QAAIvB,EAAEkB,KAAF,EAASI,IAAT,CAAc,MAAd,MAA0Bf,SAA1B,IAAuCP,EAAEkB,KAAF,EAASI,IAAT,CAAc,MAAd,MAA0B,OAArE,EAA8E;AAC5E,WAAKE,IAAL,GAAY,IAAZ;AACD,KAFD,MAGK;AACH,WAAKA,IAAL,GAAY,KAAZ;AACD;;AAED;AACA,QAAIxB,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgCC,SAAhC,IAA6CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgC,EAAjF,EAAqF;AACnF,WAAKmB,SAAL,GAAiBzB,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,CAAjB;AACD,KAFD,MAGK;AACH,WAAKmB,SAAL,GAAiB,CAAjB;AACD;;AAED;AACA,QAAIzB,EAAEkB,KAAF,EAASZ,IAAT,CAAc,OAAd,MAA2BC,SAA3B,IAAwCP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,OAAd,MAA2B,OAAvE,EAAgF;AAC9E,WAAKoB,KAAL,GAAa,IAAb;AACD,KAFD,MAGK;AACH,WAAKA,KAAL,GAAa,KAAb;AACD;;AAED;AACA,QAAI1B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,MAA+BC,SAAnC,EAA8C;AAC5C;AACA,WAAKoB,QAAL,GAAgB3B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,EAA2BsB,OAA3B,CAAmC,MAAnC,EAA2C,EAA3C,CAAhB;AACD,KAHD,MAIK;AACH,WAAKD,QAAL,GAAgB,KAAKE,kBAAL,EAAhB;AACD;;AAED;AACA;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,QAAI9B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,MAA4BC,SAA5B,IAAyCP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,MAA4B,EAAzE,EAA6E;AAC3E,UAAIyB,SAAS/B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,CAAb;AACA,UAAIyB,UAAU,CAAV,IAAeA,UAAU,EAA7B,EAAiC;AAC/B,aAAKD,aAAL,GAAqBC,MAArB;AACD;AACF;AACD,SAAKA,MAAL,GAAc,KAAKD,aAAnB;;AAGA;AACA;AACA;AACA;;AAEA,QAAI9B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,qBAAd,MAAyCC,SAAzC,IAAsDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,qBAAd,MAAyC,KAAnG,EAA0G;AACxG,WAAK0B,iBAAL,GAAyB,KAAzB;AACD,KAFD,MAGK;AACH,WAAKA,iBAAL,GAAyB,IAAzB;AACD;;AAED,QAAIhC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,uBAAd,MAA2CC,SAA3C,IAAwDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,uBAAd,MAA2C,KAAvG,EAA8G;AAC5G,WAAK2B,mBAAL,GAA2B,KAA3B;AACD,KAFD,MAGK;AACH,WAAKA,mBAAL,GAA2B,IAA3B;AACD;;AAED,QAAIjC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,yBAAd,MAA6CC,SAA7C,IAA0DP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,yBAAd,MAA6C,KAA3G,EAAkH;AAChH,WAAK4B,qBAAL,GAA6B,KAA7B;AACD,KAFD,MAGK;AACH,WAAKA,qBAAL,GAA6B,IAA7B;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAKC,cAAL,GAAsB,IAAtB;AACA,QAAInC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,MAAoCC,SAAxC,EAAmD;AACjD,WAAK6B,aAAL,GAAqBpC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,CAArB;AACA,UAAI,KAAK+B,6BAAL,EAAJ,EAA0C;AACxC,aAAKF,cAAL,GAAsB,QAAtB;AACD,OAFD,MAGK;AACH,aAAKA,cAAL,GAAsB,IAAtB;AACD;AACF,KARD,MASK,IAAIjB,MAAMoB,IAAN,CAAW,iDAAX,EAA8DnB,MAA9D,GAAuE,CAA3E,EAA8E;AACjF;AACA,UAAInB,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,MAAoCC,SAApC,IAAiDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,MAAoC,EAAzF,EAA6F;AAC3F,aAAKiC,qBAAL,GAA6BvC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,CAA7B;AACA,aAAK6B,cAAL,GAAsB,UAAtB;AACD,OAHD,MAIK,IAAInC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,oBAAd,MAAwCC,SAA5C,EAAuD;AAC1D,YAAIP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,oBAAd,MAAwC,KAA5C,EAAmD;AACjD,eAAK6B,cAAL,GAAsB,OAAtB;AACD;AACF,OAJI,MAKA;AACH,aAAKA,cAAL,GAAsB,OAAtB;AACD;AACF;AACD;AACA;AACA;;AAEA,QAAInC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,aAAd,MAAiCC,SAAjC,IAA8CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,aAAd,MAAiC,OAAnF,EAA4F;AAC1F,WAAKkC,UAAL,GAAkB,IAAlB;AACD,KAFD,MAGK;AACH,WAAKA,UAAL,GAAkB,KAAlB;AACD;AACD;AACA,QAAIxC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsCC,SAAtC,IAAmDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsC,EAA7F,EAAiG;AAC/F,WAAKmC,eAAL,GAAuBzC,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,CAAvB;AACD,KAFD,MAGK,CAEJ;AADC;;;AAGF;AACA;AACA;AACA;AACA,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,mBAAd,MAAuC,SAA3C,EAAsD;AACpD,WAAKoC,uBAAL,GAA+B,SAA/B;AACD,KAFD,MAGK;AAAE;AACL,WAAKA,uBAAL,GAA+B,OAA/B;AACD;;AAED;AACA,QAAI1C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,cAAd,MAAkCC,SAAlC,IAA+CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,cAAd,MAAkC,EAArF,EAAyF;AACvF,WAAKqC,mBAAL,GAA2B3C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,cAAd,CAA3B;AACD;;AAED,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,MAAoCC,SAAxC,EAAmD;AACjD;AACA,WAAKqC,aAAL,GAAqB5C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,gBAAd,CAArB;AACD;;AAED,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsCC,SAAtC,IAAmDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsC,EAA7F,EAAiG;AAC/F,WAAKuC,cAAL,GAAsB7C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,CAAtB;AACA,WAAKwC,SAAL,GAAiB,KAAKD,cAAtB,CAF+F,CAEzD;AACvC;;AAED;AACA;AACA,QAAI7C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,SAAnC,IAAgDN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,UAAvF,EAAmG;AACjG,WAAKyC,YAAL,GAAoB,SAApB;AACD,KAFD,MAGK,IAAI/C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,UAAvC,EAAmD;AACtD,WAAKyC,YAAL,GAAoB,UAApB;AACD,KAFI,MAGA;AACH,WAAKA,YAAL,GAAoB,KAApB;AACD;;AAED;AACA;AACA;AACA,QAAI/C,EAAEkB,KAAF,EAASZ,IAAT,CAAc,aAAd,MAAiC,SAArC,EAAgD;AAC9C,WAAK0C,UAAL,GAAkB,SAAlB;AACD,KAFD,MAGK;AACH,WAAKA,UAAL,GAAkB,QAAlB;AACD;;AAED;AACA;AACA,QAAIhD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,SAAnC,IAAgDN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,UAAvF,EAAmG;AACjG,WAAK2C,YAAL,GAAoB,SAApB;AACD,KAFD,MAGK;AACH,WAAKA,YAAL,GAAoB,OAApB;AACD;;AAED;AACA,QAAIjD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgCC,SAAhC,IAA6CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgC,EAAjF,EAAqF;AACnF,WAAK4C,SAAL,GAAiBlD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,CAAjB;AACD;;AAED,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,iBAAd,MAAqCC,SAArC,IAAkDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,iBAAd,MAAqC,EAA3F,EAA+F;AAC7F,WAAK6C,aAAL,GAAqBnD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,iBAAd,CAArB;AACD;;AAED;AACA;AACA;AACA;AACA,SAAK8C,QAAL,GAAgB,MAAhB;AACA,SAAKC,aAAL,GAAqB,KAArB;AACA,QAAIrD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,MAA+BC,SAA/B,IAA4CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,MAA+B,EAA/E,EAAmF;AACjF,UAAI8C,WAAWpD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,CAAf;AACA,UAAI8C,aAAa,MAAb,IAAuBA,YAAY,OAAnC,IAA8CA,YAAY,KAA9D,EAAqE;AACnE,aAAKA,QAAL,GAAgBA,QAAhB;AACA,aAAKC,aAAL,GAAqB,IAArB;AACD;AACF;;AAED,QAAIrD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsCC,SAAtC,IAAmDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsC,KAA7F,EAAoG;AAClG,WAAKgD,eAAL,GAAuB,KAAvB;AACD,KAFD,MAGK;AACH,WAAKA,eAAL,GAAuB,IAAvB;AACD;;AAED;AACA;AACA;AACA;AACA,SAAKC,mBAAL,GAA2B,EAA3B;AACA,SAAKC,oBAAL,GAA4B,KAA5B;AACA,QAAIxD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmCC,SAAnC,IAAgDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,EAAvF,EAA2F;AACzF,UAAImD,eAAezD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,CAAnB;AACA,UAAI,gBAAgBoD,IAAhB,CAAqBD,YAArB,CAAJ,EAAwC;AAAE;AACxC,aAAKA,YAAL,GAAoBA,YAApB;AACA,aAAKD,oBAAL,GAA4B,IAA5B,CAFsC,CAEJ;AACnC;AACF;;AAED;AACA;AACA;AACA,QAAIxD,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsCC,SAAtC,IAAmDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,kBAAd,MAAsC,OAA7F,EAAsG;AACpG,WAAKqD,cAAL,GAAsB,KAAtB;AACD,KAFD,MAGK;AACH,WAAKA,cAAL,GAAsB,IAAtB;AACD;;AAED;AACA;AACA;AACA;AACA;;AAEA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKC,YAAL,GAAoB,KAApB;;AAEA,QAAI9D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,MAA8BC,SAA9B,IAA2CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,MAA8B,EAA7E,EAAiF;AAC/E,UAAIsD,WAAY5D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,CAAhB;AACA,UAAIsD,aAAa,IAAjB,EAAuB;AACrB,aAAKA,QAAL,GAAgBA,QAAhB;AACD;AACF;;AAED,QAAI,KAAKA,QAAL,KAAkB,IAAtB,EAA4B;;AAE1B,UAAI5D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmCC,SAAnC,IAAgDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,OAAvF,EAAgG;AAC9F,aAAKuD,YAAL,GAAoB7D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,CAApB;AACD,OAFD,MAGK;AACH,aAAKuD,YAAL,GAAoB,KAAKlC,QAAL,GAAgB,cAApC;AACD;;AAED,UAAI3B,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmCC,SAAnC,IAAgDP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,eAAd,MAAmC,OAAvF,EAAgG;AAC9F,aAAKwD,YAAL,GAAoB,IAApB;AACD;AACF;;AAED;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,QAAI/D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,MAAd,MAA0BC,SAA1B,IAAuCP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,MAAd,MAA0B,EAArE,EAAyE;AACvE,UAAIyD,OAAO/D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,MAAd,CAAX;AACA,UAAIyD,KAAK5C,MAAL,IAAe,CAAnB,EAAsB;AACpB,aAAK4C,IAAL,GAAYA,IAAZ;AACD;AACF;AACD;AACA;AACA;AACA;AACA;AACA,QAAI/D,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgCC,SAAhC,IAA6CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgC,OAAjF,EAA0F;AACxF,WAAK0D,SAAL,GAAiB,IAAjB;AACD,KAFD,MAGK;AACH,WAAKA,SAAL,GAAiB,KAAjB;AACD;;AAGD;AACA,QAAIhE,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,MAA+BC,SAA/B,IAA4CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,MAA+B,EAA/E,EAAmF;AACjF,WAAK2D,QAAL,GAAgBjE,EAAEkB,KAAF,EAASZ,IAAT,CAAc,WAAd,CAAhB;AACD;;AAED,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,MAA8BC,SAA9B,IAA2CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,MAA8B,EAA7E,EAAiF;AAC/E,WAAK4D,OAAL,GAAelE,EAAEkB,KAAF,EAASZ,IAAT,CAAc,UAAd,CAAf;AACD;;AAED;AACA,QAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,MAA4BC,SAA5B,IAAyCP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,MAA4B,EAAzE,EAA6E;AAC3E;AACA,UAAIN,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgCC,SAAhC,IAA6CP,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,MAAgC,EAAjF,EAAqF;AACnF,aAAK6D,YAAL,GAAoBnE,EAAEkB,KAAF,EAASZ,IAAT,CAAc,QAAd,CAApB;AACA,aAAK8D,SAAL,GAAiBpE,EAAEkB,KAAF,EAASZ,IAAT,CAAc,YAAd,CAAjB;AACD;AACF;AACD;AACA;AACA;AACA;AACA;;AAEA,SAAK+D,SAAL,GAAiB7D,WAAWO,SAA5B;AACAP,eAAWO,SAAX,IAAwB,CAAxB;;AAEA,SAAKuD,KAAL,GAAatE,EAAEkB,KAAF,EAASI,IAAT,CAAc,OAAd,CAAb;;AAEA;AACA;AACA,SAAKiD,EAAL,GAAU,EAAV;AACA,QAAIC,UAAU,IAAd;AACAxE,MAAEyE,IAAF,CAAO,KAAKC,kBAAL,EAAP,EAAkCC,IAAlC,CACE,YAAY;AACV,UAAIH,QAAQI,eAAR,CAAwBJ,QAAQD,EAAhC,IAAsC,EAA1C,EAA8C;AAC5C;AACAC,gBAAQK,KAAR;AACD,OAHD,MAIK;AACH;AACAL,gBAAQpD,eAAR,CAAwB,yCAAxB;AACD;AACF,KAVH;AAYD,GAvWD;;AAyWA;AACAZ,aAAWO,SAAX,GAAuB,CAAvB;;AAEAP,aAAWsE,SAAX,CAAqBD,KAArB,GAA6B,YAAW;;AAEtC,QAAIL,UAAU,IAAd;AACA,SAAKO,YAAL,GAAoBJ,IAApB,CAAyB,YAAY;AACnC,UAAI,CAACH,QAAQQ,MAAb,EAAqB;AACnB;AACAR,gBAAQpD,eAAR,CAAwB,sBAAxB;AACD,OAHD,MAIK;AACHoD,gBAAQS,aAAR,GAAwBN,IAAxB,CAA6B,YAAY;AACvCH,kBAAQU,cAAR;AACD,SAFD;AAGD;AACF,KAVD;AAWD,GAdD;;AAgBA1E,aAAWG,qBAAX,GAAmC,KAAnC;AACAH,aAAW2E,uBAAX,GAAqC,KAArC;AACD,CAxZD,EAwZGC,MAxZH;;AA0ZA,CAAC,UAAUpF,CAAV,EAAa;AACZ;AACAQ,aAAWsE,SAAX,CAAqBzD,WAArB,GAAmC,YAAY;;AAE7C;AACA,SAAKgE,OAAL,GAAe,KAAf;;AAEA,SAAKC,YAAL;AACA,SAAKC,YAAL;AACA,SAAKC,eAAL;AACD,GARD;;AAUAhF,aAAWsE,SAAX,CAAqBjD,kBAArB,GAA0C,YAAW;;AAEnD,QAAI4D,YAAYxF,SAASyF,QAAT,CAAkBC,QAAlB,EAAhB;AACA,QAAIC,kBAAkBH,UAAUI,OAAV,CAAkB,GAAlB,EAAuBJ,UAAUI,OAAV,CAAkB,KAAlB,IAA2B,CAAlD,CAAtB;AACA,QAAIC,aAAaL,UAAUM,SAAV,CAAoB,CAApB,EAAuBH,eAAvB,IAA0C,GAA3D;AACA,QAAII,iBAAiBP,UAAUI,OAAV,CAAkB,GAAlB,EAAuBJ,UAAUI,OAAV,CAAkBC,UAAlB,IAAgCA,WAAW3E,MAAlE,CAArB;AACA,QAAI8E,oBAAoBR,UAAUM,SAAV,CAAoB,CAApB,EAAuBC,cAAvB,CAAxB;AACA,WAAOC,iBAAP;AACD,GARD;;AAUAzF,aAAWsE,SAAX,CAAqBS,YAArB,GAAoC,YAAW;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAIW,SAAJ,EAAeC,CAAf,EAAkBC,GAAlB,EAAuBC,OAAvB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,KAA1C,EAAiDC,IAAjD,EAAuDC,SAAvD,EAAkEC,SAAlE;;AAEAT,gBAAY,CAAC,YAAD,EAAe,SAAf,CAAZ;AACA,SAAKC,IAAE,CAAP,EAAUA,IAAED,UAAU/E,MAAtB,EAA8BgF,GAA9B,EAAmC;AACjC,UAAID,UAAUC,CAAV,KAAgB,YAApB,EAAkC;AAChCC,cAAOpG,EAAE,OAAF,EAAW;AAChB,mBAAS;AADO,SAAX,EAEJ4G,IAFI,EAAP;AAGD,OAJD,MAKK,IAAIV,UAAUC,CAAV,MAAiB,SAArB,EAAgC;AACnCC,cAAOpG,EAAE,OAAF,EAAW;AAChB,mBAAS;AADO,SAAX,EAEJ4G,IAFI,EAAP;AAGD;AACD5G,QAAE,MAAF,EAAU6G,MAAV,CAAiBT,GAAjB;AACAC,gBAAUD,IAAIU,GAAJ,CAAQ,kBAAR,CAAV;AACA;AACA;AACAR,YAAMD,QAAQzE,OAAR,CAAgB,SAAhB,EAA2B,EAA3B,EAA+BmF,KAA/B,CAAqC,GAArC,CAAN;AACAR,YAAMD,IAAI,CAAJ,CAAN;AACAE,cAAQF,IAAI,CAAJ,CAAR;AACAG,aAAOH,IAAI,CAAJ,CAAP;AACAI,kBAAa,SAASH,GAAV,GAAkB,SAASC,KAA3B,GAAqC,SAASC,IAA1D;AACA;AACA,UAAIC,YAAY,GAAhB,EAAqB;AAAE;AACrBC,oBAAY,OAAZ;AACD,OAFD,MAGK;AAAE;AACLA,oBAAY,OAAZ;AACD;AACD,UAAIT,UAAUC,CAAV,MAAiB,YAArB,EAAmC;AACjC,aAAKQ,SAAL,GAAiBA,SAAjB;AACD,OAFD,MAGK,IAAIT,UAAUC,CAAV,MAAiB,SAArB,EAAgC;AACnC,aAAKa,gBAAL,GAAwBL,SAAxB;AACD;AACDP,UAAIa,MAAJ;AACD;AACF,GAlDD;;AAoDAzG,aAAWsE,SAAX,CAAqBU,eAArB,GAAuC,YAAW;;AAEhD;;AAEA,SAAK0B,OAAL,GAAe,KAAKvF,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,GAAnE;;AAEA,SAAKQ,aAAL,GAAqB,KAAKD,OAAL,GAAe,UAApC;AACA,SAAKE,cAAL,GAAsB,KAAKF,OAAL,GAAe,WAArC;;AAEA,SAAKG,gBAAL,GAAwB,KAAKH,OAAL,GAAe,aAAvC;;AAEA,SAAKI,eAAL,GAAuB,KAAKJ,OAAL,GAAe,YAAtC;AACA,SAAKK,gBAAL,GAAwB,KAAKL,OAAL,GAAe,aAAvC;;AAEA,SAAKM,iBAAL,GAAyB,KAAKN,OAAL,GAAe,cAAxC;AACA,SAAKO,aAAL,GAAqB,KAAKP,OAAL,GAAe,UAApC;;AAEA,QAAI,KAAKlE,UAAL,KAAoB,QAAxB,EAAkC;AAChC,WAAK0E,eAAL,GAAuB,KAAKR,OAAL,GAAe,YAAtC;AACA,WAAKS,eAAL,GAAuB,KAAKT,OAAL,GAAe,YAAtC;AACD,KAHD,MAIK,IAAI,KAAKlE,UAAL,KAAoB,SAAxB,EAAmC;AACtC,WAAK0E,eAAL,GAAuB,KAAKR,OAAL,GAAe,YAAtC;AACA,WAAKS,eAAL,GAAuB,KAAKT,OAAL,GAAe,YAAtC;AACD;;AAED,SAAKU,iBAAL,GAAyB,KAAKV,OAAL,GAAe,cAAxC;AACA,SAAKW,iBAAL,GAAyB,KAAKX,OAAL,GAAe,cAAxC;AACA,SAAKY,aAAL,GAAqB,KAAKZ,OAAL,GAAe,UAApC;AACA,SAAKa,mBAAL,GAA2B,KAAKb,OAAL,GAAe,gBAA1C;AACA,SAAKc,qBAAL,GAA6B,KAAKd,OAAL,GAAe,kBAA5C;;AAEA,SAAKe,yBAAL,GAAiC,KAAKf,OAAL,GAAe,uBAAhD;AACA,SAAKgB,2BAAL,GAAmC,KAAKhB,OAAL,GAAe,yBAAlD;;AAEA,SAAKiB,cAAL,GAAsB,KAAKjB,OAAL,GAAe,iBAArC;AACA,SAAKkB,aAAL,GAAqB,KAAKlB,OAAL,GAAe,UAApC;AACD,GArCD;;AAuCA;AACA;AACA;AACA1G,aAAWsE,SAAX,CAAqBC,YAArB,GAAoC,YAAY;;AAE9C,QAAIsD,QAAJ,EAAcC,OAAd,EAAuB9D,OAAvB,EAAgC+D,QAAhC,EAA0CC,OAA1C;;AAEAH,eAAW,IAAIrI,EAAEyI,QAAN,EAAX;AACAH,cAAUD,SAASC,OAAT,EAAV;AACA9D,cAAU,IAAV;;AAEA;AACA;AACA,QAAI,CAAE/D,OAAOiI,OAAb,EAAsB;AACpB,WAAKhH,KAAL,GAAa,KAAb;AACD;;AAED,SAAKiH,cAAL,GAAsB,KAAtB;AACA;AACA,SAAKC,oBAAL,GAA4B,IAA5B;AACA;;AAEA;AACA,SAAKC,MAAL,GAAc7I,EAAE,KAAKkB,KAAP,EAAc4H,KAAd,EAAd;AACA,SAAK5H,KAAL,GAAa,KAAK2H,MAAL,CAAY,CAAZ,CAAb;;AAEA;AACA,QAAI,KAAKA,MAAL,CAAYE,EAAZ,CAAe,OAAf,CAAJ,EAA6B;AAC3B,WAAKC,SAAL,GAAiB,OAAjB;AACD,KAFD,MAGK,IAAI,KAAKH,MAAL,CAAYE,EAAZ,CAAe,OAAf,CAAJ,EAA6B;AAChC,WAAKC,SAAL,GAAiB,OAAjB;AACD,KAFI,MAGA;AACH,WAAKA,SAAL,GAAiB,KAAKH,MAAL,CAAYI,GAAZ,CAAgB,CAAhB,EAAmBC,OAApC;AACAX,iBAAW,mCAAmC,KAAKS,SAAxC,GAAoD,GAApD,GAA0D,KAAKG,OAA/D,GAAyE,IAApF;AACAZ,kBAAY,4CAAZ;AACA,WAAKnH,eAAL,CAAqBmH,QAArB;AACAF,eAASe,IAAT;AACA,aAAOd,OAAP;AACD;;AAED,SAAKe,QAAL,GAAgB,KAAKR,MAAL,CAAYvG,IAAZ,CAAiB,QAAjB,CAAhB;;AAEA,SAAK0C,MAAL,GAAc,KAAKsE,SAAL,EAAd;AACA,QAAI,CAAC,KAAKtE,MAAV,EAAkB;AAChB;AACA,WAAK5D,eAAL,CAAqB,KAAKmI,KAA1B;AACD;AACD,SAAKC,WAAL;AACA,SAAKC,aAAL;;AAEApB,aAASqB,OAAT;AACA,WAAOpB,OAAP;AACD,GAnDD;;AAqDA9H,aAAWsE,SAAX,CAAqB2E,aAArB,GAAqC,YAAW;;AAE9C;AACA;AACA,QAAI,KAAKZ,MAAL,CAAYvH,IAAZ,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B,WAAKqI,cAAL,GAAsBC,SAAS,KAAKf,MAAL,CAAYvH,IAAZ,CAAiB,OAAjB,CAAT,EAAoC,EAApC,CAAtB;AACD;AACD,QAAI,KAAKuH,MAAL,CAAYvH,IAAZ,CAAiB,QAAjB,CAAJ,EAAgC;AAC9B,WAAKuI,eAAL,GAAuBD,SAAS,KAAKf,MAAL,CAAYvH,IAAZ,CAAiB,QAAjB,CAAT,EAAqC,EAArC,CAAvB;AACD;AACD;AACA,SAAKuH,MAAL,CAAY/B,GAAZ,CAAgB;AACd,eAAS,MADK;AAEd,gBAAU;AAFI,KAAhB;AAID,GAfD;;AAiBAtG,aAAWsE,SAAX,CAAqB0E,WAArB,GAAmC,YAAW;AAC5C;AACA;AACA;AACA;;AAEA,QAAIM,WAAJ,EAAiBC,WAAjB,EAA8BC,cAA9B;;AAEA,QAAI,KAAK3G,aAAT,EAAwB;AACtB;AACA,aAAO,KAAP;AACD;;AAED,QAAI5C,OAAOwJ,gBAAX,EAA6B;;AAE3B;AACA;AACA;AACA,UAAIjK,EAAE,gBAAF,EAAoBmB,MAAxB,EAAgC;AAC9B4I,sBAAc/J,EAAE,gBAAF,CAAd;AACD,OAFD,MAGK;AACH8J,sBAAc9J,EAAE,QAAF,EAAW;AACvB,mBAAS;AADc,SAAX,CAAd;AAGAA,UAAE,MAAF,EAAU6G,MAAV,CAAiBiD,WAAjB;AACAC,sBAAcD,WAAd;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;AACAE,uBAAiBvJ,OAAOwJ,gBAAP,CAAwBF,YAAYd,GAAZ,CAAgB,CAAhB,CAAxB,EAA4C,IAA5C,EAAkDiB,gBAAlD,CAAmE,aAAnE,CAAjB;AACA,UAAI,OAAOF,cAAP,KAA0B,WAA9B,EAA2C;AACzC,YAAIA,eAAenE,OAAf,CAAuB,MAAvB,MAAmC,CAAC,CAAxC,EAA2C;AACzC,eAAKzC,QAAL,GAAgB,MAAhB;AACD,SAFD,MAGK;AACH,eAAKA,QAAL,GAAgB,OAAhB;AACD;AACF,OAPD,MAQK;AACH;AACA,aAAKA,QAAL,GAAgB,OAAhB;AACD;AACF,KAnCD,MAoCK;AAAE;AACL;AACA;AACA;AACA;AACA;AACA,WAAKA,QAAL,GAAgB,OAAhB;AACD;AACD,QAAI,KAAK1B,KAAT,EAAgB;AACdgH,cAAQyB,GAAR,CAAY,WAAW,KAAK/G,QAAhB,GAA2B,uBAAvC;AACD;AACD,QAAI,OAAO0G,WAAP,KAAuB,WAA3B,EAAwC;AACtCA,kBAAY7C,MAAZ;AACD;AACF,GA/DD;;AAkEA;AACAzG,aAAWsE,SAAX,CAAqBG,aAArB,GAAqC,YAAY;AAC/C,QAAIoD,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;;AAEA,QAAI,KAAKO,MAAL,CAAYvH,IAAZ,CAAiB,IAAjB,CAAJ,EAA4B;AAC1B,WAAK6H,OAAL,GAAe,KAAKN,MAAL,CAAYvH,IAAZ,CAAiB,IAAjB,CAAf;AACD,KAFD,MAGK;AACH;AACA,WAAK6H,OAAL,GAAe,iBAAiB,KAAK9E,SAArC;AACA,WAAKwE,MAAL,CAAYvH,IAAZ,CAAiB,IAAjB,EAAuB,KAAK6H,OAA5B;AACD;AACD;AACA,SAAKiB,qBAAL;;AAEA/B,aAASqB,OAAT;AACA,WAAOpB,OAAP;AACD,GAjBD;;AAmBA9H,aAAWsE,SAAX,CAAqBsF,qBAArB,GAA6C,YAAW;AACtD;AACA;AACA,QAAI5F,UAAU,IAAd;;AAEA,SAAK6F,WAAL,GAAmB,KAAnB,CALsD,CAK5B;;AAE1BrK,MAAE,gBAAF,EAAoBG,IAApB,CAAyB,YAAW;AAClC,UAAIH,EAAE,IAAF,EAAQM,IAAR,CAAa,QAAb,MAA2BkE,QAAQ2E,OAAvC,EAAgD;AAC9C;AACA3E,gBAAQ6F,WAAR,GAAsB,IAAtB;AACA;AACA7F,gBAAQ8F,SAAR,GAAoBtK,EAAE,IAAF,EAAQsC,IAAR,CAAa,IAAb,CAApB;AACA;AACAtC,UAAE,IAAF,EAAQsC,IAAR,CAAa,IAAb,EAAmBhB,IAAnB,CAAwB,UAAxB,EAAoC,GAApC;AACAkD,gBAAQ+F,aAAR,GAAwB,CAAxB;AACA,YAAIC,eAAexK,EAAE,IAAF,EAAQM,IAAR,CAAa,UAAb,CAAnB;AACA,YAAI,OAAOkK,YAAP,KAAwB,WAAxB,IAAuCA,iBAAiB,KAA5D,EAAmE;AACjE;AACAhG,kBAAQiG,aAAR,GAAwB,IAAxB;AACD,SAHD,MAIK;AACHjG,kBAAQiG,aAAR,GAAwB,KAAxB;AACD;AACF;AACF,KAlBD;;AAoBA,QAAI,KAAKJ,WAAL,IAAoB,KAAKI,aAA7B,EAA4C;AAC1C;AACA,UAAIC,SAAS,KAAKJ,SAAL,CAAeI,MAAf,EAAb;AACA,WAAKC,YAAL,GAAoBD,OAAOE,KAAP,EAApB;AACAF,aAAOzD,MAAP;AACD;AACF,GAjCD;;AAmCA;AACAzG,aAAWsE,SAAX,CAAqBI,cAArB,GAAsC,YAAY;;AAEhD,QAAIV,OAAJ,EAAaqG,WAAb,EAA0B1E,CAA1B;AACA3B,cAAU,IAAV;;AAEA;AACA,QAAI,CAAC,KAAKQ,MAAV,EAAkB;AAChB0D,cAAQyB,GAAR,CAAY,2DAAZ;AACA;AACD;;AAED,SAAKW,kBAAL;;AAEA,SAAKC,sBAAL;;AAEA,SAAKC,gBAAL;AACA,SAAKC,gBAAL;AACA,SAAKC,WAAL,GAAmBvG,IAAnB,CAAwB,YAAW;;AAEjCH,cAAQ2G,gBAAR,GAA2BxG,IAA3B,CAAgC,YAAW;;AAEzC,YAAIH,QAAQrC,cAAR,KAA2B,UAA3B,IAAyCqC,QAAQrC,cAAR,KAA2B,OAAxE,EAAiF;AAC/E,cAAIqC,QAAQ4G,QAAR,CAAiBjK,MAAjB,IAA2B,CAA/B,EAAkC;AAChC;AACA;AACAqD,oBAAQ6G,yBAAR,CAAkCX,MAAlC,GAA2CzD,MAA3C;AACD;AACF;;AAEDzC,gBAAQ8G,eAAR;AACA9G,gBAAQ+G,kBAAR;;AAEA/G,gBAAQgH,UAAR,GAAqB7G,IAArB,CAA0B,YAAW;AAAE;AACrCH,kBAAQiH,YAAR,GAAuB,KAAvB;;AAEA;AACAZ,wBAAcrG,QAAQkH,oBAAR,EAAd;AACA,eAAKvF,CAAL,IAAU0E,WAAV,EAAuB;AACrBrG,oBAAQmH,eAAR,CAAwBd,YAAY1E,CAAZ,CAAxB;AACD;AACD3B,kBAAQoH,WAAR;AACApH,kBAAQqH,aAAR;AACArH,kBAAQsH,gBAAR;AACA,cAAItH,QAAQ7B,mBAAZ,EAAiC;AAC/B6B,oBAAQuH,mBAAR;AACD;AACDvH,kBAAQwH,iBAAR;AACA,cAAIxH,QAAQ3B,cAAZ,EAA4B;AAC1B2B,oBAAQyH,oBAAR;AACA;AACD;AACF,SAnBD,EAoBA,YAAW;AAAG;AACZzH,kBAAQpD,eAAR,CAAwB,KAAKmI,KAA7B;AACD,SAtBD;AAwBD,OArCD;AAsCD,KAxCD;AAyCD,GA1DD;;AA4DA/I,aAAWsE,SAAX,CAAqB0G,UAArB,GAAkC,YAAY;;AAE5C,QAAIhH,UAAU,IAAd;AACA,QAAI0H,aAAJ;;AAEA;AACA,QAAI,KAAKlH,MAAL,KAAgB,OAApB,EAA6B;AAC3BkH,sBAAgB,KAAKC,eAAL,EAAhB;AACD,KAFD,MAGK,IAAI,KAAKnH,MAAL,KAAgB,IAApB,EAA0B;AAC7BkH,sBAAgB,KAAKE,YAAL,EAAhB;AACD,KAFI,MAGA,IAAI,KAAKpH,MAAL,KAAgB,SAApB,EAA+B;AAClCkH,sBAAgB,KAAKG,iBAAL,EAAhB;AACD;;AAED;AACA,QAAIhE,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;AACA4D,kBAAcI,IAAd,CACE,YAAY;AAAE;AACZ,UAAI9H,QAAQhB,oBAAR,KAAiC,KAArC,EAA4C;AAC1CgB,gBAAQ+H,eAAR;AACD;AACD/H,cAAQgI,WAAR;AACAhI,cAAQiI,iBAAR;AACA;AACA,UAAIjI,QAAQkI,MAAZ,EAAoB;AAClBlI,gBAAQmI,OAAR,CAAgB,KAAhB;AACD;AACDnI,cAAQoI,aAAR,CAAsB,KAAtB;AACApI,cAAQqI,SAAR,CAAkBrI,QAAQ1C,aAA1B;AACA0C,cAAQsI,eAAR;;AAEA;AACA,UAAItI,QAAQQ,MAAR,KAAmB,OAAnB,IAA8BR,QAAQuI,KAAR,EAAlC,EAAmD;AACjDvI,gBAAQqE,MAAR,CAAe,CAAf,EAAkBmE,IAAlB;AACD;AACD3E,eAASqB,OAAT;AACD,KApBH,EAqBEN,IArBF,CAqBO,YAAY;AAAE;AACnBf,eAAS4E,MAAT;AACC,KAvBH;;AA0BA,WAAO3E,OAAP;AACD,GA9CD;;AAgDA9H,aAAWsE,SAAX,CAAqByH,eAArB,GAAuC,YAAY;AACjD;AACA;AACA;AACA,QAAIW,QAAJ;AACA,SAAKzJ,YAAL,GAAoB,KAAKF,mBAAzB;AACA,QAAI,KAAK4J,eAAT,EAA0B;AACxBD,iBAAW,KAAKE,eAAhB;AACD,KAFD,MAGK;AACHF,iBAAW,KAAKG,WAAL,EAAX;AACD;AACD,QAAI,OAAOH,QAAP,KAAoB,WAApB,IAAmCA,WAAW,CAAlD,EAAqD;AACnD;AACA,WAAKI,sBAAL,GAA8B,KAA9B;AACA;AACD,KAJD,MAKK;AACH,UAAIJ,YAAY,EAAhB,EAAoB;AACjB,aAAKzJ,YAAL,GAAoB,CAApB,CADiB,CACO;AAC1B,OAFD,MAGK,IAAIyJ,YAAY,EAAhB,EAAoB;AACtB,aAAKzJ,YAAL,GAAoB,CAApB,CADsB,CACC;AACzB,OAFI,MAGA,IAAIyJ,YAAY,EAAhB,EAAoB;AACtB,aAAKzJ,YAAL,GAAoB,CAApB,CADsB,CACC;AACzB,OAFI,MAGA,IAAIyJ,YAAY,GAAhB,EAAqB;AACvB,aAAKzJ,YAAL,GAAoB,EAApB,CADuB,CACC;AAC1B,OAFI,MAGA;AACH;AACC,aAAKA,YAAL,GAAqByJ,WAAW,EAAhC;AACF;AACD,WAAKI,sBAAL,GAA8B,IAA9B;AACD;AACF,GApCD;;AAsCA9M,aAAWsE,SAAX,CAAqByG,kBAArB,GAA0C,YAAY;;AAEpD,QAAIH,QAAJ,EAAcjF,CAAd;;AAEA,QAAI,KAAKoH,oBAAT,EAA+B;AAC7BnC,iBAAW,KAAKoC,UAAhB;AACD,KAFD,MAGK;AACHpC,iBAAW,KAAKA,QAAhB;AACD;;AAED,QAAIA,SAASjK,MAAT,GAAkB,CAAtB,EAAyB;AACvB,WAAKgF,IAAE,CAAP,EAAUA,IAAEiF,SAASjK,MAArB,EAA6BgF,GAA7B,EAAkC;AAChC,YAAIiF,SAASjF,CAAT,EAAYsH,GAAZ,KAAoB,IAAxB,EAA8B;AAC5B,eAAKC,WAAL,GAAmBtC,SAASjF,CAAT,EAAYwH,QAA/B;AACA,eAAKC,gBAAL,GAAwBxC,SAASjF,CAAT,CAAxB;AACD;AACF;AACD,UAAI,OAAO,KAAKuH,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C;AACA;AACA,aAAKvH,IAAE,CAAP,EAAUA,IAAEiF,SAASjK,MAArB,EAA6BgF,GAA7B,EAAkC;AAChC,cAAIiF,SAASjF,CAAT,EAAYwH,QAAZ,KAAyB,KAAK5J,IAAlC,EAAwC;AACtC,iBAAK2J,WAAL,GAAmBtC,SAASjF,CAAT,EAAYwH,QAA/B;AACA,iBAAKC,gBAAL,GAAwBxC,SAASjF,CAAT,CAAxB;AACD;AACF;AACF;AACD,UAAI,OAAO,KAAKuH,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C;AACA;AACA,aAAKA,WAAL,GAAmBtC,SAAS,CAAT,EAAYuC,QAA/B;AACA,aAAKC,gBAAL,GAAwBxC,SAAS,CAAT,CAAxB;AACD;AACD,UAAI,OAAO,KAAKsC,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C;AACA,YAAI,KAAKrC,yBAAT,EAAoC;AAClC,eAAKA,yBAAL,CAA+B/I,IAA/B,CAAoC,iBAAiB,KAAKoL,WAAtB,GAAoC,GAAxE,EAA6EpM,IAA7E,CAAkF,UAAlF,EAA6F,UAA7F;AACD;AACD;AACA,aAAKuM,kBAAL,CAAwB,MAAxB,EAA+B,KAAKH,WAApC;AACD;AACF;AACF,GA3CD;;AA6CAlN,aAAWsE,SAAX,CAAqBqH,eAArB,GAAuC,YAAY;AACjD;AACA,QAAI9D,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;AACAD,aAASqB,OAAT;AACA,WAAOpB,OAAP;AACD,GAND;;AAQA9H,aAAWsE,SAAX,CAAqBsH,YAArB,GAAoC,YAAY;;AAE9C,QAAI0B,QAAJ;AACA,QAAItJ,UAAU,IAAd;AACA,QAAI6D,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;;AAEAtI,MAAE+N,IAAF,CAAO;AACLC,aAAO,KADF;AAELC,WAAK,KAAKpK,YAAL,GAAoB,aAFpB;AAGLqK,gBAAU,QAHL;AAILC,eAAS,iBAAU7N,IAAV,EAAgB8N,UAAhB,EAA4BC,KAA5B,EAAmC;AAC1C;AACA;AACA7J,gBAAQ8J,IAAR,GAAe9J,QAAQ2E,OAAR,GAAkB,WAAjC;AACA3E,gBAAQ+J,eAAR,CAAwBjN,IAAxB,CAA6B,IAA7B,EAAmCkD,QAAQ8J,IAA3C;AACA,YAAI9J,QAAQwE,SAAR,KAAsB,OAA1B,EAAmC;AACjC;AACA;AACA8E,qBAAW,CAAX;AACD,SAJD,MAKK;AACHA,qBAAWtJ,QAAQgK,YAAnB;AACD;AACD,YAAIC,UAAU,EAAd;AACAzO,UAAEG,IAAF,CAAOqE,QAAQ6E,QAAf,EAAyB,UAAUqF,EAAV,EAAcC,MAAd,EAAsB;AAC7CF,kBAAQG,IAAR,CAAa,EAACC,MAAM7O,EAAE2O,MAAF,EAAUrN,IAAV,CAAe,KAAf,CAAP,EAAb;AACD,SAFD;;AAIA,YAAIwN,cAActK,QAAQX,YAAR,GAAuB,oBAAzC;AACA,YAAIkL,cAAcvK,QAAQX,YAAR,GAAuB,mBAAzC;;AAEA;AACA;AACA;AACA;AACA,YAAIW,QAAQwE,SAAR,KAAsB,OAA1B,EAAmC;AACjCxE,kBAAQwK,QAAR,GAAmBC,SAASzK,QAAQ8J,IAAjB,EAAuBzJ,KAAvB,CAA6B;AAC9CqK,sBAAU,CAAC;AACTC,qBAAO3K,QAAQqE,MAAR,CAAevH,IAAf,CAAoB,QAApB,CADE;AAETmN,uBAASA;AAFA,aAAD,CADoC;AAK9CK,yBAAaA,WALiC;AAM9CC,yBAAaA,WANiC;AAO9CK,sBAAU,KAPoC;AAQ9CrN,oBAAQyC,QAAQ1C,aAAR,GAAwB,GARc;AAS9CuN,mBAAO,MATuC;AAU9CzL,sBAAU,KAVoC;AAW9C0L,qBAAS,OAXqC;AAY9CC,mBAAO,aAZuC,CAYzB;AAZyB,WAA7B,CAAnB;AAcD,SAfD,MAgBK;AAAE;AACL/K,kBAAQwK,QAAR,GAAmBC,SAASzK,QAAQ8J,IAAjB,EAAuBzJ,KAAvB,CAA6B;AAC9CqK,sBAAU,CAAC;AACTT,uBAASA;AADA,aAAD,CADoC;AAI9CK,yBAAaA,WAJiC;AAK9CC,yBAAaA,WALiC;AAM9CK,sBAAU,KANoC;AAO9CrN,oBAAQ,KAAKD,aAAL,GAAqB,GAPiB;AAQ9C0N,oBAAQ,CARsC;AAS9CH,mBAAO,MATuC;AAU9CzL,sBAAU,KAVoC;AAW9C0L,qBAAS;AAXqC,WAA7B,CAAnB;AAaD;AACD;AACA;AACA9K,gBAAQqE,MAAR,CAAe5B,MAAf;;AAEAoB,iBAASqB,OAAT;AACD,OAjEI;AAkELH,aAAO,eAAS8E,KAAT,EAAgBD,UAAhB,EAA4BqB,WAA5B,EAAyC;AAC9C;AACA,aAAKlG,KAAL,GAAa,2BAAb;AACAlB,iBAAS4E,MAAT;AACD;AAtEI,KAAP;AAwEA;AACA,WAAO3E,OAAP;AACD,GAjFD;;AAmFA;AACA9H,aAAWsE,SAAX,CAAqBgG,kBAArB,GAA0C,YAAY;AACpD;AACA,SAAKjC,MAAL,CAAYvH,IAAZ,CAAiB,UAAjB,EAA6B,CAAC,CAA9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIoO,aAAa,KAAK7G,MAAL,CAAYI,GAAZ,CAAgB,CAAhB,EAAmByG,UAApC;AACA,QAAIA,UAAJ,EAAgB;AACd,UAAIvJ,IAAI,CAAR;AACA,aAAOA,IAAIuJ,WAAWvO,MAAtB,EAA8B;AAC5B;AACA;AACAuO,mBAAWvJ,CAAX,EAAcwJ,IAAd,GAAqB,UAArB;AACAxJ,aAAK,CAAL;AACD;AACF;AACF,GArBD;;AAuBA3F,aAAWsE,SAAX,CAAqBwE,SAArB,GAAiC,YAAW;;AAE1C;AACA;AACA,QAAInD,CAAJ,EAAOyJ,UAAP,EAAmBC,QAAnB;AACA,QAAI,KAAK3M,SAAT,EAAoB;AAClB,UAAI,KAAK8F,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,aAAKO,KAAL,GAAa,qDAAb;AACA,eAAO,IAAP;AACD,OAHD,MAIK;AACH,eAAO,SAAP;AACD;AACF,KARD,MASK,IAAI,KAAKzF,YAAL,IACC,CAAC,KAAKgM,WAAL,CAAiB,QAAjB,KAA8B,KAAKA,WAAL,CAAiB,QAAjB,CAA9B,IAA4D,KAAKA,WAAL,CAAiB,QAAjB,CAA7D,KAA4F,KAAK9G,SAAL,KAAmB,OADhH,IAEC,KAAK+D,KAAL,OAAiB,KAAKA,KAAL,CAAW,CAAX,KAAiB,KAAKA,KAAL,CAAW,CAAX,CAAjB,IAAkC,KAAKA,KAAL,CAAW,CAAX,CAAnD,CAFL,EAGK;AACR;AACA;AACA;AACA,UAAI,KAAKnJ,QAAL,KAAkB,IAAlB,IAA0B,KAAKmM,SAAL,EAA9B,EAAgD;AAC9C,eAAO,IAAP;AACD,OAFD,MAGK;AACH,aAAKxG,KAAL,GAAa,6EAAb;AACA,eAAO,IAAP;AACD;AACF,KAdI,MAeA,IAAI,KAAKrI,KAAL,CAAW8O,WAAf,EAA4B;AAC/B,aAAO,OAAP;AACD,KAFI,MAGA;AACH,WAAKzG,KAAL,GAAa,yDAAb;AACA,aAAO,IAAP;AACD;AACF,GApCD;;AAsCA/I,aAAWsE,SAAX,CAAqBiL,SAArB,GAAiC,YAAW;AAC1C;AACA,QAAI5J,CAAJ,EAAOyJ,UAAP,EAAmBK,UAAnB;;AAEA,QAAI,KAAK5G,QAAL,CAAclI,MAAd,GAAuB,CAA3B,EAA8B;AAAE;AAC9B,WAAKgF,IAAI,CAAT,EAAYA,IAAI,KAAKkD,QAAL,CAAclI,MAA9B,EAAsCgF,GAAtC,EAA2C;AACzCyJ,qBAAa,KAAKvG,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,MAA9B,CAAb;AACA,YAAK,KAAKlH,SAAL,KAAmB,OAAnB,IAA8B4G,eAAe,WAA9C,IACC,KAAK5G,SAAL,KAAmB,OAAnB,IAA8B4G,eAAe,YADlD,EACiE;AAC7D;AACA,iBAAO,IAAP;AACH;AACF;AACF;AACD;AACA;AACA;AACA;AACA;AACA,QAAI5P,EAAE,gBAAF,CAAJ,EAAyB;AACvB;AACA;AACA;AACAiQ,mBAAajQ,EAAE,gBAAF,EAAoBmQ,EAApB,CAAuB,CAAvB,EAA0B7N,IAA1B,CAA+B,IAA/B,EAAqC6N,EAArC,CAAwC,CAAxC,CAAb;AACA,UAAI,KAAKnH,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,YAAIiH,WAAW3O,IAAX,CAAgB,UAAhB,CAAJ,EAAiC;AAC/B,iBAAO,IAAP;AACD,SAFD,MAGK,IAAI,KAAK0H,SAAL,KAAmB,OAAvB,EAAgC;AACnC,cAAIiH,WAAW3O,IAAX,CAAgB,UAAhB,CAAJ,EAAiC;AAC/B,mBAAO,IAAP;AACD;AACF;AACF;AACF;AACD,WAAO,KAAP;AACD,GApCD;AAsCD,CAlrBD,EAkrBG8D,MAlrBH;;AAorBA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBsL,SAArB,GAAiC,UAASC,WAAT,EAAsB;AACrDC,YAAQC,GAAR,CAAY,aAAZ,EAA2BF,WAA3B,EAAwC,EAAEG,SAAQ,EAAV,EAAxC;AACA;AACD,GAHD;;AAKAhQ,aAAWsE,SAAX,CAAqB2L,SAArB,GAAiC,YAAW;;AAE1C,QAAIC,gBAAgB;AAClBC,mBAAa,EADK;AAElBC,YAAM,EAFY;AAGlBC,kBAAY;AAHM,KAApB;;AAMA,QAAIC,MAAJ;AACA,QAAI;AACFA,eAASR,QAAQS,OAAR,CAAgB,aAAhB,CAAT;AACD,KAFD,CAGA,OAAOC,GAAP,EAAY;AACV;AACAV,cAAQS,OAAR,CAAgBL,aAAhB;AACAI,eAASJ,aAAT;AACD;AACD,QAAII,MAAJ,EAAY;AACV,aAAOA,MAAP;AACD,KAFD,MAGK;AACH,aAAOJ,aAAP;AACD;AACF,GAvBD;;AAyBAlQ,aAAWsE,SAAX,CAAqBmM,YAArB,GAAoC,UAAUC,OAAV,EAAoB;;AAEtD;AACA;AACA;AACA;AACA;AACA,QAAIJ,MAAJ,EAAYK,OAAZ,EAAqBC,SAArB,EAAgCC,SAAhC,EAA2ClL,CAA3C,EAA8CmL,QAA9C;AACAR,aAAS,KAAKL,SAAL,EAAT;;AAEA,QAAIS,YAAY,YAAZ,IAA4BA,YAAY,MAA5C,EAAoD;AAClD,UAAIA,YAAY,YAAhB,EAA8B;AAC5BC,kBAAU,KAAKI,eAAf;AACAH,oBAAYD,QAAQK,QAAR,EAAZ;AACA,YAAI,OAAOV,OAAOD,UAAd,KAA6B,WAAjC,EAA8C;AAC5CC,iBAAOD,UAAP,GAAoB,EAApB;AACD;AACDC,eAAOD,UAAP,CAAkB,UAAlB,IAAgCM,QAAQrK,GAAR,CAAY,UAAZ,CAAhC,CAN4B,CAM6B;AACzDgK,eAAOD,UAAP,CAAkB,QAAlB,IAA8BM,QAAQrK,GAAR,CAAY,SAAZ,CAA9B;AACAgK,eAAOD,UAAP,CAAkB,KAAlB,IAA2BO,UAAUK,GAArC;AACAX,eAAOD,UAAP,CAAkB,MAAlB,IAA4BO,UAAUM,IAAtC;AACAZ,eAAOD,UAAP,CAAkB,OAAlB,IAA6BM,QAAQ9B,KAAR,EAA7B;AACAyB,eAAOD,UAAP,CAAkB,QAAlB,IAA8BM,QAAQ3B,MAAR,EAA9B;AACD,OAZD,MAaK,IAAI0B,YAAY,MAAhB,EAAwB;AAC3BC,kBAAU,KAAKQ,WAAf;AACAP,oBAAYD,QAAQK,QAAR,EAAZ;AACA,YAAI,OAAOV,OAAOF,IAAd,KAAuB,WAA3B,EAAwC;AACtCE,iBAAOF,IAAP,GAAc,EAAd;AACD;AACDE,eAAOF,IAAP,CAAY,UAAZ,IAA0BO,QAAQrK,GAAR,CAAY,UAAZ,CAA1B,CAN2B,CAMwB;AACnDgK,eAAOF,IAAP,CAAY,QAAZ,IAAwBO,QAAQrK,GAAR,CAAY,SAAZ,CAAxB;AACAgK,eAAOF,IAAP,CAAY,KAAZ,IAAqBQ,UAAUK,GAA/B;AACAX,eAAOF,IAAP,CAAY,MAAZ,IAAsBQ,UAAUM,IAAhC;AACAZ,eAAOF,IAAP,CAAY,OAAZ,IAAuBO,QAAQ9B,KAAR,EAAvB;AACAyB,eAAOF,IAAP,CAAY,QAAZ,IAAwBO,QAAQ3B,MAAR,EAAxB;AACD;AACF,KA3BD,MA4BK;AACH6B,kBAAY,KAAKO,uBAAL,EAAZ;AACA;AACA;AACA,WAAKzL,IAAI,CAAT,EAAYA,IAAIkL,UAAUlQ,MAA1B,EAAkCgF,GAAlC,EAAuC;AACrCmL,mBAAWD,UAAUlL,CAAV,EAAa,MAAb,CAAX;AACA,YAAImL,YAAYJ,OAAhB,EAAyB;AACvB;AACAJ,iBAAOH,WAAP,CAAmBW,QAAnB,IAA+B,KAAKA,QAAL,CAA/B;AACD;AACF;AACF;AACD;AACA,SAAKlB,SAAL,CAAeU,MAAf;AACD,GApDD;;AAsDAtQ,aAAWsE,SAAX,CAAqB4G,oBAArB,GAA4C,YAAW;;AAErD;AACA;AACA;AACA,QAAI,KAAK1C,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,aAAO,CAAC,UAAD,EAAY,cAAZ,EAA2B,UAA3B,EAAsC,YAAtC,CAAP;AACD,KAFD,MAGK,IAAI,KAAKA,SAAL,KAAmB,OAAvB,EAAgC;AACnC,UAAI6I,SAAS,EAAb;AACAA,aAAOjD,IAAP,CAAY,UAAZ;AACA,UAAI,KAAKpM,UAAT,EAAqB;AACnBqP,eAAOjD,IAAP,CAAY,YAAZ;AACD;AACD,aAAOiD,MAAP;AACD;AACF,GAhBD;;AAkBArR,aAAWsE,SAAX,CAAqB8M,uBAArB,GAA+C,YAAW;;AAExD;AACA;AACA,QAAIE,QAAQ,EAAZ;;AAEA;AACAA,UAAMlD,IAAN,CAAW;AACT,cAAQ,YADC,EACa;AACtB,eAAS,KAAKrK,EAAL,CAAQwN,UAFR;AAGT,eAAS,UAHA;AAIT,iBAAW;AAJF,KAAX;AAMAD,UAAMlD,IAAN,CAAW;AACT,cAAQ,aADC,EACc;AACvB,eAAS,KAAKrK,EAAL,CAAQyN,WAFR;AAGT,eAAS,UAHA;AAIT,iBAAW;AAJF,KAAX;AAMAF,UAAMlD,IAAN,CAAW;AACT,cAAQ,cADC;AAET,eAAS,KAAKrK,EAAL,CAAQ0N,YAFR;AAGT,eAAS,UAHA;AAIT,iBAAW;AAJF,KAAX;;AAOA;AACAH,UAAMlD,IAAN,CAAW;AACT,cAAQ,gBADC,EACiB;AAC1B,eAAS,IAFA;AAGT,eAAS,YAHA;AAIT,iBAAW,CAJF,CAII;AAJJ,KAAX;AAMAkD,UAAMlD,IAAN,CAAW;AACT,cAAQ,eADC,EACgB;AACzB,eAAS,KAAKrK,EAAL,CAAQ2N,aAFR;AAGT,eAAS,YAHA;AAIT,iBAAW,CAJF,CAII;AAJJ,KAAX;AAMAJ,UAAMlD,IAAN,CAAW;AACT,cAAQ,0BADC;AAET,eAAS,IAFA;AAGT,eAAS,YAHA;AAIT,iBAAW;AAJF,KAAX;AAMAkD,UAAMlD,IAAN,CAAW;AACT,cAAQ,cADC,EACe;AACxB,eAAS,KAAKrK,EAAL,CAAQ4N,YAFR;AAGT,eAAS,YAHA;AAIT,iBAAW,CAJF,CAII;AAJJ,KAAX;;AAOA,QAAI,KAAKnJ,SAAL,KAAmB,OAAvB,EAAgC;;AAE9B;AACA8I,YAAMlD,IAAN,CAAW;AACT,gBAAQ,cADC,EACe;AACxB,iBAAS,IAFA;AAGT,iBAAS,UAHA;AAIT,mBAAW;AAJF,OAAX;AAMN;;;;;;;;AAQMkD,YAAMlD,IAAN,CAAW;AACT,gBAAQ,sBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQ6N,oBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW,KAAK1P;AAJP,OAAX;AAMAoP,YAAMlD,IAAN,CAAW;AACT,gBAAQ,kBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQ8N,gBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW,KAAK9N,EAAL,CAAQ+N;AAJV,OAAX;AAMAR,YAAMlD,IAAN,CAAW;AACT,gBAAQ,kBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQgO,gBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW;AAJF,OAAX;AAMAT,YAAMlD,IAAN,CAAW;AACT,gBAAQ,mBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQiO,iBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW;AAJF,OAAX;AAMAV,YAAMlD,IAAN,CAAW;AACT,gBAAQ,qBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQkO,mBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW;AAJF,OAAX;AAMAX,YAAMlD,IAAN,CAAW;AACT,gBAAQ,qBADC;AAET,iBAAS,KAAKrK,EAAL,CAAQmO,mBAFR;AAGT,iBAAS,UAHA;AAIT,mBAAW;AAJF,OAAX;;AAOA;AACAZ,YAAMlD,IAAN,CAAW;AACT,gBAAQ,UADC,EACW;AACpB,iBAAS,IAFA;AAGT,iBAAS,cAHA;AAIT,mBAAW,CAJF,CAII;AAJJ,OAAX;AAMAkD,YAAMlD,IAAN,CAAW;AACT,gBAAQ,gBADC,EACiB;AAC1B,iBAAS,KAAKrK,EAAL,CAAQoO,cAFR;AAGT,iBAAS,cAHA;AAIT,mBAAW;AAJF,OAAX;AAMAb,YAAMlD,IAAN,CAAW;AACT,gBAAQ,eADC,EACgB;AACzB,iBAAS,KAAKrK,EAAL,CAAQqO,aAFR;AAGT,iBAAS,cAHA;AAIT,mBAAW,CAJF,CAII;AAJJ,OAAX;AAMAd,YAAMlD,IAAN,CAAW;AACT,gBAAQ,iBADC,EACkB;AAC3B,iBAAS,KAAKrK,EAAL,CAAQsO,eAFR;AAGT,iBAAS,cAHA;AAIT,mBAAW,CAJF,CAII;AAJJ,OAAX;;AAOA;AACAf,YAAMlD,IAAN,CAAW;AACT,gBAAQ,UADC,EACW;AACpB,iBAAS,IAFA;AAGT,iBAAS,IAHA;AAIT,mBAAW,CAJF,CAII;AAJJ,OAAX;AAOD;AACD,WAAOkD,KAAP;AACD,GA9ID;;AAgJA;AACAtR,aAAWsE,SAAX,CAAqBiG,sBAArB,GAA8C,YAAY;AACxD,QAAIsG,YAAY,KAAKO,uBAAL,EAAhB;AACA,QAAId,SAAS,KAAKL,SAAL,EAAb;;AAEA;AACA,SAAK,IAAI/B,KAAK,CAAd,EAAiBA,KAAK2C,UAAUlQ,MAAhC,EAAwCuN,IAAxC,EAA8C;AAC5C,UAAI4C,WAAWD,UAAU3C,EAAV,EAAc,MAAd,CAAf;AACA,UAAIoE,eAAezB,UAAU3C,EAAV,EAAc,SAAd,CAAnB;AACA,UAAIoC,OAAOH,WAAP,CAAmBW,QAAnB,MAAiC/Q,SAArC,EAAgD;AAC9C,aAAK+Q,QAAL,IAAiBR,OAAOH,WAAP,CAAmBW,QAAnB,CAAjB;AACD,OAFD,MAGK;AACHR,eAAOH,WAAP,CAAmBW,QAAnB,IAA+BwB,YAA/B;AACA,aAAKxB,QAAL,IAAiBwB,YAAjB;AACD;AACF;;AAED;AACA,SAAK1C,SAAL,CAAeU,MAAf;AACD,GAnBD;;AAqBAtQ,aAAWsE,SAAX,CAAqB6G,eAArB,GAAuC,UAAUoH,IAAV,EAAgB;;AAErD;AACA;;AAEA,QAAI1B,SAAJ,EAAe7M,OAAf,EAAwBwO,SAAxB,EAAmCC,SAAnC,EAA8CC,SAA9C,EACEC,WADF,EACcC,aADd,EAC4BC,MAD5B,EACmCC,aADnC,EACiDnN,CADjD,EACoDoN,CADpD,EAEEC,SAFF,EAEaC,aAFb,EAE4BC,UAF5B,EAGEC,cAHF,EAGkBC,YAHlB,EAGgCC,cAHhC,EAGgDC,YAHhD,EAG8DC,OAH9D,EAIEC,QAJF,EAIYC,QAJZ,EAIsBC,SAJtB,EAIiCC,MAJjC,EAIyCC,UAJzC,EAIqDC,UAJrD,EAKEC,KALF,EAKQC,GALR,EAKYC,OALZ,EAKoBC,OALpB,EAMEC,KANF,EAMQC,GANR,EAMYC,OANZ,EAMoBC,OANpB,EAOEC,OAPF,EAOUC,WAPV,EAOsBC,WAPtB,EAOkCC,UAPlC,EAO6CC,aAP7C,EAQEC,WARF,EAQcC,WARd,EAQ0BC,WAR1B,EASEC,gBATF,EAUEC,UAVF,EAUaC,OAVb,EAUqBC,QAVrB,EAU8BC,IAV9B,EAUmCC,UAVnC,EAU8CC,WAV9C,EAWEC,MAXF,EAWSC,UAXT,EAWoBC,YAXpB;;AAaAvR,cAAU,IAAV;AACA6M,gBAAY,KAAKO,uBAAL,EAAZ;;AAEA;AACAoB,gBAAYhT,EAAE,OAAF,EAAU;AACpB,eAAS;AADW,KAAV,CAAZ;AAGA,QAAIgW,cAAc,qBAAqBjD,IAAvC;AACAC,cAAUiD,QAAV,CAAmBD,WAAnB;;AAEA;AACA,QAAIjD,QAAQ,UAAZ,EAAwB;AACtBE,kBAAY,KAAK1O,EAAL,CAAQ2R,iBAApB;AACAhD,kBAAY,KAAK3O,EAAL,CAAQ4R,iBAApB;AACA;AACA;AACA;AACAhD,oBAAcnT,EAAE,KAAF,EAAQ;AACpBoW,cAAMlD;AADc,OAAR,CAAd;AAGAF,gBAAUnM,MAAV,CAAiBsM,WAAjB;AACD,KAVD,MAWK,IAAIJ,QAAQ,cAAZ,EAA4B;AAC/BE,kBAAY,KAAK1O,EAAL,CAAQ8R,qBAApB;AACA,UAAIlD,cAAcnT,EAAE,KAAF,EAAQ;AACxBoW,cAAM,KAAK7R,EAAL,CAAQ+R;AADU,OAAR,CAAlB;AAGA,UAAIC,gBAAgBvW,EAAE,MAAF,CAApB;AACA,UAAIwW,iBAAiBxW,EAAE,MAAF,EAAS;AAC5BoW,cAAM,KAAK7R,EAAL,CAAQkS;AADc,OAAT,CAArB;AAGA,UAAIC,iBAAiB1W,EAAE,MAAF,EAAS;AAC5BoW,cAAM,KAAK7R,EAAL,CAAQoS;AADc,OAAT,CAArB;;AAIAJ,oBAAc1P,MAAd,CAAqB2P,cAArB,EAAoCE,cAApC;AACA,UAAI,KAAKE,WAAL,IAAoB,KAAKC,aAA7B,EAA4C;AAC1CvB,2BAAmB,KAAK/Q,EAAL,CAAQuS,qBAAR,GAAgC,GAAnD;AACAxB,4BAAoB,aAAa,KAAK/Q,EAAL,CAAQwS,sBAArB,GAA8C,WAAlE;AACAzB,4BAAoB,UAAU,KAAK/Q,EAAL,CAAQyS,GAAlB,GAAwB,gBAAxB,GAA2C,KAAKzS,EAAL,CAAQ0S,sBAAnD,GAA4E,YAAhG;AACD,OAJD,MAKK,IAAI,KAAKL,WAAT,EAAsB;AACzBtB,2BAAmB,KAAK/Q,EAAL,CAAQuS,qBAA3B;AACAxB,4BAAoB,cAAc,KAAK/Q,EAAL,CAAQwS,sBAAtB,GAA+C,YAAnE;AACD,OAHI,MAIA,IAAI,KAAKF,aAAT,EAAwB;AAC3BvB,2BAAmB,KAAK/Q,EAAL,CAAQuS,qBAA3B;AACAxB,4BAAoB,cAAc,KAAK/Q,EAAL,CAAQ0S,sBAAtB,GAA+C,YAAnE;AACD,OAHI,MAIA;AACH3B,2BAAmB,KAAK/Q,EAAL,CAAQ2S,wBAA3B;AACD;AACD9D,sBAAgBpT,EAAE,KAAF,EAAQ;AACtBmX,cAAM7B;AADgB,OAAR,CAAhB;;AAIAjC,eAAS,KAAK9O,EAAL,CAAQ6S,qBAAjB;AACA,UAAI,KAAKR,WAAL,IAAoB,KAAKC,aAA7B,EAA4C;AAC1CxD,kBAAU,MAAM,KAAK9O,EAAL,CAAQ8S,qBAAxB;AACD;AACD/D,sBAAgBtT,EAAE,KAAF,EAAQ;AACtBoW,cAAM/C;AADgB,OAAR,CAAhB;;AAIAL,gBAAUnM,MAAV,CAAiBsM,WAAjB,EAA6BoD,aAA7B,EAA2CnD,aAA3C,EAAyDE,aAAzD;AACD,KA3CI,MA4CA,IAAIP,QAAQ,UAAZ,EAAwB;AAC3BE,kBAAY,KAAK1O,EAAL,CAAQ+S,iBAApB;AACApE,kBAAY,KAAK3O,EAAL,CAAQgT,kBAApB;AACArE,mBAAa,MAAM,KAAK3O,EAAL,CAAQiT,kBAA3B;AACAtE,mBAAa,MAAM,KAAK3O,EAAL,CAAQkT,kBAA3B;AACAtE,oBAAcnT,EAAE,KAAF,EAAQ;AACpBoW,cAAMlD;AADc,OAAR,CAAd;AAGAF,gBAAUnM,MAAV,CAAiBsM,WAAjB;AACD,KATI,MAUA,IAAIJ,QAAQ,YAAZ,EAA0B;AAC7BE,kBAAY,KAAK1O,EAAL,CAAQmT,mBAApB;AACAxE,kBAAY,KAAK3O,EAAL,CAAQoT,mBAApB;AACA;AACA;AACA;AACAxE,oBAAcnT,EAAE,KAAF,EAAQ;AACpBoW,cAAMlD;AADc,OAAR,CAAd;AAGAF,gBAAUnM,MAAV,CAAiBsM,WAAjB;AACD;;AAED,QAAIJ,SAAS,cAAb,EAA6B;AAC3B;;AAEA;AACAY,uBAAiB3T,EAAE,YAAF,CAAjB;AACAyT,sBAAgB,gBAAgBV,IAAhB,GAAuB,GAAvC;AACAW,mBAAa,KAAKvK,OAAL,GAAe,SAAf,GAA2B4J,IAA3B,GAAkC,GAA/C;AACAY,qBAAesC,QAAf,CAAwBxC,aAAxB,EAAuCnS,IAAvC,CAA4C,IAA5C,EAAiDoS,UAAjD;AACAE,qBAAe5T,EAAE,aAAa,KAAKuE,EAAL,CAAQoO,cAArB,GAAsC,WAAxC,CAAf;AACAgB,qBAAe9M,MAAf,CAAsB+M,YAAtB;;AAEA;AACAC,uBAAiB7T,EAAE,YAAF,CAAjB;AACAyT,sBAAgB,gBAAgBV,IAAhB,GAAuB,GAAvC;AACAW,mBAAa,KAAKvK,OAAL,GAAe,SAAf,GAA2B4J,IAA3B,GAAkC,GAA/C;AACAc,qBAAeoC,QAAf,CAAwBxC,aAAxB,EAAuCnS,IAAvC,CAA4C,IAA5C,EAAiDoS,UAAjD;AACAI,qBAAe9T,EAAE,aAAa,KAAKuE,EAAL,CAAQqT,0BAArB,GAAkD,WAApD,CAAf;AACA/D,qBAAehN,MAAf,CAAsBiN,YAAtB;AACD,KAlBD,MAmBK;AACH;AACAN,kBAAYxT,EAAE,YAAF,CAAZ;AACAyT,sBAAgB,gBAAgBV,IAAhC;AACAW,mBAAa,KAAKvK,OAAL,GAAe,SAAf,GAA2B4J,IAAxC;AACAS,gBAAUyC,QAAV,CAAmBxC,aAAnB,EAAkCnS,IAAlC,CAAuC,IAAvC,EAA4CoS,UAA5C;AACA,UAAIX,SAAS,UAAb,EAAyB;AACvBgB,kBAAU/T,EAAE,aAAa,KAAKuE,EAAL,CAAQsT,oBAArB,GAA4C,WAA9C,CAAV;AACArE,kBAAU3M,MAAV,CAAiBkN,OAAjB;AACD;AACF;AACD,SAAK5N,IAAE,CAAP,EAAUA,IAAEkL,UAAUlQ,MAAtB,EAA8BgF,GAA9B,EAAmC;;AAEjC;AACA,UAAKkL,UAAUlL,CAAV,EAAa,OAAb,KAAyB4M,IAA1B,IAAmC1B,UAAUlL,CAAV,EAAa,OAAb,CAAvC,EAA8D;;AAE5D6N,mBAAW3C,UAAUlL,CAAV,EAAa,MAAb,CAAX;AACA+N,oBAAY,UAAUF,QAAtB;AACAG,iBAAS,KAAKhL,OAAL,GAAe,GAAf,GAAqB6K,QAA9B;AACA,YAAIA,aAAa,gBAAjB,EAAmC;AACjCC,qBAAWjU,EAAE,OAAF,EAAWiW,QAAX,CAAoB/B,SAApB,CAAX;AACD;;AAED;AACA,YAAIF,YAAY,gBAAhB,EAAkC;;AAEhC;AACAM,kBAAQtU,EAAE,OAAF,CAAR;AACAuU,gBAAMJ,SAAS,IAAf;AACAM,oBAAUzU,EAAE,SAAF,EACPsB,IADO,CACF,KADE,EACIiT,GADJ,EAEP6B,IAFO,CAEF,KAAK0B,qBAAL,CAA2B,KAAKvT,EAAL,CAAQkS,qBAAnC,CAFE,CAAV;AAGAjC,oBAAUxU,EAAE,SAAF,EAAY;AACpB+X,kBAAM,OADc;AAEpBC,kBAAMhE,QAFc;AAGpBiE,gBAAI1D,GAHgB;AAIpB2D,mBAAO;AAJa,WAAZ,CAAV;AAMA,cAAI,KAAKvF,cAAL,KAAwB,OAA5B,EAAqC;AACnC6B,oBAAQlT,IAAR,CAAa,SAAb,EAAuB,SAAvB;AACD;AACDgT,gBAAMzN,MAAN,CAAa2N,OAAb,EAAqBC,OAArB;;AAEA;AACAC,kBAAQ1U,EAAE,OAAF,CAAR;AACA2U,gBAAMR,SAAS,IAAf;AACAU,oBAAU7U,EAAE,SAAF,EACPsB,IADO,CACF,KADE,EACIqT,GADJ,EAEPyB,IAFO,CAEF,KAAK0B,qBAAL,CAA2B,KAAKvT,EAAL,CAAQoS,qBAAnC,CAFE,CAAV;AAGA/B,oBAAU5U,EAAE,SAAF,EAAY;AACpB+X,kBAAM,OADc;AAEpBC,kBAAMhE,QAFc;AAGpBiE,gBAAItD,GAHgB;AAIpBuD,mBAAO;AAJa,WAAZ,CAAV;AAMA,cAAI,KAAKvF,cAAL,KAAwB,MAA5B,EAAoC;AAClCiC,oBAAQtT,IAAR,CAAa,SAAb,EAAuB,SAAvB;AACD;AACDoT,gBAAM7N,MAAN,CAAa+N,OAAb,EAAqBC,OAArB;AACD,SAnCD,MAoCK,IAAI9B,SAAS,UAAb,EAAyB;AAC5BqB,uBAAapU,EAAE,iBAAiBmU,MAAjB,GAA0B,KAA1B,GAAkC9C,UAAUlL,CAAV,EAAa,OAAb,CAAlC,GAA0D,UAA5D,CAAb;AACAkO,uBAAarU,EAAE,UAAF,EAAa;AACxBgY,kBAAMhE,QADkB;AAExBiE,gBAAI9D;AAFoB,WAAb,CAAb;AAIA,cAAIH,aAAa,cAAb,IAA+BA,aAAa,mBAAhD,EAAqE;AACnE;AACAK,uBAAW8D,MAAX,CAAkB,YAAW;AAC3BhD,4BAAcnV,EAAE,IAAF,EAAQsB,IAAR,CAAa,MAAb,CAAd;AACAkD,sBAAQ4T,eAAR,CAAwB5T,QAAQ6T,cAAhC,EAA+ClD,WAA/C;AACD,aAHD;AAID;AACDL,oBAAU,KAAKwD,kBAAL,CAAwBtE,QAAxB,CAAV;AACA,eAAKT,IAAE,CAAP,EAAUA,IAAIuB,QAAQ3T,MAAtB,EAA8BoS,GAA9B,EAAmC;AACjC,gBAAIS,aAAa,sBAAjB,EAAyC;AACvCgB,4BAAcF,QAAQvB,CAAR,CAAd;AACA,kBAAIyB,gBAAgB,SAApB,EAA+B;AAC7BC,6BAAa,KAAK1Q,EAAL,CAAQgU,uBAArB;AACD,eAFD,MAGK,IAAIvD,gBAAgB,OAApB,EAA6B;AAChCA,8BAAcF,QAAQvB,CAAR,CAAd;AACA0B,6BAAa,KAAK1Q,EAAL,CAAQiU,qBAArB;AACD;AACF,aATD,MAUK,IAAIxE,aAAa,mBAAb,IAAoCA,aAAa,qBAArD,EAA4E;AAC/EgB,4BAAcF,QAAQvB,CAAR,EAAW,CAAX,CAAd;AACA0B,2BAAaH,QAAQvB,CAAR,EAAW,CAAX,CAAb;AACD,aAHI,MAIA,IAAIS,aAAa,qBAAjB,EAAwC;AAC3CgB,4BAAcF,QAAQvB,CAAR,CAAd;AACA0B,2BAAaH,QAAQvB,CAAR,CAAb;AACA,kBAAIyB,gBAAgB,IAApB,EAA0B;AACxBC,8BAAc,OAAO,KAAK1Q,EAAL,CAAQkU,WAAf,GAA6B,GAA3C;AACD,eAFD,MAGK,IAAIzD,gBAAgB,MAApB,EAA4B;AAC/BC,8BAAc,OAAO,KAAK1Q,EAAL,CAAQmU,KAAf,GAAuB,GAArC;AACD;AACF,aATI,MAUA;AACH1D,4BAAcF,QAAQvB,CAAR,CAAd;AACA0B,2BAAaH,QAAQvB,CAAR,CAAb;AACD;AACDwB,0BAAc/U,EAAE,UAAF,EAAa;AACzBkY,qBAAOlD,WADkB;AAEzBoB,oBAAMnB;AAFmB,aAAb,CAAd;AAIA,gBAAI,KAAKjB,QAAL,MAAmBgB,WAAvB,EAAoC;AAClCD,0BAAYzT,IAAZ,CAAiB,UAAjB,EAA4B,UAA5B;AACD;AACD+S,uBAAWxN,MAAX,CAAkBkO,WAAlB;AACD;AACDd,mBAASpN,MAAT,CAAgBuN,UAAhB,EAA2BC,UAA3B;AACD,SArDI,MAsDA;AAAE;AACLD,uBAAapU,EAAE,iBAAiBmU,MAAjB,GAA0B,KAA1B,GAAkC9C,UAAUlL,CAAV,EAAa,OAAb,CAAlC,GAA0D,UAA5D,CAAb;AACAkO,uBAAarU,EAAE,SAAF,EAAY;AACvB+X,kBAAM,UADiB;AAEvBC,kBAAMhE,QAFiB;AAGvBiE,gBAAI9D,MAHmB;AAIvB+D,mBAAO;AAJgB,WAAZ,CAAb;AAMA;AACA,cAAI,KAAKlE,QAAL,MAAmB,CAAvB,EAA0B;AACxBK,uBAAW/S,IAAX,CAAgB,SAAhB,EAA0B,SAA1B;AACD;AACD,cAAIyR,SAAS,UAAb,EAAyB;AACvB;AACAsB,uBAAW8D,MAAX,CAAkB,YAAW;AAC3BhD,4BAAcnV,EAAE,IAAF,EAAQsB,IAAR,CAAa,MAAb,CAAd;AACA,kBAAI6T,gBAAgB,YAApB,EAAkC;AAChCC,8BAAc,kBAAd;AACAC,8BAAc7Q,QAAQD,EAAR,CAAWwN,UAAX,GAAwB,KAAtC;AACD,eAHD,MAIK,IAAIoD,gBAAgB,aAApB,EAAmC;AACtCC,8BAAc,mBAAd;AACAC,8BAAc7Q,QAAQD,EAAR,CAAWyN,WAAX,GAAyB,KAAvC;AACD,eAHI,MAIA,IAAImD,gBAAgB,cAApB,EAAoC;AACvCC,8BAAc,oBAAd;AACAC,8BAAc7Q,QAAQD,EAAR,CAAW0N,YAAX,GAA0B,KAAxC;AACD;AACD,kBAAIjS,EAAE,IAAF,EAAQ+I,EAAR,CAAW,UAAX,CAAJ,EAA4B;AAC1B/I,kBAAEoV,WAAF,EAAegB,IAAf,CAAoBf,WAApB;AACD,eAFD,MAGK;AACHrV,kBAAEoV,WAAF,EAAegB,IAAf,CAAoB,EAApB;AACD;AACF,aApBD;AAqBD;AACDnC,mBAASpN,MAAT,CAAgBwN,UAAhB,EAA2BD,UAA3B;AACD;AACD,YAAIrB,SAAS,cAAb,EAA6B;AAC3B,cAAIiB,aAAa,gBAAjB,EAAmC;AACjCL,2BAAe9M,MAAf,CAAsByN,KAAtB,EAA4BI,KAA5B;AACD,WAFD,MAGK;AACHb,2BAAehN,MAAf,CAAsBoN,QAAtB;AACD;AACF,SAPD,MAQK;AACHT,oBAAU3M,MAAV,CAAiBoN,QAAjB;AACD;AACF;AACF;AACD,QAAIlB,SAAS,cAAb,EAA6B;AAC3BC,gBAAUnM,MAAV,CAAiB8M,cAAjB,EAAgCE,cAAhC;AACD,KAFD,MAGK;AACHb,gBAAUnM,MAAV,CAAiB2M,SAAjB;AACD;AACD,QAAIT,SAAS,UAAb,EAAyB;AACvB;AACA,UAAI,KAAK/J,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,aAAKqP,cAAL,GAAsBrY,EAAE,OAAF,EAAU;AAC9B,mBAAS;AADqB,SAAV,EAEnBoW,IAFmB,CAEd,KAAK7R,EAAL,CAAQoU,iBAFM,CAAtB;AAGA3F,kBAAUnM,MAAV,CAAiB,KAAKwR,cAAtB;AACA,aAAKD,eAAL,CAAqB,KAAKC,cAA1B;AACD;AACF,KATD,MAUK,IAAItF,SAAS,UAAb,EAAyB;AAC5B;AACAwC,mBAAavV,EAAE,MAAF,EAAS;AACpBoW,cAAM,KAAK7R,EAAL,CAAQqU;AADM,OAAT,CAAb;AAGApD,gBAAUxV,EAAE,MAAF,CAAV;AACA;AACAyV,iBAAW,EAAX;AACAC,aAAO,EAAP;AACA,WAAKvP,IAAE,CAAP,EAAUA,IAAE,KAAKiJ,QAAL,CAAcjO,MAA1B,EAAkCgF,GAAlC,EAAuC;AACrC,YAAI,KAAKiJ,QAAL,CAAcjJ,CAAd,MAAqB,MAAzB,EAAiC;AAC/BsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQsU,IAAR,GAAe,GAAf,GAAqB,KAAKtU,EAAL,CAAQuU,KAA3C;AACApD,eAAK9G,IAAL,CAAU,kBAAkB,KAAKrK,EAAL,CAAQwU,EAA1B,GAA+B,2CAA/B,GAA6E,KAAKxU,EAAL,CAAQyU,QAA/F;AACD,SAHD,MAIK,IAAI,KAAK5J,QAAL,CAAcjJ,CAAd,MAAqB,SAAzB,EAAoC;AACvCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQ0U,OAAtB;AACAvD,eAAK9G,IAAL,CAAU,GAAV;AACD,SAHI,MAIA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,QAAzB,EAAmC;AACtCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQ2U,MAAtB;AACAxD,eAAK9G,IAAL,CAAU,GAAV;AACD,SAHI,MAIA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,SAAzB,EAAoC;AACvCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQ4U,OAAtB;AACAzD,eAAK9G,IAAL,CAAU,GAAV;AACD,SAHI,MAIA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,QAAzB,EAAmC;AACtCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQxC,MAAtB;AACA2T,eAAK9G,IAAL,CAAU,kBAAkB,KAAKrK,EAAL,CAAQwU,EAA1B,GAA+B,qCAAzC;AACA;AACAtD,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQ6U,IAAR,GAAe,GAAf,GAAqB,KAAK7U,EAAL,CAAQ8U,MAA3C;AACA3D,eAAK9G,IAAL,CAAU,GAAV;AACD,SANI,MAOA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,UAAzB,EAAqC;AACxC,cAAI,KAAKiF,QAAL,CAAcjK,MAAd,GAAuB,CAA3B,EAA8B;AAC5B;AACAsU,qBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQ6G,QAAtB;AACD,WAHD,MAIK;AACH;AACA;AACA,gBAAI,KAAKkO,UAAT,EAAqB;AACnB7D,uBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQgV,YAAtB;AACD,aAFD,MAGK;AACH9D,uBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQiV,YAAtB;AACD;AACF;AACD9D,eAAK9G,IAAL,CAAU,GAAV;AACD,SAhBI,MAiBA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,cAAzB,EAAyC;AAC5C,cAAI,KAAKsT,MAAT,EAAiB;AACfhE,qBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQmV,mBAAtB;AACD,WAFD,MAGK;AACHjE,qBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQoV,kBAAtB;AACD;AACDjE,eAAK9G,IAAL,CAAU,GAAV;AACD,SARI,MASA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,OAAzB,EAAkC;AACrCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQoM,WAAtB;AACA+E,eAAK9G,IAAL,CAAU,GAAV;AACD,SAHI,MAIA,IAAI,KAAKQ,QAAL,CAAcjJ,CAAd,MAAqB,MAAzB,EAAiC;AACpCsP,mBAAS7G,IAAT,CAAc,KAAKrK,EAAL,CAAQqV,IAAtB;AACAlE,eAAK9G,IAAL,CAAU,GAAV;AACD;AACF;AACD,WAAKzI,IAAE,CAAP,EAAUA,IAAEuP,KAAKvU,MAAjB,EAAyBgF,GAAzB,EAA8B;AAC5B;AACAwP,qBAAa,gCAAb;AACA,YAAI,KAAK5D,UAAL,KAAoB,CAAxB,EAA2B;AACzB4D,wBAAc,KAAKpR,EAAL,CAAQwN,UAAR,GAAqB,KAAnC;AACD;AACD4D,sBAAc,SAAd;AACA;AACAA,sBAAc,iCAAd;AACA,YAAI,KAAK3D,WAAL,KAAqB,CAAzB,EAA4B;AAC1B2D,wBAAc,KAAKpR,EAAL,CAAQyN,WAAR,GAAsB,KAApC;AACD;AACD2D,sBAAc,SAAd;AACA;AACAA,sBAAc,kCAAd;AACA,YAAI,KAAK1D,YAAL,KAAsB,CAA1B,EAA6B;AAC3B0D,wBAAc,KAAKpR,EAAL,CAAQ0N,YAAR,GAAuB,KAArC;AACD;AACD0D,sBAAc,SAAd;AACAA,sBAAc,+BAA+BD,KAAKvP,CAAL,CAA/B,GAAyC,SAAvD;AACAwP,sBAAc,QAAQF,SAAStP,CAAT,CAAtB;AACAyP,sBAAc5V,EAAE,MAAF,EAAS;AACrBmX,gBAAMxB;AADe,SAAT,CAAd;AAGAH,gBAAQ3O,MAAR,CAAe+O,WAAf;AACD;AACD;AACAD,mBAAa,+BAA+B,KAAKpR,EAAL,CAAQsV,SAAvC,GAAmD,SAAhE;AACAlE,oBAAc,QAAQ,KAAKpR,EAAL,CAAQuV,iBAA9B;AACAlE,oBAAc5V,EAAE,MAAF,EAAS;AACrBmX,cAAMxB;AADe,OAAT,CAAd;AAGAH,cAAQ3O,MAAR,CAAe+O,WAAf;AACA;AACA5C,gBAAUnM,MAAV,CAAiB0O,UAAjB,EAA4BC,OAA5B;AACD;;AAED;AACA;AACA;AACA;AACAxV,MAAE,MAAF,EAAU6G,MAAV,CAAiBmM,SAAjB;AACA6C,aAAS,IAAIkE,gBAAJ,CAAqB/G,SAArB,EAAgC,KAAKgH,YAArC,EAAmD,QAAnD,EAA6D/G,SAA7D,EAAwEE,WAAxE,EAAqF3O,QAAQD,EAAR,CAAW0V,gBAAhG,EAAkH,MAAlH,CAAT;;AAEA;AACAjH,cAAUnM,MAAV,CAAiB,MAAjB;AACAiP,iBAAa9V,EAAE,kCAAkC,KAAKuE,EAAL,CAAQ2V,IAA1C,GAAiD,WAAnD,CAAb;AACAnE,mBAAe/V,EAAE,kCAAkC,KAAKuE,EAAL,CAAQ4V,MAA1C,GAAmD,WAArD,CAAf;AACArE,eAAWsE,KAAX,CAAiB,YAAY;AAC3BvE,aAAOjP,IAAP;AACApC,cAAQ6V,iBAAR;AACD,KAHD;AAIAtE,iBAAaqE,KAAb,CAAmB,YAAY;AAC7BvE,aAAOjP,IAAP;AACApC,cAAQ8V,cAAR;AACD,KAHD;;AAKAtH,cAAUnM,MAAV,CAAiBiP,UAAjB;AACA9C,cAAUnM,MAAV,CAAiBkP,YAAjB;;AAEA;AACA,QAAIhD,SAAS,UAAb,EAAyB;AACvB,WAAKwH,kBAAL,GAA0B1E,MAA1B;AACD,KAFD,MAGK,IAAI9C,SAAS,cAAb,EAA6B;AAChC,WAAKyH,eAAL,GAAuB3E,MAAvB;AACD,KAFI,MAGA,IAAI9C,SAAS,UAAb,EAAyB;AAC5B,WAAK0H,mBAAL,GAA2B5E,MAA3B;AACD,KAFI,MAGA,IAAI9C,SAAS,YAAb,EAA2B;AAC9B,WAAK2H,qBAAL,GAA6B7E,MAA7B;AACD;;AAED;AACA;AACA7V,MAAE,6CAAF,EAAiDoa,KAAjD,CAAuD,YAAW;AAChE5V,cAAQ8V,cAAR;AACD,KAFD;AAGA;AACAta,MAAE,qBAAF,EAAyBa,OAAzB,CAAiC,UAAS8Z,KAAT,EAAgB;AAC/C,UAAIA,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AAAE;AACxBpW,gBAAQ8V,cAAR;AACD;AACF,KAJD;AAKD,GA3cD;;AA6cC;AACA;AACA;;AAEA9Z,aAAWsE,SAAX,CAAqBwV,cAArB,GAAsC,YAAY;;AAEhD,QAAI9V,OAAJ,EAAasM,MAAb,EAAqBO,SAArB,EAAgClL,CAAhC,EAAmCmL,QAAnC,EAA6CuJ,OAA7C,EAAsD1G,MAAtD;;AAEA3P,cAAU,IAAV;AACAsM,aAAS,KAAKL,SAAL,EAAT;AACAY,gBAAY,KAAKO,uBAAL,EAAZ;AACA,SAAKzL,IAAE,CAAP,EAAUA,IAAEkL,UAAUlQ,MAAtB,EAA8BgF,GAA9B,EAAmC;AACjCmL,iBAAWD,UAAUlL,CAAV,EAAa,MAAb,CAAX;AACA,UAAImL,aAAa,gBAAjB,EAAmC;AACjC,YAAI,KAAKA,QAAL,MAAmB,MAAvB,EAA+B;AAC7BtR,YAAE,qBAAF,EAAyB8a,IAAzB,CAA8B,SAA9B,EAAwC,IAAxC;AACD,SAFD,MAGK;AACH9a,YAAE,sBAAF,EAA0B8a,IAA1B,CAA+B,SAA/B,EAAyC,IAAzC;AACD;AACF,OAPD,MAQK,IAAKxJ,SAASzL,OAAT,CAAiB,UAAjB,MAAiC,CAAC,CAAnC,IAA0CyL,aAAa,cAA3D,EAA4E;AAC/E;AACAtR,UAAE,kBAAkBsR,QAAlB,GAA6B,IAA/B,EAAqCyJ,GAArC,CAAyCjK,OAAOH,WAAP,CAAmBW,QAAnB,CAAzC;AACD,OAHI,MAIA;AAAE;AACL,YAAI,KAAKA,QAAL,MAAmB,CAAvB,EAA0B;AACxBtR,YAAE,iBAAiBsR,QAAjB,GAA4B,IAA9B,EAAoCwJ,IAApC,CAAyC,SAAzC,EAAmD,IAAnD;AACA,SAFF,MAGM;AACH9a,YAAE,iBAAiBsR,QAAjB,GAA4B,IAA9B,EAAoCwJ,IAApC,CAAyC,SAAzC,EAAmD,KAAnD;AACD;AACF;AACF;AACD;AACA,SAAK1C,eAAL,CAAqB,KAAKC,cAA1B;AACF,GAhCD;;AAkCD;AACA7X,aAAWsE,SAAX,CAAqBuV,iBAArB,GAAyC,YAAY;AACnD;AACA;AACA,QAAIW,UAAJ,EAAgBC,aAAhB,EAA+BC,cAA/B,EAA+CC,YAA/C,EAA6DC,QAA7D;;AAEAJ,iBAAa,CAAb;AACAC,oBAAgB,CAAhB,CANmD,CAMhC;AACnBC,qBAAiB,KAAjB;AACA,QAAIpK,SAAS,KAAKL,SAAL,EAAb;AACA,QAAIY,YAAY,KAAKO,uBAAL,EAAhB;AACA,SAAK,IAAIzL,IAAE,CAAX,EAAcA,IAAIkL,UAAUlQ,MAA5B,EAAoCgF,GAApC,EAAyC;AACvC;AACA,UAAIkL,UAAUlL,CAAV,EAAa,OAAb,CAAJ,EAA2B;AACzB,YAAImL,WAAWD,UAAUlL,CAAV,EAAa,MAAb,CAAf;AACA,YAAImL,YAAY,gBAAhB,EAAkC;AAChC,eAAKqB,cAAL,GAAsB3S,EAAE,iBAAiBsR,QAAjB,GAA4B,YAA9B,EAA4CyJ,GAA5C,EAAtB;AACA,cAAI,KAAKpI,cAAL,KAAwB7B,OAAOH,WAAP,CAAmB,gBAAnB,CAA5B,EAAkE;AAAE;AAClEG,mBAAOH,WAAP,CAAmB,gBAAnB,IAAuC,KAAKgC,cAA5C;AACAqI;AACD;AACF,SAND,MAOK,IAAK1J,SAASzL,OAAT,CAAiB,UAAjB,MAAiC,CAAC,CAAnC,IAA0CyL,aAAa,cAA3D,EAA4E;AAC/E;AACA8J,qBAAWpb,EAAE,kBAAkBsR,QAAlB,GAA6B,IAA/B,EAAqCyJ,GAArC,EAAX;AACA,cAAIjK,OAAOH,WAAP,CAAmBW,QAAnB,MAAiC8J,QAArC,EAA+C;AAAE;AAC/CtK,mBAAOH,WAAP,CAAmBW,QAAnB,IAA+B8J,QAA/B;AACA;AACA,iBAAK9J,QAAL,IAAiB8J,QAAjB;AACAJ;AACAC;AACD;AACD,cAAI3J,aAAa,kBAAjB,EAAqC;AACnC4J,6BAAiB,IAAjB;AACAC,2BAAeC,QAAf;AACD;AACF,SAdI,MAeA;AAAE;AACL,cAAIpb,EAAE,iBAAiBsR,QAAjB,GAA4B,IAA9B,EAAoCvI,EAApC,CAAuC,UAAvC,CAAJ,EAAwD;AACtD+H,mBAAOH,WAAP,CAAmBW,QAAnB,IAA+B,CAA/B;AACA,gBAAI,KAAKA,QAAL,MAAmB,CAAvB,EAA0B;AACxB;AACD,aAFD,MAGK;AACH;AACA,mBAAKA,QAAL,IAAiB,CAAjB;AACA0J;AACD;AACF,WAVD,MAWK;AAAE;AACLlK,mBAAOH,WAAP,CAAmBW,QAAnB,IAA+B,CAA/B;AACA,gBAAI,KAAKA,QAAL,MAAmB,CAAvB,EAA0B;AACxB;AACA,mBAAKA,QAAL,IAAiB,CAAjB;AACA0J;AACD,aAJD,MAKK;AACH;AACD;AACF;AACF;AACF;AACF;AACD,QAAIA,aAAa,CAAjB,EAAoB;AAClB,WAAK5K,SAAL,CAAeU,MAAf;AACA,WAAKuK,SAAL,CAAe,KAAK9W,EAAL,CAAQ+W,WAAvB;AACD,KAHD,MAIK;AACH,WAAKD,SAAL,CAAe,KAAK9W,EAAL,CAAQgX,YAAvB;AACD;AACD,QAAI,KAAKvW,MAAL,KAAgB,SAAhB,IACD,OAAO,KAAKuI,oBAAZ,KAAqC,WAArC,IAAoD,KAAKA,oBADxD,IAEF2N,cAFF,EAEkB;AACd;AACA,WAAKM,aAAL,CAAmBC,SAAnB,CAA6B,KAAKC,eAAlC,EAAkD,UAAlD,EAA6D,KAAKC,cAAL,CAAoB,MAApB,EAA2BR,YAA3B,EAAwC,SAAxC,CAA7D;AACH;AACD,SAAKS,WAAL;AACA,QAAIX,gBAAgB,CAApB,EAAuB;AACrB,WAAK7C,eAAL,CAAqB,KAAKyD,YAA1B;AACA;AACA,UAAI,OAAO,KAAKC,QAAZ,KAAyB,WAA7B,EAA0C;AACxC,aAAK1D,eAAL,CAAqB,KAAK0D,QAA1B;AACD;AACF;AACF,GAnFD;;AAqFA;AACAtb,aAAWsE,SAAX,CAAqB8W,WAArB,GAAmC,YAAY;;AAE7C,QAAIG,OAAJ;;AAEA;AACA,QAAI,KAAKhK,UAAL,KAAoB,CAAxB,EAA2B;AACzBgK,gBAAU,QAAV;AACD,KAFD,MAGK;AACHA,gBAAU,EAAV;AACD;AACD,QAAI,KAAK/J,WAAL,KAAqB,CAAzB,EAA4B;AAC1B+J,iBAAW,YAAX;AACD;AACD,QAAI,KAAK9J,YAAL,KAAsB,CAA1B,EAA6B;AAC3B8J,iBAAW,UAAX;AACD;AACD/b,MAAE,sBAAF,EAA0BoW,IAA1B,CAA+B2F,OAA/B;;AAEA;AACA,QAAI,KAAK5J,YAAL,KAAsB,CAA1B,EAA6B;AAC3BnS,QAAE,iDAAF,EAAqDsB,IAArD,CAA0D,UAA1D,EAAqE,GAArE;AACD,KAFD,MAGK;AACHtB,QAAE,iDAAF,EAAqDgc,UAArD,CAAgE,UAAhE;AACD;AACD,SAAKnQ,aAAL;AACA;AACA,SAAKoQ,cAAL,GAAsB,IAAtB;AACA,SAAK3Q,eAAL;AACD,GA9BD;;AAgCA9K,aAAWsE,SAAX,CAAqBoX,iBAArB,GAAyC,UAASpb,CAAT,EAAY;AACnD;AACA,QAAK,KAAKiR,UAAL,KAAoB,CAArB,IAA2B,CAACjR,EAAEqb,MAAlC,EAA0C;AACxC,aAAO,KAAP;AACD;AACD,QAAK,KAAKnK,WAAL,KAAqB,CAAtB,IAA4B,CAAClR,EAAEsb,OAAnC,EAA4C;AAC1C,aAAO,KAAP;AACD;AACD,QAAK,KAAKnK,YAAL,KAAsB,CAAvB,IAA6B,CAACnR,EAAEub,QAApC,EAA8C;AAC5C,aAAO,KAAP;AACD;AACD,WAAO,IAAP;AACD,GAZD;AAcD,CAr4BD,EAq4BGjX,MAr4BH;;AAu4BA,CAAC,UAAUpF,CAAV,EAAa;AACZ;AACAQ,aAAWsE,SAAX,CAAqBwX,WAArB,GAAmC,UAAS9T,OAAT,EAAiB4N,IAAjB,EAAuB;;AAExD;AACAA,WAAOA,KAAKxU,OAAL,CAAa,eAAb,EAA6B,IAA7B,CAAP;;AAEA,QAAI2a,cAAc;AAChBC,WAAKhU,OADW;AAEhB4N,YAAMA,IAFU;AAGhB7M,aAAO,IAHS;AAIhBkT,gBAAU,EAJM;AAKhBC,YAAM,EALU;AAMhBC,YAAM,CANU;AAOhBC,cAAQ;AAPQ,KAAlB;;AAUA,QAAI;AACFC,UAAIN,WAAJ,EAAiBO,aAAjB;AACD,KAFD,CAGA,OAAO9L,GAAP,EAAY;AACV,UAAI+L,YAAY,0BAA0BR,YAAYC,GAAtC,GAA4C,IAA5D;AACAO,mBAAa,WAAWR,YAAYI,IAAvB,GAA8B,IAA3C;AACAI,mBAAa,aAAaR,YAAYK,MAAzB,GAAkC,IAA/C;AACAG,mBAAa/L,GAAb;AACA,UAAItI,QAAQsU,IAAZ,EAAkB;AAChBtU,gBAAQsU,IAAR,CAAaD,SAAb;AACD,OAFD,MAGK,IAAIrU,QAAQyB,GAAZ,EAAiB;AACpBzB,gBAAQyB,GAAR,CAAY4S,SAAZ;AACD;AACF;AACD,WAAOR,WAAP;AACD,GA/BD;;AAiCA,WAASU,OAAT,CAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;AAC5B,QAAIC,UAAU,EAAd;AACA,SAAK,IAAI1O,EAAT,IAAeyO,IAAf,EAAqB;AACnBC,cAAQxO,IAAR,CAAaiO,IAAIK,KAAJ,EAAWC,KAAKzO,EAAL,CAAX,CAAb;AACD;AACD,WAAO0O,OAAP;AACD;;AAED;AACA,WAASP,GAAT,CAAaK,KAAb,EAAoBG,MAApB,EAA4B;AAC1B,QAAItC,MAAMsC,OAAOH,KAAP,CAAV;AACA,QAAIA,MAAM3T,KAAN,KAAgB,IAApB,EAA0B;AACxB,YAAM2T,MAAM3T,KAAZ;AACD;AACD,WAAOwR,GAAP;AACD;;AAED,WAASuC,cAAT,CAAwBJ,KAAxB,EAA+BK,OAA/B,EAAwC;AACtC,SAAK,IAAI7O,EAAT,IAAe6O,OAAf,EAAwB;AACtB,UAAIA,QAAQ7O,EAAR,MAAgB,IAApB,EAA0B;AACxBwO,cAAMN,MAAN,GAAe,CAAf;AACAM,cAAMP,IAAN,IAAc,CAAd;AACD,OAHD,MAIK;AACHO,cAAMN,MAAN,IAAgB,CAAhB;AACD;AACF;AACF;;AAED,WAASY,GAAT,CAAaN,KAAb,EAAoB/b,MAApB,EAA4B;AAC1B,QAAIsc,aAAaP,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB,CAArB,EAAwB5E,MAAxB,CAAjB;AACAmc,mBAAeJ,KAAf,EAAsBO,UAAtB;AACAP,UAAM9G,IAAN,GAAa8G,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB5E,MAArB,CAAb;AACA,WAAOsc,UAAP;AACD;;AAED,WAASC,OAAT,CAAiBR,KAAjB,EAAwB/b,MAAxB,EAAgC;AAC9B,QAAIwc,UAAUT,MAAM9G,IAAN,CAAWvQ,OAAX,CAAmB,IAAnB,CAAd;AACA,QAAI4X,UAAJ;AACA,QAAIE,YAAY,CAAC,CAAjB,EAAoB;AAClBF,mBAAaP,MAAM9G,IAAnB;AACAkH,qBAAeJ,KAAf,EAAsBO,UAAtB;AACAP,YAAM9G,IAAN,GAAa,EAAb;AACD,KAJD,MAKK;AACHqH,mBAAaP,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB,CAArB,EAAwB4X,OAAxB,CAAb;AACAL,qBAAeJ,KAAf,EAAsBO,aAAa,IAAnC;AACAP,YAAM9G,IAAN,GAAa8G,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB4X,UAAU,CAA/B,CAAb;AACD;AACD,WAAOF,UAAP;AACD;;AAED,WAASG,QAAT,CAAkBV,KAAlB,EAAyB;AACvB,QAAIS,UAAUT,MAAM9G,IAAN,CAAWvQ,OAAX,CAAmB,IAAnB,CAAd;AACA,QAAI8X,YAAY,CAAC,CAAjB,EAAoB;AAClB,aAAOT,MAAM9G,IAAb;AACD,KAFD,MAGK;AACH,aAAO8G,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB,CAArB,EAAwB4X,OAAxB,CAAP;AACD;AACF;;AAED,WAASb,aAAT,CAAuBI,KAAvB,EAA8B;AAC5BD,YAAQC,KAAR,EAAe,CACbW,cADa,EAEbC,YAFa,CAAf;AAGA,QAAIC,IAAIb,MAAM9G,IAAN,CAAW,CAAX,CAAR;AACA,QAAI2H,MAAM,GAAN,IAAaA,MAAM,IAAnB,IAA2BA,MAAM,IAArC,EAA2C;AACzCd,cAAQC,KAAR,EAAe,CACbc,oBADa,EAEbC,oBAFa,EAGbC,qBAHa,EAIbC,oBAJa,CAAf;AAKD,KAND,MAOK;AACHjB,YAAM3T,KAAN,GAAc,8CAAd;AACD;AACF;;AAED;AACA,WAAS0U,oBAAT,CAA8Bf,KAA9B,EAAqC;AACnC,WAAO,IAAP,EAAa;AACX,UAAIkB,WAAWR,SAASV,KAAT,CAAf;AACA,UAAIkB,SAASvY,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAAjC,EAAoC;AAClC;AACD,OAFD,MAGK,IAAIuY,SAASjd,MAAT,KAAoB,CAAxB,EAA2B;AAC9B;AACD,OAFI,MAGA;AACH,YAAIkd,WAAWxB,IAAIK,KAAJ,EAAWoB,mBAAX,CAAf;AACApB,cAAMT,QAAN,CAAe4B,SAAS,CAAT,CAAf,IAA8BA,SAAS,CAAT,CAA9B;AACAxB,YAAIK,KAAJ,EAAWc,oBAAX;AACD;AACF;AACF;;AAED,WAASO,kBAAT,CAA4BC,CAA5B,EAA+B;AAC7B,QAAIC,WAAW,EAAf;AACA,QAAIC,aAAaF,EAAE3Y,OAAF,CAAU,GAAV,CAAjB;AACA,QAAI6Y,cAAc,CAAlB,EAAqB;AACnBD,eAAS7P,IAAT,CAAc8P,UAAd;AACD;AACD,QAAIC,WAAWH,EAAE3Y,OAAF,CAAU,IAAV,CAAf;AACA,QAAI8Y,YAAY,CAAhB,EAAmB;AACjBF,eAAS7P,IAAT,CAAc+P,QAAd;AACD;AACD,QAAIC,YAAYJ,EAAE3Y,OAAF,CAAU,IAAV,CAAhB;AACA,QAAI+Y,aAAa,CAAjB,EAAoB;AAClBH,eAAS7P,IAAT,CAAcgQ,SAAd;AACD;;AAED,WAAOC,KAAKC,GAAL,CAASC,KAAT,CAAe,IAAf,EAAqBN,QAArB,CAAP;AACD;;AAED,WAASH,mBAAT,CAA6BpB,KAA7B,EAAoC;AAClC,QAAI8B,OAAO9B,MAAM9G,IAAN,CAAWvQ,OAAX,CAAmB,IAAnB,CAAX;AACA,QAAIoZ,OAAOzB,IAAIN,KAAJ,EAAW8B,IAAX,CAAX;AACA,QAAIE,QAAQD,KAAKpZ,OAAL,CAAa,GAAb,CAAZ;AACA,QAAIqZ,UAAU,CAAC,CAAf,EAAkB;AAChBhC,YAAM3T,KAAN,GAAc,gBAAd;AACA;AACD,KAHD,MAIK;AACH,UAAI4V,WAAWF,KAAKlZ,SAAL,CAAe,CAAf,EAAkBmZ,KAAlB,CAAf;AACA,UAAIE,YAAYH,KAAKlZ,SAAL,CAAemZ,QAAQ,CAAvB,CAAhB;AACA,aAAO,CAACC,QAAD,EAAWC,SAAX,CAAP;AACD;AACF;;AAED,WAASC,mBAAT,CAA6BnC,KAA7B,EAAoC;AAClC,QAAI8B,OAAOT,mBAAmBrB,MAAM9G,IAAzB,CAAX;AACA,QAAI6I,OAAOzB,IAAIN,KAAJ,EAAW8B,IAAX,CAAX;AACA,QAAIE,QAAQD,KAAKpZ,OAAL,CAAa,GAAb,CAAZ;AACA,QAAIqZ,UAAU,CAAC,CAAf,EAAkB;AAChBhC,YAAM3T,KAAN,GAAc,gBAAd;AACA;AACD,KAHD,MAIK;AACH,UAAI4V,WAAWF,KAAKlZ,SAAL,CAAe,CAAf,EAAkBmZ,KAAlB,CAAf;AACA,UAAIE,YAAYH,KAAKlZ,SAAL,CAAemZ,QAAQ,CAAvB,CAAhB;AACA,aAAO,CAACC,QAAD,EAAWC,SAAX,CAAP;AACD;AACF;;AAED,WAASjB,oBAAT,CAA8BjB,KAA9B,EAAqC;AACnC,WAAO,IAAP,EAAa;AACX,UAAIkB,WAAWR,SAASV,KAAT,CAAf;AACA;AACA,UAAIkB,SAASvY,OAAT,CAAiB,MAAjB,MAA6B,CAA7B,KAAoCuY,SAASjd,MAAT,KAAoB,CAArB,IAA4Bid,SAAS,CAAT,MAAgB,GAA5C,IAAqDA,SAAS,CAAT,MAAgB,IAAxG,CAAJ,EAAoH;AAClHnB,gBAAQC,KAAR,EAAe,CAACoC,UAAD,EAAaC,aAAb,CAAf;AACD,OAFD,MAGK,IAAIvf,EAAEwf,IAAF,CAAOpB,QAAP,EAAiBjd,MAAjB,KAA4B,CAA5B,IAAiC+b,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAAzD,EAA4D;AAC/D0b,YAAIK,KAAJ,EAAWqC,aAAX;AACD,OAFI,MAGA,IAAIvf,EAAEwf,IAAF,CAAOpB,QAAP,EAAiBjd,MAAjB,GAA0B,CAA9B,EAAiC;AACpC0b,YAAIK,KAAJ,EAAWuC,QAAX;AACD,OAFI,MAGA;AACH;AACA;AACD;AACF;AACF;;AAED,WAASA,QAAT,CAAkBvC,KAAlB,EAAyB;;AAEvB,QAAIkB,WAAWR,SAASV,KAAT,CAAf;AACA,QAAIwC,KAAJ;AACA,QAAI3C,SAAJ;;AAEA,QAAGqB,SAASvY,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAAhC,EAAmC;AAClC6Z,cAAQhC,QAAQR,KAAR,CAAR;AACAkB,iBAAWR,SAASV,KAAT,CAAX;AACA,UAAGkB,SAASvY,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAAhC,EAAmC;AAChCkX,oBAAY,0BAA0BG,MAAMV,GAAhC,GAAsC,IAAlD;AACAO,qBAAa,WAAWG,MAAMP,IAAjB,GAAwB,IAArC;AACAI,qBAAa,aAAaG,MAAMN,MAAnB,GAA4B,IAAzC;AACAG,qBAAa,qCAAmC2C,KAAnC,GAAyC,gBAAzC,GAA4DtB,QAA5D,GAAuE,IAApF;AACA,YAAI1V,QAAQsU,IAAZ,EAAkB;AAChBtU,kBAAQsU,IAAR,CAAaD,SAAb;AACD,SAFD,MAGK,IAAIrU,QAAQyB,GAAZ,EAAiB;AACpBzB,kBAAQyB,GAAR,CAAY4S,SAAZ;AACD;AACD,eAXgC,CAWxB;AACV;AACD;;AAED,QAAI4C,aAAa1C,QAAQC,KAAR,EAAe,CAAC0C,SAAD,EACCC,uBADD,EAECC,QAFD,EAGCD,uBAHD,EAICD,SAJD,CAAf,CAAjB;;AAMA,QAAIne,YAAYke,WAAW,CAAX,CAAhB;AACA,QAAII,UAAUJ,WAAW,CAAX,CAAd;AACA,QAAIle,aAAase,OAAjB,EAA0B;AACxB7C,YAAM3T,KAAN,GAAc,yCAAd;AACA;AACD;;AAEDsT,QAAIK,KAAJ,EAAW8C,eAAX;AACA,QAAIC,cAAcpD,IAAIK,KAAJ,EAAWgD,cAAX,CAAlB;AACA;AACA1C,QAAIN,KAAJ,EAAW,CAAX;AACA,QAAIiD,aAAatD,IAAIK,KAAJ,EAAWkD,aAAX,CAAjB;;AAEA,QAAI,OAAOV,KAAP,KAAiB,WAArB,EAAkC;AAChCA,cAAQxC,MAAMR,IAAN,CAAWvb,MAAX,GAAoB,CAA5B;AACD;AACD+b,UAAMR,IAAN,CAAW9N,IAAX,CAAgB;AACdqJ,UAAIyH,KADU;AAEdW,aAAO5e,SAFO;AAGd6e,WAAKP,OAHS;AAIdQ,gBAAUN,WAJI;AAKdE,kBAAYA;AALE,KAAhB;AAOD;;AAED,WAASD,cAAT,CAAwBhD,KAAxB,EAA+B;AAC7B,QAAI+C,cAAc,EAAlB;AACA,WAAO/C,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAApB,IAAyB+b,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAAlD,EAAwD;AACtD,UAAIiI,WAAWxB,IAAIK,KAAJ,EAAWmC,mBAAX,CAAf;AACAY,kBAAY5B,SAAS,CAAT,CAAZ,IAA2BA,SAAS,CAAT,CAA3B;AACAxB,UAAIK,KAAJ,EAAW8C,eAAX;AACD;AACD,WAAOC,WAAP;AACD;;AAED,WAASG,aAAT,CAAuBlD,KAAvB,EAA8B;AAC5B;AACA,QAAIsD,SAAS,EAACzI,MAAM,UAAP,EAAmB7O,SAAS,EAA5B,EAAgCgP,OAAO,EAAvC,EAA2CuI,SAAS,EAApD,EAAwDC,YAAY,EAApE,EAAwEhW,QAAQ,IAAhF,EAAsFiW,UAAU,EAAhG,EAAoGhT,UAAU,EAA9G,EAAb;AACA,QAAIiT,UAAUJ,MAAd;AACA,QAAIK,gBAAgB,EAApB;AACA,WAAO3D,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAA3B,EAA8B;AAC5B,UAAIid,WAAWR,SAASV,KAAT,CAAf;AACA,UAAIkB,SAASvY,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAA7B,IAAkC,QAAQnC,IAAR,CAAa0a,QAAb,CAAtC,EAA8D;AAC5D,cAD4D,CACrD;AACR;AACD;AACA;AACA,UAAIlB,MAAM9G,IAAN,CAAWjV,MAAX,IAAqB,CAArB,IAA0B+b,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAA5C,IAAoD8G,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAA1E,EAAgF;AAC9EoH,YAAIN,KAAJ,EAAW,CAAX;AACA;AACD;;AAED,UAAI4D,QAAQC,YAAY7D,KAAZ,CAAZ;AACA;AACA,UAAI4D,MAAM/I,IAAN,KAAe,QAAnB,EAA6B;AAC3B6I,gBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACD,OAFD,MAGK,IAAIA,MAAM/I,IAAN,KAAe,UAAnB,EAA+B;AAClC+I,cAAM/I,IAAN,GAAa+I,MAAM5X,OAAnB;AACA;AACA4X,cAAMpW,MAAN,GAAekW,OAAf;AACA,YAAI5gB,EAAEghB,OAAF,CAAUF,MAAM5X,OAAhB,EAAyB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,MAAhB,CAAzB,MAAsD,CAAC,CAA3D,EAA8D;AAC5D,cAAI2X,cAAc1f,MAAd,GAAuB,CAA3B,EAA8B;AAC5Byf,oBAAQjT,QAAR,GAAmBkT,cAAcA,cAAc1f,MAAd,GAAuB,CAArC,CAAnB;AACD;AACDyf,kBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACAF,oBAAUE,KAAV;AACD,SAND,MAOK,IAAIA,MAAM5X,OAAN,KAAkB,IAAlB,IAA0B0X,QAAQ1X,OAAR,KAAoB,MAAlD,EAA0D;AAC7D,cAAI2X,cAAc1f,MAAd,GAAuB,CAA3B,EAA8B;AAC5Byf,oBAAQjT,QAAR,GAAmBkT,cAAcA,cAAc1f,MAAd,GAAuB,CAArC,CAAnB;AACD;AACDyf,kBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACAF,oBAAUE,KAAV;AACD,SANI,MAOA,IAAIA,MAAM5X,OAAN,KAAkB,GAAtB,EAA2B;AAC9B4X,gBAAM5I,KAAN,GAAc4I,MAAMJ,UAApB;AACA,cAAIG,cAAc1f,MAAd,GAAuB,CAA3B,EAA8B;AAC5Byf,oBAAQjT,QAAR,GAAmBkT,cAAcA,cAAc1f,MAAd,GAAuB,CAArC,CAAnB;AACD;AACDyf,kBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACAF,oBAAUE,KAAV;AACD,SAPI,MAQA,IAAIA,MAAM5X,OAAN,KAAkB,GAAtB,EAA2B;AAC9B4X,gBAAM5I,KAAN,GAAc4I,MAAMJ,UAApB;AACA,cAAIG,cAAc1f,MAAd,GAAuB,CAA3B,EAA8B;AAC5Byf,oBAAQjT,QAAR,GAAmBkT,cAAcA,cAAc1f,MAAd,GAAuB,CAArC,CAAnB;AACD;AACDyf,kBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACAF,oBAAUE,KAAV;AACD,SAPI,MAQA,IAAIA,MAAM5X,OAAN,KAAkB,MAAtB,EAA8B;AACjC2X,wBAAcjS,IAAd,CAAmBkS,MAAMJ,UAAzB;AACA,cAAIG,cAAc1f,MAAd,GAAuB,CAA3B,EAA8B;AAC5Byf,oBAAQjT,QAAR,GAAmBkT,cAAcA,cAAc1f,MAAd,GAAuB,CAArC,CAAnB;AACD;AACDyf,kBAAQD,QAAR,CAAiB/R,IAAjB,CAAsBkS,KAAtB;AACAF,oBAAUE,KAAV;AACD;AACF,OA1CI,MA2CA,IAAIA,MAAM/I,IAAN,KAAe,QAAnB,EAA6B;AAChC,YAAI+I,MAAM5X,OAAN,KAAkB0X,QAAQ7I,IAA1B,IAAkC/X,EAAEghB,OAAF,CAAUF,MAAM5X,OAAhB,EAAyB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,MAArB,EAA6B,IAA7B,EAAmC,GAAnC,CAAzB,MAAsE,CAAC,CAA7G,EAAgH;AAC9G;AACA;AACA0X,oBAAUA,QAAQlW,MAAlB;AACD,SAJD,MAKK,IAAIoW,MAAM5X,OAAN,KAAkB,MAAlB,IAA4B0X,QAAQ7I,IAAR,KAAiB,MAAjD,EAAyD;AAC5D6I,oBAAUA,QAAQlW,MAAlB;AACAmW,wBAAcI,GAAd;AACD,SAHI,MAIA,IAAIH,MAAM5X,OAAN,KAAkB,MAAlB,IAA4B0X,QAAQ7I,IAAR,KAAiB,IAAjD,EAAuD;AAC1D6I,oBAAUA,QAAQlW,MAAR,CAAeA,MAAzB;AACD;AACF,OAbI,MAcA,IAAIoW,MAAM/I,IAAN,KAAe,cAAnB,EAAmC;AACtC,YAAImJ,YAAY;AACd9K,gBAAM0K,MAAM5I,KADE;AAEd3O,iBAAO,IAFO;AAGdkT,oBAAU,EAHI;AAIdC,gBAAM,EAJQ;AAKdC,gBAAM,CALQ;AAMdC,kBAAQ;AANM,SAAhB;AAQA,YAAI;AACF,cAAIuE,SAAStE,IAAIqE,SAAJ,EAAetB,SAAf,CAAb;AACA,cAAIsB,UAAU9K,IAAV,CAAejV,MAAf,KAA0B,CAA9B,EAAiC;AAC/B2f,kBAAM5I,KAAN,GAAciJ,MAAd;AACAP,oBAAQhS,IAAR,CAAakS,KAAb;AACD;AACF,SAND,CAOA,OAAO9P,GAAP,EAAY,CACX;AACF;AACF;AACD,WAAOwP,MAAP;AACD;;AAED;AACA,WAASO,WAAT,CAAqB7D,KAArB,EAA4B;AAC1B,QAAIkE,aAAa,MAAjB;AACA,QAAIZ,SAAS,EAAb;AACA,QAAIa,SAAS,EAAb;AACA,QAAIP,QAAQ,EAAC/I,MAAM,EAAP,EAAW7O,SAAS,EAApB,EAAwBgP,OAAO,EAA/B,EAAmCuI,SAAS,EAA5C,EAAgDC,YAAY,EAA5D,EAAgEC,UAAU,EAA1E,EAAZ;;AAEA,WAAO,IAAP,EAAa;AACX,UAAI5C,CAAJ;AACA;AACA,UAAIb,MAAM9G,IAAN,CAAWjV,MAAX,IAAqB,CAArB,IAA0B+b,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAA5C,IAAoD8G,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAA1E,EAAgF;AAC9E2H,YAAI,MAAJ;AACD,OAFD,MAGK,IAAIb,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAAxB,EAA2B;AAC9B4c,YAAIb,MAAM9G,IAAN,CAAW,CAAX,CAAJ;AACD,OAFI,MAGA;AACH;AACA2H,YAAI,MAAJ;AACD;AACD,UAAIqD,eAAe,MAAnB,EAA2B;AACzB,YAAIrD,MAAM,GAAV,EAAe;AACbsD,mBAAS,GAAT;AACAD,uBAAa,QAAb;AACD,SAHD,MAIK,IAAIrD,MAAM,GAAV,EAAe;AAClB,cAAIyC,OAAOrf,MAAP,KAAkB,CAAtB,EAAyB;AACvBigB,yBAAa,KAAb;AACD,WAFD,MAGK;AACHN,kBAAM/I,IAAN,GAAa,QAAb;AACA+I,kBAAM5I,KAAN,GAAcsI,OAAOc,IAAP,CAAY,EAAZ,CAAd;AACA,mBAAOR,KAAP;AACD;AACF,SATI,MAUA,IAAI/C,MAAM,MAAV,EAAoB;AACvB,iBAAO,EAAChG,MAAM,QAAP,EAAiBG,OAAOsI,OAAOc,IAAP,CAAY,EAAZ,CAAxB,EAAP;AACD,SAFI,MAGA;AACHd,iBAAO5R,IAAP,CAAYmP,CAAZ;AACD;AACF,OArBD,MAsBK,IAAIqD,eAAe,QAAnB,EAA6B;AAChC,YAAIrD,MAAM,GAAV,EAAe;AACbyC,iBAAO5R,IAAP,CAAYyS,MAAZ;AACAA,mBAAS,GAAT;AACD,SAHD,MAIK,IAAItD,EAAEwD,KAAF,CAAQ,UAAR,CAAJ,EAAyB;AAC5BF,oBAAUtD,CAAV;AACD,SAFI,MAGA,IAAIA,MAAM,GAAV,EAAe;AAClB,cAAIsD,WAAW,MAAf,EAAuB;AACrBb,mBAAO5R,IAAP,CAAY,GAAZ;AACD,WAFD,MAGK,IAAIyS,WAAW,KAAf,EAAsB;AACzBb,mBAAO5R,IAAP,CAAY,GAAZ;AACD,WAFI,MAGA,IAAIyS,WAAW,KAAf,EAAsB;AACzBb,mBAAO5R,IAAP,CAAY,GAAZ;AACD,WAFI,MAGA,IAAIyS,WAAW,MAAf,EAAuB;AAC1Bb,mBAAO5R,IAAP,CAAY,QAAZ;AACD,WAFI,MAGA,IAAIyS,WAAW,MAAf,EAAuB;AAC1Bb,mBAAO5R,IAAP,CAAY,QAAZ;AACD,WAFI,MAGA,IAAIyS,WAAW,OAAf,EAAwB;AAC3Bb,mBAAO5R,IAAP,CAAY,MAAZ;AACD,WAFI,MAGA;AACH4R,mBAAO5R,IAAP,CAAYyS,MAAZ;AACAb,mBAAO5R,IAAP,CAAY,GAAZ;AACD;AACDwS,uBAAa,MAAb;AACD,SAxBI,MAyBA,IAAIrD,MAAM,GAAN,IAAaA,MAAM,MAAvB,EAAiC;AACpCyC,iBAAO5R,IAAP,CAAYyS,MAAZ;AACAP,gBAAM/I,IAAN,GAAa,QAAb;AACA+I,gBAAM5I,KAAN,GAAcsI,OAAOc,IAAP,CAAY,EAAZ,CAAd;AACA,iBAAOR,KAAP;AACD,SALI,MAMA,IAAI/C,MAAM,IAAN,IAAcA,MAAM,IAApB,IAA4BA,MAAM,IAAlC,IAA8CA,MAAM,GAAxD,EAA6D;AAAE;AAClEyC,iBAAO5R,IAAP,CAAYyS,MAAZ;AACAP,gBAAM/I,IAAN,GAAa,QAAb;AACA+I,gBAAM5I,KAAN,GAAcsI,OAAOc,IAAP,CAAY,EAAZ,CAAd;AACA,iBAAOR,KAAP;AACD,SALI,MAMA;AACHN,iBAAO5R,IAAP,CAAYyS,MAAZ;AACAD,uBAAa,MAAb;AACD;AACF,OAjDI,MAkDA,IAAIA,eAAe,KAAnB,EAA0B;AAC7B,YAAIrD,MAAM,IAAN,IAAcA,MAAM,IAApB,IAA4BA,MAAM,IAAlC,IAA8CA,MAAM,GAAxD,EAA6D;AAC3DqD,uBAAa,oBAAb;AACD,SAFD,MAGK,IAAIrD,MAAM,GAAV,EAAe;AAClBqD,uBAAa,eAAb;AACD,SAFI,MAGA,IAAIrD,MAAM,GAAV,EAAe;AAClBqD,uBAAa,QAAb;AACD,SAFI,MAGA,IAAIrD,EAAEwD,KAAF,CAAQ,OAAR,CAAJ,EAAsB;AACzBH,uBAAa,cAAb;AACAZ,iBAAO5R,IAAP,CAAYmP,CAAZ;AACD,SAHI,MAIA,IAAIA,MAAM,GAAV,EAAe;AAClBP,cAAIN,KAAJ,EAAW,CAAX;AACA;AACD,SAHI,MAIA,IAAIa,MAAM,MAAV,EAAoB;AACvB+C,gBAAM5X,OAAN,GAAgB,EAAhB;AACA4X,gBAAM/I,IAAN,GAAa,UAAb;AACA,iBAAO+I,KAAP;AACD,SAJI,MAKA;AACHN,iBAAO5R,IAAP,CAAYmP,CAAZ;AACAqD,uBAAa,UAAb;AACD;AACF,OA3BI,MA4BA,IAAIA,eAAe,UAAnB,EAA+B;AAClC,YAAIrD,MAAM,IAAN,IAAcA,MAAM,IAApB,IAAgCA,MAAM,GAA1C,EAA+C;AAC7CqD,uBAAa,oBAAb;AACD,SAFD,MAGK,IAAIrD,MAAM,IAAV,EAAgB;AACnBsD,mBAAStD,CAAT;AACAqD,uBAAa,oBAAb;AACD,SAHI,MAIA,IAAIrD,MAAM,GAAV,EAAe;AAClBqD,uBAAa,eAAb;AACD,SAFI,MAGA,IAAIrD,MAAM,GAAV,EAAe;AAClBP,cAAIN,KAAJ,EAAW,CAAX;AACA4D,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACAR,gBAAM/I,IAAN,GAAa,UAAb;AACA,iBAAO+I,KAAP;AACD,SALI,MAMA,IAAI/C,MAAM,MAAV,EAAoB;AACvB+C,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACAR,gBAAM/I,IAAN,GAAa,UAAb;AACA,iBAAO+I,KAAP;AACD,SAJI,MAKA;AACHN,iBAAO5R,IAAP,CAAYmP,CAAZ;AACD;AACF,OAzBI,MA0BA,IAAIqD,eAAe,eAAnB,EAAoC;AACvC,YAAIrD,MAAM,IAAN,IAAcA,MAAM,IAApB,IAAgCA,MAAM,GAA1C,EAA+C;AAC7C+C,gBAAML,OAAN,CAAc7R,IAAd,CAAmByS,MAAnB;AACAA,mBAAS,EAAT;AACAD,uBAAa,oBAAb;AACD,SAJD,MAKK,IAAIrD,MAAM,IAAV,EAAgB;AACnB+C,gBAAML,OAAN,CAAc7R,IAAd,CAAmByS,MAAnB;AACAA,mBAAStD,CAAT;AACAqD,uBAAa,oBAAb;AACD,SAJI,MAKA,IAAIrD,MAAM,GAAV,EAAe;AAClB+C,gBAAML,OAAN,CAAc7R,IAAd,CAAmByS,MAAnB;AACAA,mBAAS,EAAT;AACD,SAHI,MAIA,IAAItD,MAAM,GAAV,EAAe;AAClBP,cAAIN,KAAJ,EAAW,CAAX;AACA4D,gBAAML,OAAN,CAAc7R,IAAd,CAAmByS,MAAnB;AACAP,gBAAM/I,IAAN,GAAa,UAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACA,iBAAOR,KAAP;AACD,SANI,MAOA,IAAI/C,MAAM,MAAV,EAAoB;AACvB+C,gBAAML,OAAN,CAAc7R,IAAd,CAAmByS,MAAnB;AACAP,gBAAM/I,IAAN,GAAa,UAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACA,iBAAOR,KAAP;AACD,SALI,MAMA;AACHO,oBAAU,GAAV;AACD;AACF,OA/BI,MAgCA,IAAID,eAAe,oBAAnB,EAAyC;AAC5C,YAAIrD,MAAM,GAAV,EAAe;AACbP,cAAIN,KAAJ,EAAW,CAAX;AACAmE,mBAASrhB,EAAEwf,IAAF,CAAO6B,MAAP,EAAezf,OAAf,CAAuB,IAAvB,EAA6B,GAA7B,CAAT;AACAkf,gBAAM/I,IAAN,GAAa,UAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACAR,gBAAMJ,UAAN,GAAmBW,MAAnB;AACA,iBAAOP,KAAP;AACD,SAPD,MAQK,IAAI/C,MAAM,MAAV,EAAoB;AACvBsD,mBAASrhB,EAAEwf,IAAF,CAAO6B,MAAP,EAAezf,OAAf,CAAuB,IAAvB,EAA6B,GAA7B,CAAT;AACAkf,gBAAM/I,IAAN,GAAa,UAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACAR,gBAAMJ,UAAN,GAAmBW,MAAnB;AACA,iBAAOP,KAAP;AACD,SANI,MAOA;AACHO,oBAAUtD,CAAV;AACD;AACF,OAnBI,MAoBA,IAAIqD,eAAe,QAAnB,EAA6B;AAChC,YAAIrD,MAAM,GAAV,EAAe;AACbP,cAAIN,KAAJ,EAAW,CAAX;AACA4D,gBAAM/I,IAAN,GAAa,QAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACA,iBAAOR,KAAP;AACD,SALD,MAMK,IAAI/C,MAAM,MAAV,EAAoB;AACvB+C,gBAAM/I,IAAN,GAAa,QAAb;AACA+I,gBAAM5X,OAAN,GAAgBsX,OAAOc,IAAP,CAAY,EAAZ,CAAhB;AACA,iBAAOR,KAAP;AACD,SAJI,MAKA;AACHN,iBAAO5R,IAAP,CAAYmP,CAAZ;AACD;AACF,OAfI,MAgBA,IAAIqD,eAAe,cAAnB,EAAmC;AACtC,YAAIrD,MAAM,GAAV,EAAe;AACbP,cAAIN,KAAJ,EAAW,CAAX;AACA4D,gBAAM/I,IAAN,GAAa,cAAb;AACA+I,gBAAM9I,IAAN,GAAawI,OAAOc,IAAP,CAAY,EAAZ,CAAb;AACA,iBAAOR,KAAP;AACD,SALD,MAMK,IAAI/C,MAAM,MAAV,EAAoB;AACvB+C,gBAAM/I,IAAN,GAAa,cAAb;AACA+I,gBAAM9I,IAAN,GAAawI,OAAOc,IAAP,CAAY,EAAZ,CAAb;AACA,iBAAOR,KAAP;AACD,SAJI,MAKA;AACHN,iBAAO5R,IAAP,CAAYmP,CAAZ;AACD;AACF,OAfI,MAgBA;AACH,cAAM,wBAAwBqD,UAA9B;AACD;;AAED5D,UAAIN,KAAJ,EAAW,CAAX;AACD;AACF;;AAED,WAASoC,UAAT,CAAoBpC,KAApB,EAA2B;AACzB;AACA,QAAIsE,WAAW9D,QAAQR,KAAR,CAAf;AACA,QAAIsE,SAAS3b,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAAjC,EAAoC;AAClCqX,YAAM3T,KAAN,GAAc,mCAAd;AACA;AACD;AACD,WAAO,IAAP,EAAa;AACX,UAAI6U,WAAWR,SAASV,KAAT,CAAf;AACA,UAAIld,EAAEwf,IAAF,CAAOpB,QAAP,EAAiBjd,MAAjB,KAA4B,CAAhC,EAAmC;AACjC;AACA;AACD,OAHD,MAIK,IAAIid,SAASvY,OAAT,CAAiB,KAAjB,MAA4B,CAAC,CAAjC,EAAoC;AACvCqX,cAAM3T,KAAN,GAAc,iCAAd;AACA;AACD,OAHI,MAIA;AACHmU,gBAAQR,KAAR;AACD;AACF;AACF;;AAED;AACA,WAASW,cAAT,CAAwBX,KAAxB,EAA+B;AAC7B,QAAIA,MAAM9G,IAAN,CAAW,CAAX,MAAkB,QAAtB,EAAgC;AAC9BoH,UAAIN,KAAJ,EAAW,CAAX;AACD;AAEF;;AAED;AACA,WAASY,YAAT,CAAsBZ,KAAtB,EAA6B;AAC3B,QAAIA,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB,CAArB,EAAuB,CAAvB,MAA8B,QAAlC,EAA4C;AAC1CyX,UAAIN,KAAJ,EAAW,CAAX;AACD,KAFD,MAGK;AACHA,YAAM3T,KAAN,GAAc,oBAAd;AACD;AACF;;AAED,WAASuW,QAAT,CAAkB5C,KAAlB,EAAyB;AACvB,QAAIA,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAApB,IAAyB+b,MAAM9G,IAAN,CAAWrQ,SAAX,CAAqB,CAArB,EAAuB,CAAvB,MAA8B,KAA3D,EAAkE;AAChEmX,YAAM3T,KAAN,GAAc,aAAd;AACD,KAFD,MAGK;AACHiU,UAAIN,KAAJ,EAAW,CAAX;AACD;AACF;;AAED,WAASuE,mBAAT,CAA6BvE,KAA7B,EAAoC;AAClC,QAAIA,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAAlB,IAA0B8G,MAAM9G,IAAN,CAAW,CAAX,MAAkB,GAAhD,EAAqD;AACnDoH,UAAIN,KAAJ,EAAW,CAAX;AACD,KAFD,MAGK;AACHA,YAAM3T,KAAN,GAAc,gBAAd;AACD;AACF;;AAED,WAASyW,eAAT,CAAyB9C,KAAzB,EAAgC;AAC9B,WAAOA,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAAlB,IAA0B8G,MAAM9G,IAAN,CAAW,CAAX,MAAkB,GAAnD,EAAwD;AACtDoH,UAAIN,KAAJ,EAAW,CAAX;AACD;AACF;;AAED,WAAS2C,uBAAT,CAAiC3C,KAAjC,EAAwC;AACtC,QAAIwE,WAAW,CAAf;AACA,WAAOxE,MAAM9G,IAAN,CAAW,CAAX,MAAkB,IAAlB,IAA0B8G,MAAM9G,IAAN,CAAW,CAAX,MAAkB,GAAnD,EAAwD;AACtDoH,UAAIN,KAAJ,EAAW,CAAX;AACAwE,kBAAY,CAAZ;AACD;AACD,QAAIA,aAAa,CAAjB,EAAoB;AAClBxE,YAAM3T,KAAN,GAAc,gBAAd;AACD;AACF;;AAED,WAASyU,oBAAT,CAA8Bd,KAA9B,EAAqC;AACnC,QAAIS,UAAUT,MAAM9G,IAAN,CAAWvQ,OAAX,CAAmB,IAAnB,CAAd;AACA,QAAI8X,YAAY,CAAC,CAAjB,EAAoB;AAClBT,YAAM3T,KAAN,GAAc,cAAd;AACD,KAFD,MAGK;AACHiU,UAAIN,KAAJ,EAAWS,UAAU,CAArB;AACD;AACF;;AAED,WAAS4B,aAAT,CAAuBrC,KAAvB,EAA8B;AAC5B,WAAOA,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAA3B,EAA8B;AAC5B,UAAIid,WAAWR,SAASV,KAAT,CAAf;AACA,UAAIld,EAAEwf,IAAF,CAAOpB,QAAP,EAAiBjd,MAAjB,KAA4B,CAAhC,EAAmC;AACjCuc,gBAAQR,KAAR;AACD,OAFD,MAGK;AACH;AACD;AACF;AACF;;AAED;AACA,WAASgB,qBAAT,CAA+BhB,KAA/B,EAAsC;AACpC,QAAIyE,aAAa,CAAjB;AACA,WAAOzE,MAAM9G,IAAN,CAAWjV,MAAX,GAAoB,CAA3B,EAA8B;AAC5B,UAAIid,WAAWR,SAASV,KAAT,CAAf;AACA,UAAIld,EAAEwf,IAAF,CAAOpB,QAAP,EAAiBjd,MAAjB,KAA4B,CAAhC,EAAmC;AACjCuc,gBAAQR,KAAR;AACAyE,sBAAc,CAAd;AACD,OAHD,MAIK;AACH;AACD;AACF;AACD,QAAIA,eAAe,CAAnB,EAAsB;AACpBzE,YAAM3T,KAAN,GAAc,qBAAd;AACD;AACF;;AAED,WAASqW,SAAT,CAAmB1C,KAAnB,EAA0B;AACxB,QAAI0E,YAAYrD,mBAAmBrB,MAAM9G,IAAzB,CAAhB;AACA,QAAIwL,cAAc,CAAC,CAAnB,EAAsB;AACpB1E,YAAM3T,KAAN,CAAY,iBAAZ;AACA;AACD;AACD,QAAIsY,YAAYrE,IAAIN,KAAJ,EAAW0E,SAAX,CAAhB;;AAEA,QAAIxE,UAAU,oDAAoD0E,IAApD,CAAyDD,SAAzD,CAAd;;AAEA,QAAI,CAACzE,OAAL,EAAc;AACZF,YAAM3T,KAAN,GAAc,2BAAd;AACA;AACD;AACD,QAAIwY,OAAO,CAAX;AACA,QAAIC,QAAQ5E,QAAQ,CAAR,CAAZ;AACA,QAAI6E,UAAU7E,QAAQ,CAAR,CAAd;;AAEA,QAAI6E,OAAJ,EAAa;AACX,UAAIrY,SAASqY,OAAT,EAAkB,EAAlB,IAAwB,EAA5B,EAAgC;AAC9B/E,cAAM3T,KAAN,GAAc,sBAAd;AACA;AACD;AACD,UAAIyY,KAAJ,EAAW;AACTD,gBAAQ,OAAOnY,SAASoY,KAAT,EAAgB,EAAhB,CAAf;AACD;AACDD,cAAQ,KAAKnY,SAASqY,OAAT,EAAkB,EAAlB,CAAb;AACA,UAAIC,UAAU9E,QAAQ,CAAR,CAAd;AACA,UAAIxT,SAASsY,OAAT,EAAkB,EAAlB,IAAwB,EAA5B,EAAgC;AAC9BhF,cAAM3T,KAAN,GAAc,sBAAd;AACA;AACD;;AAEDwY,cAAQnY,SAASsY,OAAT,EAAkB,EAAlB,CAAR;AACAH,cAAQnY,SAASwT,QAAQ,CAAR,CAAT,EAAqB,EAArB,IAA2B,IAAnC;AACD,KAjBD,MAkBK;AACH2E,cAAQnY,SAASwT,QAAQ,CAAR,CAAT,EAAqB,EAArB,CAAR;AACA2E,cAAQnY,SAASwT,QAAQ,CAAR,CAAT,EAAqB,EAArB,IAA2B,IAAnC;AACD;;AAED,WAAO2E,IAAP;AACD;AACF,CA5vBD,EA4vBG3c,MA5vBH;;AA8vBA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBkG,gBAArB,GAAwC,YAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIxG,OAAJ,EAAa2d,eAAb,EAA8BtX,WAA9B,EAA2C1E,CAA3C;AACA3B,cAAU,IAAV;;AAEA;AACA;AACA;AACA;AACA,SAAK+J,eAAL,GAAuB,KAAK1F,MAAL,CAAYuZ,IAAZ,CAAiB,0CAAjB,EAA6D1X,MAA7D,EAAvB;AACA,SAAK2X,QAAL,GAAgB,KAAK9T,eAAL,CAAqB6T,IAArB,CAA0B,0BAA1B,EAAsD1X,MAAtD,EAAhB;AACA,SAAK4X,YAAL,GAAoB,KAAKD,QAAL,CAAcD,IAAd,CAAmB,kCAAnB,EAAuD1X,MAAvD,EAApB;;AAEA,SAAK4X,YAAL,CAAkBxb,GAAlB,CAAsB;AACpB,mBAAa,KAAK6C,cAAL,GAAsB;AADf,KAAtB;;AAIA,SAAK4Y,sBAAL;;AAEA;AACA;AACA,QAAI,KAAKvZ,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,UAAI,KAAK5F,QAAL,IAAiB,MAAjB,IAA2B,KAAK4B,MAAL,KAAgB,SAA/C,EAA0D;AACxD,aAAKwd,mBAAL;AACD;;AAED;AACA;AACAL,wBAAkBniB,EAAE,OAAF,EAAU;AAC1B,iBAAU;AADgB,OAAV,CAAlB;AAGA,WAAKyiB,gBAAL,GAAwB,KAAKlU,eAAL,CAAqB6T,IAArB,CAA0BD,eAA1B,EAA2CzX,MAA3C,EAAxB;AACD;;AAED,SAAKgY,uBAAL;AACA,SAAKC,yBAAL;;AAEA,QAAI,KAAKxgB,cAAT,EAAyB;AACvB,UAAI,KAAKA,cAAL,KAAwB,OAAxB,IAAmC,KAAKA,cAAL,KAAwB,UAA/D,EAA2E;AACzE,aAAKygB,oBAAL;AACD,OAFD,MAGK,IAAI,KAAKzgB,cAAL,KAAwB,QAA5B,EAAsC;AACzC,aAAK0gB,qBAAL;AACD;AACD,WAAKC,uBAAL;AACD;;AAED,SAAKC,WAAL;AACA,SAAKC,cAAL;AACD,GA7DD;;AA+DAxiB,aAAWsE,SAAX,CAAqByd,sBAArB,GAA8C,YAAY;AACxD;AACA;AACA;AACA,QAAIU,WAAJ;AACA,SAAKC,kBAAL,GAA0B,KAAKC,mBAAL,CAAyB,KAAKd,QAA9B,CAA1B,CALwD,CAKW;AACnEY,kBAAc,MAAM,KAAKC,kBAAL,CAAwBvd,QAAxB,EAApB;AACA,SAAKyd,WAAL,GAAmBpjB,EAAE,MAAMijB,WAAN,GAAoB,GAAtB,CAAnB;AACA,SAAKZ,QAAL,CAAcgB,OAAd,CAAsB,KAAKD,WAA3B;AACA,SAAKA,WAAL,CAAiBnN,QAAjB,CAA0B,gBAA1B;AACA,SAAKmN,WAAL,CAAiBhN,IAAjB,CAAsB,KAAK7R,EAAL,CAAQ+e,aAA9B;AACD,GAXD;;AAaA9iB,aAAWsE,SAAX,CAAqB0d,mBAArB,GAA2C,YAAY;AACrD,SAAKe,cAAL,GAAsBvjB,EAAE,UAAF,EAAc;AAClC,eAAS,gCADyB;AAElC,qBAAe,IAFmB;AAGlC,kBAAY,CAAC;AAHqB,KAAd,CAAtB;;AAMA,QAAIwE,UAAU,IAAd;AACA,SAAK+e,cAAL,CAAoBnJ,KAApB,CAA0B,YAAY;AACpC5V,cAAQgf,UAAR;AACD,KAFD;;AAIA,SAAKjV,eAAL,CAAqB8U,OAArB,CAA6B,KAAKE,cAAlC;AACD,GAbD;;AAeA/iB,aAAWsE,SAAX,CAAqB4d,uBAArB,GAA+C,YAAY;AACzD,SAAKe,UAAL,GAAkBzjB,EAAE,OAAF,EAAW;AAC3B,eAAU,aADiB;AAE3B,cAAS,QAFkB;AAG3B,oBAAe,KAAKgJ,SAAL,GAAiB;AAHL,KAAX,CAAlB;AAKA,SAAKya,UAAL,CAAgBxN,QAAhB,CAAyB,UAAQ,KAAKjN,SAAtC;;AAEA;AACA;AACA;AACA,SAAK0a,cAAL,GAAsB1jB,EAAE,OAAF,EAAU;AAC9B,eAAU,kBADoB;AAE9B,mBAAc,WAFgB;AAG9B,qBAAe;AAHe,KAAV,CAAtB;;AAMA,SAAK2jB,cAAL,GAAsB3jB,EAAE,OAAF,EAAU;AAC9B,eAAU;AADoB,KAAV,CAAtB;AAGA,SAAK2jB,cAAL,CAAoB1N,QAApB,CAA6B,UAAU,KAAKtP,SAAf,GAA2B,WAAxD;;AAEA,SAAKid,aAAL,GAAqB5jB,EAAE,OAAF,EAAU;AAC7B,eAAU;AADmB,KAAV,CAArB;AAGA,SAAK6jB,MAAL,GAAc7jB,EAAE,QAAF,EAAW;AACvB,eAAU;AADa,KAAX,CAAd;AAGA,SAAK8jB,qBAAL,GAA6B9jB,EAAE,QAAF,EAAW;AACtC,eAAS,kBAD6B;AAEtCoW,YAAM;AAFgC,KAAX,CAA7B;AAIA,SAAK2N,kBAAL,GAA0B/jB,EAAE,QAAF,EAAW;AACnC,eAAS;AAD0B,KAAX,CAA1B;AAGA,SAAK6jB,MAAL,CAAYhd,MAAZ,CAAmB,KAAKid,qBAAxB,EAA+Cjd,MAA/C,CAAsD,KAAKkd,kBAA3D;;AAEA,SAAKC,MAAL,GAAchkB,EAAE,QAAF,EAAW;AACvB,eAAU,YADa;AAEvB,mBAAc;AAFS,KAAX,EAGXoW,IAHW,CAGN,KAAK7R,EAAL,CAAQ0f,KAAR,GAAgB,MAHV,CAAd;;AAKA,SAAKC,OAAL,GAAelkB,EAAE,QAAF,EAAW;AACxB,eAAU,aADc;AAExB,mBAAc;AAFU,KAAX,CAAf;;AAKA;AACA,SAAK4jB,aAAL,CAAmB/c,MAAnB,CAA0B,KAAKgd,MAA/B,EAAuC,KAAKG,MAA5C,EAAoD,KAAKE,OAAzD;AACA,SAAKT,UAAL,CAAgB5c,MAAhB,CAAuB,KAAK6c,cAA5B,EAA4C,KAAKC,cAAjD,EAAiE,KAAKC,aAAtE;AACA,SAAKvB,QAAL,CAAcxb,MAAd,CAAqB,KAAK4c,UAA1B;AACD,GAnDD;;AAqDAjjB,aAAWsE,SAAX,CAAqB6d,yBAArB,GAAiD,YAAY;;AAE3D;AACA;AACA,SAAK7G,QAAL,GAAgB9b,EAAE,OAAF,EAAU;AACxB,eAAS,mBADe;AAExB,mBAAa,WAFW;AAGxB,qBAAe;AAHS,KAAV,CAAhB;AAKA;AACA;AACA,SAAK8b,QAAL,CAAclV,IAAd;AACA,SAAKyb,QAAL,CAAcxb,MAAd,CAAqB,KAAKiV,QAA1B;AACD,GAbD;;AAeAtb,aAAWsE,SAAX,CAAqBqf,eAArB,GAAuC,UAASvJ,KAAT,EAAgB;;AAErD;AACA;AACA;AACA,QAAIA,UAAU,YAAd,EAA4B;AAC1B,aAAO,GAAP;AACD,KAFD,MAGK,IAAIA,UAAU,MAAd,EAAsB;AACzB,aAAO,GAAP;AACD;AACF,GAXD;;AAaApa,aAAWsE,SAAX,CAAqBsf,uBAArB,GAA+C,UAAUxJ,KAAV,EAAiBvL,KAAjB,EAAwB;;AAErE;;AAEA,QAAIyB,MAAJ,EAAYuT,SAAZ,EAAuBlT,OAAvB,EAAgCmT,OAAhC,EAAyClT,SAAzC,EAAoDmT,gBAApD,EAAsEC,SAAtE,EAAiFC,MAAjF;;AAEA3T,aAAS,KAAKL,SAAL,EAAT;AACA,QAAImK,UAAU,YAAd,EAA4B;AAC1BzJ,gBAAU,KAAKI,eAAf;AACA,UAAI,OAAOT,OAAOD,UAAd,KAA6B,WAAjC,EAA8C;AAC5CwT,oBAAYvT,OAAOD,UAAnB;AACD;AACF,KALD,MAMK,IAAI+J,UAAU,MAAd,EAAsB;AACzBzJ,gBAAU,KAAKQ,WAAf;AACA,UAAI,OAAOb,OAAOD,UAAd,KAA6B,WAAjC,EAA8C;AAC5CwT,oBAAYvT,OAAOF,IAAnB;AACD;AACF;AACD,QAAI,OAAOyT,SAAP,KAAqB,WAArB,IAAoC,CAAErkB,EAAE0kB,aAAF,CAAgBL,SAAhB,CAA1C,EAAuE;AACrE;AACAlT,cAAQrK,GAAR,CAAY;AACV,oBAAYud,UAAU,UAAV,CADF;AAEV,iBAASA,UAAU,OAAV,CAFC;AAGV,mBAAWA,UAAU,QAAV;AAHD,OAAZ;AAKA,UAAIA,UAAU,UAAV,MAA0B,UAA9B,EAA0C;AACxClT,gBAAQrK,GAAR,CAAY;AACV,iBAAOud,UAAU,KAAV,CADG;AAEV,kBAAQA,UAAU,MAAV;AAFE,SAAZ;AAID;AACD;AACA,WAAKM,YAAL,CAAkB/J,KAAlB;AACD,KAfD,MAgBK;AACH;AACAxJ,kBAAY,KAAKwT,kBAAL,CAAwBhK,KAAxB,EAA+BvL,KAA/B,CAAZ;AACA,UAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;AAChCA,gBAAQ,KAAK8U,eAAL,CAAqBvJ,KAArB,CAAR;AACD;AACDzJ,cAAQrK,GAAR,CAAY;AACV,oBAAYsK,UAAU,CAAV,CADF;AAEV,iBAAS/B,KAFC;AAGV,mBAAW+B,UAAU,CAAV;AAHD,OAAZ;AAKA,UAAIA,UAAU,CAAV,MAAiB,UAArB,EAAiC;AAC/BD,gBAAQrK,GAAR,CAAY;AACV,iBAAOsK,UAAU,CAAV,IAAe,IADZ;AAEV,kBAAQA,UAAU,CAAV,IAAe;AAFb,SAAZ;AAID;AACF;AACF,GArDD;;AAuDA5Q,aAAWsE,SAAX,CAAqB8f,kBAArB,GAA0C,UAAUC,YAAV,EAAwBC,WAAxB,EAAqC;;AAE7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIC,GAAJ,EAASvT,QAAT,EAAmBwT,SAAnB,EAA8BC,UAA9B,EAA0CC,UAA1C,EAAsDC,OAAtD,EAA+DC,QAA/D,EACGC,WADH,EACgBC,gBADhB,EACkCb,MADlC;;AAGA,QAAI,OAAOK,WAAP,KAAuB,WAA3B,EAAwC;AACtCA,oBAAc,KAAKX,eAAL,CAAqBU,YAArB,CAAd;AACD;;AAEDE,UAAM,CAAN,CAnB6E,CAmBpE;;AAETvT,eAAW,EAAX,CArB6E,CAqB9D;;AAEfwT,gBAAY,KAAK3C,QAAL,CAAchT,KAAd,EAAZ;AACA4V,iBAAa,KAAK5C,QAAL,CAAc7S,MAAd,EAAb;AACA0V,iBAAa,KAAK7C,QAAL,CAAckD,MAAd,EAAb;AACAJ,cAAUD,WAAWzT,GAArB;AACA2T,eAAWF,WAAWxT,IAAtB;AACA2T,kBAAcrlB,EAAES,MAAF,EAAU4O,KAAV,EAAd;AACAiW,uBAAmB,CAAnB,CA7B6E,CA6BvD;;AAEtB,QAAIT,iBAAiB,YAArB,EAAmC;AACjC,UAAI,OAAO,KAAKlT,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C,YAAI,KAAKA,WAAL,CAAiB5I,EAAjB,CAAoB,UAApB,CAAJ,EAAqC;AACnCuc,6BAAmB,KAAK3T,WAAL,CAAiBtC,KAAjB,KAA2B0V,GAA9C;AACD;AACF;AACF,KAND,MAOK,IAAIF,iBAAiB,MAArB,EAA6B;AAChC,UAAI,OAAO,KAAKtT,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,YAAI,KAAKA,eAAL,CAAqBxI,EAArB,CAAwB,UAAxB,CAAJ,EAAyC;AACvCuc,6BAAmB,KAAK/T,eAAL,CAAqBlC,KAArB,KAA+B0V,GAAlD;AACD;AACF;AACF;AACD,QAAID,cAAeO,eAAeD,WAAWJ,SAAX,GAAuBD,GAAvB,GAA6BO,gBAA5C,CAAnB,EAAmF;AACjF;AACA9T,eAAS,CAAT,IAAc,UAAd;AACAA,eAAS,CAAT,IAAc,CAAd;AACAA,eAAS,CAAT,IAAcwT,YAAYM,gBAAZ,GAA+BP,GAA7C;AACD,KALD,MAMK,IAAID,cAAcC,GAAd,GAAoBK,QAAxB,EAAkC;AACrC;AACA5T,eAAS,CAAT,IAAc,UAAd;AACAA,eAAS,CAAT,IAAc,CAAd;AACAA,eAAS,CAAT,IAAc4T,WAAWN,WAAX,GAAyBC,GAAvC;AACD,KALI,MAMA;AACH;AACAvT,eAAS,CAAT,IAAc,UAAd;AACA;AACD;AACD,WAAOA,QAAP;AACD,GA/DD;;AAiEAhR,aAAWsE,SAAX,CAAqB0gB,YAArB,GAAoC,UAAUC,QAAV,EAAoBC,OAApB,EAA6B;;AAE/D;AACA;AACA,QAAIC,MAAJ,EAAYtW,KAAZ,EAAmBG,MAAnB;;AAEA,QAAIkW,YAAY,SAAhB,EAA2B;AACzB,UAAI,OAAO,KAAKE,OAAZ,KAAwB,WAA5B,EAAyC;AACvCvW,gBAAQ,KAAKuW,OAAb;AACApW,iBAAS,KAAKqW,QAAd;AACD,OAHD,MAIK,IAAI,OAAO,KAAKlc,cAAZ,KAA+B,WAAnC,EAAgD;AACnD0F,gBAAQ,KAAK1F,cAAb;AACA6F,iBAAS,KAAK3F,eAAd;AACD,OAHI,MAIA,IAAI,OAAO,KAAKic,WAAZ,KAA4B,WAAhC,EAA6C;AAChDzW,gBAAQ,KAAKyW,WAAb;AACAtW,iBAAS,KAAKhB,YAAd;AACD;AACF,KAbD,MAcK,IAAIkX,YAAY,UAAhB,EAA4B;AAC/BrW,cAAQ,MAAR;AACAG,eAAS,MAAT;AACD;;AAED,QAAI,KAAK3G,MAAL,CAAYvH,IAAZ,CAAiB,QAAjB,CAAJ,EAAgC;AAC9BqkB,eAAS,KAAK9c,MAAL,CAAYvH,IAAZ,CAAiB,QAAjB,CAAT;AACA,WAAKykB,UAAL,GAAkB/lB,EAAE,OAAF,EAAU;AAC1B,iBAAS,aADiB;AAE1B,eAAQ2lB,MAFkB;AAG1B,eAAQ,EAHkB;AAI1B,gBAAQ,cAJkB;AAK1B,iBAAStW,KALiB;AAM1B,kBAAUG;AANgB,OAAV,CAAlB;AAQAiW,eAAS5e,MAAT,CAAgB,KAAKkf,UAArB;AACD;AACF,GArCD;;AAuCAvlB,aAAWsE,SAAX,CAAqBie,WAArB,GAAmC,YAAY;;AAE7C;;AAEA,QAAItR,GAAJ;;AAEA,SAAKuU,SAAL,GAAiBhmB,EAAE,0BAAF,CAAjB;AACA,SAAKgmB,SAAL,CAAe/P,QAAf,CAAwB,YAAxB;AACA,SAAK+P,SAAL,CAAeC,QAAf,CAAwB,KAAK5D,QAA7B;AACA,QAAI,KAAKrZ,SAAL,IAAkB,OAAtB,EAA+B;AAC7ByI,YAAM,CAAC,EAAP;AACD,KAFD,MAGK;AACHA,YAAMoN,KAAKqH,KAAL,CAAW,KAAK3X,eAAL,CAAqBgX,MAArB,GAA8B9T,GAA9B,GAAoC,EAA/C,IAAqD,EAA3D;AACD;AACD,SAAKuU,SAAL,CAAelf,GAAf,CAAmB;AACjB2K,WAAKA,MAAM;AADM,KAAnB;;AAIA,SAAK0U,WAAL,GAAmBnmB,EAAE,0BAAF,CAAnB;AACA,SAAKmmB,WAAL,CAAiBlQ,QAAjB,CAA0B,yBAA1B;AACA,SAAKkQ,WAAL,CAAiBF,QAAjB,CAA0B,KAAK5D,QAA/B;AACD,GAtBD;;AAwBA7hB,aAAWsE,SAAX,CAAqBke,cAArB,GAAsC,YAAY;AAChD,QAAI,KAAKvY,aAAL,KAAuB,IAA3B,EAAiC;AAC/B;AACA,UAAI2b,gBAAgB,KAAKzb,YAAL,CAAkBC,KAAlB,EAApB;AACAwb,oBAAcC,YAAd,CAA2B,KAAKzC,aAAhC;AACA;AACA,WAAKtZ,SAAL,GAAiB8b,cAAc9jB,IAAd,CAAmB,IAAnB,CAAjB;AACD;;AAED,QAAI,KAAK+H,WAAL,IAAoB,KAAKhB,QAAL,CAAclI,MAAd,KAAyB,CAAjD,EAAoD;AAClD;AACA,WAAKsK,YAAL,GAAoB,IAApB;AACA,WAAK6a,UAAL,CAAgB,CAAhB;AACA;AACA,WAAKjd,QAAL,GAAgB,KAAKR,MAAL,CAAYvG,IAAZ,CAAiB,QAAjB,CAAhB;AACD;AACF,GAhBD;;AAkBA;AACA;AACA9B,aAAWsE,SAAX,CAAqByhB,WAArB,GAAmC,UAAU3L,KAAV,EAAiB;;AAElD,QAAIpW,OAAJ,EAAagiB,MAAb,EAAqBC,WAArB,EAAkCC,aAAlC,EAAiDC,WAAjD,EAA8DC,WAA9D,EACIC,kBADJ,EACwBC,aADxB;AAEAtiB,cAAU,IAAV;AACAgiB,aAASxmB,EAAE,OAAF,EAAU;AACjB,YAAM,KAAKmJ,OAAL,GAAe,GAAf,GAAqByR,KAArB,GAA6B,OADlB;AAEjB,eAAS;AAFQ,KAAV,CAAT;AAIA,QAAIA,UAAU,UAAV,IAAwBA,UAAU,OAAlC,IAA6CA,UAAU,aAAvD,IAAwEA,UAAU,mBAAtF,EAA2G;AACzG4L,aAAOvQ,QAAP,CAAgB,qBAAhB;AACD;AACDuQ,WAAOO,EAAP,CAAU,SAAV,EAAoB,UAAUjmB,CAAV,EAAa;AAC/B2lB,oBAAczmB,EAAE,IAAF,EAAQsC,IAAR,CAAa,aAAb,CAAd;AACAokB,sBAAgBD,YAAY/b,MAAZ,EAAhB;AACA,UAAIgc,cAAc3d,EAAd,CAAiB,cAAjB,CAAJ,EAAsC;AACpC;AACA4d,sBAAc3mB,EAAE,IAAF,EAAQsC,IAAR,CAAa,OAAb,EAAsB0kB,IAAtB,EAAd,CAFoC,CAEQ;AAC5CJ,sBAAcF,cAAc1H,IAAd,GAAqB1c,IAArB,CAA0B,OAA1B,CAAd;AACD,OAJD,MAKK,IAAIokB,cAAc3d,EAAd,CAAiB,aAAjB,CAAJ,EAAqC;AACxC;AACA4d,sBAAcD,cAAcO,IAAd,GAAqB3kB,IAArB,CAA0B,OAA1B,CAAd;AACAskB,sBAAc5mB,EAAE,IAAF,EAAQsC,IAAR,CAAa,OAAb,EAAsBwG,KAAtB,EAAd,CAHwC,CAGK;AAC9C,OAJI,MAKA;AACH6d,sBAAcD,cAAcO,IAAd,GAAqB3kB,IAArB,CAA0B,OAA1B,CAAd;AACAskB,sBAAcF,cAAc1H,IAAd,GAAqB1c,IAArB,CAA0B,OAA1B,CAAd;AACD;AACD,UAAIxB,EAAE8Z,KAAF,KAAY,CAAhB,EAAmB;AAAE;AACnB,YAAI9Z,EAAEub,QAAN,EAAgB;AACdqK,wBAAcQ,WAAd,CAA0B,YAA1B;AACAP,sBAAYQ,KAAZ;AACAR,sBAAYjc,MAAZ,GAAqBuL,QAArB,CAA8B,YAA9B;AACD,SAJD,MAKK;AACHyQ,wBAAcQ,WAAd,CAA0B,YAA1B;AACAN,sBAAYO,KAAZ;AACAP,sBAAYlc,MAAZ,GAAqBuL,QAArB,CAA8B,YAA9B;AACD;AACF,OAXD,MAYK,IAAInV,EAAE8Z,KAAF,KAAY,EAAZ,IAAkB9Z,EAAE8Z,KAAF,KAAY,EAAlC,EAAsC;AAAE;AAC3C8L,sBAAcQ,WAAd,CAA0B,YAA1B;AACAN,oBAAYO,KAAZ;AACAP,oBAAYlc,MAAZ,GAAqBuL,QAArB,CAA8B,YAA9B;AACD,OAJI,MAKA,IAAInV,EAAE8Z,KAAF,IAAW,EAAX,IAAiB9Z,EAAE8Z,KAAF,KAAY,EAAjC,EAAqC;AAAE;AAC1C8L,sBAAcQ,WAAd,CAA0B,YAA1B;AACAP,oBAAYQ,KAAZ;AACAR,oBAAYjc,MAAZ,GAAqBuL,QAArB,CAA8B,YAA9B;AACD,OAJI,MAKA,IAAInV,EAAE8Z,KAAF,KAAY,EAAZ,IAAkB9Z,EAAE8Z,KAAF,KAAY,EAAlC,EAAsC;AAAE;AAC3C5a,UAAE,aAAF,EAAiBoa,KAAjB;AACD,OAFI,MAGA,IAAItZ,EAAE8Z,KAAF,KAAY,EAAhB,EAAoB;AAAG;AAC1B8L,sBAAcQ,WAAd,CAA0B,YAA1B;AACA1iB,gBAAQ4iB,WAAR;AACD;AACDtmB,QAAEumB,cAAF;AACD,KA/CD;AAgDA,SAAK1D,cAAL,CAAoB9c,MAApB,CAA2B2f,MAA3B;AACA,WAAOA,MAAP;AACD,GA9DD;;AAgEAhmB,aAAWsE,SAAX,CAAqBsiB,WAArB,GAAmC,YAAY;AAC7C,QAAI,KAAKE,aAAL,IAAsB,KAAKA,aAAL,CAAmBve,EAAnB,CAAsB,UAAtB,CAA1B,EAA6D;AAC3D,WAAKue,aAAL,CAAmB1gB,IAAnB;AACA,WAAK2gB,eAAL,CAAqBJ,KAArB;AACD;AACD,QAAI,KAAKK,aAAL,IAAsB,KAAKA,aAAL,CAAmBze,EAAnB,CAAsB,UAAtB,CAA1B,EAA6D;AAC3D,WAAKye,aAAL,CAAmB5gB,IAAnB;AACA,WAAK6gB,SAAL,CAAeN,KAAf;AACD;AACD,QAAI,KAAKO,UAAL,IAAmB,KAAKA,UAAL,CAAgB3e,EAAhB,CAAmB,UAAnB,CAAvB,EAAuD;AACrD,WAAK2e,UAAL,CAAgB9gB,IAAhB;AACA,WAAKoT,YAAL,CAAkBmN,KAAlB;AACD;AACD,QAAI,KAAKQ,YAAL,IAAqB,KAAKA,YAAL,CAAkB5e,EAAlB,CAAqB,UAArB,CAAzB,EAA2D;AACzD,WAAK4e,YAAL,CAAkB/gB,IAAlB;AACA,WAAKghB,aAAL,CAAmBC,IAAnB,GAA0BV,KAA1B;AACD;AACD,QAAI,KAAKW,aAAL,IAAsB,KAAKA,aAAL,CAAmB/e,EAAnB,CAAsB,UAAtB,CAA1B,EAA6D;AAC3D,WAAK+e,aAAL,CAAmBlhB,IAAnB,GAA0BtF,IAA1B,CAA+B,aAA/B,EAA6C,MAA7C;AACA,WAAKymB,YAAL,CAAkB3R,IAAlB,CAAuB,KAAK7R,EAAL,CAAQyjB,kBAA/B;AACA,WAAKC,aAAL,CAAmBd,KAAnB;AACD;AACF,GAtBD;;AAwBA3mB,aAAWsE,SAAX,CAAqB8G,WAArB,GAAmC,UAAUgP,KAAV,EAAiB;;AAElD;AACA;;AAEA,QAAIsN,MAAJ,EAAY1jB,OAAZ,EAAqB2jB,UAArB,EAAiChiB,CAAjC,EAAoCoN,CAApC,EACI6U,MADJ,EACYC,SADZ,EACuBC,SADvB,EACkCC,KADlC,EAEIC,SAFJ,EAEeC,OAFf,EAEwBC,WAFxB,EAEqCC,UAFrC,EAGIC,QAHJ,EAGcC,OAHd,EAGuBC,SAHvB;;AAKAZ,aAAS,EAAT;AACA,QAAI,OAAOtN,KAAP,KAAiB,WAArB,EAAkC;AAChCsN,aAAOtZ,IAAP,CAAY,OAAZ;AACD;;AAED,QAAIgM,UAAU,UAAV,IAAyB,OAAOA,KAAP,KAAiB,WAA9C,EAA4D;AAC1D,UAAI,OAAO,KAAKpN,UAAZ,KAA2B,WAA/B,EAA4C;AAAE;AAC5C,YAAI,KAAKA,UAAL,CAAgBrM,MAApB,EAA4B;AAC1B+mB,iBAAOtZ,IAAP,CAAY,YAAZ;AACD;AACF,OAJD,MAKK;AAAE;AACL,YAAI,KAAKxD,QAAL,CAAcjK,MAAd,GAAuB,CAA3B,EAA8B;AAC5B+mB,iBAAOtZ,IAAP,CAAY,UAAZ;AACD;AACF;AACF;AACD,QAAIgM,UAAU,UAAV,IAAyB,OAAOA,KAAP,KAAiB,WAA9C,EAA4D;AAC1D,UAAI,KAAKmO,QAAL,CAAc5nB,MAAd,GAAuB,CAAvB,IAA4B,KAAKa,iBAArC,EAAwD;AACtDkmB,eAAOtZ,IAAP,CAAY,UAAZ;AACD;AACF;AACD,QAAIsZ,OAAO/mB,MAAP,GAAgB,CAApB,EAAuB;AACrBqD,gBAAU,IAAV;AACA,WAAK,IAAI2B,IAAE,CAAX,EAAcA,IAAE+hB,OAAO/mB,MAAvB,EAA+BgF,GAA/B,EAAoC;AAClC,YAAI6iB,QAAQd,OAAO/hB,CAAP,CAAZ;AACAgiB,qBAAa,KAAb;AACA,YAAIa,SAAS,OAAb,EAAsB;AACpB,eAAKtB,UAAL,GAAkB,KAAKnB,WAAL,CAAiB,OAAjB,CAAlB;AACD,SAFD,MAGK,IAAIyC,SAAS,UAAb,EAAyB;AAC5B,cAAI,OAAO,KAAKxB,aAAZ,KAA8B,WAAlC,EAA+C;AAC7C,iBAAKA,aAAL,GAAqB,KAAKjB,WAAL,CAAiB,UAAjB,CAArB;AACD;AACD6B,mBAAS,KAAKhd,QAAd;AACD,SALI,MAMA,IAAI4d,SAAS,UAAb,EAAyB;AAC5B,cAAI,OAAO,KAAK1B,aAAZ,KAA8B,WAAlC,EAA+C;AAC7C,iBAAKA,aAAL,GAAqB,KAAKf,WAAL,CAAiB,UAAjB,CAArB;AACD;AACD,cAAI,KAAK0C,gBAAT,EAA2B;AACzBb,qBAAS,KAAKa,gBAAL,CAAsBvM,IAA/B;AACD,WAFD,MAGK,IAAI,KAAKqM,QAAL,CAAc5nB,MAAd,IAAwB,CAA5B,EAA+B;AAClCinB,qBAAS,KAAKW,QAAL,CAAc,CAAd,EAAiBrM,IAA1B;AACD,WAFI,MAGA;AACH0L,qBAAS,EAAT;AACD;AACF,SAbI,MAcA,IAAIY,SAAS,YAAb,EAA2B;AAC9B,cAAI,OAAO,KAAKxB,aAAZ,KAA8B,WAAlC,EAA+C;AAC7C,iBAAKA,aAAL,GAAqB,KAAKjB,WAAL,CAAiB,UAAjB,CAArB;AACD;AACD6B,mBAAS,KAAK5a,UAAd;AACD;AACD,YAAI6a,YAAYroB,EAAE,WAAF,CAAhB;AACAwoB,oBAAY,KAAKrf,OAAL,GAAe,GAAf,GAAqB6f,KAArB,GAA6B,SAAzC;AACA,YAAIA,UAAU,OAAd,EAAuB;AACrBJ,qBAAW,KAAKld,oBAAL,EAAX;AACA,eAAK6H,CAAL,IAAUqV,QAAV,EAAoB;AAClBN,wBAAYtoB,EAAE,WAAF,CAAZ;AACA6oB,sBAAUD,SAASrV,CAAT,CAAV;AACA,gBAAIsV,YAAY,UAAhB,EAA4B;AAC1BC,0BAAY,KAAKvkB,EAAL,CAAQ2kB,gBAApB;AACD,aAFD,MAGK,IAAIL,YAAY,cAAhB,EAAgC;AACnCC,0BAAY,KAAKvkB,EAAL,CAAQ4kB,oBAApB;AACD,aAFI,MAGA,IAAIN,YAAY,UAAhB,EAA4B;AAC/BC,0BAAY,KAAKvkB,EAAL,CAAQ6kB,gBAApB;AACD,aAFI,MAGA,IAAIP,YAAY,YAAhB,EAA8B;AACjCC,0BAAY,KAAKvkB,EAAL,CAAQ8kB,kBAApB;AACD;AACDZ,sBAAU,KAAKtf,OAAL,GAAe,GAAf,GAAqB6f,KAArB,GAA6B,GAA7B,GAAmCzV,CAA7C;AACAmV,0BAAc1oB,EAAE,SAAF,EAAY;AACxB,sBAAQ,OADgB;AAExB,qBAAO6oB,OAFiB;AAGxB,sBAAQL,SAHgB;AAIxB,oBAAMC;AAJkB,aAAZ,CAAd;AAMAE,yBAAa3oB,EAAE,SAAF,EAAY;AACvB,qBAAOyoB;AADgB,aAAZ,CAAb;AAGAE,uBAAWvS,IAAX,CAAgB0S,SAAhB;AACAJ,wBAAYtO,KAAZ,CAAkB,UAASO,KAAT,EAAgB;AAChC,kBAAI2O,YAAYtpB,EAAE,IAAF,EAAQsB,IAAR,CAAa,OAAb,CAAhB;AACAkD,sBAAQoI,aAAR,CAAsB,KAAtB;AACA,kBAAI0c,cAAc,UAAlB,EAA8B;AAC5B9kB,wBAAQ+V,kBAAR,CAA2BsN,IAA3B;AACD,eAFD,MAGK,IAAIyB,cAAc,cAAlB,EAAkC;AACrC9kB,wBAAQgW,eAAR,CAAwBqN,IAAxB;AACD,eAFI,MAGA,IAAIyB,cAAc,UAAlB,EAA8B;AACjC9kB,wBAAQiW,mBAAR,CAA4BoN,IAA5B;AACD,eAFI,MAGA,IAAIyB,cAAc,YAAlB,EAAgC;AACnC9kB,wBAAQkW,qBAAR,CAA8BmN,IAA9B;AACD;AACDrjB,sBAAQ4iB,WAAR;AACD,aAhBD;AAiBAkB,sBAAUzhB,MAAV,CAAiB6hB,WAAjB,EAA6BC,UAA7B;AACAN,sBAAUxhB,MAAV,CAAiByhB,SAAjB;AACD;AACD,eAAKZ,UAAL,CAAgB7gB,MAAhB,CAAuBwhB,SAAvB;AACD,SAjDD,MAkDK;AACH,eAAK9U,CAAL,IAAU6U,MAAV,EAAkB;AAChBE,wBAAYtoB,EAAE,WAAF,CAAZ;AACAuoB,oBAAQH,OAAO7U,CAAP,CAAR;AACAkV,sBAAU,KAAKtf,OAAL,GAAe,GAAf,GAAqB6f,KAArB,GAA6B,GAA7B,GAAmCzV,CAA7C;AACAmV,0BAAc1oB,EAAE,SAAF,EAAY;AACxB,sBAAQ,OADgB;AAExB,qBAAOuT,CAFiB;AAGxB,sBAAQiV,SAHgB;AAIxB,oBAAMC;AAJkB,aAAZ,CAAd;AAMA,gBAAIF,MAAM9a,GAAV,EAAe;AACbib,0BAAYpnB,IAAZ,CAAiB,SAAjB,EAA2B,SAA3B;AACA6mB,2BAAa,IAAb;AACD;AACDQ,yBAAa3oB,EAAE,SAAF,EAAY;AACvB,qBAAOyoB;AADgB,aAAZ,CAAb;AAGA,gBAAIF,MAAM5a,QAAN,KAAmB,WAAvB,EAAoC;AAClC+a,0BAAYpnB,IAAZ,CAAiB,MAAjB,EAAwBinB,MAAM5a,QAA9B;AACD;AACD,gBAAIqb,SAAS,UAAT,IAAuBA,SAAS,YAApC,EAAkD;AAChDL,yBAAWvS,IAAX,CAAgBmS,MAAMgB,KAAN,IAAehB,MAAM5a,QAArC;AACA+a,0BAAYtO,KAAZ,CAAkB,KAAKoP,uBAAL,CAA6BjB,KAA7B,CAAlB;AACD,aAHD,MAIK,IAAIS,SAAS,UAAb,EAAyB;AAC5BL,yBAAWvS,IAAX,CAAgB,KAAKqT,oBAAL,CAA0BlB,KAA1B,IAAmC,KAAnC,GAA2C,KAAKmB,wBAAL,CAA8BnB,MAAMlI,KAApC,CAA3D;AACA,kBAAIsJ,mBAAmB,SAAnBA,gBAAmB,CAAU5H,IAAV,EAAgB;AACrC,uBAAO,YAAY;AACjBvd,0BAAQolB,MAAR,CAAe7H,IAAf;AACA;AACA;AACAvd,0BAAQqlB,WAAR,GAAsB,IAAtB;AACArlB,0BAAQ8iB,aAAR,CAAsB1gB,IAAtB;AACA;AACA;AACAkjB,6BAAW,YAAW;AACpBtlB,4BAAQqlB,WAAR,GAAsB,KAAtB;AACD,mBAFD,EAEG,GAFH;AAGArlB,0BAAQ+iB,eAAR,CAAwBJ,KAAxB;AACD,iBAZD;AAaD,eAdD;AAeAuB,0BAAY3B,EAAZ,CAAe,gBAAf,EAAgC4C,iBAAiBpB,MAAMlI,KAAvB,CAAhC;AACD;AACDiI,sBAAUzhB,MAAV,CAAiB6hB,WAAjB,EAA6BC,UAA7B;AACAN,sBAAUxhB,MAAV,CAAiByhB,SAAjB;AACD;AACD,cAAIU,SAAS,UAAT,IAAuBA,SAAS,YAApC,EAAkD;AAChD;AACAP,sBAAU,KAAKtf,OAAL,GAAe,eAAzB;AACAmf,wBAAYtoB,EAAE,WAAF,CAAZ;AACA0oB,0BAAc1oB,EAAE,SAAF,EAAY;AACxB,sBAAQ,OADgB;AAExB,sBAAQwoB,SAFgB;AAGxB,oBAAMC;AAHkB,aAAZ,CAAd;AAKAE,yBAAa3oB,EAAE,SAAF,EAAY;AACvB,qBAAOyoB;AADgB,aAAZ,CAAb;AAGAE,uBAAWvS,IAAX,CAAgB,KAAK7R,EAAL,CAAQwlB,WAAxB;AACA,gBAAI,KAAKC,YAAL,KAAsB,CAA1B,EAA6B;AAC3BtB,0BAAYpnB,IAAZ,CAAiB,SAAjB,EAA2B,SAA3B;AACD;AACDonB,wBAAYtO,KAAZ,CAAkB,KAAK6P,qBAAL,EAAlB;AACA3B,sBAAUzhB,MAAV,CAAiB6hB,WAAjB,EAA6BC,UAA7B;AACAN,sBAAUxhB,MAAV,CAAiByhB,SAAjB;AACD;AACD,cAAI,CAACH,UAAL,EAAiB;AACf;AACAE,sBAAU/lB,IAAV,CAAe,OAAf,EAAwBwG,KAAxB,GAAgCxH,IAAhC,CAAqC,SAArC,EAA+C,SAA/C;AACD;AACD,cAAI0nB,UAAU,UAAV,IAAwBA,UAAU,YAAtC,EAAoD;AAClD,iBAAKxB,aAAL,CAAmBrQ,IAAnB,CAAwBkR,SAAxB;AACD,WAFD,MAGK,IAAIW,UAAU,UAAd,EAA0B;AAC7B,iBAAK1B,aAAL,CAAmBnQ,IAAnB,CAAwBkR,SAAxB;AACD;AACF;AACF;AACF;AACF,GAtMD;;AAwMA7nB,aAAWsE,SAAX,CAAqB1D,eAArB,GAAuC,UAAS8oB,MAAT,EAAiB;;AAEtD;AACA;AACA;;AAEA,QAAIC,YAAJ,EAAkB9a,KAAlB,EAAyB+a,UAAzB,EAAqCxmB,QAArC,EAA+CymB,YAA/C,EACAC,eADA,EACiBC,QADjB,EAC2BpkB,CAD3B,EAC8BqkB,CAD9B,EACiCC,WADjC;;AAGA;AACA;AACAH,sBAAkB,KAAlB;;AAEAH,mBAAenqB,EAAE,OAAF,EAAU;AACvB,eAAU,eADa;AAEvB,cAAS;AAFc,KAAV,CAAf;AAIA;AACA,QAAI,OAAO,KAAK2J,cAAZ,KAA+B,WAAnC,EAAgD;AAC9C0F,cAAQ,KAAK1F,cAAL,GAAsB,IAA9B;AACD,KAFD,MAGK,IAAI,KAAKd,MAAL,CAAYvH,IAAZ,CAAiB,OAAjB,CAAJ,EAA+B;AAClC+N,cAAQzF,SAAS,KAAKf,MAAL,CAAYvH,IAAZ,CAAiB,OAAjB,CAAT,EAAoC,EAApC,IAA0C,IAAlD;AACD,KAFI,MAGA;AACH+N,cAAQ,MAAR;AACD;AACD8a,iBAAarjB,GAAb,CAAiB,WAAjB,EAA6BuI,KAA7B;;AAEA;AACA+a,iBAAa,KAAKvhB,MAAL,CAAY+B,KAAZ,EAAb;AACA5K,MAAE,eAAF,EAAmBoqB,UAAnB,EAA+BnjB,MAA/B;AACArD,eAAWwmB,WAAWjT,IAAX,GAAkBqI,IAAlB,EAAX;AACA,QAAI5b,SAASzC,MAAb,EAAqB;AACnBgpB,mBAAahT,IAAb,CAAkBvT,QAAlB;AACD,KAFD,MAGK,IAAIsmB,UAAU,YAAd,EAA4B;AAC/B;AACAG,qBAAgB,KAAK9lB,EAAL,CAAQmmB,cAAR,GAAyB,GAAzB,GAA+B,KAAKnmB,EAAL,CAAQ,KAAKyE,SAAb,CAA/B,GAAyD,IAAzE;AACAqhB,sBAAgB,KAAK9lB,EAAL,CAAQomB,cAAR,GAAyB,GAAzC;AACA/mB,iBAAW5D,EAAE,KAAF,EAASoW,IAAT,CAAciU,YAAd,CAAX;AACAF,mBAAahT,IAAb,CAAkBvT,QAAlB;AACA0mB,wBAAkB,IAAlB;AACD,KAPI,MAQA;AACH;AACAH,mBAAa/T,IAAb,CAAkB8T,MAAlB;AACD;;AAED,QAAII,eAAJ,EAAqB;AACnBG,oBAAczqB,EAAE,MAAF,CAAd;AACAuqB,iBAAW,KAAKK,qBAAL,EAAX;AACA,WAAKzkB,IAAE,CAAP,EAAUA,IAAEokB,SAASppB,MAArB,EAA6BgF,GAA7B,EAAkC;AAChCqkB,YAAIxqB,EAAE,MAAF,CAAJ;AACAwqB,UAAEpU,IAAF,CAAOmU,SAASpkB,CAAT,EAAY6R,IAAZ,GAAmB,GAAnB,GAAyBuS,SAASpkB,CAAT,EAAY0kB,UAArC,GAAkD,GAAlD,GAAwD,KAAKtmB,EAAL,CAAQumB,QAAvE;AACAL,oBAAY5jB,MAAZ,CAAmB2jB,CAAnB;AACD;AACDL,mBAAatjB,MAAb,CAAoB4jB,WAApB;AACD;;AAED;AACA,SAAKjF,YAAL,CAAkB2E,YAAlB,EAAgC,UAAhC;;AAEA;AACA,QAAI,OAAO,KAAK7H,YAAZ,KAA6B,WAAjC,EAA8C;AAC5C,WAAKA,YAAL,CAAkByI,MAAlB,CAAyBZ,YAAzB;AACA,WAAK7H,YAAL,CAAkBrb,MAAlB;AACD,KAHD,MAIK,IAAI,OAAO,KAAK4B,MAAZ,KAAuB,WAA3B,EAAwC;AAC3C,WAAKA,MAAL,CAAYkiB,MAAZ,CAAmBZ,YAAnB;AACA,WAAKthB,MAAL,CAAY5B,MAAZ;AACD,KAHI,MAIA;AACHjH,QAAE,MAAF,EAAUqjB,OAAV,CAAkB8G,YAAlB;AACD;AACF,GA3ED;;AA6EA3pB,aAAWsE,SAAX,CAAqB8lB,qBAArB,GAA6C,YAAW;;AAEtD,QAAIL,WAAW,EAAf;AACAA,aAAS,CAAT,IAAc;AACZvS,YAAK,QADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,SADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,mBADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,OADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,qBADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,gBADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,iBADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIAN,aAAS,CAAT,IAAc;AACZvS,YAAK,oBADO;AAEZ6S,kBAAY;AAFA,KAAd;AAIA,WAAON,QAAP;AACD,GApCD;;AAsCA;AACA;AACA;AACA/pB,aAAWsE,SAAX,CAAqBkmB,sBAArB,GAA8C,YAAY;AACxD;;AAEA,QAAIC,gBAAgB;AAClB,YAAM,CAAC,MAAD,EAAQ,SAAR,EAAkB,QAAlB,EAA2B,SAA3B,CADY;AAElB,YAAM,CAAC,MAAD,CAFY;AAGlB,YAAM,EAHY;AAIlB,YAAM;;AAGR;AAPoB,KAApB,CAQA,IAAI,KAAKC,qBAAL,EAAJ,EAAkC;AAChC;AACA;AACA,WAAKC,YAAL,GAAoB,YAAY,KAAKC,aAAL,CAAmB,KAAKrpB,MAAxB,CAAhC;AACAkpB,oBAAc,IAAd,EAAoBrc,IAApB,CAAyB,QAAzB;AACD,KALD,MAMK;AACH,WAAK7M,MAAL,GAAc,KAAd;AACD;;AAED;AACA,QAAIspB,MAAM,EAAV;AACA,QAAIC,MAAM,EAAV;;AAEA,QAAI,KAAKC,uBAAL,EAAJ,EAAoC;AAClCF,UAAIzc,IAAJ,CAAS,QAAT;AACAyc,UAAIzc,IAAJ,CAAS,QAAT;AACD;;AAED,QAAI,KAAK5F,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,UAAI,KAAKwiB,WAAT,EAAsB;AACpBH,YAAIzc,IAAJ,CAAS,UAAT,EADoB,CACE;AACvB;AACD,UAAI,KAAK6c,eAAT,EAA0B;AACxBJ,YAAIzc,IAAJ,CAAS,MAAT,EADwB,CACN;AACnB;AACD,UAAI,CAAC,KAAKgI,WAAL,IAAoB,KAAKC,aAA1B,KAA6C,KAAK3U,qBAAtD,EAA8E;AAC5EmpB,YAAIzc,IAAJ,CAAS,cAAT,EAD4E,CAClD;AAC3B;AACF;;AAED,QAAI,KAAKzM,cAAL,KAAwB,OAA5B,EAAqC;AACnCkpB,UAAIzc,IAAJ,CAAS,YAAT;AACD;;AAED,QAAI,KAAK5F,SAAL,KAAmB,OAAnB,IAA8B,KAAK0iB,WAAnC,IAAkD,KAAK1pB,iBAA3D,EAA8E;AAC5EqpB,UAAIzc,IAAJ,CAAS,UAAT;AACD;;AAEDqc,kBAAc,IAAd,EAAoBrc,IAApB,CAAyB,aAAzB;;AAEA;AACA,QAAI,KAAK5F,SAAL,KAAmB,OAAnB,IAA8B,KAAK1F,eAAnC,IAAsD,KAAK0B,MAAL,KAAgB,IAA1E,EAAgF;AAC9EimB,oBAAc,IAAd,EAAoBrc,IAApB,CAAyB,YAAzB;AACD;;AAED;AACA,QAAIyc,IAAIlqB,MAAJ,GAAa,CAAb,IAAkBmqB,IAAInqB,MAAJ,GAAa,CAAnC,EAAsC;AACpC8pB,oBAAc,IAAd,IAAsBI,GAAtB;AACAJ,oBAAc,IAAd,EAAoBrc,IAApB,CAAyB,MAAzB;AACAqc,oBAAc,IAAd,IAAsBA,cAAc,IAAd,EAAoBU,MAApB,CAA2BL,GAA3B,CAAtB;AACD,KAJD,MAKK;AACHL,oBAAc,IAAd,IAAsBI,IAAIM,MAAJ,CAAWL,GAAX,CAAtB;AACD;;AAED,WAAOL,aAAP;AACD,GApED;;AAsEAzqB,aAAWsE,SAAX,CAAqB0H,WAArB,GAAmC,YAAW;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA,QAAIof,eAAJ,EAAqBC,aAArB,EACA1lB,CADA,EACGoN,CADH,EACMuY,CADN,EACS1c,QADT,EACmB2c,eADnB,EACoCC,SADpC,EAC+CC,QAD/C,EACyDC,QADzD,EACmEC,OADnE,EAEAC,SAFA,EAEWC,YAFX,EAEyBC,WAFzB,EAEsCC,SAFtC,EAEiDC,SAFjD,EAE4DC,UAF5D,EAEwEC,SAFxE,EAGAC,SAHA,EAGWC,UAHX,EAGuBC,UAHvB,EAGmCC,cAHnC,EAGmDC,eAHnD,EAIAC,gBAJA,EAIkBC,YAJlB,EAIgCC,YAJhC,EAI8CC,WAJ9C;;AAMA,QAAI3oB,UAAU,IAAd;;AAEA,QAAI4oB,kBAAkB,GAAtB;;AAEA;AACA,QAAInC,gBAAgB,KAAKD,sBAAL,EAApB;;AAEA,QAAIqC,iBAAiB,EAAC,GAAG,IAAJ,EAAU,GAAE,IAAZ,EAAkB,GAAE,IAApB,EAA0B,GAAE,IAA5B,EAArB;;AAEA;AACArB,gBAAY,KAAK7iB,OAAL,GAAe,UAA3B;AACA,SAAKmkB,WAAL,GAAmBttB,EAAE,OAAF,EAAU;AAC3B,YAAMgsB,SADqB;AAE3B,eAAS;AAFkB,KAAV,CAAnB;AAIA,SAAKrI,cAAL,CAAoB9c,MAApB,CAA2B,KAAKymB,WAAhC;;AAEA;AACA,SAAKnnB,IAAI,CAAT,EAAYA,KAAK,CAAjB,EAAoBA,GAApB,EAAyB;AACvBiJ,iBAAW6b,cAAcoC,eAAelnB,CAAf,CAAd,CAAX;AACA,UAAKA,IAAI,CAAL,KAAY,CAAhB,EAAmB;AACjB4lB,0BAAkB/rB,EAAE,OAAF,EAAU;AAC1B,mBAAS;AADiB,SAAV,CAAlB;AAGD,OAJD,MAKK;AACH+rB,0BAAkB/rB,EAAE,OAAF,EAAU;AAC1B,mBAAS;AADiB,SAAV,CAAlB;AAGD;AACD,WAAK2jB,cAAL,CAAoB9c,MAApB,CAA2BklB,eAA3B;AACA,WAAKxY,IAAE,CAAP,EAAUA,IAAEnE,SAASjO,MAArB,EAA6BoS,GAA7B,EAAkC;AAChC4Y,kBAAU/c,SAASmE,CAAT,CAAV;AACA,YAAI4Y,YAAY,MAAhB,EAAwB;AACtB,cAAIoB,YAAYvtB,EAAE,kCAAF,CAAhB;AACA,cAAIwtB,cAAc,KAAKxkB,SAAL,GAAiB,GAAjB,GAAuB,KAAKzE,EAAL,CAAQkpB,YAAjD;AACA1B,0BAAgBllB,MAAhB,CAAuB0mB,SAAvB;AACA,cAAIrgB,WAAW,KAAKG,WAAL,EAAf;AACA,cAAIH,YAAY,CAAhB,EAAmB;AACjB;AACAA,uBAAW,GAAX;AACD;AACD,eAAKwgB,OAAL,GAAe,IAAIC,gBAAJ,CAAqB,KAAK3kB,SAA1B,EAAqCukB,SAArC,EAAgD,YAAhD,EAA8DH,eAA9D,EAA+E,CAA/E,EAAkFlgB,QAAlF,EAA4F,KAAKzJ,YAAjG,EAA+G+pB,WAA/G,EAA4H,SAA5H,EAAuI,IAAvI,EAA6I,SAA7I,CAAf;AACD,SAVD,MAWK,IAAIrB,YAAY,MAAhB,EAAwB;AAC3B;AACA,cAAIyB,OAAO5tB,EAAE,QAAF,EAAY;AACrB,wBAAY,IADS;AAErB,2BAAe;AAFM,WAAZ,CAAX;AAIA,cAAI,KAAKoD,QAAL,KAAkB,MAAtB,EAA8B;AAC5BwqB,iBAAK3X,QAAL,CAAc,WAAd;AACD,WAFD,MAGK;AACH,gBAAI4X,UAAU7tB,EAAE,OAAF,EAAW;AACvBwc,mBAAK,KAAK7a,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,WADlC;AAEvBmnB,mBAAK,EAFkB;AAGvBC,oBAAM;AAHiB,aAAX,CAAd;AAKAH,iBAAK/mB,MAAL,CAAYgnB,OAAZ;AACD;AACD9B,0BAAgBllB,MAAhB,CAAuB+mB,IAAvB;AACD,SAlBI,MAmBA;AACH;AACA,cAAIzB,YAAY,QAAhB,EAA0B;AACxBE,2BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,GAApD,GAA0D,KAAKwkB,YAA/D,GAA8E,MAA7F;AACD,WAFD,MAGK,IAAIgB,YAAY,YAAhB,EAA8B;AACjCE,2BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,wBAAnE;AACD,WAFI,MAGA,IAAIwlB,YAAY,QAAhB,EAA0B;AAC7B,gBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCqpB,6BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,aAAnE;AACD,aAFD,MAGK;AACH0lB,6BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,aAAnE;AACD;AACF,WAPI,MAQA,IAAIwlB,YAAY,QAAhB,EAA0B;AAC7B,gBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCqpB,6BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,aAAnE;AACD,aAFD,MAGK;AACH0lB,6BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,aAAnE;AACD;AACF,WAPI,MAQA;AACH0lB,2BAAe,KAAK1qB,QAAL,GAAgB,gBAAhB,GAAmC,KAAKgF,SAAxC,GAAoD,GAApD,GAA0DwlB,OAA1D,GAAoE,MAAnF;AACD;AACDG,wBAAc,KAAK0B,cAAL,CAAoB7B,OAApB,CAAd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAI,sBAAYvsB,EAAE,UAAF,EAAa;AACvB,oBAAQ,QADe;AAEvB,wBAAY,GAFW;AAGvB,0BAAcssB,WAHS;AAIvB,qBAAS,yBAAyBH;AAJX,WAAb,CAAZ;AAMA,cAAIA,YAAY,QAAZ,IAAwBA,YAAY,aAAxC,EAAuD;AACrD;AACA,gBAAIA,WAAW,aAAf,EAA8B;AAC5BgB,4BAAc,KAAKhkB,OAAL,GAAe,aAA7B;AACD,aAFD,MAGK,IAAIgjB,YAAY,QAAhB,EAA0B;AAC7BgB,4BAAc,KAAKhkB,OAAL,GAAe,gBAA7B;AACD;AACDojB,sBAAUjrB,IAAV,CAAe;AACb,+BAAiB6rB;AADJ,aAAf;AAGD;AACD,cAAI,KAAK/pB,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,gBAAI+oB,YAAY,QAAhB,EAA0B;AACxBK,0BAAY,UAAU,KAAKrB,YAA3B;AACD,aAFD,MAGK,IAAIgB,YAAY,QAAhB,EAA0B;AAC7B,kBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCwpB,4BAAY,aAAZ;AACD,eAFD,MAGK;AACHA,4BAAY,aAAZ;AACD;AACF,aAPI,MAQA,IAAIL,YAAY,QAAhB,EAA0B;AAC7B,kBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCwpB,4BAAY,aAAZ;AACD,eAFD,MAGK;AACHA,4BAAY,aAAZ;AACD;AACF,aAPI,MAQA;AACHA,0BAAY,UAAUL,OAAtB;AACD;AACDM,yBAAazsB,EAAE,QAAF,EAAW;AACtB,uBAASwsB,SADa;AAEtB,6BAAe;AAFO,aAAX,CAAb;AAIAD,sBAAU1lB,MAAV,CAAiB4lB,UAAjB;AACD,WA5BD,MA6BK,IAAI,KAAKrpB,QAAL,KAAkB,KAAtB,EAA6B;AAChC,gBAAI+oB,YAAY,QAAhB,EAA0B;AACxBK,0BAAY,SAAS,KAAKrB,YAA1B;AACD,aAFD,MAGK,IAAIgB,YAAY,YAAhB,EAA8B;AACjCK,0BAAY,uBAAZ;AACD,aAFI,MAGA,IAAIL,YAAY,QAAhB,EAA0B;AAC7B,kBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCwpB,4BAAY,YAAZ;AACD,eAFD,MAGK;AACHA,4BAAY,YAAZ;AACD;AACF,aAPI,MAQA,IAAIL,YAAY,QAAhB,EAA0B;AAC7B,kBAAI,KAAKnpB,UAAL,KAAoB,SAAxB,EAAmC;AACjCwpB,4BAAY,YAAZ;AACD,eAFD,MAGK;AACHA,4BAAY,YAAZ;AACD;AACF,aAPI,MAQA;AACHA,0BAAY,SAASL,OAArB;AACD;AACDM,yBAAazsB,EAAE,OAAF,EAAU;AACrB,uBAASwsB;AADY,aAAV,CAAb;AAGAE,wBAAY1sB,EAAE,OAAF,EAAU;AACpB,4BAAc,KAAK2B,QAAL,GAAgB,wBAAhB,GAA2C6qB;AADrC,aAAV,CAAZ;AAGAC,uBAAW5lB,MAAX,CAAkB6lB,SAAlB;AACAH,sBAAUpV,IAAV,CAAesV,UAAf;;AAEA;AACAF,sBAAUpV,IAAV,CAAeoV,UAAUpV,IAAV,EAAf;AACD,WArCI,MAsCA;AACH;AACAiV,wBAAYpsB,EAAE,OAAF,EAAU;AACpB,qBAAOqsB,YADa;AAEpB,qBAAO,EAFa;AAGpB,sBAAQ;AAHY,aAAV,CAAZ;AAKAE,sBAAU1lB,MAAV,CAAiBulB,SAAjB;AACD;AACD;AACA,cAAI6B,cAAcjuB,EAAE,QAAF,EAAW;AAC3B,qBAAS;AADkB,WAAX,EAEfoW,IAFe,CAEVkW,WAFU,CAAlB;AAGAC,oBAAU1lB,MAAV,CAAiBonB,WAAjB;AACA;AACA1B,oBAAUxF,EAAV,CAAa,kBAAb,EAAgC,UAASpM,KAAT,EAAgB;AAC9C,gBAAI4O,QAAQvpB,EAAE,IAAF,EAAQsB,IAAR,CAAa,YAAb,CAAZ;;AAEA;AACA,gBAAIkQ,WAAWxR,EAAE,IAAF,EAAQwR,QAAR,EAAf;AACA,gBAAI0c,eAAeluB,EAAE,IAAF,EAAQwP,MAAR,EAAnB;AACA,gBAAI2e,cAAcnuB,EAAE,IAAF,EAAQqP,KAAR,EAAlB;AACA,gBAAI6c,WAAW1a,SAASC,GAAT,GAAeyc,YAAf,GAA8B,EAA7C;AACA,gBAAIE,gBAAgB,IAApB;AACA,gBAAIpuB,EAAE,IAAF,EAAQquB,OAAR,CAAgB,KAAhB,EAAuBC,QAAvB,CAAgC,qBAAhC,CAAJ,EAA4D;AAC1D;AACA,kBAAItuB,EAAE,IAAF,EAAQ+I,EAAR,CAAW,aAAX,CAAJ,EAA+B;AAC7B;AACA;AACAqlB,gCAAgB,KAAhB;AACA,oBAAInC,WAAW,CAAf;AACA,oBAAIsC,eAAe;AACjB7c,wBAAM,EADW;AAEjB8c,yBAAOvC,WAAW,IAFD;AAGjBxa,uBAAKya,WAAW;AAHC,iBAAnB;AAKD;AACF,aAbD,MAcK;AACH;AACA,kBAAIlsB,EAAE,IAAF,EAAQ+I,EAAR,CAAW,cAAX,CAAJ,EAAgC;AAC9B;AACAqlB,gCAAgB,KAAhB;AACA,oBAAInC,WAAWza,SAASE,IAAxB;AACA,oBAAI6c,eAAe;AACjB7c,wBAAMua,WAAW,IADA;AAEjBuC,yBAAO,EAFU;AAGjB/c,uBAAKya,WAAW;AAHC,iBAAnB;AAKD;AACF;AACD,gBAAIkC,aAAJ,EAAmB;AACjB;AACA,kBAAIK,eAAezuB,EAAE,MAAMgsB,SAAR,EAAmB5V,IAAnB,CAAwBmT,KAAxB,EAA+Bla,KAA/B,EAAnB;AACA;AACA,kBAAI4c,WAAWza,SAASE,IAAT,GAAgB+c,eAAa,CAA5C;AACA,kBAAIF,eAAe;AACjB7c,sBAAMua,WAAW,IADA;AAEjBuC,uBAAO,EAFU;AAGjB/c,qBAAKya,WAAW;AAHC,eAAnB;AAKD;AACD,gBAAIwC,UAAU1uB,EAAE,MAAMgsB,SAAR,EAAmB5V,IAAnB,CAAwBmT,KAAxB,EAA+BziB,GAA/B,CAAmCynB,YAAnC,CAAd;AACA/pB,oBAAQmqB,WAAR,CAAoBD,OAApB;AACA1uB,cAAE,IAAF,EAAQ+mB,EAAR,CAAW,iBAAX,EAA6B,YAAW;AACtC/mB,gBAAE,MAAMgsB,SAAR,EAAmB5V,IAAnB,CAAwB,EAAxB,EAA4BxP,IAA5B;AACD,aAFD;AAGD,WApDD;;AAsDA,cAAIulB,YAAY,UAAhB,EAA4B;AAC1B,gBAAI,CAAC,KAAKnC,YAAN,IAAsB,KAAKA,YAAL,KAAsB,CAAhD,EAAmD;AACjD;AACA,kBAAI,KAAK5e,QAAL,CAAcjK,MAAd,GAAuB,CAA3B,EAA8B;AAC5B+rB,+BAAe,KAAK3oB,EAAL,CAAQ6G,QAAvB;AACD,eAFD,MAGK;AACH8hB,+BAAe,KAAK3oB,EAAL,CAAQiV,YAAvB;AACD;AACD+S,wBAAUtW,QAAV,CAAmB,WAAnB,EAAgC3U,IAAhC,CAAqC,OAArC,EAA6C4rB,YAA7C;AACD;AACF,WAXD,MAYK,IAAIf,YAAY,cAAhB,EAAgC;AACnC,gBAAI,CAAC,KAAKyC,QAAN,IAAkB,KAAKA,QAAL,KAAkB,CAAxC,EAA2C;AACzC;AACA;AACA;AACArC,wBAAUtW,QAAV,CAAmB,WAAnB,EAAgC3U,IAAhC,CAAqC,OAArC,EAA6C,KAAKiD,EAAL,CAAQoV,kBAArD;AACD;AACF;;AAEDoS,0BAAgBllB,MAAhB,CAAuB0lB,SAAvB;;AAEA;AACA,cAAIJ,YAAY,MAAhB,EAAwB;AACtB,iBAAK0C,gBAAL,GAAwBtC,SAAxB;AACD,WAFD,MAGK,IAAIJ,YAAY,UAAhB,EAA4B;AAC/B,iBAAK1E,SAAL,GAAiB8E,SAAjB;AACD,WAFI,MAGA,IAAIJ,YAAY,MAAhB,EAAwB;AAC3B,iBAAK2C,WAAL,GAAmBvC,SAAnB;AACA;AACA,gBAAI,CAAE,KAAK5a,WAAL,CAAiB5I,EAAjB,CAAoB,UAApB,CAAN,EAAwC;AACtC,mBAAK+lB,WAAL,CAAiB7Y,QAAjB,CAA0B,WAA1B;AACD;AACF,WANI,MAOA,IAAIkW,YAAY,cAAhB,EAAgC;AACnC,iBAAK4C,WAAL,GAAmBxC,SAAnB;AACA;AACD,WAHI,MAIA,IAAIJ,YAAY,MAAhB,EAAwB;AAC3B,iBAAK6C,WAAL,GAAmBzC,SAAnB;AACD,WAFI,MAGA,IAAIJ,YAAY,YAAhB,EAA8B;AACjC,iBAAK8C,iBAAL,GAAyB1C,SAAzB;AACA;AACA,gBAAI,CAAE,KAAK2C,cAAL,CAAoBnmB,EAApB,CAAuB,UAAvB,CAAN,EAA2C;AACzC,mBAAKkmB,iBAAL,CAAuBhZ,QAAvB,CAAgC,WAAhC,EAA6C3U,IAA7C,CAAkD,OAAlD,EAA0D,KAAKiD,EAAL,CAAQ4qB,cAAlE;AACD;AACF,WANI,MAOA,IAAIhD,YAAY,YAAhB,EAA8B;AACjC,iBAAKiD,iBAAL,GAAyB7C,SAAzB;AACD,WAFI,MAGA,IAAIJ,YAAY,UAAhB,EAA4B;AAC/B,iBAAK5E,eAAL,GAAuBgF,SAAvB;AACD,WAFI,MAGA,IAAIJ,YAAY,aAAhB,EAA+B;AAClC,iBAAKnS,YAAL,GAAoBuS,SAApB;AACD,WAFI,MAGA,IAAIJ,YAAY,QAAhB,EAA0B;AAC7B,iBAAKlE,aAAL,GAAqBsE,SAArB;AACD;AACF;AACD,YAAIJ,YAAY,QAAhB,EAA0B;AACxB;AACA,eAAKkD,eAAL,CAAqBtD,eAArB;AACD;AACF;AACD,UAAK5lB,IAAI,CAAL,IAAW,CAAf,EAAkB;AAChB,aAAKwd,cAAL,CAAoB9c,MAApB,CAA2B,iCAA3B;AACD;AACF;;AAED,QAAI,KAAKmC,SAAL,KAAmB,OAAvB,EAAgC;;AAE9B,UAAI,OAAO,KAAK6S,YAAZ,KAA6B,WAAjC,EAA8C;AAC5C;AACA,aAAKzD,eAAL,CAAqB,KAAKyD,YAA1B;AACD;AACD,UAAI,OAAO,KAAKC,QAAZ,KAAyB,WAA7B,EAA0C;AACxC;AACA,aAAK1D,eAAL,CAAqB,KAAK0D,QAA1B;AACD;AACF;;AAED;AACA,SAAK1M,QAAL,GAAgB,EAAhB;AACA,SAAK,IAAIkgB,GAAT,IAAgBrE,aAAhB,EAA+B;AAC7B,WAAK7b,QAAL,GAAgB,KAAKA,QAAL,CAAcuc,MAAd,CAAqBV,cAAcqE,GAAd,CAArB,CAAhB;AACD;;AAED;AACA,SAAKxiB,eAAL;AACD,GA1WD;;AA4WAtM,aAAWsE,SAAX,CAAqByqB,MAArB,GAA8B,YAAY;;AAExC;AACA;AACA;AACA;AACA;;AAEA,QAAIC,QAAQC,OAAOC,MAAP,CAAc,IAAd,CAAZ,CARwC,CAQP;AACjC,QAAIC,aAAJ,EACIC,GADJ,CATwC,CAU/B;AACT,QAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC/BC,mBAAaF,GAAb;AACAA,YAAM9F,WAAW6F,aAAX,EAA0B,GAA1B,CAAN;AACD,KAHD;AAIA,QAAII,mBAAmB,4BAAY;AACjC;AACD,KAFD;AAGA,QAAIC,iBAAiB,SAAjBA,cAAiB,GAAY;AAC/B,UAAIC,QAAJ;AACAxvB,aAAOyvB,gBAAP,CAAwB,QAAxB,EAAkCL,cAAlC,EAAkD,KAAlD;AACApvB,aAAOyvB,gBAAP,CAAwB,mBAAxB,EAA6CL,cAA7C,EAA6D,KAA7D;AACA,UAAIpvB,OAAO0vB,gBAAX,EAA6B;AAC3BF,mBAAW,IAAIE,gBAAJ,CAAqBN,cAArB,CAAX;AACAI,iBAASG,OAAT,CAAiBnwB,SAASowB,eAA1B,EAA2C;AACzCC,qBAAW,IAD8B;AAEzCC,mBAAS,IAFgC;AAGzCC,sBAAY;AAH6B,SAA3C;AAKAT,2BAAmB,4BAAY;AAC7B,cAAI;AACFE,qBAASQ,UAAT;AACAhwB,mBAAOiwB,mBAAP,CAA2B,QAA3B,EAAqCb,cAArC,EAAqD,KAArD;AACApvB,mBAAOiwB,mBAAP,CAA2B,mBAA3B,EAAgDb,cAAhD,EAAgE,KAAhE;AACD,WAJD,CAIE,OAAOc,MAAP,EAAe,CAAE;AACpB,SAND;AAOD,OAdD,MAeK;AACH1wB,iBAASowB,eAAT,CAAyBH,gBAAzB,CAA0C,oBAA1C,EAAgEL,cAAhE,EAAgF,KAAhF;AACAE,2BAAmB,4BAAY;AAC7B9vB,mBAASowB,eAAT,CAAyBK,mBAAzB,CAA6C,oBAA7C,EAAmEb,cAAnE,EAAmF,KAAnF;AACApvB,iBAAOiwB,mBAAP,CAA2B,QAA3B,EAAqCb,cAArC,EAAqD,KAArD;AACApvB,iBAAOiwB,mBAAP,CAA2B,mBAA3B,EAAgDb,cAAhD,EAAgE,KAAhE;AACD,SAJD;AAKD;AACF,KA3BD;AA4BA,QAAIe,UAAU,8BAAd;AACAjB,oBAAgB,yBAAY;AAC1B,UAAIkB,IAAJ;AAAA,UACIC,GADJ;AAAA,UAEIltB,WAAW,EAFf;AAAA,UAEmB;AACfmtB,UAHJ;AAAA,UAII5qB,CAJJ;AAAA,UAKI6qB,OALJ;AAAA,UAMIC,kBAAkB,CANtB;AAAA,UAOIC,QAPJ;AAAA,UAQIjjB,GARJ;AAAA,UASIkjB,IATJ;AAAA,UAUIC,GAVJ;AAWA,UAAI3wB,OAAO4wB,cAAX,EAA2B;AACzBL,kBAAU,IAAIK,cAAJ,EAAV;AACA,YAAIL,QAAQM,eAAR,KAA4B/wB,SAAhC,EAA2C;AACzCywB,oBAAUK,cAAV;AACD,SAFD,MAGK;AACHL,oBAAUO,kBAAkBhxB,SAA5B;AACD;AACF;AACD,UAAIywB,YAAYzwB,SAAhB,EAA2B;AACzB;AACD;AACD,eAASixB,aAAT,GAAyB;AACvB;AACAP,2BAAmB,CAAnB;AACA,YAAIA,oBAAoB,CAAxB,EAA2B;AAAE;AAC3BjB,2BADyB,CACP;AACnB;AACF;AACD,eAASyB,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,eAAO,YAAY;AACjB,cAAIlC,MAAMkC,KAAKb,IAAX,MAAqB,IAAzB,EAA+B;AAC7Ba,iBAAKC,KAAL,CAAWC,cAAX,CAA0BhB,OAA1B,EAAmC,YAAnC,EAAiD,MAAMc,KAAKX,IAA5D;AACD;AACF,SAJD;AAKD;AACD,eAASc,UAAT,CAAoBT,GAApB,EAAyB;AACvB,eAAO,YAAY;AACjB,cAAIU,OAAO7xB,SAAS6xB,IAApB;AACA,cAAIC,IAAI9xB,SAAS+xB,aAAT,CAAuB,GAAvB,CAAR;AACA,cAAIC,GAAJ;AACAb,cAAIc,MAAJ,GAAa,IAAb;AACAH,YAAEI,SAAF,GAAcf,IAAIgB,YAAlB;AACAH,gBAAMF,EAAEM,oBAAF,CAAuB,KAAvB,EAA8B,CAA9B,CAAN;AACA,cAAIJ,GAAJ,EAAS;AACPA,gBAAIK,YAAJ,CAAiB,aAAjB,EAAgC,MAAhC;AACAL,gBAAIM,KAAJ,CAAU/gB,QAAV,GAAqB,UAArB;AACAygB,gBAAIM,KAAJ,CAAUljB,KAAV,GAAkB,CAAlB;AACA4iB,gBAAIM,KAAJ,CAAU/iB,MAAV,GAAmB,CAAnB;AACAyiB,gBAAIM,KAAJ,CAAUC,QAAV,GAAqB,QAArB;AACAV,iBAAKzL,YAAL,CAAkB4L,GAAlB,EAAuBH,KAAKW,UAA5B;AACD;AACDjB;AACD,SAhBD;AAiBD;AACD,eAASkB,cAAT,CAAwBtB,GAAxB,EAA6B;AAC3B,eAAO,YAAY;AACjBA,cAAIuB,OAAJ,GAAc,IAAd;AACAvB,cAAIwB,SAAJ,GAAgB,IAAhB;AACApB;AACD,SAJD;AAKD;AACDzB,yBAhE0B,CAgEN;AACpB;AACAoB,aAAOlxB,SAASoyB,oBAAT,CAA8B,KAA9B,CAAP;AACA,WAAKlsB,IAAI,CAAT,EAAYA,IAAIgrB,KAAKhwB,MAArB,EAA6BgF,KAAK,CAAlC,EAAqC;AACnC,YAAI;AACF2qB,gBAAMK,KAAKhrB,CAAL,EAAQ0sB,qBAAR,EAAN;AACD,SAFD,CAEE,OAAOlC,MAAP,EAAe;AACf;AACAG,gBAAM,KAAN;AACD;AACD7iB,cAAMkjB,KAAKhrB,CAAL,EAAQ2sB,cAAR,CAAuBlC,OAAvB,EAAgC,MAAhC,EAAwC7pB,KAAxC,CAA8C,GAA9C,CAAN;AACA8pB,eAAO5iB,IAAI,CAAJ,CAAP;AACA8iB,eAAO9iB,IAAI,CAAJ,CAAP;AACAijB,mBAAWJ,OAAOA,IAAIpf,IAAJ,KAAa,CAApB,IAAyBof,IAAItC,KAAJ,KAAc,CAAvC,IAA4CsC,IAAIrf,GAAJ,KAAY,CAAxD,IAA6Dqf,IAAIiC,MAAJ,KAAe,CAAvF;AACA,YAAIjC,OAAOA,IAAIzhB,KAAJ,KAAc,CAArB,IAA0ByhB,IAAIthB,MAAJ,KAAe,CAAzC,IAA8C,CAAC0hB,QAAnD,EAA6D;AAC3D;AACA;AACA;AACA,cAAIttB,YAAY,CAACitB,KAAK1vB,MAAlB,IAA4B4vB,IAA5B,IAAoC,CAAC9wB,SAAS+yB,cAAT,CAAwBjC,IAAxB,CAAzC,EAAwE;AACtEF,mBAAOjtB,QAAP;AACD;AACD,cAAIitB,KAAK1vB,MAAT,EAAiB;AACf;AACAiwB,kBAAM5B,MAAMqB,IAAN,CAAN;AACA,gBAAIO,QAAQ,IAAZ,EAAkB;AAChB;AACAtH,yBAAW2H,eAAe;AACxBE,uBAAOR,KAAKhrB,CAAL,CADiB;AAExB0qB,sBAAMA,IAFkB;AAGxBE,sBAAMA;AAHkB,eAAf,CAAX,EAII,CAJJ;AAKD;AACD,gBAAIK,QAAQ7wB,SAAZ,EAAuB;AACrB6wB,oBAAM,IAAIJ,OAAJ,EAAN;AACAxB,oBAAMqB,IAAN,IAAcO,GAAd;AACAA,kBAAIc,MAAJ,GAAaL,WAAWT,GAAX,CAAb;AACAA,kBAAIuB,OAAJ,GAAcD,eAAetB,GAAf,CAAd;AACAA,kBAAIwB,SAAJ,GAAgBF,eAAetB,GAAf,CAAhB;AACAA,kBAAI6B,IAAJ,CAAS,KAAT,EAAgBpC,IAAhB;AACAO,kBAAI8B,IAAJ;AACAjC,iCAAmB,CAAnB;AACD;AACF;AACF,SA7BD,MA8BK;AACH,cAAI,CAACC,QAAL,EAAe;AACb,gBAAI1B,MAAMqB,IAAN,MAAgBtwB,SAApB,EAA+B;AAC7B;AACAivB,oBAAMqB,IAAN,IAAc,IAAd;AACD,aAHD,MAIK,IAAIrB,MAAMqB,IAAN,EAAYqB,MAAhB,EAAwB;AAC3B;AACA;AACA1C,oBAAMqB,IAAN,EAAYsC,KAAZ;AACA3D,oBAAMqB,IAAN,EAAYqB,MAAZ,GAAqB3xB,SAArB;AACAivB,oBAAMqB,IAAN,IAAc,IAAd;AACD;AACF;AACF;AACF;AACDM,aAAO,EAAP;AACAF,yBAAmB,CAAnB;AACAO;AACD,KA/HD;AAgIJ;;;;;;;AAOG,GAtLD;;AAwLAhxB,aAAWsE,SAAX,CAAqBwhB,UAArB,GAAkC,UAAS8M,WAAT,EAAsB;;AAEtD;AACA;AACA;;AAEA,QAAIvjB,QAAJ,EAAcwjB,SAAd,EAAyBC,QAAzB,EAAmC7kB,OAAnC,EAA4C+P,CAA5C,EAA+C+U,QAA/C,EAAyDptB,CAAzD,EAA4DqtB,UAA5D,EAAwEC,cAAxE;;AAEA,SAAK5qB,MAAL,CAAYvG,IAAZ,CAAiB,QAAjB,EAA2B2E,MAA3B;AACA4I,eAAW,KAAKvF,SAAL,CAAe6F,EAAf,CAAkBijB,WAAlB,CAAX;AACAC,gBAAYxjB,SAASsH,IAAT,EAAZ;AACA,QAAItH,SAASvO,IAAT,CAAc,MAAd,CAAJ,EAA2B;AACzBgyB,iBAAWzjB,SAASvO,IAAT,CAAc,MAAd,CAAX;AACD;AACDmN,cAAU,EAAV;AACA+P,QAAI,CAAJ,CAfsD,CAe/C;AACP,QAAI,KAAKxV,SAAL,KAAmB,OAAvB,EAAgC;AAC9B,UAAI6G,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BiyB,mBAAW1jB,SAASvO,IAAT,CAAc,UAAd,CAAX,CAD6B,CACS;AACtCmN,gBAAQ+P,CAAR,IAAc,IAAIkV,KAAJ,CAAU,YAAV,EAAuBH,QAAvB,CAAd;AACA/U;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,WAAd,CAAJ,EAAgC;AAC9BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,YAAV,EAAuB7jB,SAASvO,IAAT,CAAc,WAAd,CAAvB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,YAAd,CAAJ,EAAiC;AAC/BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,YAAV,EAAuB7jB,SAASvO,IAAT,CAAc,YAAd,CAAvB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,WAAV,EAAsB7jB,SAASvO,IAAT,CAAc,UAAd,CAAtB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,WAAV,EAAsB7jB,SAASvO,IAAT,CAAc,UAAd,CAAtB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,WAAV,EAAsB7jB,SAASvO,IAAT,CAAc,UAAd,CAAtB,CAAb;AACAkd;AACD;AACF,KA1BD,MA2BK,IAAI,KAAKxV,SAAL,KAAmB,OAAvB,EAAgC;AACnC,UAAI6G,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BiyB,mBAAW1jB,SAASvO,IAAT,CAAc,UAAd,CAAX,CAD6B,CACS;AACtCmN,gBAAQ+P,CAAR,IAAc,IAAIkV,KAAJ,CAAU,WAAV,EAAsBH,QAAtB,CAAd;AACA/U;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,WAAd,CAAJ,EAAgC;AAC9BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,YAAV,EAAuB7jB,SAASvO,IAAT,CAAc,WAAd,CAAvB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,YAAd,CAAJ,EAAiC;AAC/BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,YAAV,EAAuB7jB,SAASvO,IAAT,CAAc,YAAd,CAAvB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,WAAV,EAAsB7jB,SAASvO,IAAT,CAAc,UAAd,CAAtB,CAAb;AACAkd;AACD;AACD,UAAI3O,SAASvO,IAAT,CAAc,UAAd,CAAJ,EAA+B;AAC7BmN,gBAAQ+P,CAAR,IAAa,IAAIkV,KAAJ,CAAU,WAAV,EAAsB7jB,SAASvO,IAAT,CAAc,UAAd,CAAtB,CAAb;AACAkd;AACD;AACF;AACD,SAAKrY,IAAE,CAAP,EAAUA,IAAEsI,QAAQtN,MAApB,EAA4BgF,GAA5B,EAAiC;AAC/BqtB,mBAAaxzB,EAAE,UAAF,EAAa;AACxB+X,cAAMtJ,QAAQtI,CAAR,EAAW,CAAX,CADkB;AAExBqW,aAAK/N,QAAQtI,CAAR,EAAW,CAAX;AAFmB,OAAb,CAAb;AAIA,WAAK0C,MAAL,CAAYhC,MAAZ,CAAmB2sB,UAAnB;AACD;;AAED;AACA;AACA,SAAKlpB,SAAL,CAAe4c,WAAf,CAA2B,cAA3B;AACArX,aAASoG,QAAT,CAAkB,cAAlB;;AAEA;AACA,QAAI,KAAKtS,cAAL,KAAwB,IAA5B,EAAkC;AAChC8vB,uBAAiBzzB,EAAE,QAAF,CAAjB;AACA,UAAI,OAAOszB,QAAP,KAAoB,WAAxB,EAAqC;AACnCG,uBAAenyB,IAAf,CAAoB,MAApB,EAA2BgyB,QAA3B;AACD;AACDG,qBAAetc,IAAf,CAAoB,iCAAiCkc,SAArD;AACA,WAAK3P,cAAL,CAAoBvM,IAApB,CAAyBsc,cAAzB;AACD;;AAED;AACA;AACA,QAAI,KAAKhoB,YAAT,EAAuB;AAAE;AACvB,WAAKkoB,WAAL,GAAmB,KAAnB;AACD,KAFD,MAGK;AACH,WAAKA,WAAL,GAAmB,IAAnB;AACA,UAAI,KAAK3uB,MAAL,KAAgB,OAApB,EAA6B;AAC3B,aAAK9D,KAAL,CAAW8L,IAAX;AACD,OAFD,MAGK,IAAI,KAAKhI,MAAL,KAAgB,IAApB,EAA0B;AAC7B,aAAKgK,QAAL,CAAchC,IAAd,CAAmB,EAAC6B,MAAM0kB,QAAP,EAAnB;AACD,OAFI,MAGA,IAAI,KAAKvuB,MAAL,KAAgB,SAApB,EAA+B;AAClC;AACA;AACD;AACF;AACF,GA3GD;;AA6GAxE,aAAWsE,SAAX,CAAqBkpB,cAArB,GAAsC,UAAS7B,OAAT,EAAkB;;AAEtD,QAAIyH,aAAJ;;AAEA,QAAIzH,YAAY,WAAhB,EAA6B;AAC3B,aAAO,KAAK5nB,EAAL,CAAQsU,IAAf;AACD,KAFD,MAGK,IAAIsT,YAAY,MAAhB,EAAwB;AAC3B,aAAO,KAAK5nB,EAAL,CAAQsU,IAAf;AACD,KAFI,MAGA,IAAIsT,YAAY,OAAhB,EAAyB;AAC5B,aAAO,KAAK5nB,EAAL,CAAQuU,KAAf;AACD,KAFI,MAGA,IAAIqT,YAAY,SAAhB,EAA2B;AAC9B,aAAO,KAAK5nB,EAAL,CAAQ0U,OAAf;AACD,KAFI,MAGA,IAAIkT,YAAY,QAAhB,EAA0B;AAC7B,aAAO,KAAK5nB,EAAL,CAAQ2U,MAAf;AACD,KAFI,MAGA,IAAIiT,YAAY,SAAhB,EAA2B;AAC9B,aAAO,KAAK5nB,EAAL,CAAQ4U,OAAf;AACD,KAFI,MAGA,IAAIgT,YAAY,UAAhB,EAA4B;AAC/B,UAAI,KAAK5e,oBAAT,EAA+B;AAC7BqmB,wBAAgB,KAAKpmB,UAAL,CAAgBrM,MAAhC;AACD,OAFD,MAGK;AACHyyB,wBAAgB,KAAKxoB,QAAL,CAAcjK,MAA9B;AACD;AACD,UAAIyyB,gBAAgB,CAApB,EAAuB;AACrB,eAAO,KAAKrvB,EAAL,CAAQ6G,QAAf;AACD,OAFD,MAGK;AACH,YAAI,KAAKkO,UAAT,EAAqB;AACnB,iBAAO,KAAK/U,EAAL,CAAQgV,YAAf;AACD,SAFD,MAGK;AACH,iBAAO,KAAKhV,EAAL,CAAQiV,YAAf;AACD;AACF;AACF,KAlBI,MAmBA,IAAI2S,YAAY,cAAhB,EAAgC;AACnC,UAAI,KAAK1S,MAAT,EAAiB;AACf,eAAO,KAAKlV,EAAL,CAAQmV,mBAAf;AACD,OAFD,MAGK;AACH,eAAO,KAAKnV,EAAL,CAAQoV,kBAAf;AACD;AACF,KAPI,MAQA,IAAIwS,YAAY,YAAhB,EAA8B;AACjC,UAAI,KAAK+C,cAAL,CAAoBnmB,EAApB,CAAuB,UAAvB,CAAJ,EAAwC;AACtC,eAAO,KAAKxE,EAAL,CAAQsvB,cAAf;AACD,OAFD,MAGK;AACH,eAAO,KAAKtvB,EAAL,CAAQ4qB,cAAf;AACD;AACF,KAPI,MAQA,IAAIhD,YAAY,UAAhB,EAA4B;AAC/B,aAAO,KAAK5nB,EAAL,CAAQwkB,QAAf;AACD,KAFI,MAGA,IAAIoD,YAAY,MAAhB,EAAwB;AAC3B,aAAO,KAAK5nB,EAAL,CAAQqM,IAAf;AACD,KAFI,MAGA,IAAIub,YAAY,QAAhB,EAA0B;AAC7B,aAAO,KAAK5nB,EAAL,CAAQxC,MAAf;AACD,KAFI,MAGA,IAAIoqB,YAAY,QAAhB,EAA0B;AAC7B,aAAO,KAAK5nB,EAAL,CAAQuvB,MAAf;AACD,KAFI,MAGA,IAAI3H,YAAY,QAAhB,EAA0B;AAC7B,aAAO,KAAK5nB,EAAL,CAAQwvB,MAAf;AACD,KAFI,MAGA,IAAI5H,YAAY,aAAhB,EAA+B;AAClC,aAAO,KAAK5nB,EAAL,CAAQoM,WAAf;AACD,KAFI,MAGA,IAAIwb,YAAY,MAAhB,EAAwB;AAC3B;AACD,KAFI,MAGA;AACH;AACA;AACA;AACA,UAAI,KAAKzqB,KAAT,EAAgB;AACdgH,gBAAQyB,GAAR,CAAY,kCAAkCgiB,OAA9C;AACD;AACD,aAAOA,QAAQ6H,MAAR,CAAe,CAAf,EAAkBC,WAAlB,KAAkC9H,QAAQ+H,KAAR,CAAc,CAAd,CAAzC;AACD;AACF,GAvFD;AA0FD,CAhkDD,EAgkDG9uB,MAhkDH;;AAkkDA,CAAC,UAAUpF,CAAV,EAAa;AACZ;AACA;AACA;AACA;AACAQ,aAAWsE,SAAX,CAAqBoG,WAArB,GAAmC,YAAW;;AAE5C,QAAI1G,UAAU,IAAd;;AAEA,QAAI6D,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;AACA,SAAK6rB,OAAL,GAAe,KAAKtrB,MAAL,CAAYvG,IAAZ,CAAiB,OAAjB,CAAf;;AAEA,SAAK8I,QAAL,GAAgB,EAAhB;AACA,SAAKgpB,aAAL,GAAqB,EAArB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKtL,QAAL,GAAgB,EAAhB;AACA,SAAKuL,IAAL,GAAY,EAAZ;;AAEA,QAAIC,kBAAkB,EAAtB;AACA,SAAK,IAAI7lB,KAAK,CAAd,EAAiBA,KAAK,KAAKylB,OAAL,CAAahzB,MAAnC,EAA2CuN,IAA3C,EAAiD;AAC/C,UAAI6Z,QAAQ,KAAK4L,OAAL,CAAazlB,EAAb,CAAZ;AACA,UAAI8lB,OAAOjM,MAAMrY,YAAN,CAAmB,MAAnB,CAAX;AACA,UAAIukB,WAAWlM,MAAMrY,YAAN,CAAmB,KAAnB,CAAf;;AAEA,UAAIwkB,iBAAiBnM,MAAMrY,YAAN,CAAmB,SAAnB,CAArB;;AAEA,UAAI,CAACukB,QAAL,EAAe;AACb;AACA;AACD;;AAED,UAAIE,iBAAiB,KAAKC,cAAL,CAAoBH,QAApB,CAArB;AACAF,sBAAgB3lB,IAAhB,CAAqB+lB,cAArB;AACAA,qBAAehwB,IAAf,CAAqB,UAAU4jB,KAAV,EAAiBiM,IAAjB,EAAuB;AAC1C,eAAO,UAAUC,QAAV,EAAoBI,SAApB,EAA+B;AACpC,cAAInY,OAAOlY,QAAQ8X,WAAR,CAAoBmY,QAApB,EAA8BI,SAA9B,EAAyCnY,IAApD;AACA,cAAI8X,SAAS,UAAT,IAAuBA,SAAS,WAApC,EAAiD;AAC/ChwB,oBAAQswB,aAAR,CAAsBvM,KAAtB,EAA6B7L,IAA7B;AACD,WAFD,MAGK,IAAI8X,SAAS,cAAb,EAA6B;AAChChwB,oBAAQuwB,iBAAR,CAA0BxM,KAA1B,EAAiC7L,IAAjC;AACD,WAFI,MAGA,IAAI8X,SAAS,UAAb,EAAyB;AAC5BhwB,oBAAQwwB,aAAR,CAAsBzM,KAAtB,EAA6B7L,IAA7B;AACD,WAFI,MAGA,IAAI8X,SAAS,UAAb,EAAyB;AAC5BhwB,oBAAQywB,aAAR,CAAsB1M,KAAtB,EAA6B7L,IAA7B;AACD;AACF,SAdD;AAeD,OAhBmB,CAgBjB6L,KAhBiB,EAgBViM,IAhBU,CAApB;AAiBD;;AAEDx0B,MAAEyE,IAAF,CAAOsa,KAAP,CAAa/e,CAAb,EAAgBu0B,eAAhB,EAAiC5vB,IAAjC,CAAsC,YAAY;AAChD0D,eAASqB,OAAT;AACD,KAFD;AAGA,WAAOpB,OAAP;AACD,GApDD;;AAsDA9H,aAAWsE,SAAX,CAAqBgwB,aAArB,GAAqC,UAAUvM,KAAV,EAAiB7L,IAAjB,EAAuB;AAC1D,SAAK8O,WAAL,GAAmB,IAAnB;AACA;AACA;AACA,QAAI0J,YAAY3M,MAAMrY,YAAN,CAAmB,SAAnB,KAAiC,KAAKnM,IAAtD;AACA,QAAI4kB,aAAaJ,MAAMrY,YAAN,CAAmB,OAAnB,KAA+B,KAAKilB,eAAL,CAAqBD,SAArB,CAAhD;AACA,QAAI,OAAO3M,MAAMrY,YAAN,CAAmB,SAAnB,CAAP,IAAwC,QAA5C,EAAsD;AACpD,UAAIwkB,iBAAiB,IAArB;AACA;AACA;AACAnM,YAAM6M,eAAN,CAAsB,SAAtB;AACD,KALD,MAMK;AACH,UAAIV,iBAAiB,KAArB;AACD;AACD;AACA;AACA,QAAI,KAAK1rB,SAAL,KAAmB,OAAvB,EAAgC;;AAE9B;AACA;AACA;AACA;AACA,UAAI,CAAC,KAAK6S,YAAV,EAAwB;AACtB,aAAKA,YAAL,GAAoB7b,EAAE,OAAF,EAAU;AAC5B,mBAAS;AADmB,SAAV,CAApB;AAGA,aAAKq1B,gBAAL,GAAwBr1B,EAAE,OAAF,EAAU;AAChC,mBAAS,uBADuB;AAEhC,yBAAe;AAFiB,SAAV,CAAxB;AAIA,YAAI,KAAKoS,oBAAL,KAA8B,OAAlC,EAA2C;AACzC,eAAKijB,gBAAL,CAAsBpf,QAAtB,CAA+B,qBAA/B;AACD,SAFD,MAGK;AACH,eAAKof,gBAAL,CAAsBpf,QAAtB,CAA+B,uBAA/B;AACD;AACD,aAAKof,gBAAL,CAAsBxuB,MAAtB,CAA6B,KAAKgV,YAAlC;AACA,aAAK4G,gBAAL,CAAsB5b,MAAtB,CAA6B,KAAKwuB,gBAAlC;AACD;AACF;;AAED,SAAKC,cAAL,GAAsB,CAAC,CAAvB;AACA,QAAI,KAAKtL,YAAL,KAAsB,CAA1B,EAA6B;AAC3B;AACA,WAAK1Q,UAAL,GAAkB,IAAlB;AACD,KAHD,MAIK;AACH,WAAKA,UAAL,GAAkB,KAAlB;AACD;;AAED,QAAI,KAAKnX,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE;AACA,UAAI,KAAKozB,wBAAT,EAAmC;AACjC,aAAKA,wBAAL,CAA8BtuB,MAA9B;AACA,aAAKsuB,wBAAL,GAAgC,IAAhC;AACD;AACD,UAAIC,SAASx1B,EAAE,mBAAF,EAAsB;AACjCkY,eAAOgd,SAD0B;AAEjCnxB,cAAMmxB;AAF2B,OAAtB,EAGV9e,IAHU,CAGLuS,UAHK,CAAb;AAID;AACD;AACA,QAAI,KAAKxmB,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE,UAAI2S,UAAU,KAAKzJ,yBAAL,CAA+B/I,IAA/B,CAAoC,QAApC,CAAd;AACD;AACD,QAAI,KAAK8I,QAAL,CAAcjK,MAAd,KAAyB,CAA7B,EAAgC;AAAE;AAChC,WAAKiK,QAAL,CAAcwD,IAAd,CAAmB;AACjB,gBAAQ8N,IADS;AAEjB,oBAAYwY,SAFK;AAGjB,iBAASvM,UAHQ;AAIjB,eAAO+L;AAJU,OAAnB;AAMA,UAAI,KAAKvyB,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE,YAAIuyB,cAAJ,EAAoB;AAClBc,iBAAOl0B,IAAP,CAAY,UAAZ,EAAwB,UAAxB;AACD;AACD,aAAK+J,yBAAL,CAA+BxE,MAA/B,CAAsC2uB,MAAtC;AACD;AACD,WAAKpB,aAAL,CAAmBxlB,IAAnB,CAAwB+Z,UAAxB;AACD,KAdD,MAeK;AAAE;AACL,UAAI8M,WAAW,KAAf;AACA,WAAK,IAAItvB,IAAI,CAAb,EAAgBA,IAAI,KAAKiF,QAAL,CAAcjK,MAAlC,EAA0CgF,GAA1C,EAA+C;AAC7C,YAAIuvB,WAAW,KAAKtB,aAAL,CAAmBjuB,CAAnB,CAAf;AACA,YAAIwiB,WAAWgN,WAAX,KAA2B,KAAKvB,aAAL,CAAmBjuB,CAAnB,EAAsBwvB,WAAtB,EAA/B,EAAoE;AAClE;AACA,eAAKvqB,QAAL,CAAcwqB,MAAd,CAAqBzvB,CAArB,EAAuB,CAAvB,EAAyB;AACvB,oBAAQuW,IADe;AAEvB,wBAAYwY,SAFW;AAGvB,qBAASvM,UAHc;AAIvB,mBAAO+L;AAJgB,WAAzB;AAMA,cAAI,KAAKvyB,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE,gBAAIuyB,cAAJ,EAAoB;AAClBc,qBAAOl0B,IAAP,CAAY,UAAZ,EAAwB,UAAxB;AACD;AACDk0B,mBAAOnP,YAAP,CAAoBvR,QAAQ3E,EAAR,CAAWhK,CAAX,CAApB;AACD;AACD,eAAKiuB,aAAL,CAAmBwB,MAAnB,CAA0BzvB,CAA1B,EAA4B,CAA5B,EAA8BwiB,UAA9B;AACA8M,qBAAW,IAAX;AACA;AACD;AACF;AACD,UAAI,CAACA,QAAL,EAAe;AACb;AACA,aAAKrqB,QAAL,CAAcwD,IAAd,CAAmB;AACjB,kBAAQ8N,IADS;AAEjB,sBAAYwY,SAFK;AAGjB,mBAASvM,UAHQ;AAIjB,iBAAO+L;AAJU,SAAnB;AAMA,YAAI,KAAKvyB,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE,cAAIuyB,cAAJ,EAAoB;AAClBc,mBAAOl0B,IAAP,CAAY,UAAZ,EAAwB,UAAxB;AACD;AACD,eAAK+J,yBAAL,CAA+BxE,MAA/B,CAAsC2uB,MAAtC;AACD;AACD,aAAKpB,aAAL,CAAmBxlB,IAAnB,CAAwB+Z,UAAxB;AACD;AACF;AACD,QAAI,KAAKxmB,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;AACzE,UAAI,KAAKkJ,yBAAL,CAA+B/I,IAA/B,CAAoC,QAApC,EAA8CnB,MAA9C,GAAuD,CAA3D,EAA8D;AAC5D;AACA,aAAKkK,yBAAL,CAA+ByP,IAA/B,CAAoC,UAApC,EAAgD,KAAhD;AACD;AACF;AACF,GA/HD;;AAkIAta,aAAWsE,SAAX,CAAqBiwB,iBAArB,GAAyC,UAAUxM,KAAV,EAAiB7L,IAAjB,EAAuB;;AAE9D;AACA;AACA;;AAEA;AACA;AACA,QAAIwY,YAAY3M,MAAMrY,YAAN,CAAmB,SAAnB,KAAiC,KAAKnM,IAAtD;;AAEA,SAAK8S,aAAL,GAAqB,IAArB;AACA,SAAKgf,kBAAL,GAA0B,CAAC,CAA3B;AACA,SAAKxB,YAAL,CAAkBzlB,IAAlB,CAAuB;AACrB8N,YAAMA,IADe;AAErB/O,gBAAUunB;AAFW,KAAvB;AAID,GAhBD;;AAkBA10B,aAAWsE,SAAX,CAAqBkwB,aAArB,GAAqC,UAAUzM,KAAV,EAAiB7L,IAAjB,EAAuB;;AAE1D;AACA;;AAEA;AACA;AACA,QAAIwY,YAAY3M,MAAMrY,YAAN,CAAmB,SAAnB,KAAiC,KAAKnM,IAAtD;;AAEA,SAAK2nB,WAAL,GAAmB,IAAnB;;AAEA,SAAK3C,QAAL,CAAcna,IAAd,CAAmB;AACjB8N,YAAMA,IADW;AAEjB/O,gBAAUunB;AAFO,KAAnB;AAID,GAfD;;AAiBA10B,aAAWsE,SAAX,CAAqBmwB,aAArB,GAAqC,UAAS1M,KAAT,EAAgB7L,IAAhB,EAAsB;AACzD,QAAI,KAAKzY,QAAL,KAAkB,MAAtB,EAA8B;AAC5B;AACA;AACA,UAAI,KAAKC,OAAT,EAAkB;AAChB,YAAIlE,EAAE,MAAM,KAAKkE,OAAb,CAAJ,EAA2B;AACzB;AACA,eAAK4xB,QAAL,GAAgB91B,EAAE,MAAM,KAAKkE,OAAb,CAAhB;AACA,eAAK6xB,OAAL,GAAe,IAAf;AACA,eAAKzB,IAAL,GAAY5X,IAAZ;AACD;AACF;AACF,KAXD,MAYK,IAAI,KAAKzY,QAAL,KAAkB,UAAtB,EAAkC;AACrC,WAAK8xB,OAAL,GAAe,IAAf;AACA,WAAKC,gBAAL,GAAwB,EAAxB;AACA,WAAK1B,IAAL,GAAY5X,IAAZ;AACD;AACF,GAlBD;;AAoBAlc,aAAWsE,SAAX,CAAqB8vB,cAArB,GAAsC,UAASpY,GAAT,EAAc;;AAElD,QAAInU,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;AACA,QAAI9D,UAAU,IAAd;;AAEA;AACA,QAAIyxB,WAAWj2B,EAAE,OAAF,EAAU;AACvBuyB,aAAO;AADgB,KAAV,CAAf;;AAIA0D,aAASjpB,IAAT,CAAcwP,GAAd,EAAmB,UAAUqY,SAAV,EAAqBqB,MAArB,EAA6BC,GAA7B,EAAkC;AACnD,UAAID,WAAW,OAAf,EAAwB;AACtB,YAAI1xB,QAAQ9C,KAAZ,EAAmB;AACjBgH,kBAAQyB,GAAR,CAAa,wBAAwBqS,GAAxB,GAA8B,IAA9B,GAAqC0Z,MAAlD;AACD;AACD7tB,iBAASe,IAAT;AACD,OALD,MAMK;AACHf,iBAASqB,OAAT,CAAiB8S,GAAjB,EAAsBqY,SAAtB;AACD;AACDoB,eAAShvB,MAAT;AACD,KAXD;AAYA,WAAOqB,OAAP;AACD,GAxBD;;AA0BA9H,aAAWsE,SAAX,CAAqBqG,gBAArB,GAAwC,YAAW;AACjD;AACA;AACA;AACA,QAAI9C,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;;AAEA,QAAI,KAAK8C,QAAL,CAAcjK,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,UAAI,KAAK6D,MAAL,KAAgB,SAAhB,IAA6B,OAAOoxB,iBAAP,KAA6B,WAA9D,EAA2E;AACzE,aAAKC,oBAAL,GAA4B/pB,IAA5B,CAAiC,YAAW;AAC1CjE,mBAASqB,OAAT;AACD,SAFD;AAGD,OAJD,MAKK;AACH;AACArB,iBAASqB,OAAT;AACD;AACF,KAVD,MAWK;AAAE;AACLrB,eAASqB,OAAT;AACD;AACD,WAAOpB,OAAP;AACD,GAtBD;AAwBD,CAtSD,EAsSGlD,MAtSH;;AAwSA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBuH,iBAArB,GAAyC,YAAY;;AAEnD,QAAI7H,OAAJ,EAAa6D,QAAb,EAAuBC,OAAvB,EAAgCpF,SAAhC,EAA2CozB,gBAA3C,EAA6DC,IAA7D;AACA/xB,cAAU,IAAV;;AAEA6D,eAAW,IAAIrI,EAAEyI,QAAN,EAAX;AACAH,cAAUD,SAASC,OAAT,EAAV;;AAEA;AACA;AACA,QAAI,KAAKnF,aAAL,IAAsB,KAAKyrB,QAA/B,EAAyC;AACvC1rB,kBAAY,KAAKC,aAAjB;AACD,KAFD,MAGK;AACHD,kBAAY,KAAKA,SAAjB;AACD;AACD,SAAKszB,eAAL,GAAuBtzB,SAAvB;AACA,QAAI1C,WAAWG,qBAAf,EAAsC;AACpC;AACA,WAAK81B,mBAAL,GAA2B9xB,IAA3B,CAAgC,YAAW;AACzC0D,iBAASqB,OAAT;AACD,OAFD;AAGD,KALD,MAMK;AACH;AACA,UAAI,CAAClJ,WAAW2E,uBAAhB,EAAyC;AACvCnF,UAAE02B,SAAF,CAAY,oCAAZ,EAAkDttB,IAAlD,CAAuD,YAAY;AACjEf,mBAASe,IAAT;AACD,SAFD;AAGD;;AAED;AACApJ,QAAE,MAAF,EAAU+mB,EAAV,CAAa,uBAAb,EAAsC,YAAY;AAChDviB,gBAAQiyB,mBAAR,GAA8B9xB,IAA9B,CAAmC,YAAW;AAC5C0D,mBAASqB,OAAT;AACD,SAFD;AAGD,OAJD;AAKD;AACD,WAAOpB,OAAP;AACD,GAvCD;;AAyCA9H,aAAWsE,SAAX,CAAqB2xB,mBAArB,GAA2C,YAAY;;AAErD;AACA,QAAIpuB,QAAJ,EAAcC,OAAd,EAAuB9D,OAAvB,EAAgCmyB,WAAhC,EAA6CC,YAA7C,EAA2DC,eAA3D;;AAEAxuB,eAAW,IAAIrI,EAAEyI,QAAN,EAAX;AACAH,cAAUD,SAASC,OAAT,EAAV;;AAEA9D,cAAU,IAAV;;AAEAmyB,kBAAc,KAAKxtB,OAAL,GAAe,UAA7B;;AAEA,SAAKoF,eAAL,CAAqB8U,OAArB,CAA6BrjB,EAAE,OAAF,EAAWsB,IAAX,CAAgB,IAAhB,EAAsBq1B,WAAtB,CAA7B;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAKG,oBAAL,GAA4B,KAA5B;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAItyB,QAAQ4G,QAAR,CAAiBjK,MAArB,EAA6B;AAC3B;AACA;AACA;AACAy1B,qBAAe,CAAf;AACA,WAAKrpB,oBAAL,GAA4B,KAA5B;AACD,KAND,MAOK;AACH;AACA;AACA,UAAI,KAAK+L,UAAT,EAAqB;AACnBsd,uBAAe,CAAf;AACD,OAFD,MAGK;AACHA,uBAAe,CAAf;AACD;AACF;AACDC,sBAAkB,KAAKE,oBAAL,CAA0B,KAAKP,eAA/B,EAAgD,KAAKG,WAArD,CAAlB;AACA,QAAIE,eAAJ,EAAqB;AACnB,WAAKjR,OAAL,GAAeiR,gBAAgB,CAAhB,CAAf;AACA,WAAKhR,QAAL,GAAgBgR,gBAAgB,CAAhB,CAAhB;AACA,WAAKG,aAAL,GAAqBxyB,QAAQohB,OAAR,GAAkBphB,QAAQqhB,QAA/C;AACD,KAJD,MAKK;AACH;AACA;AACA;AACA,WAAKD,OAAL,GAAe,IAAf;AACA,WAAKC,QAAL,GAAgB,IAAhB;AACD;AACD,SAAKrK,aAAL,GAAqB,IAAIyb,GAAGC,MAAP,CAAcP,WAAd,EAA2B;AAC9CQ,eAAS,KAAKX,eADgC;AAE9CnnB,aAAO,KAAKuW,OAFkC;AAG9CpW,cAAQ,KAAKqW,QAHiC;AAI9CuR,kBAAY;AACVC,qBAAa,CADH;AAEVhX,eAAO,KAAK5e,SAFF;AAGV2N,kBAAU,CAHA,EAGG;AACbkoB,wBAAgBV,YAJN;AAKV;AACAW,YAAI,KAAKxzB,IANC,EAMK;AACfyzB,wBAAgB,CAPN,EAOS;AACnBC,aAAK,CARK,EAQF;AACRC,eAAO,CATG,CASD;AATC,OAJkC;AAe9CC,cAAQ;AACNC,iBAAS,mBAAY;AACnB,cAAIpzB,QAAQmvB,WAAZ,EAAyB;AACvB;AACAnvB,oBAAQmvB,WAAR,GAAsB,KAAtB;AACA,gBAAInvB,QAAQa,OAAZ,EAAqB;AACnB;AACAb,sBAAQqzB,SAAR;AACD;AACF;AACD,cAAI,OAAOrzB,QAAQwyB,aAAf,KAAiC,WAArC,EAAkD;AAChDxyB,oBAAQszB,mBAAR,CAA4BtzB,QAAQgyB,eAApC,EAAqDG,WAArD;AACD;AACDtuB,mBAASqB,OAAT;AACD,SAdK;AAeNquB,iBAAS,iBAAUhG,CAAV,EAAa;AACpB1pB,mBAASe,IAAT;AACD,SAjBK;AAkBN4uB,uBAAe,uBAAUjG,CAAV,EAAa;AAC1B,cAAIkG,cAAczzB,QAAQ0zB,cAAR,CAAuBnG,EAAEzxB,IAAzB,CAAlB;AACA,cAAI23B,gBAAgB,SAApB,EAA+B;AAC7BzzB,oBAAQa,OAAR,GAAkB,IAAlB;AACAb,oBAAQmE,cAAR,GAAyB,IAAzB;AACD,WAHD,MAIK;AACHnE,oBAAQa,OAAR,GAAkB,KAAlB;AACD;AACD,cAAIb,QAAQ2zB,eAAR,IAA2BF,gBAAgB,QAA/C,EAAyD;AACvD,gBAAI,OAAOzzB,QAAQuhB,UAAf,KAA8B,WAAlC,EAA+C;AAC7CvhB,sBAAQuhB,UAAR,CAAmB8B,IAAnB;AACD;AACDrjB,oBAAQ2zB,eAAR,GAA0B,KAA1B;AACA3zB,oBAAQ4zB,OAAR,GAAkB,KAAlB;AACA5zB,oBAAQa,OAAR,GAAkB,KAAlB;AACD;AACF,SAnCK;AAoCNgzB,iCAAyB,mCAAY;AACnC;AACD,SAtCK;AAuCNC,qBAAa,qBAAUvG,CAAV,EAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAvtB,kBAAQ+zB,wBAAR;AACD;AAtDK;AAfsC,KAA3B,CAArB;AAwEA/zB,YAAQghB,YAAR,CAAqBhhB,QAAQ+J,eAA7B,EAA8C,SAA9C;AACA/J,YAAQqE,MAAR,CAAe5B,MAAf;AACA,WAAOqB,OAAP;AACD,GAnID;;AAqIA9H,aAAWsE,SAAX,CAAqBiyB,oBAArB,GAA4C,UAAU7zB,SAAV,EAAqBs1B,kBAArB,EAAyC;;AAEnF;AACA;AACA;AACA;;AAEA,QAAIC,CAAJ,EAAOxqB,GAAP,EAAYyqB,OAAZ,EAAqBrpB,KAArB,EAA4BG,MAA5B;;AAEAipB,QAAI,EAAJ;;AAEA,QAAI,OAAO,KAAK9uB,cAAZ,KAA+B,WAA/B,IAA8C,OAAO,KAAKE,eAAZ,KAAgC,WAAlF,EAA+F;AAC7F4uB,QAAE,CAAF,IAAO,KAAK9uB,cAAZ;AACA8uB,QAAE,CAAF,IAAO,KAAK5uB,eAAZ;AACA,aAAO4uB,CAAP;AACD,KAJD,MAKK;AACH,UAAI,OAAOz4B,EAAE,MAAMw4B,kBAAR,CAAP,KAAuC,WAA3C,EAAwD;AACtDE,kBAAU14B,EAAE,MAAMw4B,kBAAR,CAAV;AACAnpB,gBAAQqpB,QAAQp3B,IAAR,CAAa,OAAb,CAAR;AACAkO,iBAASkpB,QAAQp3B,IAAR,CAAa,QAAb,CAAT;AACA,YAAI+N,QAAQ,CAAR,IAAaG,SAAS,CAA1B,EAA6B;AAC3BipB,YAAE,CAAF,IAAOppB,KAAP;AACAopB,YAAE,CAAF,IAAOjpB,MAAP;AACA,iBAAOipB,CAAP;AACD;AACF;AACF;AACD,WAAO,KAAP;AACD,GA7BD;;AA+BAj4B,aAAWsE,SAAX,CAAqBgzB,mBAArB,GAA2C,UAAS50B,SAAT,EAAoBs1B,kBAApB,EAAwC;;AAEjF;AACA;AACA;;AAEA,QAAIC,CAAJ,EAAOppB,KAAP,EAAcG,MAAd;;AAEA,QAAI,OAAO,KAAKwnB,aAAZ,KAA8B,WAAlC,EAA+C;AAC7C;AACA,UAAI,KAAK2B,wBAAT,EAAmC;AACjC;AACA,YAAI,KAAKnd,aAAT,EAAwB;AACtB,eAAKA,aAAL,CAAmBod,OAAnB,CAA2B,KAAKhT,OAAhC,EAAyC,KAAKC,QAA9C;AACD;AACD,aAAK8S,wBAAL,GAAgC,KAAhC;AACD,OAND,MAOK;AACH;AACA;AACAtpB,gBAAQ,KAAKiT,YAAL,CAAkBjT,KAAlB,EAAR;AACAG,iBAASqP,KAAKqH,KAAL,CAAW7W,QAAQ,KAAK2nB,aAAxB,CAAT;AACA,YAAI,KAAKxb,aAAT,EAAwB;AACtB,eAAKA,aAAL,CAAmBod,OAAnB,CAA2BvpB,KAA3B,EAAkCG,MAAlC;AACD;AACF;AACF,KAlBD,MAmBK;AACHipB,UAAI,KAAK1B,oBAAL,CAA0B7zB,SAA1B,EAAqCs1B,kBAArC,CAAJ;AACA,UAAIC,CAAJ,EAAO;AACLppB,gBAAQopB,EAAE,CAAF,CAAR;AACAjpB,iBAASipB,EAAE,CAAF,CAAT;AACA,YAAIppB,QAAQ,CAAR,IAAaG,SAAS,CAA1B,EAA6B;AAC3B,eAAK8S,YAAL,CAAkBxb,GAAlB,CAAsB,WAAtB,EAAkCuI,QAAQ,IAA1C;AACA,eAAK2nB,aAAL,GAAqB3nB,QAAQG,MAA7B;AACA,eAAKoW,OAAL,GAAevW,KAAf;AACA,eAAKwW,QAAL,GAAgBrW,MAAhB;AACA,cAAIH,UAAU,KAAKiT,YAAL,CAAkBjT,KAAlB,EAAd,EAAyC;AACvC;AACA;AACAA,oBAAQ,KAAKiT,YAAL,CAAkBjT,KAAlB,EAAR;AACAG,qBAASqP,KAAKqH,KAAL,CAAW7W,QAAQ,KAAK2nB,aAAxB,CAAT;AACA,gBAAI,KAAKxb,aAAT,EAAwB;AACtB,mBAAKA,aAAL,CAAmBod,OAAnB,CAA2BvpB,KAA3B,EAAkCG,MAAlC;AACD;AACF;AACF;AACF;AACF;AACF,GAjDD;;AAmDAhP,aAAWsE,SAAX,CAAqB+zB,wBAArB,GAAgD,YAAW;;AAEzD;;AAEA,QAAIJ,CAAJ,EAAOppB,KAAP,EAAcG,MAAd;;AAEA,QAAI,KAAKgM,aAAL,IAAsB,OAAO,KAAKoK,OAAZ,KAAwB,WAA9C,IAA6D,OAAO,KAAKC,QAAZ,KAAyB,WAA1F,EAAuG;AACrG,WAAKrK,aAAL,CAAmBod,OAAnB,CAA2B,KAAKhT,OAAhC,EAAyC,KAAKC,QAA9C;AACD;AACF,GATD;;AAYArlB,aAAWsE,SAAX,CAAqBuxB,oBAArB,GAA4C,YAAY;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAIhuB,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;;AAEA,QAAI9D,OAAJ,EAAa8xB,gBAAb,EAA+BpzB,SAA/B,EAA0CiD,CAA1C;;AAEA3B,cAAU,IAAV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAKgJ,UAAL,GAAkB,EAAlB;;AAEA;AACA;AACA,QAAI,KAAKrK,aAAL,IAAsB,KAAKyrB,QAA/B,EAAyC;AACvC1rB,kBAAY,KAAKC,aAAjB;AACD,KAFD,MAGK;AACHD,kBAAY,KAAKA,SAAjB;AACD;;AAED;AACA;;AAEA;AACA;AACAlD,MAAE84B,MAAF,CAAS;AACPr0B,YAAM,gBAAU;AACd,eAAOs0B,cAAP;AACD,OAHM;AAIPC,gBAAU,GAJH,EAIQ;AACfC,gBAAU;AALH,KAAT,EAOC3sB,IAPD,CAOM,YAAU;AACd9H,cAAQ00B,qBAAR,CAA8Bh2B,SAA9B,EAAyCoJ,IAAzC,CAA8C,YAAW;AACvDjE,iBAASqB,OAAT;AACD,OAFD;AAGD,KAXD,EAYCN,IAZD,CAYM,YAAU;AACdV,cAAQyB,GAAR,CAAY,8EAAZ;AACD,KAdD;;AAgBA,WAAO7B,OAAP;AACD,GAzDD;;AA2DA9H,aAAWsE,SAAX,CAAqBo0B,qBAArB,GAA6C,UAAUh2B,SAAV,EAAqB;AAChE;AACA,QAAImF,WAAW,IAAIrI,EAAEyI,QAAN,EAAf;AACA,QAAIH,UAAUD,SAASC,OAAT,EAAd;;AAEA,QAAI9D,OAAJ,EAAa2B,CAAb,EAAgBgzB,OAAhB,EAAyBjE,SAAzB,EAAoCvM,UAApC,EAAgDyQ,SAAhD,EAA2DC,OAA3D,EAAoE3E,cAApE;;AAEAlwB,cAAU,IAAV;;AAEA80B,SAAKC,MAAL,CAAYC,SAAZ,CAAsBpD,iBAAtB;AACAkD,SAAKC,MAAL,CACGvsB,IADH,CACQ,SADR,EACmB,IADnB,EAEGrI,IAFH,CAEQ,YAAW;AACf,UAAI80B,UAAUH,KAAKC,MAAL,CAAYG,OAAZ,CAAoBtuB,QAApB,CAA6B+R,IAA7B,CAAkC;AAC9C,gBAAQ,aADsC;AAE9C,mBAAWja;AAFmC,OAAlC,CAAd;AAIAu2B,cAAQ90B,IAAR,CAAa,UAAS4xB,IAAT,EAAe;AAC1B,YAAIA,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBx4B,MAAtB,EAA8B;AAAE;AAC9BqD,kBAAQgnB,WAAR,GAAsB,IAAtB;AACAhnB,kBAAQ+I,oBAAR,GAA+B,IAA/B;AACA,cAAI/I,QAAQwlB,YAAR,KAAyB,CAA7B,EAAgC;AAC9BxlB,oBAAQ8U,UAAR,GAAqB,IAArB;AACD,WAFD,MAGK;AACH9U,oBAAQ8U,UAAR,GAAqB,KAArB;AACD;AACD;AACA,eAAKnT,IAAE,CAAP,EAAUA,IAAIowB,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBx4B,MAAhC,EAAwCgF,GAAxC,EAA6C;;AAE3CgzB,sBAAU5C,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBxzB,CAAlB,EAAqB8R,EAA/B;AACA0Q,yBAAa4N,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBxzB,CAAlB,EAAqByzB,OAArB,CAA6B5hB,IAA1C,CAH2C,CAGK;AAChDkd,wBAAYqB,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBxzB,CAAlB,EAAqByzB,OAArB,CAA6BjsB,QAAzC;AACAyrB,wBAAY7C,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBxzB,CAAlB,EAAqByzB,OAArB,CAA6BR,SAAzC,CAL2C,CAKS;AACpDC,sBAAU9C,KAAK/V,MAAL,CAAYmZ,KAAZ,CAAkBxzB,CAAlB,EAAqByzB,OAArB,CAA6BP,OAAvC,CAN2C,CAMK;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAID,cAAc,KAAd,IAAuB,CAACC,OAA5B,EAAqC;;AAEnC;AACA,kBAAI1Q,eAAe,EAAnB,EAAuB;AACrBA,6BAAankB,QAAQ2wB,eAAR,CAAwBD,SAAxB,CAAb;AACD;;AAED;AACA,kBAAIA,cAAc1wB,QAAQT,IAA1B,EAAgC;AAC9B2wB,iCAAiB,IAAjB;AACD,eAFD,MAGK;AACHA,iCAAiB,KAAjB;AACD;;AAEDlwB,sBAAQgJ,UAAR,CAAmBoB,IAAnB,CAAwB;AACtB,4BAAYsmB,SADU;AAEtB,yBAASvM,UAFa;AAGtB,uBAAO+L;AAHe,eAAxB;AAKD;AACF;AACD;AACAlwB,kBAAQoH,WAAR,CAAoB,UAApB;AACAvD,mBAASqB,OAAT;AACD,SAjDD,MAkDK;AACHlF,kBAAQgnB,WAAR,GAAsB,KAAtB;AACAhnB,kBAAQ+I,oBAAR,GAA+B,KAA/B;AACAlF,mBAASqB,OAAT;AACD;AACF,OAxDD,EAwDG,UAAUwgB,MAAV,EAAkB;AACnBxhB,gBAAQyB,GAAR,CAAY,YAAY+f,OAAO1J,MAAP,CAAcjX,KAAd,CAAoBswB,OAA5C;AACD,OA1DD;AA2DD,KAlEH;AAmEA,WAAOvxB,OAAP;AACD,GA9ED;;AAgFA9H,aAAWsE,SAAX,CAAqByzB,wBAArB,GAAgD,YAAY;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIzjB,OAAJ,EAAaglB,QAAb,EAAuBC,eAAvB;;AAEAjlB,cAAU,KAAK0G,aAAL,CAAmBwe,UAAnB,EAAV;AACA,QAAIllB,QAAQ3T,MAAZ,EAAoB;AAClB,WAAK,IAAIgF,IAAE,CAAX,EAAcA,IAAE2O,QAAQ3T,MAAxB,EAAgCgF,GAAhC,EAAqC;AACnC,YAAI2O,QAAQ3O,CAAR,KAAc,IAAlB,EAAwB;AAAE;AACxB,eAAKuV,eAAL,GAAuB,IAAvB;AACA,cAAI,CAAC,KAAK8P,WAAV,EAAuB;AACrB;AACA;AACA,iBAAKA,WAAL,GAAmB,IAAnB;AACA,iBAAKje,oBAAL,GAA4B,IAA5B;AACD;AACD;AACD,SATD,MAUK,IAAIuH,QAAQ3O,CAAR,KAAc,UAAlB,EAA8B;AAAE;AACnC,eAAKuV,eAAL,GAAuB,UAAvB;AACA,cAAI,CAAC,KAAK8P,WAAV,EAAuB;AACrB;AACA;AACA,iBAAKA,WAAL,GAAmB,IAAnB;AACA,iBAAKje,oBAAL,GAA4B,IAA5B;AACD;AACD;AACD;AACF;AACD,UAAI,OAAO,KAAKmO,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,YAAI,KAAKnO,oBAAT,EAA+B;AAC7B;AACA,eAAKiO,aAAL,CAAmBC,SAAnB,CAA6B,KAAKC,eAAlC,EAAmD,OAAnD,EAA4D,EAAC,gBAAgB,KAAKhO,WAAtB,EAA5D;AACA;AACA,eAAK8N,aAAL,CAAmBC,SAAnB,CAA6B,KAAKC,eAAlC,EAAkD,UAAlD,EAA6D,KAAKC,cAAL,CAAoB,MAApB,EAA2B,KAAKpJ,gBAAhC,EAAiD,SAAjD,CAA7D;AACA;AACD,SAND,MAOK;AACH;AACA;AACA,eAAKiJ,aAAL,CAAmBye,YAAnB,CAAgC,KAAKve,eAArC;AACD;AACF;AACF,KArCD,MAsCK;AACH;AACA;AACA,WAAK8P,WAAL,GAAmB,KAAnB;AACA,WAAKje,oBAAL,GAA4B,KAA5B;AACD;AACD,SAAKT,eAAL;AACD,GAhED;AAkED,CA1dD,EA0dG1H,MA1dH;;AA4dA,CAAC,UAAUpF,CAAV,EAAa;;AAGZ;AACA;AACA;AACA;;AAEAS,SAAQktB,gBAAR,GAA2B,UAAS3kB,SAAT,EAAoBkxB,GAApB,EAAyBC,WAAzB,EAAsCh5B,MAAtC,EAA8C2d,GAA9C,EAAmDsb,GAAnD,EAAwDC,WAAxD,EAAqE9Q,KAArE,EAA4E+Q,SAA5E,EAAuFC,aAAvF,EAAsGC,YAAtG,EAAoH;;AAE7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIh2B,OAAJ;;AAEAA,cAAU,IAAV;;AAEA;AACA,SAAKgN,QAAL,GAAgB,CAAhB,CApB6I,CAoB1H;AACnB,SAAKipB,QAAL,GAAgB,KAAhB;AACA,SAAKC,WAAL,GAAmB,IAAnB,CAtB6I,CAsBpH;AACzB,SAAKC,gBAAL,GAAwB,CAAxB;AACA,SAAKC,iBAAL,GAAyB,CAAzB;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,YAAL,GAAoB,CAApB;;AAEA,SAAKC,OAAL,GAAe/6B,EAAEk6B,GAAF,CAAf;;AAEA;AACA,QAAIK,aAAJ,EAAmB;AACjB,WAAKS,SAAL,GAAiBh7B,EAAE,aAAF,CAAjB;AACA,WAAKi7B,SAAL,GAAiBj7B,EAAE,aAAF,CAAjB;AACD;;AAED;AACA,SAAKk7B,QAAL,GAAgBl7B,EAAE,OAAF,EAAU;AACxB,qBAAem6B,WADS;AAExB,eAAS,UAAUG,SAAV,GAAsB;AAFP,KAAV,CAAhB;;AAKA,QAAIE,iBAAiB,SAArB,EAAgC;AAC9B,WAAKU,QAAL,CAAc55B,IAAd,CAAmB,UAAnB,EAA+B,GAA/B;AACD,KAFD,MAGK;AACH,WAAK45B,QAAL,CAAc55B,IAAd,CAAmB,UAAnB,EAA+B,IAA/B;AACD;AACD;AACA,SAAK45B,QAAL,CAAc55B,IAAd,CAAmB;AACjB,cAAQ,QADS;AAEjB,oBAAcioB,KAFG;AAGjB,uBAAiBzK,GAHA;AAIjB,uBAAiBsb;AAJA,KAAnB;;AAOA,SAAKe,WAAL,GAAmBn7B,EAAE,OAAF,CAAnB;AACA,SAAK+6B,OAAL,CAAal0B,MAAb,CAAoB,KAAKs0B,WAAzB;;AAEA,SAAKA,WAAL,CAAiB75B,IAAjB,CAAsB,MAAtB,EAA8B,SAA9B;AACA,SAAK65B,WAAL,CAAiBllB,QAAjB,CAA0B,cAA1B;;AAEA,SAAK8kB,OAAL,CAAal0B,MAAb,CAAoB,KAAKm0B,SAAzB;AACA,SAAKD,OAAL,CAAal0B,MAAb,CAAoB,KAAKo0B,SAAzB;AACA,SAAKF,OAAL,CAAal0B,MAAb,CAAoB,KAAKq0B,QAAzB;;AAEA,SAAKH,OAAL,CAAa3Y,IAAb,CAAkB,aAAlB;AACA,SAAKgZ,UAAL,GAAkB,KAAKL,OAAL,CAAarwB,MAAb,EAAlB;;AAEA,QAAIyvB,gBAAgB,YAApB,EAAkC;AAChC,WAAKiB,UAAL,CAAgB/rB,KAAhB,CAAsBlO,MAAtB;AACA,WAAK65B,SAAL,CAAe3rB,KAAf,CAAqB,CAArB;AACD,KAHD,MAIK;AACH,WAAK+rB,UAAL,CAAgB5rB,MAAhB,CAAuBrO,MAAvB;AACA,WAAK65B,SAAL,CAAexrB,MAAf,CAAsB,CAAtB;AACD;AACD,SAAK4rB,UAAL,CAAgBnlB,QAAhB,CAAyB,UAAUqkB,SAAV,GAAsB,UAA/C;;AAEA,QAAIC,aAAJ,EAAmB;AACjB,WAAKS,SAAL,CAAe/kB,QAAf,CAAwB,UAAUqkB,SAAV,GAAsB,SAA9C;;AAEA,WAAKW,SAAL,CAAe5rB,KAAf,CAAqB,CAArB;AACA,WAAK4rB,SAAL,CAAehlB,QAAf,CAAwB,UAAUqkB,SAAV,GAAsB,SAA9C;;AAEA;AACA,WAAKe,WAAL,CAAiBjB,GAAjB;AACD;;AAED,SAAKc,QAAL,CAAcI,KAAd,CAAoB,UAAU3gB,KAAV,EAAiB;AACnCnW,cAAQ+2B,QAAR,GAAmB,IAAnB;AACA/2B,cAAQg3B,cAAR;AACD,KAHD,EAGG,UAAU7gB,KAAV,EAAiB;AAClBnW,cAAQ+2B,QAAR,GAAmB,KAAnB;;AAEA,UAAI,CAAC/2B,QAAQi3B,QAAT,IAAqBj3B,QAAQi2B,QAA7B,IAAyCj2B,QAAQk2B,WAAR,KAAwB,OAArE,EAA8E;AAC5El2B,gBAAQk3B,YAAR,CAAqBl3B,QAAQm3B,eAAR,CAAwBhhB,MAAMihB,KAA9B,CAArB;AACD;AACDp3B,cAAQg3B,cAAR;AACD,KAVD;;AAYA,SAAKN,QAAL,CAAcW,SAAd,CAAwB,UAAUlhB,KAAV,EAAiB;AACvC,UAAInW,QAAQi2B,QAAR,IAAoBj2B,QAAQk2B,WAAR,KAAwB,OAAhD,EAAyD;AACvDl2B,gBAAQs3B,gBAAR,CAAyBnhB,MAAMihB,KAA/B;AACD;AACF,KAJD;;AAMA,SAAKV,QAAL,CAAc/T,KAAd,CAAoB,UAAUxM,KAAV,EAAiB;AACnCnW,cAAQ+2B,QAAR,GAAmB,IAAnB;AACA/2B,cAAQg3B,cAAR;AACD,KAHD;;AAKA,SAAKN,QAAL,CAAca,IAAd,CAAmB,UAAUphB,KAAV,EAAiB;AAClCnW,cAAQ+2B,QAAR,GAAmB,KAAnB;AACA/2B,cAAQg3B,cAAR;AACD,KAHD;;AAKA,SAAKT,OAAL,CAAaO,KAAb,CAAmB,YAAY;AAC7B92B,cAAQi3B,QAAR,GAAmB,IAAnB;AACAj3B,cAAQg3B,cAAR;AACD,KAHD,EAGG,UAAU7gB,KAAV,EAAiB;AAClBnW,cAAQi3B,QAAR,GAAmB,KAAnB;AACAj3B,cAAQw3B,gBAAR,GAA2B,IAA3B;AACAx3B,cAAQg3B,cAAR;;AAEA,UAAI,CAACh3B,QAAQ+2B,QAAT,IAAqB/2B,QAAQi2B,QAA7B,IAAyCj2B,QAAQk2B,WAAR,KAAwB,OAArE,EAA8E;AAC5El2B,gBAAQk3B,YAAR,CAAqBl3B,QAAQm3B,eAAR,CAAwBhhB,MAAMihB,KAA9B,CAArB;AACD;AACF,KAXD;;AAaA,SAAKb,OAAL,CAAac,SAAb,CAAuB,UAAUlhB,KAAV,EAAiB;AACtCnW,cAAQw3B,gBAAR,GAA2B;AACzBjK,WAAGpX,MAAMihB,KADgB;AAEzBK,WAAGthB,MAAMuhB;AAFgB,OAA3B;AAIA,UAAI13B,QAAQi2B,QAAR,IAAoBj2B,QAAQk2B,WAAR,KAAwB,OAAhD,EAAyD;AACvDl2B,gBAAQs3B,gBAAR,CAAyBnhB,MAAMihB,KAA/B;AACD;AACDp3B,cAAQg3B,cAAR;AACD,KATD;;AAWA,SAAKT,OAAL,CAAaoB,SAAb,CAAuB,UAAUxhB,KAAV,EAAiB;AACtCnW,cAAQ43B,aAAR,CAAsB,OAAtB,EAA+B53B,QAAQm3B,eAAR,CAAwBhhB,MAAMihB,KAA9B,CAA/B;AACAp3B,cAAQs3B,gBAAR,CAAyBnhB,MAAMihB,KAA/B;AACA,UAAI,CAACp3B,QAAQ02B,QAAR,CAAiBnyB,EAAjB,CAAoB,QAApB,CAAL,EAAoC;AAClCvE,gBAAQ02B,QAAR,CAAiB/T,KAAjB;AACD;AACDxM,YAAM0M,cAAN;AACD,KAPD;;AASA,SAAK6T,QAAL,CAAciB,SAAd,CAAwB,UAAUxhB,KAAV,EAAiB;AACvCnW,cAAQ43B,aAAR,CAAsB,OAAtB,EAA+B53B,QAAQm3B,eAAR,CAAwBn3B,QAAQ02B,QAAR,CAAiB3V,MAAjB,KAA6B/gB,QAAQ02B,QAAR,CAAiB7rB,KAAjB,KAA2B,CAAhF,CAA/B;AACA,UAAI,CAAC7K,QAAQu2B,OAAR,CAAgBhyB,EAAhB,CAAmB,QAAnB,CAAL,EAAmC;AACjCvE,gBAAQu2B,OAAR,CAAgB5T,KAAhB;AACD;AACDxM,YAAM0M,cAAN;AACD,KAND;;AAQA,SAAK0T,OAAL,CAAasB,OAAb,CAAqB,UAAU1hB,KAAV,EAAiB;AACpC,UAAInW,QAAQi2B,QAAR,IAAoBj2B,QAAQk2B,WAAR,KAAwB,OAAhD,EAAyD;AACvDl2B,gBAAQk3B,YAAR,CAAqBl3B,QAAQm3B,eAAR,CAAwBhhB,MAAMihB,KAA9B,CAArB;AACD;AACF,KAJD;;AAMA,SAAKV,QAAL,CAAcmB,OAAd,CAAsB,UAAU1hB,KAAV,EAAiB;AACrC,UAAInW,QAAQi2B,QAAR,IAAoBj2B,QAAQk2B,WAAR,KAAwB,OAAhD,EAAyD;AACvDl2B,gBAAQk3B,YAAR,CAAqBl3B,QAAQm3B,eAAR,CAAwBhhB,MAAMihB,KAA9B,CAArB;AACD;AACF,KAJD;;AAMA,SAAKb,OAAL,CAAal6B,OAAb,CAAqB,UAAU8Z,KAAV,EAAiB;AACpC;AACA,UAAIA,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AACtBpW,gBAAQ83B,kBAAR,CAA2B,CAA3B;AACD;AACD;AAHA,WAIK,IAAI3hB,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AAC3BpW,kBAAQ83B,kBAAR,CAA2B93B,QAAQ0I,QAAnC;AACD;AACD;AAHK,aAIA,IAAIyN,MAAMC,KAAN,KAAgB,EAAhB,IAAsBD,MAAMC,KAAN,KAAgB,EAA1C,EAA8C;AACjDpW,oBAAQ+3B,YAAR,CAAqB,CAAC,CAAtB;AACD;AACD;AAHK,eAIA,IAAI5hB,MAAMC,KAAN,KAAgB,EAAhB,IAAsBD,MAAMC,KAAN,KAAgB,EAA1C,EAA8C;AACjDpW,sBAAQ+3B,YAAR,CAAqB,CAArB;AACD;AACD;AAHK,iBAIA,IAAI5hB,MAAMC,KAAN,KAAgB,EAAhB,IAAsByf,cAAc,CAAxC,EAA2C;AAC9C71B,wBAAQ+3B,YAAR,CAAqBlC,WAArB;AACD;AACD;AAHK,mBAIA,IAAI1f,MAAMC,KAAN,KAAgB,EAAhB,IAAsByf,cAAc,CAAxC,EAA2C;AAC9C71B,0BAAQ+3B,YAAR,CAAqB,CAAClC,WAAtB;AACD,iBAFI,MAIA;AACH;AACD;AACD1f,YAAM0M,cAAN;AACD,KA9BD;;AAgCA,SAAK0T,OAAL,CAAayB,KAAb,CAAmB,UAAU7hB,KAAV,EAAiB;AAClC,UAAIA,MAAMC,KAAN,IAAe,EAAf,IAAqBD,MAAMC,KAAN,IAAe,EAAxC,EAA4C;AAC1C,YAAIpW,QAAQi2B,QAAR,IAAoBj2B,QAAQk2B,WAAR,KAAwB,UAAhD,EAA4D;AAC1Dl2B,kBAAQk3B,YAAR,CAAqBl3B,QAAQm2B,gBAA7B;AACD;AACDhgB,cAAM0M,cAAN;AACD;AACF,KAPD;AAQD,GAlND;;AAoNAsG,mBAAiB7oB,SAAjB,CAA2By3B,YAA3B,GAA0C,UAAUE,UAAV,EAAsB;AAC9D,QAAI,KAAKhC,QAAL,IAAiB,KAAKC,WAAL,KAAqB,UAA1C,EAAsD;AACpD,WAAKC,gBAAL,GAAwB,KAAK+B,QAAL,CAAc,KAAK/B,gBAAL,GAAyB,KAAKE,QAAL,GAAgB4B,UAAvD,CAAxB;AACA,WAAK3B,YAAL,IAAqB,CAArB;AACA,UAAI,KAAKA,YAAL,KAAsB,EAA1B,EAA8B;AAC5B,aAAKA,YAAL,GAAoB,CAApB;AACA,aAAKD,QAAL,IAAiB,CAAjB;AACD;AACD,WAAK8B,mBAAL,CAAyB,KAAKhC,gBAA9B;AACD,KARD,MASK;AACH,WAAKE,QAAL,GAAgB,CAAhB;AACA,WAAKC,YAAL,GAAoB,CAApB;AACA,WAAKH,gBAAL,GAAwB,KAAK+B,QAAL,CAAc,KAAKlrB,QAAL,GAAiB,KAAKqpB,QAAL,GAAgB4B,UAA/C,CAAxB;AACA,WAAKL,aAAL,CAAmB,UAAnB,EAA+B,KAAKzB,gBAApC;AACA,WAAKgC,mBAAL,CAAyB,KAAKhC,gBAA9B;AACD;AACF,GAjBD;AAkBF;;;;;;;;;;;;;;;;;;;;AAoBEhN,mBAAiB7oB,SAAjB,CAA2B62B,eAA3B,GAA6C,UAAUC,KAAV,EAAiB;AAC5D,QAAIrW,SAASqW,QAAQ,KAAKb,OAAL,CAAaxV,MAAb,GAAsB7T,IAA3C;AACA,QAAIF,WAAW,KAAKtE,QAAL,IAAiBqY,SAAS,KAAKwV,OAAL,CAAa1rB,KAAb,EAA1B,CAAf;AACA,WAAO,KAAKqtB,QAAL,CAAclrB,QAAd,CAAP;AACD,GAJD;;AAMAmc,mBAAiB7oB,SAAjB,CAA2B43B,QAA3B,GAAsC,UAAUlrB,QAAV,EAAoB;AACxD,WAAOqN,KAAKub,GAAL,CAAS,CAAT,EAAYvb,KAAKC,GAAL,CAAStN,QAAT,EAAmB,KAAKtE,QAAxB,CAAZ,CAAP;AACD,GAFD;;AAIAygB,mBAAiB7oB,SAAjB,CAA2Bu2B,WAA3B,GAAyC,UAAUnuB,QAAV,EAAoB;AAC3D,QAAIA,aAAa,KAAKA,QAAtB,EAAgC;AAC9B,WAAKA,QAAL,GAAgBA,QAAhB;AACA,WAAK0vB,iBAAL;AACA,WAAK1B,QAAL,CAAc55B,IAAd,CAAmB,eAAnB,EAAoC4L,QAApC;AACD;AACF,GAND;;AAQAygB,mBAAiB7oB,SAAjB,CAA2B+3B,QAA3B,GAAsC,UAAUxtB,KAAV,EAAiB;AACrD,SAAK+rB,UAAL,CAAgB/rB,KAAhB,CAAsBA,KAAtB;AACA,SAAKytB,UAAL;AACA,SAAKF,iBAAL;AACD,GAJD;;AAMAjP,mBAAiB7oB,SAAjB,CAA2Bi4B,QAA3B,GAAsC,YAAY;AAChD,WAAO,KAAK3B,UAAL,CAAgB/rB,KAAhB,EAAP;AACD,GAFD;;AAIAse,mBAAiB7oB,SAAjB,CAA2Bg4B,UAA3B,GAAwC,YAAY;AAClD,SAAK7B,SAAL,CAAe5rB,KAAf,CAAqB,KAAK0rB,OAAL,CAAa1rB,KAAb,MAAwB,KAAKmC,QAAL,GAAgB,KAAKtE,QAA7C,CAArB;AACA,SAAK8tB,SAAL,CAAe3rB,KAAf,CAAqB,KAAK0rB,OAAL,CAAa1rB,KAAb,KAAuB,KAAK2tB,QAAjD;AACD,GAHD;;AAKA;AACArP,mBAAiB7oB,SAAjB,CAA2B83B,iBAA3B,GAA+C,YAAY;AACzD,QAAIK,QAAQ,KAAKzrB,QAAL,GAAgB,KAAKtE,QAAjC;AACA,QAAIgwB,SAAS,KAAKnC,OAAL,CAAa1rB,KAAb,KAAuB4tB,KAApC;AACA,SAAK/B,QAAL,CAAcp0B,GAAd,CAAkB,MAAlB,EAA0Bo2B,SAAU,KAAKhC,QAAL,CAAc7rB,KAAd,KAAwB,CAA5D;;AAEA,QAAI,KAAKorB,QAAT,EAAmB;AACjB,WAAKiB,YAAL,CAAkB,KAAKlqB,QAAvB;AACD;AACF,GARD;;AAUAmc,mBAAiB7oB,SAAjB,CAA2Bq4B,WAA3B,GAAyC,UAAU3rB,QAAV,EAAoB4rB,UAApB,EAAgC;AACvE,SAAK5rB,QAAL,GAAgBA,QAAhB;AACA,SAAKorB,iBAAL;AACA,SAAKpB,cAAL;AACA,SAAKsB,UAAL;AACA,SAAKO,gBAAL,CAAsB7rB,QAAtB,EAAgC4rB,UAAhC;AACD,GAND;;AAQA;AACAzP,mBAAiB7oB,SAAjB,CAA2Bw4B,WAA3B,GAAyC,UAAUL,KAAV,EAAiB;AACxD,SAAKD,QAAL,GAAgBC,KAAhB;AACA,SAAKM,UAAL;AACD,GAHD;;AAKA5P,mBAAiB7oB,SAAjB,CAA2Bs3B,aAA3B,GAA2C,UAAUoB,MAAV,EAAkBhsB,QAAlB,EAA4B;AACrE,QAAI,CAAC,KAAKipB,QAAV,EAAoB;AAClB,WAAKC,WAAL,GAAmB8C,MAAnB;AACA,WAAK/C,QAAL,GAAgB,IAAhB;AACA,WAAKM,OAAL,CAAan6B,OAAb,CAAqB,eAArB,EAAsC,CAAC4Q,QAAD,CAAtC;AACD;AACF,GAND;;AAQAmc,mBAAiB7oB,SAAjB,CAA2B42B,YAA3B,GAA0C,UAAUlqB,QAAV,EAAoB;AAC5D,SAAKkpB,WAAL,GAAmB,IAAnB;AACA,SAAKD,QAAL,GAAgB,KAAhB;AACA,SAAKM,OAAL,CAAan6B,OAAb,CAAqB,cAArB,EAAqC,CAAC4Q,QAAD,CAArC;AACA,SAAK2rB,WAAL,CAAiB3rB,QAAjB,EAA2B,IAA3B;AACD,GALD;;AAOAmc,mBAAiB7oB,SAAjB,CAA2Bg3B,gBAA3B,GAA8C,UAAUF,KAAV,EAAiB;AAC7D,QAAIpqB,WAAW,KAAKmqB,eAAL,CAAqBC,KAArB,CAAf;AACA,QAAI6B,UAAU7B,QAAQ,KAAKb,OAAL,CAAaxV,MAAb,GAAsB7T,IAA9B,GAAsC,KAAKwpB,QAAL,CAAc7rB,KAAd,KAAwB,CAA5E;AACAouB,cAAU5e,KAAKub,GAAL,CAAS,CAAT,EAAYvb,KAAKC,GAAL,CAAS2e,OAAT,EAAkB,KAAK1C,OAAL,CAAa1rB,KAAb,KAAuB,KAAK6rB,QAAL,CAAc7rB,KAAd,EAAzC,CAAZ,CAAV;AACA,SAAKurB,iBAAL,GAAyBppB,QAAzB;AACA,SAAK0pB,QAAL,CAAcp0B,GAAd,CAAkB,MAAlB,EAA0B22B,OAA1B;AACA,SAAKC,qBAAL,CAA2BlsB,QAA3B;AACD,GAPD;;AASAmc,mBAAiB7oB,SAAjB,CAA2B63B,mBAA3B,GAAiD,UAAUnrB,QAAV,EAAoB;AACnE,QAAIyrB,QAAQzrB,WAAW,KAAKtE,QAA5B;AACA,QAAIgwB,SAAS,KAAKnC,OAAL,CAAa1rB,KAAb,KAAuB4tB,KAApC;AACA,SAAKrC,iBAAL,GAAyBppB,QAAzB;AACA,SAAK0pB,QAAL,CAAcp0B,GAAd,CAAkB,MAAlB,EAA0Bo2B,SAAU,KAAKhC,QAAL,CAAc7rB,KAAd,KAAwB,CAA5D;AACA,SAAKquB,qBAAL,CAA2BlsB,QAA3B;AACD,GAND;;AAQAmc,mBAAiB7oB,SAAjB,CAA2B44B,qBAA3B,GAAmD,UAAUlsB,QAAV,EAAoB;AACrE,SAAKupB,OAAL,CAAan6B,OAAb,CAAqB,UAArB,EAAiC,CAAC4Q,QAAD,CAAjC;AACA,SAAK6rB,gBAAL,CAAsB7rB,QAAtB,EAAgC,IAAhC;AACD,GAHD;;AAKAmc,mBAAiB7oB,SAAjB,CAA2Bu4B,gBAA3B,GAA8C,UAAU7rB,QAAV,EAAoB4rB,UAApB,EAAgC;AAC5E;AACA,QAAIO,SAAS9e,KAAK+e,KAAL,CAAWpsB,WAAW,IAAtB,CAAb;AACA,QAAIqsB,WAAWhf,KAAK+e,KAAL,CAAYpsB,WAAW,IAAZ,GAAoB,EAA/B,CAAf;AACA,QAAIssB,WAAWjf,KAAK+e,KAAL,CAAWpsB,WAAW,EAAtB,CAAf;;AAEA,QAAIusB,YAAYJ,WAAW,CAAX,GAAe,MAAf,GAAwB,OAAxC;AACA,QAAIK,cAAcH,aAAa,CAAb,GAAiB,QAAjB,GAA4B,SAA9C;AACA,QAAII,cAAcH,aAAa,CAAb,GAAiB,QAAjB,GAA4B,SAA9C;;AAEA,QAAII,eAAJ;AACA,QAAIP,SAAS,CAAb,EAAgB;AACdO,wBAAkBP,SAChB,GADgB,GACVI,SADU,GAEhB,IAFgB,GAETF,QAFS,GAGhB,GAHgB,GAGVG,WAHU,GAIhB,IAJgB,GAITF,QAJS,GAKhB,GALgB,GAKVG,WALR;AAMD,KAPD,MAQK,IAAIJ,WAAW,CAAf,EAAkB;AACrBK,wBAAmBL,WACjB,GADiB,GACXG,WADW,GAEjB,IAFiB,GAEVF,QAFU,GAGjB,GAHiB,GAGXG,WAHR;AAID,KALI,MAMA;AACHC,wBAAkBJ,WAAW,GAAX,GAAiBG,WAAnC;AACD;;AAED;AACA,QAAI,CAAC,KAAKE,cAAV,EAA0B;AACxB,WAAKA,cAAL,GAAsBn+B,EAAE,QAAF,EAAY;AAChC,iBAAS,gBADuB;AAEhC,qBAAa;AAFmB,OAAZ,CAAtB;AAIA,WAAKo7B,UAAL,CAAgBv0B,MAAhB,CAAuB,KAAKs3B,cAA5B;AACD;AACD,QAAIf,cAAe,KAAKe,cAAL,CAAoB/nB,IAApB,OAA+B8nB,eAAlD,EAAoE;AAClE,WAAKC,cAAL,CAAoB/nB,IAApB,CAAyB8nB,eAAzB;AACD;;AAED;AACA,SAAKhD,QAAL,CAAc55B,IAAd,CAAmB,gBAAnB,EAAqC48B,eAArC;AACA,SAAKhD,QAAL,CAAc55B,IAAd,CAAmB,eAAnB,EAAoCud,KAAK+e,KAAL,CAAWpsB,QAAX,EAAqB7L,QAArB,EAApC;AACD,GA5CD;;AA8CAgoB,mBAAiB7oB,SAAjB,CAA2Bw3B,kBAA3B,GAAgD,UAAU9qB,QAAV,EAAoB;;AAEtE;AACA;;AAEI,SAAK4qB,aAAL,CAAmB,UAAnB,EAA+B5qB,QAA/B;AACA,SAAKmrB,mBAAL,CAAyBnrB,QAAzB;AACA,SAAKmpB,gBAAL,GAAwBnpB,QAAxB;AACD,GARD;;AAUAmc,mBAAiB7oB,SAAjB,CAA2B02B,cAA3B,GAA4C,YAAY;AACtD,QAAI,KAAKD,QAAT,EAAmB;AACjB,WAAKJ,WAAL,CAAiBtT,IAAjB;AACA,UAAI,KAAK4S,QAAT,EAAmB;AACjB,aAAKU,WAAL,CAAiB/kB,IAAjB,CAAsB,KAAKgoB,aAAL,CAAmB,KAAKxD,iBAAxB,CAAtB;AACD,OAFD,MAGK;AACH,aAAKO,WAAL,CAAiB/kB,IAAjB,CAAsB,KAAKgoB,aAAL,CAAmB,KAAK5sB,QAAxB,CAAtB;AACD;AACD,WAAK6sB,kBAAL,CAAwB,KAAKnD,QAAL,CAAc1pB,QAAd,GAAyBE,IAAzB,GAAiC,KAAKwpB,QAAL,CAAc7rB,KAAd,KAAwB,CAAjF;AACD,KATD,MAUK,IAAI,KAAKosB,QAAL,IAAiB,KAAKO,gBAA1B,EAA4C;AAC/C,WAAKb,WAAL,CAAiBtT,IAAjB;AACA,WAAKsT,WAAL,CAAiB/kB,IAAjB,CAAsB,KAAKgoB,aAAL,CAAmB,KAAKzC,eAAL,CAAqB,KAAKK,gBAAL,CAAsBjK,CAA3C,CAAnB,CAAtB;AACA,WAAKsM,kBAAL,CAAwB,KAAKrC,gBAAL,CAAsBjK,CAAtB,GAA0B,KAAKgJ,OAAL,CAAaxV,MAAb,GAAsB7T,IAAxE;AACD,KAJI,MAKA;AACH,WAAKypB,WAAL,CAAiBv0B,IAAjB;AACD;AACF,GAnBD;;AAqBA+mB,mBAAiB7oB,SAAjB,CAA2Bu5B,kBAA3B,GAAgD,UAAUtM,CAAV,EAAa;AAC3D,SAAKoJ,WAAL,CAAiBr0B,GAAjB,CAAqB;AACnB4K,YAAMqgB,IAAK,KAAKoJ,WAAL,CAAiB9rB,KAAjB,KAA2B,CAAhC,GAAqC,EADxB;AAEnB0jB,cAAQ,KAAKmI,QAAL,CAAc1rB,MAAd,KAAyB;AAFd,KAArB;AAID,GALD;;AAOAme,mBAAiB7oB,SAAjB,CAA2Bs5B,aAA3B,GAA2C,UAAUlc,OAAV,EAAmB;;AAE5D;AACA,QAAIoc,SAASzf,KAAK+e,KAAL,CAAW1b,UAAU,IAArB,CAAb;AACA,QAAIqc,WAAW1f,KAAK+e,KAAL,CAAW1b,UAAU,EAArB,IAA2B,EAA1C;AACA,QAAIsc,WAAW3f,KAAK+e,KAAL,CAAW1b,UAAU,EAArB,CAAf;AACA,QAAIsc,WAAW,EAAf,EAAmB;AACjBA,iBAAW,MAAMA,QAAjB;AACD;AACD,QAAIF,SAAS,CAAb,EAAgB;AACd,UAAIC,WAAW,EAAf,EAAmB;AACjBA,mBAAW,MAAMA,QAAjB;AACD;AACD,aAAOD,SAAS,GAAT,GAAeC,QAAf,GAA0B,GAA1B,GAAgCC,QAAvC;AACD,KALD,MAMK;AACH,aAAOD,WAAW,GAAX,GAAiBC,QAAxB;AACD;AACF,GAlBD;AAoBD,CAzcD,EAycGp5B,MAzcH;;AA2cA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBuqB,eAArB,GAAuC,UAASoP,IAAT,EAAe;;AAEpD;AACA;AACA;AACA;AACA;AACA,QAAIj6B,OAAJ,EAAak6B,cAAb,EAA6BC,YAA7B,EAA2C5M,CAA3C,EAA8CkK,CAA9C,EAAiD2C,SAAjD;;AAEAp6B,cAAU,IAAV;;AAEA;AACAk6B,qBAAiB,KAAKv1B,OAAL,GAAe,gBAAhC;AACAw1B,mBAAe,KAAKx1B,OAAL,GAAe,cAA9B;AACA,SAAK01B,iBAAL,GAAyB,EAAzB,CAdoD,CAcvB;AAC7B,SAAKC,gBAAL,GAAwB,CAAxB,CAfoD,CAezB;AAC3B,SAAKC,gBAAL,GAAwB,KAAKF,iBAAL,GAAyB,EAAjD;;AAEA,SAAK/W,aAAL,GAAqB9nB,EAAE,OAAF,EAAU;AAC7B,YAAM0+B,cADuB;AAE7B,eAAS,oBAFoB;AAG7B,qBAAe;AAHc,KAAV,CAArB;AAKA,SAAKM,oBAAL,GAA4Bh/B,EAAE,OAAF,EAAU;AACpC,eAAS,cAD2B;AAEpC,cAAQ;AAF4B,KAAV,CAA5B;AAIA,SAAKi/B,kBAAL,GAA0Bj/B,EAAE,OAAF,EAAU;AAClC,eAAS;AADyB,KAAV,CAA1B;AAGA,SAAKk/B,oBAAL,GAA4Bl/B,EAAE,OAAF,EAAU;AACpC,eAAS;AAD2B,KAAV,CAA5B;AAGA,SAAKm/B,iBAAL,GAAyBn/B,EAAE,OAAF,EAAU;AACjC,eAAS,kBADwB;AAEjC,cAAQ,QAFyB;AAGjC,0BAAoB,UAHa;AAIjC,oBAAc,KAAKuE,EAAL,CAAQ66B,YAJW;AAKjC,uBAAiB,CALgB;AAMjC,uBAAiB,EANgB;AAOjC,uBAAiB,KAAKr9B,MAPW;AAQjC,kBAAY,CAAC;AARoB,KAAV,CAAzB;AAUA,SAAKk9B,kBAAL,CAAwBp4B,MAAxB,CAA+B,KAAKq4B,oBAApC,EAAyD,KAAKC,iBAA9D;AACA,SAAKpX,YAAL,GAAoB/nB,EAAE,OAAF,EAAU;AAC5B,eAAS,gBADmB;AAE5B,mBAAa,WAFe;AAG5B,qBAAe;AAHa,KAAV,CAApB;AAKA4+B,gBAAYh1B,SAASpF,QAAQzC,MAAjB,IAA2B,EAA3B,GAAgC,GAA5C;AACA,SAAKs9B,WAAL,GAAmBr/B,EAAE,OAAF,EAAU;AAC3B,YAAM2+B,YADqB;AAE3B,eAAS;AAFkB,KAAV,EAGhBvoB,IAHgB,CAGXwoB,YAAY,KAAZ,GAAoB,KAAKr6B,EAAL,CAAQ+6B,UAHjB,CAAnB;AAIA,SAAKrX,aAAL,CAAmB3mB,IAAnB,CAAwB;AACtB,0BAAoBq9B;AADE,KAAxB;AAGA,SAAK7W,aAAL,CAAmBjhB,MAAnB,CAA0B,KAAKm4B,oBAA/B,EAAoD,KAAKC,kBAAzD,EAA4E,KAAKlX,YAAjF,EAA8F,KAAKsX,WAAnG;AACAZ,SAAK53B,MAAL,CAAY,KAAKihB,aAAjB;;AAEA,SAAKyX,mBAAL,CAAyB,KAAKx9B,MAA9B;;AAEA;AACA,SAAKo9B,iBAAL,CAAuBpY,EAAvB,CAA0B,WAA1B,EAAsC,UAAUpM,KAAV,EAAiB;AACrDnW,cAAQg7B,cAAR,GAAyB,IAAzB;AACAh7B,cAAQi7B,qBAAR,GAAgCz/B,EAAE,IAAF,EAAQulB,MAAR,GAAiB9T,GAAjD;AACD,KAHD;;AAKAzR,MAAEC,QAAF,EAAY8mB,EAAZ,CAAe,SAAf,EAAyB,UAAUpM,KAAV,EAAiB;AACxCnW,cAAQg7B,cAAR,GAAyB,KAAzB;AACD,KAFD;;AAIAx/B,MAAEC,QAAF,EAAY8mB,EAAZ,CAAe,WAAf,EAA2B,UAAUpM,KAAV,EAAiB;AAC1C,UAAInW,QAAQg7B,cAAZ,EAA4B;AAC1BzN,YAAIpX,MAAMihB,KAAV;AACAK,YAAIthB,MAAMuhB,KAAV;AACA13B,gBAAQk7B,cAAR,CAAuBzD,CAAvB;AACD;AACF,KAND;;AAQA,SAAKkD,iBAAL,CAAuBpY,EAAvB,CAA0B,SAA1B,EAAoC,UAAUpM,KAAV,EAAiB;AACnD;AACA,UAAIA,MAAMC,KAAN,KAAgB,EAAhB,IAAsBD,MAAMC,KAAN,KAAgB,EAA1C,EAA8C;AAC5CpW,gBAAQm7B,YAAR,CAAqB,MAArB;AACD;AACD;AAHA,WAIK,IAAIhlB,MAAMC,KAAN,KAAgB,EAAhB,IAAsBD,MAAMC,KAAN,KAAgB,EAA1C,EAA8C;AACjDpW,kBAAQm7B,YAAR,CAAqB,IAArB;AACD;AACD;AAHK,aAIA,IAAIhlB,MAAMC,KAAN,KAAgB,EAAhB,IAAsBD,MAAMC,KAAN,KAAgB,EAA1C,EAA8C;AACjD;AACA,gBAAIpW,QAAQsjB,aAAR,CAAsB/e,EAAtB,CAAyB,UAAzB,CAAJ,EAA0C;AACxCvE,sBAAQo7B,eAAR;AACD,aAFD,MAGK;AACHp7B,sBAAQq7B,eAAR;AACD;AACF,WARI,MASA;AACH;AACD;AACDllB,YAAM0M,cAAN;AACD,KAvBD;AAwBD,GAxGD;;AA0GA7mB,aAAWsE,SAAX,CAAqBy6B,mBAArB,GAA2C,UAASx9B,MAAT,EAAiB;;AAE1D;AACA,QAAI68B,SAAJ,EAAekB,aAAf;AACAlB,gBAAa78B,SAAO,EAAR,GAAc,GAA1B;AACA+9B,oBAAgBlB,YAAY,GAA5B;;AAEA,QAAImB,aAAJ,EAAmBC,UAAnB,EAA+BC,OAA/B;AACAF,oBAAgBh+B,SAAS,KAAKg9B,gBAA9B;AACAiB,iBAAa,KAAKnB,iBAAL,GAAyBkB,aAAtC;AACAE,cAAUD,aAAa,KAAKlB,gBAA5B;;AAEA,SAAKI,oBAAL,CAA0Bp4B,GAA1B,CAA8B;AAC5B,gBAAUi5B,gBAAgB,IADE;AAE5B,aAAOC,aAAa;AAFQ,KAA9B;AAIA,SAAKb,iBAAL,CAAuB79B,IAAvB,CAA4B;AAC1B,uBAAiBS,MADS;AAE1B,wBAAkB+9B;AAFQ,KAA5B;AAIA,SAAKX,iBAAL,CAAuBr4B,GAAvB,CAA2B;AACzB,aAAOm5B,UAAU;AADQ,KAA3B;AAGA,SAAKlY,YAAL,CAAkB3R,IAAlB,CAAuBwoB,YAAY,GAAnC;AAED,GAzBD;;AA2BAp+B,aAAWsE,SAAX,CAAqBo7B,mBAArB,GAA2C,UAASn+B,MAAT,EAAiB;;AAE1D,QAAIo+B,UAAJ,EAAgBvB,SAAhB,EAA2BwB,WAA3B,EAAwCC,eAAxC,EAAyDC,SAAzD;;AAEAH,iBAAa,KAAK/U,aAAL,CAAmBrpB,MAAnB,CAAb;AACA68B,gBAAa78B,SAAO,EAAR,GAAc,GAA1B;AACAq+B,kBAAc,KAAK77B,EAAL,CAAQxC,MAAR,GAAiB,GAAjB,GAAuB68B,SAAvB,GAAmC,GAAjD;;AAEA,QAAI,KAAKx7B,QAAL,KAAkB,MAAtB,EAA8B;AAC5Bi9B,wBAAkB,iBAAiBF,UAAnC;AACA,WAAKlY,aAAL,CAAmB3lB,IAAnB,CAAwB,MAAxB,EAAgCwG,KAAhC,GAAwCoe,WAAxC,GAAsDjR,QAAtD,CAA+DoqB,eAA/D;AACA,WAAKpY,aAAL,CAAmB3lB,IAAnB,CAAwB,mBAAxB,EAA6C8T,IAA7C,CAAkDgqB,WAAlD;AACD,KAJD,MAKK;AACHE,kBAAY,KAAKp5B,OAAL,GAAe,SAAf,GAA2Bi5B,UAA3B,GAAwC,MAApD;AACA,WAAKlY,aAAL,CAAmB3lB,IAAnB,CAAwB,KAAxB,EAA+BhB,IAA/B,CAAoC,KAApC,EAA0Cg/B,SAA1C;AACD;AACF,GAjBD;;AAmBA9/B,aAAWsE,SAAX,CAAqB46B,cAArB,GAAsC,UAASzD,CAAT,EAAY;;AAEhD;AACA,QAAIsE,IAAJ,EAAUC,SAAV,EAAqBC,SAArB,EAAgCC,SAAhC,EAA2CC,QAA3C;;AAEA,QAAIJ,OAAO,KAAKd,qBAAL,GAA6BxD,CAAxC;;AAEA;AACA;AACA,QAAIpd,KAAK+hB,GAAL,CAASL,IAAT,IAAiB,KAAKxB,gBAA1B,EAA4C;AAC1C,UAAIwB,OAAO,CAAX,EAAc;AACZC,oBAAY,IAAZ;AACD,OAFD,MAGK;AACHA,oBAAY,MAAZ;AACD;AACD,UAAIA,aAAa,IAAb,IAAqB,KAAKz+B,MAAL,IAAe,EAAxC,EAA4C;AAC1C;AACA;AACD,OAHD,MAIK,IAAIy+B,aAAa,MAAb,IAAuB,KAAKz+B,MAAL,IAAe,CAA1C,EAA6C;AAChD;AACA;AACD,OAHI,MAIA;AACH0+B,oBAAY5hB,KAAKqH,KAAL,CAAWrH,KAAK+hB,GAAL,CAASL,IAAT,IAAiB,KAAKxB,gBAAjC,CAAZ;AACA,YAAIyB,aAAa,IAAjB,EAAuB;AACrBE,sBAAY,KAAK3+B,MAAL,GAAc0+B,SAA1B;AACA,cAAIC,YAAY,EAAhB,EAAoB;AAClBA,wBAAY,EAAZ;AACD;AACF,SALD,MAMK;AAAE;AACLA,sBAAY,KAAK3+B,MAAL,GAAc0+B,SAA1B;AACA,cAAIC,YAAY,CAAhB,EAAmB;AACjBA,wBAAY,CAAZ;AACD;AACF;AACD,aAAK7zB,SAAL,CAAe6zB,SAAf,EAdG,CAcwB;AAC3B,aAAKnB,mBAAL,CAAyBmB,SAAzB;AACA,aAAKR,mBAAL,CAAyBQ,SAAzB;AACA,aAAKjB,qBAAL,GAA6BxD,CAA7B;AACD;AACF;AACF,GA5CD;;AA8CAz7B,aAAWsE,SAAX,CAAqB66B,YAArB,GAAoC,UAASa,SAAT,EAAoB;;AAEtD;AACA;AACA;;AAEA;AACA;AACA,QAAIz+B,MAAJ;;AAEA,QAAI,OAAOy+B,SAAP,KAAqB,WAAzB,EAAsC;AACpC,UAAI,KAAK1Y,aAAL,CAAmB/e,EAAnB,CAAsB,UAAtB,CAAJ,EAAuC;AACrC,aAAK62B,eAAL;AACD,OAFD,MAGK;AACH,aAAKC,eAAL;AACD;AACD;AACD;;AAED,QAAIW,aAAa,EAAb,IAAmBA,aAAa,EAApC,EAAwC;AACtCz+B,eAASy+B,YAAY,EAArB;AACD,KAFD,MAGK;;AAEHz+B,eAAS,KAAK8+B,SAAL,EAAT;;AAEA,UAAIL,cAAc,IAAd,IAAsBz+B,SAAS,EAAnC,EAAuC;AACrCA,kBAAU,CAAV;AACD,OAFD,MAGK,IAAIy+B,cAAc,MAAd,IAAwBz+B,SAAS,CAArC,EAAwC;AAC3CA,kBAAU,CAAV;AACD;AACF;;AAED,QAAI,KAAK++B,OAAL,MAAkB/+B,SAAS,CAA/B,EAAkC;AAChC,WAAK4K,OAAL,CAAa,KAAb;AACD,KAFD,MAGK,IAAI5K,WAAW,CAAf,EAAkB;AACrB,WAAK4K,OAAL,CAAa,IAAb;AACD,KAFI,MAGA;AACH,WAAKE,SAAL,CAAe9K,MAAf,EADG,CACqB;AACxB,WAAKw9B,mBAAL,CAAyBx9B,MAAzB;AACA,WAAKm+B,mBAAL,CAAyBn+B,MAAzB;AACD;AACF,GA9CD;;AAgDAvB,aAAWsE,SAAX,CAAqBi8B,UAArB,GAAkC,YAAW;AAC3C,QAAI,KAAKD,OAAL,EAAJ,EAAoB;AAClB,WAAKn0B,OAAL,CAAa,KAAb;AACD,KAFD,MAGK;AACH,WAAKA,OAAL,CAAa,IAAb;AACD;AACF,GAPD;;AASAnM,aAAWsE,SAAX,CAAqB+6B,eAArB,GAAuC,YAAW;;AAEhD,SAAKzY,WAAL;AACA,SAAKkG,WAAL,CAAiB1mB,IAAjB;AACA,SAAKkhB,aAAL,CAAmBD,IAAnB,GAA0BvmB,IAA1B,CAA+B,aAA/B,EAA6C,OAA7C;AACA,SAAK69B,iBAAL,CAAuB79B,IAAvB,CAA4B,UAA5B,EAAuC,GAAvC,EAA4C6lB,KAA5C;AACD,GAND;;AAQA3mB,aAAWsE,SAAX,CAAqB86B,eAArB,GAAuC,YAAW;;AAEhD,SAAK9X,aAAL,CAAmBlhB,IAAnB,GAA0BtF,IAA1B,CAA+B,aAA/B,EAA6C,MAA7C;AACA,SAAK69B,iBAAL,CAAuB79B,IAAvB,CAA4B,UAA5B,EAAuC,IAAvC;AACA,SAAK2mB,aAAL,CAAmBd,KAAnB;AACD,GALD;;AAOA3mB,aAAWsE,SAAX,CAAqBg8B,OAArB,GAA+B,YAAY;;AAEzC,QAAI,KAAK97B,MAAL,KAAgB,OAApB,EAA6B;AAC3B,aAAO,KAAK9D,KAAL,CAAW8/B,KAAlB;AACD,KAFD,MAGK,IAAI,KAAKh8B,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,aAAO,KAAKA,QAAL,CAAciyB,OAAd,EAAP;AACD,KAFI,MAGA,IAAI,KAAKj8B,MAAL,KAAgB,SAApB,EAA+B;AAClC,aAAO,KAAKwW,aAAL,CAAmBslB,OAAnB,EAAP;AACD;AACF,GAXD;;AAaAtgC,aAAWsE,SAAX,CAAqB6H,OAArB,GAA+B,UAASyM,IAAT,EAAe;;AAE5C;AACA,QAAIA,IAAJ,EAAU;AACR;AACA,WAAK8nB,UAAL,GAAkB,KAAKn/B,MAAvB;AACA,WAAKA,MAAL,GAAc,CAAd;AACD,KAJD,MAKK;AAAE;AACL,UAAI,OAAO,KAAKm/B,UAAZ,KAA2B,WAA/B,EAA4C;AAC1C,aAAKn/B,MAAL,GAAc,KAAKm/B,UAAnB;AACD;AACF;;AAED,QAAI,KAAKl8B,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAK9D,KAAL,CAAW8/B,KAAX,GAAmB5nB,IAAnB;AACD,KAFD,MAGK,IAAI,KAAKpU,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,WAAKA,QAAL,CAAcrC,OAAd,CAAsByM,IAAtB;AACD,KAFI,MAGA,IAAI,KAAKpU,MAAL,KAAgB,SAApB,EAA+B;AAClC,UAAIoU,IAAJ,EAAU;AACR,aAAKoC,aAAL,CAAmBpC,IAAnB;AACD,OAFD,MAGK;AACH,aAAKoC,aAAL,CAAmB2lB,MAAnB;AACD;AACF;AACD,SAAK5B,mBAAL,CAAyB,KAAKx9B,MAA9B;AACA,SAAKm+B,mBAAL,CAAyB,KAAKn+B,MAA9B;AACD,GA9BD;;AAgCAvB,aAAWsE,SAAX,CAAqB+H,SAArB,GAAiC,UAAU9K,MAAV,EAAkB;;AAEjD;AACA;;AAEA,QAAI,KAAKiD,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAK9D,KAAL,CAAWa,MAAX,GAAoBA,SAAS,EAA7B;AACA,UAAI,KAAK0pB,eAAL,IAAwB,KAAK2V,SAAjC,EAA4C;AAC1C,aAAKA,SAAL,CAAer/B,MAAf,GAAwB,CAAxB,CAD0C,CACf;AAC5B;AACF,KALD,MAMK,IAAI,KAAKiD,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,WAAKA,QAAL,CAAcnC,SAAd,CAAwB9K,SAAS,EAAjC;AACD,KAFI,MAGA,IAAI,KAAKiD,MAAL,KAAgB,SAApB,EAA+B;AAClC,WAAKwW,aAAL,CAAmB3O,SAAnB,CAA6B9K,SAAS,EAAtC;AACD;;AAED,SAAKm/B,UAAL,GAAkBn/B,MAAlB;AACD,GAnBD;;AAqBAvB,aAAWsE,SAAX,CAAqB+7B,SAArB,GAAiC,UAAU9+B,MAAV,EAAkB;;AAEjD;;AAEA,QAAI,KAAKiD,MAAL,KAAgB,OAApB,EAA6B;AAC3B;AACA,aAAO,KAAK9D,KAAL,CAAWa,MAAX,GAAoB,EAA3B;AACD,KAHD,MAIK,IAAI,KAAKiD,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C;AACA,aAAO,KAAKA,QAAL,CAAc6xB,SAAd,KAA4B,EAAnC;AACD,KAHI,MAIA,IAAI,KAAK77B,MAAL,KAAgB,SAApB,EAA+B;AAClC;AACA,aAAO,KAAKwW,aAAL,CAAmBqlB,SAAnB,KAAiC,EAAxC;AACD;AACF,GAhBD;;AAkBArgC,aAAWsE,SAAX,CAAqBsmB,aAArB,GAAqC,UAAUrpB,MAAV,EAAkB;;AAErD;AACA,QAAIA,UAAU,CAAd,EAAiB;AACf,aAAO,MAAP;AACD,KAFD,MAGK,IAAIA,UAAU,EAAd,EAAkB;AACrB,aAAO,MAAP;AACD,KAFI,MAGA,IAAIA,SAAS,CAAb,EAAgB;AACnB,aAAO,MAAP;AACD,KAFI,MAGA;AACH,aAAO,QAAP;AACD;AACF,GAfD;AAiBD,CArXD,EAqXGqD,MArXH;;AAuXA,CAAC,UAAUpF,CAAV,EAAa;AACZ,MAAIqhC,4BAA4B,8KAAhC;;AAEA;AACA5gC,SAAOsZ,gBAAP,GAA0B,UAASunB,QAAT,EAAmBC,cAAnB,EAAmCC,UAAnC,EAA+Cl9B,KAA/C,EAAsDwX,QAAtD,EAAgE7B,gBAAhE,EAAkF5K,KAAlF,EAAyFoyB,UAAzF,EAAqGC,UAArG,EAAiH;;AAEzI,SAAKp9B,KAAL,GAAaA,KAAb;AACA,SAAK2V,gBAAL,GAAwBA,gBAAxB;AACA,SAAK0nB,yBAAL,GAAiCJ,cAAjC;AACA,SAAKG,UAAL,GAAkBA,UAAlB;AACA,SAAKE,MAAL,GAAc5hC,EAAEshC,QAAF,EAAYhgC,IAAZ,CAAiB,IAAjB,KAA0Bud,KAAK+e,KAAL,CAAW/e,KAAKgjB,MAAL,KAAgB,UAA3B,EAAuCl8B,QAAvC,EAAxC;AACA,QAAInB,UAAU,IAAd;AACA,QAAIs9B,QAAQR,QAAZ;AACA,SAAKQ,KAAL,GAAaA,KAAb;AACAA,UAAMh7B,GAAN,CAAU;AACR,eAASuI,SAAS,KADV;AAER,aAAQoyB,aAAa,GAAb,GAAmB;AAFnB,KAAV;AAIAK,UAAM7rB,QAAN,CAAe,mBAAf;;AAEA,QAAI,CAACwrB,UAAL,EAAiB;AACf,UAAIM,cAAc/hC,EAAE,UAAF,EAAa;AAC5B,iBAAS,kBADmB;AAE5B,iBAASwE,QAAQyV,gBAFW;AAG5B,sBAAczV,QAAQyV;AAHM,OAAb,EAIf7D,IAJe,CAIV,GAJU,CAAlB;AAKA2rB,kBAAYlhC,OAAZ,CAAoB,UAAU8Z,KAAV,EAAiB;AACnC;AACA,YAAIA,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AACtBpW,kBAAQoC,IAAR;AACD;AACF,OALD,EAKGwT,KALH,CAKS,YAAY;AACnB5V,gBAAQoC,IAAR;AACD,OAPD;;AASA,UAAIo7B,UAAUhiC,EAAE,WAAF,CAAd;AACAgiC,cAAQ1gC,IAAR,CAAa,IAAb,EAAmB,gBAAgB,KAAKsgC,MAAxC;AACAI,cAAQl7B,GAAR,CAAY,YAAZ,EAA0B,QAA1B;AACAk7B,cAAQ5rB,IAAR,CAAa9R,KAAb;;AAEAwX,eAASxa,IAAT,CAAc,IAAd,EAAoB,eAAe,KAAKsgC,MAAxC;;AAEAE,YAAMxgC,IAAN,CAAW;AACT,2BAAmB,gBAAgB,KAAKsgC,MAD/B;AAET,4BAAoB,eAAe,KAAKA;AAF/B,OAAX;AAIAE,YAAMze,OAAN,CAAc2e,OAAd;AACAF,YAAMze,OAAN,CAAc0e,WAAd;AACD;;AAEDD,UAAMxgC,IAAN,CAAW;AACT,qBAAe,MADN;AAET,cAAQkgC;AAFC,KAAX;;AAKAM,UAAMjhC,OAAN,CAAc,UAAU8Z,KAAV,EAAiB;AAC7B;AACA,UAAIA,MAAMC,KAAN,KAAgB,EAApB,EAAwB;AACtB,YAAIpW,QAAQk9B,UAAZ,EAAwB;AACtBl9B,kBAAQk9B,UAAR,CAAmB/mB,KAAnB,EAA0B,IAA1B;AACD,SAFD,MAGK;AACHnW,kBAAQoC,IAAR;AACA+T,gBAAM0M,cAAN;AACD;AACF;AACD;AATA,WAUK,IAAI1M,MAAMC,KAAN,KAAgB,CAApB,EAAuB;AAC1B;AACA,cAAIqnB,QAAQH,MAAMx/B,IAAN,CAAW,GAAX,CAAZ;AACA,cAAI4/B,YAAYD,MAAME,MAAN,CAAad,yBAAb,EAAwCc,MAAxC,CAA+C,UAA/C,CAAhB;;AAEA,cAAID,UAAU/gC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B;AACD;;AAED,cAAIihC,UAAUpiC,EAAE,QAAF,CAAd;AACA,cAAIqiC,eAAeH,UAAU9hC,KAAV,CAAgBgiC,OAAhB,CAAnB;AACA,cAAIznB,MAAM0B,QAAV,EAAoB;AAClB;AACA,gBAAIgmB,iBAAiB,CAArB,EAAwB;AACtBH,wBAAUj5B,GAAV,CAAci5B,UAAU/gC,MAAV,GAAmB,CAAjC,EAAoCgmB,KAApC;AACAxM,oBAAM0M,cAAN;AACD;AACF,WAND,MAOK;AACH,gBAAIgb,iBAAiBH,UAAU/gC,MAAV,GAAmB,CAAxC,EAA2C;AACzC+gC,wBAAUj5B,GAAV,CAAc,CAAd,EAAiBke,KAAjB;AACAxM,oBAAM0M,cAAN;AACD;AACF;AACF;AACD1M,YAAM2nB,eAAN;AACD,KAtCD;;AAwCAtiC,MAAE,UAAF,EAAcuiC,GAAd,CAAkB,qBAAlB,EAAyCA,GAAzC,CAA6C,oBAA7C,EAAmEjhC,IAAnE,CAAwE,aAAxE,EAAuF,OAAvF;AACD,GA5FD;;AA8FAyY,mBAAiBjV,SAAjB,CAA2B+iB,IAA3B,GAAkC,YAAY;AAC5C,QAAI,CAAC,KAAK2a,OAAV,EAAmB;AACjB;AACA,UAAIA,UAAUxiC,EAAE,aAAF,EAAiBsB,IAAjB,CAAsB;AACjC,iBAAS,oBADwB;AAEjC,oBAAY;AAFqB,OAAtB,CAAd;AAIA,WAAKkhC,OAAL,GAAeA,OAAf;AACAxiC,QAAE,MAAF,EAAU6G,MAAV,CAAiB27B,OAAjB;;AAEA;AACAA,cAAQzb,EAAR,CAAW,2BAAX,EAAwC,UAAUpM,KAAV,EAAiB;AACvDA,cAAM0M,cAAN;AACD,OAFD;AAGD;;AAEDrnB,MAAE,UAAF,EAAcuiC,GAAd,CAAkB,qBAAlB,EAAyCA,GAAzC,CAA6C,oBAA7C,EAAmEjhC,IAAnE,CAAwE,aAAxE,EAAuF,MAAvF;;AAEA,SAAKkhC,OAAL,CAAa17B,GAAb,CAAiB,SAAjB,EAA4B,OAA5B;AACA,SAAKg7B,KAAL,CAAWh7B,GAAX,CAAe,SAAf,EAA0B,OAA1B;AACA,SAAKg7B,KAAL,CAAWxgC,IAAX,CAAgB;AACd,qBAAe,OADD;AAEd,kBAAY;AAFE,KAAhB;;AAKA,QAAI4gC,YAAY,KAAKJ,KAAL,CAAWx/B,IAAX,CAAgB,GAAhB,EAAqB6/B,MAArB,CAA4Bd,yBAA5B,EAAuDc,MAAvD,CAA8D,UAA9D,CAAhB;AACA,QAAID,UAAU/gC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAKwgC,yBAAL,CAA+B5F,IAA/B;AACD;AACD,QAAIv3B,UAAU,IAAd;AACAslB,eAAW,YAAY;AACrB;AACA;AACA;AACAtlB,cAAQs9B,KAAR,CAAc3a,KAAd;AACD,KALD,EAKG,GALH;AAMD,GApCD;;AAsCApN,mBAAiBjV,SAAjB,CAA2B8B,IAA3B,GAAkC,YAAY;AAC5C,QAAI,KAAK47B,OAAT,EAAkB;AAChB,WAAKA,OAAL,CAAa17B,GAAb,CAAiB,SAAjB,EAA4B,MAA5B;AACD;AACD,SAAKg7B,KAAL,CAAWh7B,GAAX,CAAe,SAAf,EAA0B,MAA1B;AACA,SAAKg7B,KAAL,CAAWxgC,IAAX,CAAgB,aAAhB,EAA+B,MAA/B;AACAtB,MAAE,UAAF,EAAcuiC,GAAd,CAAkB,qBAAlB,EAAyCA,GAAzC,CAA6C,oBAA7C,EAAmEjhC,IAAnE,CAAwE,aAAxE,EAAuF,OAAvF;;AAEA,SAAKqgC,yBAAL,CAA+Bxa,KAA/B;AACD,GATD;AAUD,CAlJD,EAkJG/hB,MAlJH;;AAoJA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBqe,mBAArB,GAA2C,UAASsC,QAAT,EAAmB;;AAE5D;AACA;AACA;AACA;;AAEA,QAAIgd,QAAJ,EAAcC,cAAd,EAA8BC,WAA9B,EAA2C1f,WAA3C,EAAwD2f,aAAxD;;AAEAH,eAAWhd,SAASod,OAAT,EAAX;AACAJ,aAAStiC,IAAT,CAAc,YAAU;AACtBuiC,uBAAiB1iC,EAAE,IAAF,EAAQ2gB,QAAR,CAAiB,SAAjB,CAAjB;AACAgiB,oBAAcD,eAAevhC,MAA7B;AACA,UAAIwhC,WAAJ,EAAiB;AACf1f,sBAAcyf,eAAevyB,EAAf,CAAkBwyB,cAAY,CAA9B,EAAiC7nB,IAAjC,CAAsC,SAAtC,CAAd;AACA,eAAO,KAAP;AACD;AACF,KAPD;AAQA,QAAI,OAAOmI,WAAP,KAAuB,WAA3B,EAAwC;AACtC;AACA2f,sBAAgB,CAAhB;AACD,KAHD,MAIK;AACH;AACAA,sBAAgBh5B,SAASqZ,YAAY,CAAZ,CAAT,CAAhB;AACA2f,uBAAiB,CAAjB;AACA,UAAIA,gBAAgB,CAApB,EAAuB;AACrBA,wBAAgB,CAAhB;AACD;AACF;AACD,WAAOA,aAAP;AACD,GA/BD;;AAiCApiC,aAAWsE,SAAX,CAAqBF,eAArB,GAAuC,UAASk+B,GAAT,EAAc;AACnD;AACA,QAAIC,KAAJ,EAAWjoB,IAAX;AACAioB,YAAQ,CAAR;AACA,SAAKjoB,IAAL,IAAagoB,GAAb,EAAkB;AAChB,UAAIA,IAAIE,cAAJ,CAAmBloB,IAAnB,CAAJ,EAA8B;AAC5B,UAAEioB,KAAF;AACD;AACF;AACD,WAAOA,KAAP;AACD,GAVD;;AAYA;AACAviC,aAAWsE,SAAX,CAAqB4kB,wBAArB,GAAgD,UAAUxH,OAAV,EAAmB;;AAEjE,QAAIoc,SAASzf,KAAK+e,KAAL,CAAW1b,UAAU,IAArB,CAAb;AACA,QAAIqc,WAAW1f,KAAK+e,KAAL,CAAW1b,UAAU,EAArB,IAA2B,EAA1C;AACA,QAAIsc,WAAW3f,KAAK+e,KAAL,CAAW1b,UAAU,EAArB,CAAf;AACA,QAAIsc,WAAW,EAAf,EAAmB;AACjBA,iBAAW,MAAMA,QAAjB;AACD;AACD,QAAIF,SAAS,CAAb,EAAgB;AACd,UAAIC,WAAW,EAAf,EAAmB;AACjBA,mBAAW,MAAMA,QAAjB;AACD;AACD,aAAOD,SAAS,GAAT,GAAeC,QAAf,GAA0B,GAA1B,GAAgCC,QAAvC;AACD,KALD,MAMK;AACH,aAAOD,WAAW,GAAX,GAAiBC,QAAxB;AACD;AACF,GAjBD;;AAmBAh+B,aAAWsE,SAAX,CAAqBgT,qBAArB,GAA6C,UAAUmrB,MAAV,EAAkB;AAC7D,WAAOA,OAAOjP,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCgP,OAAO/O,KAAP,CAAa,CAAb,CAAxC;AACD,GAFD;AAID,CAvED,EAuEG9uB,MAvEH;;AAyEA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBwG,eAArB,GAAuC,YAAW;;AAEhD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAI,CAAC,KAAK2Q,cAAV,EAA0B;AACxB;AACA;AACA;AACA;AACA,WAAKinB,QAAL,GAAgB,KAAK75B,QAAL,CAAcP,KAAd,GAAsBxH,IAAtB,CAA2B,eAA3B,CAAhB;AACA,UAAI,OAAO,KAAK4hC,QAAZ,KAAyB,WAA7B,EAA0C;AACxC,aAAKtsB,WAAL,GAAmB,IAAnB;AACD,OAFD,MAGK;AACH;AACA,YAAI,KAAKzT,aAAT,EAAwB;AACtB,eAAKyT,WAAL,GAAmB,IAAnB;AACD,SAFD,MAGK;AAAE;AACL,eAAKA,WAAL,GAAmB,KAAnB;AACD;AACF;AACF;AACD;AACA,QAAI,KAAKgY,QAAT,EAAmB;AACjB,UAAI,KAAKhY,WAAL,IAAoB,KAAKC,aAA7B,EAA4C;AAC1C;AACA,aAAKssB,aAAL,GAAqB,KAAKxwB,cAA1B;AACA,aAAK8G,MAAL,GAAc,IAAd;AACD,OAJD,MAKK,IAAI,KAAK7C,WAAT,EAAsB;AACzB,aAAKusB,aAAL,GAAqB,OAArB;AACA,aAAK1pB,MAAL,GAAc,IAAd;AACD,OAHI,MAIA,IAAI,KAAK5C,aAAT,EAAwB;AAC3B,aAAKssB,aAAL,GAAqB,MAArB;AACA,aAAK1pB,MAAL,GAAc,IAAd;AACD;AACF,KAdD,MAeK;AAAE;AACL,UAAI,KAAKwC,cAAT,EAAyB;AAAE;AACzB,aAAKmnB,cAAL,GAAsB,KAAKD,aAA3B;AACA,aAAKA,aAAL,GAAqB,KAArB;AACA,aAAK1pB,MAAL,GAAc,KAAd;AACD,OAJD,MAKK;AAAE;AACL,aAAK0pB,aAAL,GAAqB,KAArB;AACD;AACF;;AAED,QAAI,KAAK1pB,MAAT,EAAiB;;AAEf,UAAI,KAAK0pB,aAAL,KAAuB,OAA3B,EAAoC;;AAElC,YAAI,CAAC,KAAKE,qBAAL,EAAL,EAAmC;AACjC;AACA,eAAKC,eAAL;AACD;AACD;AACA,aAAKxnB,QAAL,CAAclV,IAAd;AACA,aAAKkV,QAAL,CAAcoL,WAAd,CAA0B,cAA1B;AACD,OATD,MAUK,IAAI,KAAKic,aAAL,KAAuB,MAA3B,EAAmC;AACtC,aAAKrnB,QAAL,CAAc+L,IAAd;AACA,YAAI,KAAKhV,eAAT,EAA0B;AAAE;AAC1B,eAAKiJ,QAAL,CAAcoL,WAAd,CAA0B,cAA1B;AACD,SAFD,MAGK;AAAE;AACL,eAAKpL,QAAL,CAAc7F,QAAd,CAAuB,cAAvB;AACD;AACD,YAAI,CAAC,KAAK0d,WAAV,EAAuB;AACrB,eAAK4P,eAAL,CAAqB,KAAKC,UAAL,EAArB;AACD;AACF;AACF,KAxBD,MAyBK;AAAE;;AAEL,UAAI,KAAKJ,cAAL,KAAwB,OAA5B,EAAqC;AAAE;AACrC,YAAI,KAAKC,qBAAL,EAAJ,EAAkC;AAChC,eAAKC,eAAL;AACD;AACF,OAJD,MAKK,IAAI,KAAKF,cAAL,KAAwB,MAA5B,EAAoC;AAAE;AACzC;AACA,aAAKtnB,QAAL,CAAclV,IAAd;AACA,aAAKkV,QAAL,CAAcoL,WAAd,CAA0B,cAA1B;AACD;AACF;AACD,SAAKjL,cAAL,GAAsB,KAAtB;AACD,GAvGD;;AAyGA;AACAzb,aAAWsE,SAAX,CAAqBu+B,qBAArB,GAA6C,YAAY;;AAEvD,QAAI,KAAKr+B,MAAL,KAAgB,SAApB,EAA+B;AAC7B,aAAQ,KAAKwxB,eAAL,KAAyB,KAAKrzB,aAAtC;AACD,KAFD,MAGK;AACH,aAAQ,KAAKkG,QAAL,CAAcP,KAAd,GAAsBxH,IAAtB,CAA2B,eAA3B,MAAgD,KAAK+H,QAAL,CAAcP,KAAd,GAAsBxH,IAAtB,CAA2B,KAA3B,CAAxD;AACD;AACF,GARD;;AAUAd,aAAWsE,SAAX,CAAqBw+B,eAArB,GAAuC,YAAW;AAChD;AACA;AACA;AACA;AACA,QAAI9+B,OAAJ,EAAa2B,CAAb,EAAgBs9B,OAAhB,EAAyBC,OAAzB,EAAkCC,OAAlC,EAA2CC,aAA3C,EAA0DC,SAA1D;;AAEAr/B,cAAU,IAAV;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAKs/B,QAAL,GAAgB,KAAKN,UAAL,EAAhB,CAdgD,CAcb;;AAEnC,QAAI,KAAK/pB,MAAT,EAAiB;AACf;AACA,WAAK4B,SAAL,CAAe,KAAK9W,EAAL,CAAQw/B,qBAAvB;AACD,KAHD,MAIK;AACH;AACA,WAAK1oB,SAAL,CAAe,KAAK9W,EAAL,CAAQy/B,wBAAvB;AACD;;AAED,QAAI,KAAKh/B,MAAL,KAAgB,OAApB,EAA6B;;AAE3B,UAAI,KAAKq+B,qBAAL,EAAJ,EAAkC;AAChC;AACA,aAAKl9B,IAAE,CAAP,EAAUA,IAAI,KAAKkD,QAAL,CAAclI,MAA5B,EAAoCgF,GAApC,EAAyC;AACvC;AACAs9B,oBAAU,KAAKp6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,eAA9B,CAAV;AACAyzB,oBAAU,KAAKt6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,MAA9B,CAAV;AACA,cAAIuzB,OAAJ,EAAa;AACX,iBAAKp6B,QAAL,CAAclD,CAAd,EAAiBmsB,YAAjB,CAA8B,KAA9B,EAAoCmR,OAApC;AACD;AACD,cAAIE,YAAY,WAAhB,EAA6B;AAC3BC,4BAAgBz9B,CAAhB;AACD;AACF;AACD;AACA;AACA;AACA,aAAKwtB,WAAL,GAAmB,IAAnB;AACD,OAjBD,MAkBK;AACH;AACA,aAAKxtB,IAAE,CAAP,EAAUA,IAAI,KAAKkD,QAAL,CAAclI,MAA5B,EAAoCgF,GAApC,EAAyC;AACvC;AACA;AACAs9B,oBAAU,KAAKp6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,KAA9B,CAAV;AACAwzB,oBAAU,KAAKr6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,eAA9B,CAAV;AACAyzB,oBAAU,KAAKt6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,MAA9B,CAAV;AACA,cAAIwzB,OAAJ,EAAa;AACX,iBAAKr6B,QAAL,CAAclD,CAAd,EAAiBmsB,YAAjB,CAA8B,KAA9B,EAAoCoR,OAApC;AACA,iBAAKr6B,QAAL,CAAclD,CAAd,EAAiBmsB,YAAjB,CAA8B,eAA9B,EAA8CmR,OAA9C;AACD;AACD,cAAIE,YAAY,WAAhB,EAA6B;AAC3BC,4BAAgBz9B,CAAhB;AACD;AACF;AACD,aAAKwtB,WAAL,GAAmB,IAAnB;AACD;;AAED;AACA,UAAI,KAAK3uB,MAAL,KAAgB,OAApB,EAA6B;AAC3B,aAAK9D,KAAL,CAAW8L,IAAX;AACD,OAFD,MAGK,IAAI,KAAKhI,MAAL,KAAgB,SAApB,EAA+B;AAClC;AACD,OAFI,MAGA,IAAI,KAAKA,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C60B,oBAAY,KAAKx6B,QAAL,CAAcu6B,aAAd,EAA6B1zB,YAA7B,CAA0C,KAA1C,CAAZ;AACA,aAAKlB,QAAL,CAAchC,IAAd,CAAmB,EAAC6B,MAAMg1B,SAAP,EAAnB;AACD;AACF,KAlDD,MAmDK,IAAI,KAAK7+B,MAAL,KAAgB,SAApB,EAA+B;;AAElC,UAAI,KAAKq+B,qBAAL,EAAJ,EAAkC;AAChC;AACA,aAAK7M,eAAL,GAAuB,KAAKtzB,SAA5B;AACA,aAAKmY,SAAL,CAAe,KAAK9W,EAAL,CAAQy/B,wBAAvB;AACD,OAJD,MAKK;AACH;AACA,aAAKxN,eAAL,GAAuB,KAAKrzB,aAA5B;AACA,aAAKkY,SAAL,CAAe,KAAK9W,EAAL,CAAQw/B,qBAAvB;AACD;AACD,UAAI,OAAO,KAAKvoB,aAAZ,KAA8B,WAAlC,EAA+C;;AAE7C;AACA,aAAKrQ,gBAAL,GAAwBxG,IAAxB,CAA6B,YAAW;;AAEtC,cAAIH,QAAQa,OAAZ,EAAqB;AACnB;AACAb,oBAAQgX,aAAR,CAAsByoB,aAAtB,CAAoCz/B,QAAQgyB,eAA5C,EAA4DhyB,QAAQs/B,QAApE;AACD,WAHD,MAIK;AACH;AACAt/B,oBAAQgX,aAAR,CAAsB0oB,YAAtB,CAAmC1/B,QAAQgyB,eAA3C,EAA2DhyB,QAAQs/B,QAAnE;AACD;AACF,SAVD;AAWD;AACF;AACF,GAxGD;;AA0GAtjC,aAAWsE,SAAX,CAAqBy+B,eAArB,GAAuC,UAASY,GAAT,EAAc;;AAEnD;AACA;;AAEA,QAAI,KAAKxQ,WAAT,EAAsB;AACpB;AACD;;AAED,QAAI8E,CAAJ,EAAO2L,eAAP;AACA,QAAIC,iCAAiC,SAAjCA,8BAAiC,CAAUC,SAAV,EAAqB;AACxD,UAAI9jB,SAAS,EAAb;AACA,UAAI8jB,UAAUvsB,IAAV,KAAmB,QAAvB,EAAiC;AAC/ByI,eAAO5R,IAAP,CAAY01B,UAAUpsB,KAAtB;AACD,OAFD,MAGK;AACH,aAAK,IAAIxJ,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYy1B,+BAA+BC,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAA/B,CAAZ;AACD;AACF;AACD,aAAO8R,OAAOc,IAAP,CAAY,EAAZ,CAAP;AACD,KAXD;;AAaA,QAAI5E,IAAJ;AACA,QAAI,KAAK6nB,oBAAT,EAA+B;AAC7B7nB,aAAO,KAAK6nB,oBAAL,CAA0B7nB,IAAjC;AACD,KAFD,MAGK,IAAI,KAAK2X,YAAL,CAAkBlzB,MAAlB,IAA4B,CAAhC,EAAmC;AACtCub,aAAO,KAAK2X,YAAL,CAAkB,CAAlB,EAAqB3X,IAA5B;AACD,KAFI,MAGA;AACHA,aAAO,EAAP;AACD;AACD,SAAK+b,CAAL,IAAU/b,IAAV,EAAgB;AACd,UAAKA,KAAK+b,CAAL,EAAQpY,KAAR,IAAiB8jB,GAAlB,IAA2BznB,KAAK+b,CAAL,EAAQnY,GAAR,GAAc6jB,GAA7C,EAAmD;AACjDC,0BAAkB3L,CAAlB;AACA;AACD;AACF;AACD,QAAI,OAAO2L,eAAP,KAA2B,WAA/B,EAA4C;AAC1C,UAAI,KAAKvO,kBAAL,KAA4BuO,eAAhC,EAAiD;AAC/C;AACA,aAAKlgB,OAAL,CAAalI,UAAb,CAAwB,WAAxB;AACA;AACA,aAAKF,QAAL,CAAc3E,IAAd,CAAmBktB,+BAA+B3nB,KAAK0nB,eAAL,EAAsBjkB,UAArD,CAAnB;AACA,YAAI,KAAKvN,aAAT,EAAwB;AACtB,eAAK4xB,UAAL;AACD;AACD,aAAK3O,kBAAL,GAA0BuO,eAA1B;AACD;AACF,KAXD,MAYK;AACH,WAAKtoB,QAAL,CAAc3E,IAAd,CAAmB,EAAnB;AACA,WAAK0e,kBAAL,GAA0B,CAAC,CAA3B;AACA;AACA,WAAK3R,OAAL,CAAa5iB,IAAb,CAAkB,WAAlB,EAA8B,QAA9B;AACD;AACF,GAzDD;AA2DD,CA1RD,EA0RG8D,MA1RH;;AA4RA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBQ,YAArB,GAAoC,YAAW;;AAE7C;AACA;AACA;AACA;AACA;AACA,SAAKm/B,SAAL,GAAiB,EAAjB;AACA,SAAKA,SAAL,CAAeC,OAAf,GAAyB,EAAzB;;AAEA;AACA,QAAI,0BAA0BhhC,IAA1B,CAA+BihC,UAAUF,SAAzC,CAAJ,EAAwD;AAAE;AACxD,WAAKA,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,SAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC,CAFsD,CAEV;AAC7C,KAHD,MAIK,IAAI,mBAAmBphC,IAAnB,CAAwBihC,UAAUF,SAAlC,CAAJ,EAAkD;AAAE;AACvD,WAAKA,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,mBAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD,KAHI,MAIA,IAAI,6BAA6BphC,IAA7B,CAAkCihC,UAAUF,SAA5C,CAAJ,EAA4D;AAAE;AACjE,WAAKA,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,mBAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD,KAHI,MAIA,IAAI,uBAAuBphC,IAAvB,CAA4BihC,UAAUF,SAAtC,CAAJ,EAAsD;AAAE;AAC3D,WAAKA,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,MAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD,KAHI,MAIA,IAAI,mBAAmBphC,IAAnB,CAAwBihC,UAAUF,SAAlC,CAAJ,EAAkD;AAAE;AACvD,WAAKA,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,OAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD,KAHI,MAIA,IAAI,SAASphC,IAAT,CAAcihC,UAAUF,SAAxB,KAAsC,aAAa/gC,IAAb,CAAkBihC,UAAUI,MAA5B,CAA1C,EAA+E;AAClF,WAAKN,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,QAA9B;AACA,UAAI,yBAAyBtU,IAAzB,CAA8BihC,UAAUF,SAAxC,CAAJ,EAAwD;AACtD,aAAKA,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD;AACF,KALI,MAMA,IAAI,SAASphC,IAAT,CAAcihC,UAAUF,SAAxB,KAAsC,iBAAiB/gC,IAAjB,CAAsBihC,UAAUI,MAAhC,CAA1C,EAAmF;AACtF,WAAKN,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,QAA9B;AACA,UAAI,0BAA0BtU,IAA1B,CAA+BihC,UAAUF,SAAzC,CAAJ,EAAyD;AACvD,aAAKA,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiCC,OAAOC,EAAxC;AACD;AACF,KALI,MAMA;AACH,WAAKL,SAAL,CAAeC,OAAf,CAAuB1sB,IAAvB,GAA8B,SAA9B;AACA,WAAKysB,SAAL,CAAeC,OAAf,CAAuBE,OAAvB,GAAiC,SAAjC;AACD;;AAED;AACA,QAAInkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,gBAAnC,KAAwD,CAAC,CAA7D,EAAgE;AAC9D,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,WAApB;AACD,KAFD,MAGK,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,gBAAnC,KAAwD,CAAC,CAA7D,EAAgE;AACnE,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,WAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,gBAAnC,KAAwD,CAAC,CAA7D,EAAgE;AACnE,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,eAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,gBAAnC,KAAwD,CAAC,CAA7D,EAAgE;AACnE,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,YAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,gBAAnC,KAAwD,CAAC,CAA7D,EAAgE;AACnE,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,cAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,KAAnC,KAA2C,CAAC,CAAhD,EAAmD;AACtD,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,SAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,KAAnC,KAA2C,CAAC,CAAhD,EAAmD;AACtD,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,MAApB;AACD,KAFI,MAGA,IAAIvkC,OAAOkkC,SAAP,CAAiBF,SAAjB,CAA2B5+B,OAA3B,CAAmC,OAAnC,KAA6C,CAAC,CAAlD,EAAqD;AACxD,WAAK4+B,SAAL,CAAeO,EAAf,GAAoB,OAApB;AACD;AACD,QAAI,KAAKtjC,KAAT,EAAgB;AACdgH,cAAQyB,GAAR,CAAY,gBAAgBw6B,UAAUF,SAAtC;AACA/7B,cAAQyB,GAAR,CAAY,aAAaw6B,UAAUI,MAAnC;AACAr8B,cAAQyB,GAAR,CAAY,cAAc,KAAKs6B,SAAL,CAAeC,OAAf,CAAuB1sB,IAAjD;AACAtP,cAAQyB,GAAR,CAAY,cAAc,KAAKs6B,SAAL,CAAeC,OAAf,CAAuBE,OAAjD;AACAl8B,cAAQyB,GAAR,CAAY,SAAS,KAAKs6B,SAAL,CAAeO,EAApC;AACD;AACF,GAhFD;;AAkFAxkC,aAAWsE,SAAX,CAAqBgL,WAArB,GAAmC,UAAS8K,KAAT,EAAgB;AACjD,QAAI6pB,YAAYE,UAAUF,SAAV,CAAoB9O,WAApB,EAAhB;AACA,QAAI,KAAKj0B,KAAT,EAAgB;AACdgH,cAAQyB,GAAR,CAAY,iBAAiBs6B,SAA7B;AACD;AACD,QAAIA,UAAU5+B,OAAV,CAAkB+U,MAAM+a,WAAN,EAAlB,MAA2C,CAAC,CAAhD,EAAmD;AACjD,aAAO,IAAP;AACD,KAFD,MAGK;AACH,aAAO,KAAP;AACD;AACF,GAXD;;AAaAn1B,aAAWsE,SAAX,CAAqBiI,KAArB,GAA6B,UAAS63B,OAAT,EAAkB;AAC7C;AACA;;AAEA,QAAIH,SAAJ,EAAeQ,GAAf;;AAEAR,gBAAYE,UAAUF,SAAV,CAAoB9O,WAApB,EAAZ;AACAsP,UAAM,mBAAmBnjB,IAAnB,CAAwB2iB,SAAxB,CAAN;AACA,QAAIQ,GAAJ,EAAS;AACP,UAAI,OAAOL,OAAP,KAAmB,WAAvB,EAAoC;AAClC,YAAIH,UAAU5+B,OAAV,CAAkB,QAAQ++B,OAA1B,MAAuC,CAAC,CAA5C,EAA+C;AAC7C;AACA,iBAAO,IAAP;AACD,SAHD,MAIK;AACH,iBAAO,KAAP;AACD;AACF,OARD,MASK;AACH;AACA,eAAO,IAAP;AACD;AACF,KAdD,MAeK;AACH;AACA,aAAO,KAAP;AACD;AACF,GA3BD;;AA6BApkC,aAAWsE,SAAX,CAAqBomB,qBAArB,GAA6C,YAAW;AACtD;AACA;AACA;;AAEA,QAAIuZ,SAAJ,EAAeS,QAAf;;AAEAT,gBAAYE,UAAUF,SAAV,CAAoB9O,WAApB,EAAZ;AACAuP,eAAW,8EAA8EpjB,IAA9E,CAAmF2iB,SAAnF,CAAX;AACA,QAAIS,QAAJ,EAAc;AACZ,UAAIA,SAAS,CAAT,MAAgB,SAAhB,IAA6B,UAAUxhC,IAAV,CAAe+gC,SAAf,CAAjC,EAA4D;AAC1D;AACA,eAAO,IAAP;AACD,OAHD,MAIK;AACH,eAAO,KAAP;AACD;AACF,KARD,MASK;AACH;AACA,aAAO,IAAP;AACD;AACF,GAtBD;;AAwBAjkC,aAAWsE,SAAX,CAAqBqgC,yBAArB,GAAiD,YAAY;AAC3D,QAAI,KAAKngC,MAAL,KAAgB,IAApB,EAA0B;AACxB;AACA,aAAO,KAAP;AACD;AACD,WAAO/E,SAASmlC,iBAAT,IACLnlC,SAASolC,uBADJ,IAELplC,SAASqlC,oBAFJ,IAGLrlC,SAASslC,mBAHX;AAID,GATD;AAWD,CAjKD,EAiKGngC,MAjKH;;AAmKA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqB8kB,MAArB,GAA8B,UAAU4b,OAAV,EAAmB;;AAE/C,SAAKpN,OAAL,GAAe,IAAf;AACA,SAAKqN,iBAAL,GAAyB,IAAzB;;AAEA,QAAI,KAAKzgC,MAAL,KAAgB,OAApB,EAA6B;AAC3B,UAAI0gC,QAAJ;;AAEA,WAAKjkC,SAAL,GAAiB+jC,OAAjB;AACA;AACAE,iBAAW,KAAKxkC,KAAL,CAAWwkC,QAAtB;AACA,UAAIA,SAASvkC,MAAT,GAAkB,CAAlB,IAAuB,KAAKM,SAAL,IAAkBikC,SAASrlB,KAAT,CAAe,CAAf,CAAzC,IAA8D,KAAK5e,SAAL,IAAkBikC,SAASplB,GAAT,CAAa,CAAb,CAApF,EAAqG;AACnG;AACA;AACA;AACA,aAAKpf,KAAL,CAAWykC,WAAX,GAAyB,KAAKlkC,SAA9B;AACA,YAAI,KAAKgqB,eAAL,IAAwB,KAAK2V,SAAjC,EAA4C;AAC1C;AACA,eAAKA,SAAL,CAAeuE,WAAf,GAA6B,KAAKlkC,SAAlC;AACD;AACF;AACF,KAhBD,MAiBK,IAAI,KAAKuD,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C;AACA;AACA;AACA,WAAK42B,WAAL,GAAmB,IAAnB;AACA,WAAK52B,QAAL,CAAc62B,IAAd,CAAmBL,OAAnB;AACD,KANI,MAOA,IAAI,KAAKxgC,MAAL,KAAgB,SAApB,EAA+B;AAClC,WAAKwW,aAAL,CAAmBoO,MAAnB,CAA0B4b,OAA1B,EAAkC,IAAlC;AACA,UAAIA,UAAU,CAAd,EAAiB;AACf,YAAI,OAAO,KAAKzf,UAAZ,KAA2B,WAA/B,EAA4C;AAC1C,eAAKA,UAAL,CAAgBnf,IAAhB;AACD;AACF;AACF;AACD,SAAKkG,eAAL;AACD,GAtCD;;AAwCAtM,aAAWsE,SAAX,CAAqBuI,WAArB,GAAmC,YAAY;;AAE7C,QAAIH,QAAJ;AACA,QAAI,KAAKlI,MAAL,KAAgB,OAApB,EAA6B;AAC3BkI,iBAAW,KAAKhM,KAAL,CAAWgM,QAAtB;AACD,KAFD,MAGK,IAAI,KAAKlI,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C9B,iBAAW,KAAK8B,QAAL,CAAc3B,WAAd,EAAX;AACD,KAFI,MAGA,IAAI,KAAKrI,MAAL,KAAgB,SAAhB,IAA6B,KAAKwW,aAAtC,EAAqD;AACxDtO,iBAAW,KAAKsO,aAAL,CAAmBnO,WAAnB,EAAX;AACD;AACD,QAAIH,aAAa3M,SAAb,IAA0BulC,MAAM54B,QAAN,CAA1B,IAA6CA,aAAa,CAAC,CAA/D,EAAkE;AAChE,aAAO,CAAP;AACD;AACD,WAAOA,QAAP;AACD,GAhBD;;AAkBA1M,aAAWsE,SAAX,CAAqB0+B,UAArB,GAAkC,YAAY;AAC5C,QAAIhyB,QAAJ;AACA,QAAI,KAAKxM,MAAL,KAAgB,OAApB,EAA6B;AAC3BwM,iBAAW,KAAKtQ,KAAL,CAAWykC,WAAtB;AACD,KAFD,MAGK,IAAI,KAAK3gC,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,UAAI,KAAKA,QAAL,CAAc+2B,QAAd,OAA6B,MAAjC,EAAyC;AACvC,eAAO,CAAP;AACD;AACDv0B,iBAAW,KAAKxC,QAAL,CAAcg3B,WAAd,EAAX;AACD,KALI,MAMA,IAAI,KAAKhhC,MAAL,KAAgB,SAApB,EAA+B;AAClC,UAAI,KAAKwW,aAAT,EAAwB;AACtBhK,mBAAW,KAAKgK,aAAL,CAAmByqB,cAAnB,EAAX;AACD;AACF;;AAED,QAAIz0B,aAAajR,SAAb,IAA0BulC,MAAMt0B,QAAN,CAA1B,IAA6CA,aAAa,CAAC,CAA/D,EAAkE;AAChE,aAAO,CAAP;AACD;AACD,WAAOA,QAAP;AACD,GArBD;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACAhR,aAAWsE,SAAX,CAAqBozB,cAArB,GAAsC,YAAY;AAChD,QAAI,KAAKvE,WAAT,EAAsB;AACpB;AACD;AACD,QAAI,KAAK3uB,MAAL,KAAgB,OAApB,EAA6B;AAC3B,UAAI,KAAK9D,KAAL,CAAWglC,MAAf,EAAuB;AACrB,YAAI,KAAK1C,UAAL,OAAsB,CAA1B,EAA6B;AAC3B,iBAAO,SAAP;AACD,SAFD,MAGK,IAAI,KAAKtiC,KAAL,CAAWilC,KAAf,EAAsB;AACzB,iBAAO,OAAP;AACD,SAFI,MAGA;AACH,iBAAO,QAAP;AACD;AACF,OAVD,MAWK,IAAI,KAAKjlC,KAAL,CAAWklC,UAAX,KAA0B,CAA9B,EAAiC;AACpC,eAAO,WAAP;AACD,OAFI,MAGA;AACH,eAAO,SAAP;AACD;AACF,KAlBD,MAmBK,IAAI,KAAKphC,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,UAAI,KAAKA,QAAL,CAAc+2B,QAAd,OAA6B,QAA7B,IAAyC,KAAK/2B,QAAL,CAAc+2B,QAAd,OAA6B,MAAtE,IAAgF,KAAK/2B,QAAL,CAAc+2B,QAAd,OAA6BxlC,SAAjH,EAA4H;;AAE1H,YAAI,KAAKijC,UAAL,OAAsB,CAA1B,EAA6B;AAC3B,iBAAO,SAAP;AACD,SAFD,MAGK,IAAI,KAAKA,UAAL,OAAsB,KAAKn2B,WAAL,EAA1B,EAA8C;AACjD,iBAAO,OAAP;AACD,SAFI,MAGA;AACH,iBAAO,QAAP;AACD;AACF,OAXD,MAYK,IAAI,KAAK2B,QAAL,CAAc+2B,QAAd,OAA6B,WAAjC,EAA8C;AACjD,eAAO,WAAP;AACD,OAFI,MAGA,IAAI,KAAK/2B,QAAL,CAAc+2B,QAAd,OAA6B,SAAjC,EAA4C;AAC/C,eAAO,SAAP;AACD;AACF,KAnBI,MAoBA,IAAI,KAAK/gC,MAAL,KAAgB,SAAhB,IAA6B,KAAKwW,aAAtC,EAAqD;AACxD,UAAI0B,QAAQ,KAAK1B,aAAL,CAAmB0c,cAAnB,EAAZ;AACA,UAAIhb,UAAU,CAAC,CAAX,IAAgBA,UAAU,CAA9B,EAAiC;AAC/B,eAAO,SAAP;AACD,OAFD,MAGK,IAAIA,UAAU,CAAd,EAAiB;AACpB,eAAO,OAAP;AACD,OAFI,MAGA,IAAIA,UAAU,CAAd,EAAiB;AACpB,eAAO,SAAP;AACD,OAFI,MAGA,IAAIA,UAAU,CAAd,EAAiB;AACpB,eAAO,QAAP;AACD,OAFI,MAGA,IAAIA,UAAU,CAAd,EAAiB;AACpB,eAAO,WAAP;AACD;AACF;AACF,GA7DD;;AA+DA1c,aAAWsE,SAAX,CAAqBymB,uBAArB,GAA+C,YAAY;AACzD,QAAI,KAAKvmB,MAAL,KAAgB,OAApB,EAA6B;AAC3B,aAAO,KAAK9D,KAAL,CAAWmlC,YAAX,GAA0B,IAA1B,GAAiC,KAAxC;AACD,KAFD,MAGK,IAAI,KAAKrhC,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C;AACA,aAAO,KAAP;AACD,KAHI,MAIA,IAAI,KAAKhK,MAAL,KAAgB,SAApB,EAA+B;AAClC;AACA,aAAQ,KAAKwW,aAAL,CAAmB8qB,yBAAnB,GAA+CnlC,MAA/C,GAAwD,CAAhE;AACD;AACF,GAZD;;AAcAX,aAAWsE,SAAX,CAAqByhC,eAArB,GAAuC,UAAUC,IAAV,EAAgB;AACrDA,WAAO3nB,KAAKub,GAAL,CAAS,GAAT,EAAcoM,IAAd,CAAP;AACA,QAAI,KAAKxhC,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAK9D,KAAL,CAAWmlC,YAAX,GAA0BG,IAA1B;AACD,KAFD,MAGK,IAAI,KAAKxhC,MAAL,KAAgB,SAApB,EAA+B;AAClC,WAAKwW,aAAL,CAAmB+qB,eAAnB,CAAmCC,IAAnC;AACD;AACD,QAAI,KAAK/a,eAAL,IAAwB,KAAK2V,SAAjC,EAA4C;AAC1C,WAAKA,SAAL,CAAeiF,YAAf,GAA8BG,IAA9B;AACD;AACD,SAAKxiB,MAAL,CAAY5N,IAAZ,CAAiB,KAAK7R,EAAL,CAAQ0f,KAAR,GAAgB,IAAhB,GAAuBuiB,KAAKC,OAAL,CAAa,CAAb,EAAgB9gC,QAAhB,EAAvB,GAAoD,GAArE;AACD,GAZD;;AAcAnF,aAAWsE,SAAX,CAAqB4hC,eAArB,GAAuC,YAAY;AACjD,QAAI,KAAK1hC,MAAL,KAAgB,OAApB,EAA6B;AAC3B,aAAO,KAAK9D,KAAL,CAAWmlC,YAAlB;AACD,KAFD,MAGK,IAAI,KAAKrhC,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C;AACA,aAAO,CAAP;AACD,KAHI,MAIA,IAAI,KAAKhK,MAAL,KAAgB,SAApB,EAA+B;AAClC,aAAO,KAAKwW,aAAL,CAAmBkrB,eAAnB,EAAP;AACD;AACF,GAXD;;AAaA;AACA;AACA;AACAlmC,aAAWsE,SAAX,CAAqB6hC,QAArB,GAAgC,YAAY;AAC1C,QAAIzpB,QAAQ,KAAKgb,cAAL,EAAZ;AACA,WAAOhb,UAAU,QAAV,IAAsBA,UAAU,SAAhC,IAA6CA,UAAU,OAA9D;AACD,GAHD;;AAKA1c,aAAWsE,SAAX,CAAqB0/B,UAArB,GAAkC,YAAY;AAC5C,QAAI,KAAKx/B,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAK9D,KAAL,CAAW4X,KAAX,CAAiB,IAAjB;AACA,UAAI,KAAK2S,eAAL,IAAwB,KAAK2V,SAAjC,EAA4C;AAC1C,aAAKA,SAAL,CAAetoB,KAAf,CAAqB,IAArB;AACD;AACF,KALD,MAMK,IAAI,KAAK9T,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,WAAKA,QAAL,CAAc8J,KAAd,CAAoB,IAApB;AACD,KAFI,MAGA,IAAI,KAAK9T,MAAL,KAAgB,SAApB,EAA+B;AAClC,WAAKwW,aAAL,CAAmBorB,UAAnB;AACD;AACF,GAbD;;AAeApmC,aAAWsE,SAAX,CAAqB+yB,SAArB,GAAiC,YAAY;AAC3C,QAAI,KAAK7yB,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAK9D,KAAL,CAAW2X,IAAX,CAAgB,IAAhB;AACA,UAAI,KAAK4S,eAAL,IAAwB,KAAK2V,SAAjC,EAA4C;AAC1C,aAAKA,SAAL,CAAevoB,IAAf,CAAoB,IAApB;AACD;AACF,KALD,MAMK,IAAI,KAAK7T,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,WAAKA,QAAL,CAAc6J,IAAd,CAAmB,IAAnB;AACD,KAFI,MAGA,IAAI,KAAK7T,MAAL,KAAgB,SAApB,EAA+B;AAClC,WAAKwW,aAAL,CAAmBqrB,SAAnB;AACA,UAAI,OAAO,KAAK9gB,UAAZ,KAA2B,WAA/B,EAA4C;AAC1C,aAAKA,UAAL,CAAgBnf,IAAhB;AACD;AACD,WAAKuxB,eAAL,GAAuB,KAAvB;AACD;AACD,SAAKxvB,cAAL,GAAsB,IAAtB;AACD,GAlBD;;AAoBAnI,aAAWsE,SAAX,CAAqBgI,eAArB,GAAuC,YAAW;;AAEhD,QAAItI,OAAJ,EAAa0I,QAAb,EAAuB45B,OAAvB,EAAgCC,gBAAhC,EAAkDC,cAAlD,EACE5J,UADF,EACc6J,WADd,EAC2BplB,SAD3B,EACsCqlB,SADtC,EAEEC,YAFF,EAEgBC,aAFhB,EAE+BC,YAF/B,EAE6CC,aAF7C,EAE4D1T,aAF5D,EAGEoJ,QAHF,EAGYuK,MAHZ,EAGoBC,OAHpB,EAG6BC,UAH7B,EAIEC,eAJF,EAImBC,WAJnB,EAIgCC,wBAJhC;;AAMApjC,cAAU,IAAV;AACA,QAAI,KAAKmvB,WAAT,EAAsB;AACpB;AACA;AACD;;AAEDzmB,eAAW,KAAKG,WAAL,EAAX;AACAy5B,cAAU,KAAKtD,UAAL,EAAV;;AAEA,QAAI,KAAKvgC,YAAL,KAAsB,SAAtB,IAAmC,KAAK8lB,QAAL,CAAc5nB,MAArD,EAA6D;AAC3D,WAAKgM,eAAL,GAAuB,IAAvB;AACA,WAAKC,eAAL,GAAuB,KAAKy6B,kBAAL,EAAvB;AACA,WAAKC,cAAL,GAAsB,KAAKC,iBAAL,EAAtB;AACD,KAJD,MAKK;AACH,WAAK56B,eAAL,GAAuB,KAAvB;AACD;;AAED,QAAI,KAAK3J,oBAAL,KAA8B,KAA9B,IAAuC,KAAK8J,sBAAL,KAAgC,KAAvE,IAAgFJ,WAAW,CAA/F,EAAkG;AAChG;AACA,WAAKX,eAAL;AACD;;AAED,QAAI,KAAKmhB,OAAT,EAAkB;;AAEhB,UAAI,KAAKvgB,eAAT,EAA0B;AACxB45B,2BAAmB,KAAKhe,QAAL,CAAc5nB,MAAd,GAAqB,CAAxC;AACA,YAAI,KAAK4nB,QAAL,CAAcge,gBAAd,KAAmC,KAAKiB,cAA5C,EAA4D;AAC1D;AACA,cAAI,KAAKA,cAAL,CAAoB1nB,GAApB,KAA4BpT,QAAhC,EAA0C;AACxC;AACA;AACA,iBAAKwgB,OAAL,CAAa2N,WAAb,CAAyBnuB,WAAW,KAAK86B,cAAL,CAAoB3nB,KAAxD;AACD,WAJD,MAKK;AACH,iBAAKqN,OAAL,CAAa2N,WAAb,CAAyB,KAAKjuB,eAA9B;AACD;AACF,SAVD,MAWK;AACH;AACA,eAAKsgB,OAAL,CAAa2N,WAAb,CAAyB,KAAKjuB,eAA9B;AACD;AACF,OAjBD,MAkBK;AACH,aAAKsgB,OAAL,CAAa2N,WAAb,CAAyBnuB,QAAzB;AACD;AACD,UAAI,CAAE,KAAKwgB,OAAL,CAAa+M,QAAnB,EAA8B;AAC5B;AACA;AACA;AACA;AACA2C,qBAAa,KAAKqI,iBAAL,IAA0B,KAAK/X,OAAL,CAAawN,QAAb,CAAsBnyB,EAAtB,CAAyB/I,EAAEC,SAASgoC,aAAX,CAAzB,CAAvC;AACA,aAAKxC,iBAAL,GAAyB,KAAzB;AACA,YAAI,KAAKt4B,eAAT,EAA0B;AACxB,eAAKugB,OAAL,CAAayP,WAAb,CAAyB,KAAK2K,cAA9B,EAA8C1K,UAA9C;AACD,SAFD,MAGK;AACH,eAAK1P,OAAL,CAAayP,WAAb,CAAyB2J,OAAzB,EAAkC1J,UAAlC;AACD;AACF;;AAED;AACA,UAAI,KAAK1P,OAAL,CAAa+M,QAAjB,EAA2B;AACzBuM,yBAAiB,KAAKtZ,OAAL,CAAakN,iBAA9B;AACD,OAFD,MAGK;AACH,YAAI,KAAKztB,eAAT,EAA0B;AACxB65B,2BAAiB,KAAKc,cAAtB;AACD,SAFD,MAGK;AACHd,2BAAiBF,OAAjB;AACD;AACF;AACF;AACD,QAAI,KAAK35B,eAAT,EAA0B;AACxB,WAAK4W,kBAAL,CAAwB3N,IAAxB,CAA6B,QAAQ,KAAKsT,wBAAL,CAA8B,KAAKtc,eAAnC,CAArC;AACD,KAFD,MAGK;AACH,WAAK2W,kBAAL,CAAwB3N,IAAxB,CAA6B,QAAQ,KAAKsT,wBAAL,CAA8Bxc,QAA9B,CAArC;AACD;AACD,SAAK4W,qBAAL,CAA2B1N,IAA3B,CAAgC,KAAKsT,wBAAL,CAA8Bsd,cAA9B,CAAhC;;AAEAC,kBAAc;AACZ,iBAAW,KAAK1iC,EAAL,CAAQ2jC,aADP;AAEZ,gBAAU,KAAK3jC,EAAL,CAAQ4jC,YAFN;AAGZ,iBAAW,KAAK5jC,EAAL,CAAQ6jC,aAHP;AAIZ,mBAAa,KAAK7jC,EAAL,CAAQ8jC,eAJT;AAKZ,eAAS,KAAK9jC,EAAL,CAAQ+jC;AALL,KAAd;;AAQA,QAAI,KAAKnQ,eAAT,EAA0B;AACxB;AACA;AACA;AACA,UAAI,KAAKjU,OAAL,CAAa9N,IAAb,OAAwB,KAAK7R,EAAL,CAAQ2jC,aAApC,EAAmD;AACjD,aAAKhkB,OAAL,CAAa9N,IAAb,CAAkB,KAAK7R,EAAL,CAAQ2jC,aAA1B;AACD;AACD,UAAI,KAAKrZ,gBAAL,CAAsBvsB,IAAtB,CAA2B,MAA3B,EAAmCwG,KAAnC,GAA2CwlB,QAA3C,CAAoD,YAApD,CAAJ,EAAuE;AACrE,YAAI,KAAKlrB,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,eAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,MAA3B,EAAmCwG,KAAnC,GAA2Coe,WAA3C,CAAuD,YAAvD,EAAqEjR,QAArE,CAA8E,WAA9E;AACA,eAAK4Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,mBAA3B,EAAgD8T,IAAhD,CAAqD,KAAK7R,EAAL,CAAQsU,IAA7D;AACD,SAHD,MAIK,IAAI,KAAKzV,QAAL,KAAkB,KAAtB,EAA6B;AAChC;AACD,SAFI,MAGA;AACH,eAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuC,KAAvC,EAA6C,KAAK6F,aAAlD;AACD;AACF;AACF,KAnBD,MAoBK;AACH,UAAI,OAAO,KAAK+c,OAAZ,KAAwB,WAAxB,IAAuC,OAAO,KAAKwJ,OAAZ,KAAwB,WAAnE,EAAgF;AAC9E;AACA;AACA,YAAI,KAAKxJ,OAAL,CAAa9N,IAAb,OAAwB6wB,YAAY,KAAK/O,cAAL,EAAZ,CAAxB,IAA8D,CAAC,KAAKxK,OAAL,CAAa+M,QAAhF,EAA0F;AACxF;AACA5Y,sBAAa,IAAI0mB,IAAJ,EAAD,CAAaC,OAAb,EAAZ;AACA,cAAI,CAAC,KAAKC,mBAAV,EAA+B;AAC7B,iBAAKA,mBAAL,GAA2B5mB,SAA3B;AACA;AACA,iBAAK6mB,aAAL,GAAqB5e,WAAW,YAAY;AAC1CtlB,sBAAQsI,eAAR;AACD,aAFoB,EAElB,GAFkB,CAArB;AAGD,WAND,MAOK,IAAK+U,YAAY,KAAK4mB,mBAAlB,GAAyC,GAA7C,EAAkD;AACrD,iBAAKvkB,OAAL,CAAa9N,IAAb,CAAkB6wB,YAAY,KAAK/O,cAAL,EAAZ,CAAlB;AACA,iBAAKuQ,mBAAL,GAA2B,IAA3B;AACA3Y,yBAAa,KAAK4Y,aAAlB;AACA,iBAAKA,aAAL,GAAqB,IAArB;AACD;AACF,SAhBD,MAiBK;AACH,eAAKD,mBAAL,GAA2B,IAA3B;AACA3Y,uBAAa,KAAK4Y,aAAlB;AACA,eAAKA,aAAL,GAAqB,IAArB;AACD;;AAED;AACA,YAAI,CAAC,KAAKhb,OAAL,CAAa+M,QAAd,IAA0B,CAAC,KAAKtC,eAApC,EAAqD;AACnD,cAAI,KAAKwO,QAAL,EAAJ,EAAqB;AACnB,iBAAK9X,gBAAL,CAAsBvtB,IAAtB,CAA2B,YAA3B,EAAwC,KAAKiD,EAAL,CAAQsU,IAAhD;;AAEA,gBAAI,KAAKzV,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,mBAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,MAA3B,EAAmCwG,KAAnC,GAA2Coe,WAA3C,CAAuD,YAAvD,EAAqEjR,QAArE,CAA8E,WAA9E;AACA,mBAAK4Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,mBAA3B,EAAgD8T,IAAhD,CAAqD,KAAK7R,EAAL,CAAQsU,IAA7D;AACD,aAHD,MAIK,IAAI,KAAKzV,QAAL,KAAkB,KAAtB,EAA6B;AAChC;AACA,mBAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkC4kB,WAAlC,CAA8C,WAA9C,EAA2DjR,QAA3D,CAAoE,UAApE;AACAuxB,wBAAU,KAAK3Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuC,YAAvC,CAAV;AACAmmC,2BAAaD,QAAQ5lC,OAAR,CAAgB,WAAhB,EAA4B,UAA5B,CAAb;AACA,mBAAKitB,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuCmmC,UAAvC;AACA,mBAAK5Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,mBAA3B,EAAgD8T,IAAhD,CAAqD,KAAK7R,EAAL,CAAQsU,IAA7D;AACD,aAPI,MAQA;AACH,mBAAKgW,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuC,KAAvC,EAA6C,KAAK6F,aAAlD;AACD;AACF,WAlBD,MAmBK;AACH,iBAAK0nB,gBAAL,CAAsBvtB,IAAtB,CAA2B,YAA3B,EAAwC,KAAKiD,EAAL,CAAQuU,KAAhD;;AAEA,gBAAI,KAAK1V,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,mBAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,MAA3B,EAAmCwG,KAAnC,GAA2Coe,WAA3C,CAAuD,WAAvD,EAAoEjR,QAApE,CAA6E,YAA7E;AACA,mBAAK4Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,mBAA3B,EAAgD8T,IAAhD,CAAqD,KAAK7R,EAAL,CAAQuU,KAA7D;AACD,aAHD,MAIK,IAAI,KAAK1V,QAAL,KAAkB,KAAtB,EAA6B;AAChC;AACA,mBAAKyrB,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkC4kB,WAAlC,CAA8C,UAA9C,EAA0DjR,QAA1D,CAAmE,WAAnE;AACAuxB,wBAAU,KAAK3Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuC,YAAvC,CAAV;AACAmmC,2BAAaD,QAAQ5lC,OAAR,CAAgB,UAAhB,EAA2B,WAA3B,CAAb;AACA,mBAAKitB,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuCmmC,UAAvC;AACA,mBAAK5Y,gBAAL,CAAsBvsB,IAAtB,CAA2B,mBAA3B,EAAgD8T,IAAhD,CAAqD,KAAK7R,EAAL,CAAQuU,KAA7D;AACD,aAPI,MAQA;AACH,mBAAK+V,gBAAL,CAAsBvsB,IAAtB,CAA2B,KAA3B,EAAkChB,IAAlC,CAAuC,KAAvC,EAA6C,KAAK8F,cAAlD;AACD;AACF;AACF;AACF;AACF;;AAED;AACA;AACA,QAAI,KAAKsmB,OAAT,EAAkB;AAChBwZ,kBAAY,CAAZ;AACAI,sBAAgB,EAAhB,CAFgB,CAEI;;AAEpBH,qBAAe,KAAKzZ,OAAL,CAAa0N,UAAb,CAAwB1wB,MAAxB,GAAiCuc,IAAjC,CAAsC,wBAAtC,CAAf;AACAmgB,sBAAgBD,aAAanoB,IAAb,CAAkB,yBAAlB,CAAhB;AACAmoB,mBAAaxmB,QAAb,GAAwBxgB,IAAxB,CAA6B,YAAY;AACvC,YAAIH,EAAE,IAAF,EAAQ8a,IAAR,CAAa,SAAb,KAAyB,QAA7B,EAAuC;AACrCosB,uBAAalnC,EAAE,IAAF,EAAQqP,KAAR,EAAb;AACD;AACF,OAJD;AAKA+3B,oBAAczmB,QAAd,GAAyBxgB,IAAzB,CAA8B,YAAY;AACxC,YAAIH,EAAE,IAAF,EAAQ8a,IAAR,CAAa,SAAb,KAAyB,QAA7B,EAAuC;AACrCosB,uBAAalnC,EAAE,IAAF,EAAQqP,KAAR,EAAb;AACD;AACF,OAJD;AAKA,UAAI,KAAKs5B,YAAL,EAAJ,EAAyB;AACvBtB,uBAAernC,EAAES,MAAF,EAAU4O,KAAV,KAAoB63B,SAApB,GAAgCI,aAA/C;AACD,OAFD,MAGK;AACHD,uBAAe,KAAK/kB,YAAL,CAAkBjT,KAAlB,KAA4B63B,SAA5B,GAAwCI,aAAvD;AACD;AACD;AACA,UAAIzoB,KAAK+hB,GAAL,CAASyG,eAAe,KAAK3Z,OAAL,CAAaqP,QAAb,EAAxB,IAAmD,CAAvD,EAA0D;AACxD,aAAKrP,OAAL,CAAamP,QAAb,CAAsBwK,YAAtB;AACD;AACF;;AAED;AACA,QAAI,CAAC,KAAKsB,YAAL,EAAL,EAA0B;AACxBf,iCAA2B,GAA3B;AACAF,wBAAkB,KAAK9jB,aAAL,CAAmBpU,MAAnB,EAAlB;AACAm4B,oBAAc,KAAK/jB,aAAL,CAAmBthB,IAAnB,CAAwB,iBAAxB,EAA2CkN,MAA3C,EAAd;AACA,UAAIm4B,cAAeD,kBAAkB,CAArC,EAAyC;AACvC;AACA,aAAK9jB,aAAL,CAAmBthB,IAAnB,CAAwB,iBAAxB,EAA2CsE,IAA3C;AACA,aAAKgiC,WAAL,GAAmB,IAAnB;AACD,OAJD,MAKK;AACH,YAAI,KAAKA,WAAT,EAAsB;AACpB,eAAKhlB,aAAL,CAAmBthB,IAAnB,CAAwB,iBAAxB,EAA2CulB,IAA3C;AACA,eAAK+gB,WAAL,GAAmB,KAAnB;AACD;AACD,YAAI,KAAKhlB,aAAL,CAAmBvU,KAAnB,KAA6Bu4B,wBAAjC,EAA2D;AACzD;AACA,eAAKhkB,aAAL,CAAmBthB,IAAnB,CAAwB,iBAAxB,EAA2CsE,IAA3C;AACA,eAAKgiC,WAAL,GAAmB,IAAnB;AACD,SAJD,MAKK;AACH,cAAI,KAAKA,WAAT,EAAsB;AACpB,iBAAKhlB,aAAL,CAAmBthB,IAAnB,CAAwB,iBAAxB,EAA2CulB,IAA3C;AACA,iBAAK+gB,WAAL,GAAmB,KAAnB;AACD;AACF;AACF;AACF;;AAED,QAAI,KAAK7Z,WAAT,EAAsB;AACpB,UAAI,KAAKtV,MAAT,EAAiB;AACf,aAAKsV,WAAL,CAAiB7H,WAAjB,CAA6B,WAA7B,EAA0C5lB,IAA1C,CAA+C,YAA/C,EAA4D,KAAKiD,EAAL,CAAQmV,mBAApE;AACA,aAAKqV,WAAL,CAAiBzsB,IAAjB,CAAsB,mBAAtB,EAA2C8T,IAA3C,CAAgD,KAAK7R,EAAL,CAAQmV,mBAAxD;AACD,OAHD,MAIK;AACH,aAAKqV,WAAL,CAAiB9Y,QAAjB,CAA0B,WAA1B,EAAuC3U,IAAvC,CAA4C,YAA5C,EAAyD,KAAKiD,EAAL,CAAQoV,kBAAjE;AACA,aAAKoV,WAAL,CAAiBzsB,IAAjB,CAAsB,mBAAtB,EAA2C8T,IAA3C,CAAgD,KAAK7R,EAAL,CAAQoV,kBAAxD;AACD;AACF;;AAED,QAAI,KAAK8N,SAAT,EAAoB;AAClB,UAAI,KAAKla,oBAAT,EAA+B;AAC7BqmB,wBAAgB,KAAKpmB,UAAL,CAAgBrM,MAAhC;AACD,OAFD,MAGK;AACHyyB,wBAAgB,KAAKxoB,QAAL,CAAcjK,MAA9B;AACD;AACD;AACA;AACA;AACA,UAAI,CAAC,KAAKmY,UAAV,EAAsB;AACpB,aAAKmO,SAAL,CAAexR,QAAf,CAAwB,WAAxB;AACA,YAAI2d,kBAAkB,CAAtB,EAAyB;AACvB,eAAKnM,SAAL,CAAenmB,IAAf,CAAoB,YAApB,EAAiC,KAAKiD,EAAL,CAAQiV,YAAzC;AACA,eAAKiO,SAAL,CAAenlB,IAAf,CAAoB,mBAApB,EAAyC8T,IAAzC,CAA8C,KAAK7R,EAAL,CAAQiV,YAAtD;AACD;AACF,OAND,MAOK;AACH,aAAKiO,SAAL,CAAeP,WAAf,CAA2B,WAA3B;AACA,YAAI0M,kBAAkB,CAAtB,EAAyB;AACvB,eAAKnM,SAAL,CAAenmB,IAAf,CAAoB,YAApB,EAAiC,KAAKiD,EAAL,CAAQgV,YAAzC;AACA,eAAKkO,SAAL,CAAenlB,IAAf,CAAoB,mBAApB,EAAyC8T,IAAzC,CAA8C,KAAK7R,EAAL,CAAQgV,YAAtD;AACD;AACF;;AAED,UAAIqa,gBAAgB,CAApB,EAAuB;AACrB,aAAKnM,SAAL,CAAenmB,IAAf,CAAoB;AAClB,wBAAc,KAAKiD,EAAL,CAAQ6G,QADJ;AAElB,2BAAiB,MAFC;AAGlB,2BAAiB,KAAKjC,OAAL,GAAe;AAHd,SAApB;AAKA,aAAKse,SAAL,CAAenlB,IAAf,CAAoB,mBAApB,EAAyC8T,IAAzC,CAA8C,KAAK7R,EAAL,CAAQ6G,QAAtD;AACD;AACF;;AAED,QAAI,KAAKmc,eAAT,EAA0B;AACxB,WAAKA,eAAL,CAAqBjmB,IAArB,CAA0B;AACxB,sBAAc,KAAKiD,EAAL,CAAQwkB,QADE;AAExB,yBAAiB,MAFO;AAGxB,yBAAiB,KAAK5f,OAAL,GAAe;AAHR,OAA1B;AAKD;AACD,QAAI,KAAKimB,iBAAT,EAA4B;AAC1B,UAAI,CAAC,KAAKuZ,YAAL,EAAL,EAA0B;AACxB,aAAKvZ,iBAAL,CAAuB9tB,IAAvB,CAA4B,YAA5B,EAA0C,KAAKiD,EAAL,CAAQskC,eAAlD;AACA,YAAI,KAAKzlC,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,eAAKgsB,iBAAL,CAAuB9sB,IAAvB,CAA4B,MAA5B,EAAoCwG,KAApC,GAA4Coe,WAA5C,CAAwD,0BAAxD,EAAoFjR,QAApF,CAA6F,wBAA7F;AACA,eAAKmZ,iBAAL,CAAuB9sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQskC,eAA9D;AACD,SAHD,MAIK,IAAI,KAAKzlC,QAAL,KAAkB,KAAtB,EAA6B;AAChC;AACA,eAAKgsB,iBAAL,CAAuB9sB,IAAvB,CAA4B,KAA5B,EAAmC4kB,WAAnC,CAA+C,0BAA/C,EAA2EjR,QAA3E,CAAoF,wBAApF;AACA,eAAKmZ,iBAAL,CAAuB9sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQskC,eAA9D;AACD,SAJI,MAKA;AACH,eAAKzZ,iBAAL,CAAuB9sB,IAAvB,CAA4B,KAA5B,EAAmChB,IAAnC,CAAwC,KAAxC,EAA8C,KAAK2G,yBAAnD;AACD;AACF,OAdD,MAeK;AACH,aAAKmnB,iBAAL,CAAuB9tB,IAAvB,CAA4B,YAA5B,EAAyC,KAAKiD,EAAL,CAAQukC,cAAjD;AACA,YAAI,KAAK1lC,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,eAAKgsB,iBAAL,CAAuB9sB,IAAvB,CAA4B,MAA5B,EAAoCwG,KAApC,GAA4Coe,WAA5C,CAAwD,wBAAxD,EAAkFjR,QAAlF,CAA2F,0BAA3F;AACA,eAAKmZ,iBAAL,CAAuB9sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQukC,cAA9D;AACD,SAHD,MAIK,IAAI,KAAK1lC,QAAL,KAAkB,KAAtB,EAA6B;AAChC;AACA,eAAKgsB,iBAAL,CAAuB9sB,IAAvB,CAA4B,KAA5B,EAAmC4kB,WAAnC,CAA+C,wBAA/C,EAAyEjR,QAAzE,CAAkF,0BAAlF;AACA,eAAKmZ,iBAAL,CAAuB9sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQukC,cAA9D;AACD,SAJI,MAKA;AACH,eAAK1Z,iBAAL,CAAuB9sB,IAAvB,CAA4B,KAA5B,EAAmChB,IAAnC,CAAwC,KAAxC,EAA8C,KAAK4G,2BAAnD;AACD;AACF;AACF;;AAED,QAAI,OAAO,KAAKqb,cAAZ,KAA+B,WAAnC,EAAgD;AAC9C;AACA,UAAI,KAAKojB,QAAL,MAAmB,CAAC,KAAKjZ,OAAL,CAAa+M,QAArC,EAA+C;AAC7C,YAAI,CAAC,KAAKsO,iBAAV,EAA6B;AAC3B,eAAKxlB,cAAL,CAAoBsE,IAApB;AACD;AACD,YAAI,KAAK8gB,YAAL,EAAJ,EAAyB;AACvB,eAAKplB,cAAL,CAAoBlU,KAApB,CAA0BrP,EAAES,MAAF,EAAU4O,KAAV,EAA1B;AACA,eAAKkU,cAAL,CAAoB/T,MAApB,CAA2BxP,EAAES,MAAF,EAAU+O,MAAV,EAA3B;AACD,SAHD,MAIK;AACH,eAAK+T,cAAL,CAAoBlU,KAApB,CAA0B,KAAKd,eAAL,CAAqBc,KAArB,EAA1B;AACA,eAAKkU,cAAL,CAAoB/T,MAApB,CAA2B,KAAKjB,eAAL,CAAqBiB,MAArB,EAA3B;AACD;AACF,OAZD,MAaK;AACH,aAAK+T,cAAL,CAAoB3c,IAApB;AACD;AACF;;AAED,QAAI,KAAKzE,cAAT,EAAyB;AACvB;AACA,UAAI,KAAK6mC,wBAAL,KAAkC,CAAtC,EAAyC;AACvC,aAAKpgC,oBAAL,GAA4B,IAA5B;AACA,aAAKqgC,6BAAL,CAAmC3nC,IAAnC,CAAwC,SAAxC,EAAkD,SAAlD;AACD,OAHD,MAIK;AACH,aAAKsH,oBAAL,GAA4B,KAA5B;AACA,aAAKqgC,6BAAL,CAAmCjtB,UAAnC,CAA8C,SAA9C;AACD;;AAED;AACA,UAAI,KAAKpT,oBAAL,IAA6B,KAAKsgC,gBAAtC,EAAwD;AACtD3B,iBAAS1oB,KAAK+e,KAAL,CAAW59B,EAAE,kBAAF,EAAsBmpC,SAAtB,KACInpC,EAAE,KAAKkpC,gBAAP,EAAyB13B,QAAzB,GAAoCC,GADxC,GAEKzR,EAAE,kBAAF,EAAsBwP,MAAtB,KAAiC,CAFtC,GAGKxP,EAAE,KAAKkpC,gBAAP,EAAyB15B,MAAzB,KAAoC,CAHpD,CAAT;AAIA,YAAI+3B,WAAW1oB,KAAK+e,KAAL,CAAW59B,EAAE,kBAAF,EAAsBmpC,SAAtB,EAAX,CAAf,EAA8D;AAC5D;AACA;AACA,eAAKC,mBAAL,GAA2B,IAA3B;AACAppC,YAAE,kBAAF,EAAsBmpC,SAAtB,CAAgC5B,MAAhC;AACD;AACF;AACF;;AAED;AACA;AACA,QAAI,KAAKviC,MAAL,KAAgB,OAApB,EAA6B;AAC3B,UAAI,KAAK9D,KAAL,CAAW87B,QAAX,CAAoB77B,MAApB,GAA6B,CAAjC,EAAoC;AAClC67B,mBAAW,KAAK97B,KAAL,CAAW87B,QAAX,CAAoB1c,GAApB,CAAwB,CAAxB,CAAX;AACA,YAAI,KAAKnT,eAAT,EAA0B;AACxB,cAAI6vB,WAAW,KAAK5vB,eAApB,EAAqC;AACnC4vB,uBAAW,KAAK5vB,eAAhB;AACD;AACD,cAAI,KAAKsgB,OAAT,EAAkB;AAChB,iBAAKA,OAAL,CAAa4P,WAAb,CAAyBN,WAAW,KAAK5vB,eAAzC;AACD;AACF,SAPD,MAQK;AACH,cAAI,KAAKsgB,OAAT,EAAkB;AAChB,iBAAKA,OAAL,CAAa4P,WAAb,CAAyBN,WAAW9vB,QAApC;AACD;AACF;AACF;AACF,KAjBD,MAkBK,IAAI,KAAKlI,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,UAAI,KAAK0e,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa4P,WAAb,CAAyB,KAAKtuB,QAAL,CAAcq6B,SAAd,KAA4B,GAArD;AACD;AACF,KAJI,MAKA,IAAI,KAAKrkC,MAAL,KAAgB,SAApB,EAA+B;AAClC,UAAI,KAAK0oB,OAAT,EAAkB;AAChB,aAAKA,OAAL,CAAa4P,WAAb,CAAyB,KAAK9hB,aAAL,CAAmB8tB,sBAAnB,EAAzB;AACD;AACF;AACF,GA1ZD;;AA4ZA9oC,aAAWsE,SAAX,CAAqBykC,cAArB,GAAsC,UAASnjC,GAAT,EAAc;;AAElD;AACA;;AAEA;AACA,QAAIojC,iBAAiBpjC,IAAIwE,KAAJ,GAAYqb,QAAZ,CAAqB,MAArB,CAArB;;AAEA;AACA,QAAI5W,QAAQm6B,eAAeC,UAAf,EAAZ;;AAEA;AACAD,mBAAeviC,MAAf;;AAEA,WAAOoI,KAAP;AACD,GAfD;;AAiBA7O,aAAWsE,SAAX,CAAqB0e,UAArB,GAAkC,UAAS1iB,CAAT,EAAY;AAC5C,QAAI,KAAK6lC,QAAL,EAAJ,EAAqB;AACnB,WAAK9O,SAAL;AACD,KAFD,MAGK;AACH,WAAK2M,UAAL;AACD;AACD,SAAK13B,eAAL;AACD,GARD;;AAUAtM,aAAWsE,SAAX,CAAqB4kC,aAArB,GAAqC,YAAW;;AAE9C,SAAK9f,MAAL,CAAY,CAAZ;;AAEF;;;;;;;;;;;;;;;;;;;;;;;;AAyBE,SAAK9c,eAAL;AACD,GA9BD;;AAgCAtM,aAAWsE,SAAX,CAAqB6kC,YAArB,GAAoC,YAAW;;AAE7C,QAAI7C,OAAJ,EAAa8C,UAAb;;AAEA9C,cAAU,KAAKtD,UAAL,EAAV;AACAoG,iBAAa9C,UAAU,KAAKrjC,YAA5B;AACA,QAAI,KAAK0J,eAAT,EAA0B;AACxB,UAAIy8B,aAAa,KAAK5B,cAAL,CAAoB3nB,KAArC,EAA4C;AAC1CupB,qBAAa,KAAK5B,cAAL,CAAoB3nB,KAAjC;AACD;AACF,KAJD,MAKK;AACH,UAAIupB,aAAa,CAAjB,EAAoB;AAClBA,qBAAa,CAAb;AACD;AACF;AACD,SAAKhgB,MAAL,CAAYggB,UAAZ;AACD,GAjBD;;AAmBAppC,aAAWsE,SAAX,CAAqB+kC,iBAArB,GAAyC,YAAW;;AAElD,QAAI/C,OAAJ,EAAa55B,QAAb,EAAuB08B,UAAvB,EAAmC7C,gBAAnC;;AAEAD,cAAU,KAAKtD,UAAL,EAAV;AACAt2B,eAAW,KAAKG,WAAL,EAAX;AACA05B,uBAAmB,KAAKhe,QAAL,CAAc5nB,MAAd,GAAqB,CAAxC;AACAyoC,iBAAa9C,UAAU,KAAKrjC,YAA5B;;AAEA,QAAI,KAAK0J,eAAT,EAA0B;AACxB,UAAI,KAAK4b,QAAL,CAAcge,gBAAd,KAAmC,KAAKiB,cAA5C,EAA4D;AAC1D;AACA,YAAI4B,aAAa18B,QAAb,IAAyB08B,aAAa,KAAK5B,cAAL,CAAoB1nB,GAA9D,EAAmE;AACjE;AACA;AACAspB,uBAAa/qB,KAAKC,GAAL,CAAS5R,QAAT,EAAmB,KAAK86B,cAAL,CAAoB1nB,GAAvC,CAAb;AACD,SAJD,MAKK,IAAIpT,WAAW08B,UAAX,GAAwB,KAAKnmC,YAAjC,EAA+C;AAClD;AACA;AACAmmC,uBAAa/qB,KAAKC,GAAL,CAAS5R,QAAT,EAAmB,KAAK86B,cAAL,CAAoB1nB,GAAvC,CAAb;AACD;AACF,OAZD,MAaK;AACH;AACA,YAAIspB,aAAa,KAAK5B,cAAL,CAAoB1nB,GAArC,EAA0C;AACxC;AACA;AACAspB,uBAAa,KAAK5B,cAAL,CAAoB1nB,GAAjC;AACD;AACF;AACF,KAtBD,MAuBK;AACH;AACA,UAAIspB,aAAa18B,QAAjB,EAA2B;AACzB08B,qBAAa18B,QAAb;AACD;AACF;AACD,SAAK0c,MAAL,CAAYggB,UAAZ;AACD,GAvCD;;AAyCAppC,aAAWsE,SAAX,CAAqBglC,kBAArB,GAA0C,YAAW;AACnD,SAAKC,UAAL,CAAgB,CAAhB;AACD,GAFD;;AAIAvpC,aAAWsE,SAAX,CAAqBklC,kBAArB,GAA0C,YAAW;AACnD,SAAKD,UAAL,CAAgB,CAAC,CAAjB;AACD,GAFD;;AAIA;AACAvpC,aAAWsE,SAAX,CAAqBilC,UAArB,GAAkC,UAAUE,GAAV,EAAe;AAC/C,QAAI,KAAKjlC,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAKuhC,eAAL,CAAqB,KAAKG,eAAL,KAA0B,OAAOuD,GAAtD;AACD,KAFD,MAGK,IAAI,KAAKjlC,MAAL,KAAgB,SAApB,EAA+B;AAClC,UAAIklC,QAAQ,KAAK1uB,aAAL,CAAmB8qB,yBAAnB,EAAZ;AACA,UAAI6D,cAAc,KAAKzD,eAAL,EAAlB;AACA,UAAItmC,QAAQ8pC,MAAMrkC,OAAN,CAAcskC,WAAd,CAAZ;AACA,UAAI/pC,UAAU,CAAC,CAAf,EAAkB;AAChBsI,gBAAQyB,GAAR,CAAY,oDAAoDggC,YAAYxkC,QAAZ,EAAhE;AACD,OAFD,MAGK;AACHvF,iBAAS6pC,GAAT;AACA;AACA,YAAI7pC,QAAQ8pC,MAAM/oC,MAAd,IAAwBf,SAAS,CAArC,EAAwC;AACtC,eAAKmmC,eAAL,CAAqB2D,MAAM9pC,KAAN,CAArB;AACD;AACF;AACF;AACF,GAnBD;;AAqBAI,aAAWsE,SAAX,CAAqBslC,mBAArB,GAA2C,YAAW;;AAEpD,QAAIh/B,QAAJ;;AAEA,QAAI,KAAKye,WAAT,EAAsB;AACpB;AACA;AACA,WAAKA,WAAL,GAAmB,KAAnB;AACA,aAAO,KAAP;AACD;AACD,QAAI,KAAKze,QAAL,CAAcjK,MAAlB,EAA0B;AACxBiK,iBAAW,KAAKA,QAAhB;AACD,KAFD,MAGK,IAAI,KAAKoC,UAAL,CAAgBrM,MAApB,EAA4B;AAC/BiK,iBAAW,KAAKoC,UAAhB;AACD,KAFI,MAGA;AACHpC,iBAAW,EAAX;AACD;AACD,QAAIA,SAASjK,MAAT,KAAoB,CAAxB,EAA2B;;AAEzB;AACA,UAAI,KAAKmY,UAAL,KAAoB,IAAxB,EAA8B;AAC5B;AACA,aAAKA,UAAL,GAAkB,KAAlB;AACA,YAAI,KAAK/L,oBAAT,EAA+B;AAC7B,eAAKiO,aAAL,CAAmBye,YAAnB,CAAgC,KAAKve,eAArC;AACD,SAFD,MAGK;AACH,eAAK2Z,gBAAL,CAAsBzuB,IAAtB;AACD;AACF,OATD,MAUK;AACH;AACA,aAAK0S,UAAL,GAAkB,IAAlB;AACA,YAAI,KAAK/L,oBAAT,EAA+B;AAC7B,cAAI,OAAO,KAAKmO,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,iBAAKF,aAAL,CAAmB6uB,UAAnB,CAA8B,KAAK3uB,eAAnC;AACD;AACF,SAJD,MAKK;AACH,eAAK2Z,gBAAL,CAAsBxN,IAAtB;AACD;AACD,aAAK,IAAI1hB,IAAE,CAAX,EAAcA,IAAEiF,SAASjK,MAAzB,EAAiCgF,GAAjC,EAAsC;AACpC,cAAIiF,SAASjF,CAAT,EAAYsH,GAAZ,KAAoB,IAAxB,EAA8B;AAAE;AAC9B,iBAAKG,gBAAL,GAAwBxC,SAASjF,CAAT,CAAxB;AACD;AACF;AACD,aAAKyH,gBAAL,GAAwB,KAAKxC,QAAL,CAAc,CAAd,CAAxB;AACA,YAAI,KAAKipB,YAAL,CAAkBlzB,MAAlB,IAA4B,CAAhC,EAAmC;AACjC,eAAKojC,oBAAL,GAA4B,KAAKlQ,YAAL,CAAkB,CAAlB,CAA5B;AACD;AACF;AACD,WAAKvnB,eAAL;AACD,KAnCD,MAoCK;;AAEH;AACA;AACA,UAAI,KAAK0a,aAAL,CAAmBze,EAAnB,CAAsB,UAAtB,CAAJ,EAAuC;AACrC,aAAKye,aAAL,CAAmB5gB,IAAnB;AACA,aAAKijB,WAAL,GAAmB,KAAnB;AACA,aAAKpC,SAAL,CAAeN,KAAf;AACD,OAJD,MAKK;AACH,aAAKC,WAAL;AACA,aAAKI,aAAL,CAAmBK,IAAnB;AACA,aAAKL,aAAL,CAAmB1gB,GAAnB,CAAuB,KAAvB,EAA8B,KAAK2gB,SAAL,CAAejW,QAAf,GAA0BC,GAA1B,GAAgC,KAAK+V,aAAL,CAAmB8iB,WAAnB,EAA9D;AACA,aAAK9iB,aAAL,CAAmB1gB,GAAnB,CAAuB,MAAvB,EAA+B,KAAK2gB,SAAL,CAAejW,QAAf,GAA0BE,IAAzD;AACA;AACA;AACA,aAAK8V,aAAL,CAAmBllB,IAAnB,CAAwB,IAAxB,EAA8B4kB,WAA9B,CAA0C,YAA1C;AACA,YAAI,KAAKM,aAAL,CAAmBllB,IAAnB,CAAwB,eAAxB,CAAJ,EAA8C;AAC5C,eAAKklB,aAAL,CAAmBllB,IAAnB,CAAwB,eAAxB,EAAyC6kB,KAAzC,GAAiDzc,MAAjD,GAA0DuL,QAA1D,CAAmE,YAAnE;AACD,SAFD,MAGK;AACH,eAAKuR,aAAL,CAAmBllB,IAAnB,CAAwB,OAAxB,EAAiCwG,KAAjC,GAAyCqe,KAAzC,GAAiDzc,MAAjD,GAA0DuL,QAA1D,CAAmE,YAAnE;AACD;AACF;AACF;AACF,GAhFD;;AAkFAzV,aAAWsE,SAAX,CAAqBylC,cAArB,GAAsC,YAAY;AAChD,QAAI,KAAK1gB,WAAT,EAAsB;AACpB;AACA;AACA,WAAKA,WAAL,GAAmB,KAAnB;AACA,aAAO,KAAP;AACD;AACD,QAAI,KAAKvC,aAAL,CAAmBve,EAAnB,CAAsB,UAAtB,CAAJ,EAAuC;AACrC,WAAKue,aAAL,CAAmB1gB,IAAnB;AACA,WAAKijB,WAAL,GAAmB,KAAnB;AACA,WAAKtC,eAAL,CAAqBJ,KAArB;AACD,KAJD,MAKK;AACH,WAAKC,WAAL;AACA,WAAKE,aAAL,CAAmBO,IAAnB;AACA,WAAKP,aAAL,CAAmBxgB,GAAnB,CAAuB,KAAvB,EAA8B,KAAKygB,eAAL,CAAqB/V,QAArB,GAAgCC,GAAhC,GAAsC,KAAK6V,aAAL,CAAmBgjB,WAAnB,EAApE;AACA,WAAKhjB,aAAL,CAAmBxgB,GAAnB,CAAuB,MAAvB,EAA+B,KAAKygB,eAAL,CAAqB/V,QAArB,GAAgCE,IAA/D;AACA;AACA;AACA,WAAK4V,aAAL,CAAmBhlB,IAAnB,CAAwB,IAAxB,EAA8B4kB,WAA9B,CAA0C,YAA1C;AACA,UAAI,KAAKI,aAAL,CAAmBhlB,IAAnB,CAAwB,eAAxB,CAAJ,EAA8C;AAC5C,aAAKglB,aAAL,CAAmBhlB,IAAnB,CAAwB,eAAxB,EAAyC6kB,KAAzC,GAAiDzc,MAAjD,GAA0DuL,QAA1D,CAAmE,YAAnE;AACD,OAFD,MAGK;AACH,aAAKqR,aAAL,CAAmBhlB,IAAnB,CAAwB,OAAxB,EAAiCwG,KAAjC,GAAyCqe,KAAzC,GAAiDzc,MAAjD,GAA0DuL,QAA1D,CAAmE,YAAnE;AACD;AACF;AACF,GA3BD;;AA6BAzV,aAAWsE,SAAX,CAAqB0lC,uBAArB,GAA+C,YAAW;AACxD,SAAK/wB,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,SAAKmV,QAAL,GAAgB,CAAE,KAAKnV,MAAvB,CAFwD,CAEzB;AAC/B,SAAKxI,YAAL,CAAkB,UAAlB;AACA,SAAKgL,cAAL,GAAsB,IAAtB;AACA,SAAK3Q,eAAL;AACA,SAAKwB,eAAL;AACD,GAPD;;AASAtM,aAAWsE,SAAX,CAAqB2lC,gBAArB,GAAwC,UAASC,IAAT,EAAe;;AAErD;AACA;AACA;;AAEA,QAAIC,mBAAJ,EAAyBC,cAAzB,EAAyCC,aAAzC;;AAEA,QAAI,KAAKhhB,WAAT,EAAsB;AACpB;AACA;AACA,WAAKA,WAAL,GAAmB,KAAnB;AACA,aAAO,KAAP;AACD;AACD,QAAI,KAAKnC,UAAL,CAAgB3e,EAAhB,CAAmB,UAAnB,CAAJ,EAAoC;AAClC,WAAK2e,UAAL,CAAgB9gB,IAAhB;AACA,WAAKijB,WAAL,GAAmB,KAAnB;AACA,WAAK7P,YAAL,CAAkBmN,KAAlB;AACD,KAJD,MAKK;AACH,WAAKC,WAAL;AACA,WAAKM,UAAL,CAAgBG,IAAhB;AACA8iB,4BAAsB,KAAK3wB,YAAL,CAAkBxI,QAAlB,EAAtB;AACAo5B,uBAAiB,KAAKvoB,QAAL,CAAchT,KAAd,KAAwB,CAAzC;AACAw7B,sBAAgBD,iBAAiB,KAAKljB,UAAL,CAAgBrY,KAAhB,EAAjC;AACA,WAAKqY,UAAL,CAAgB5gB,GAAhB,CAAoB,KAApB,EAA2B6jC,oBAAoBl5B,GAApB,GAA0B,KAAKiW,UAAL,CAAgB4iB,WAAhB,EAArD;AACA,WAAK5iB,UAAL,CAAgB5gB,GAAhB,CAAoB,MAApB,EAA4B+jC,aAA5B;AACA;AACA,WAAKnjB,UAAL,CAAgBplB,IAAhB,CAAqB,IAArB,EAA2B4kB,WAA3B,CAAuC,YAAvC;AACA,WAAKQ,UAAL,CAAgBplB,IAAhB,CAAqB,OAArB,EAA8BwG,KAA9B,GAAsCqe,KAAtC,GAA8Czc,MAA9C,GAAuDuL,QAAvD,CAAgE,YAAhE;AACD;AACF,GA/BD;;AAiCAzV,aAAWsE,SAAX,CAAqBgmC,eAArB,GAAuC,YAAW;AAChD,SAAKl+B,aAAL,CAAmB,KAAnB;AACA,SAAKm+B,UAAL,CAAgBljB,IAAhB;AACD,GAHD;;AAKArnB,aAAWsE,SAAX,CAAqBkmC,sBAArB,GAA8C,YAAY;AACxD,QAAI,KAAK9b,cAAL,CAAoBnmB,EAApB,CAAuB,UAAvB,CAAJ,EAAwC;AACtC,WAAKwI,eAAL,CAAqB3K,IAArB;AACA,WAAKqoB,iBAAL,CAAuBhZ,QAAvB,CAAgC,WAAhC,EAA6C3U,IAA7C,CAAkD,YAAlD,EAA+D,KAAKiD,EAAL,CAAQ4qB,cAAvE;AACA,WAAKF,iBAAL,CAAuB3sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQ4qB,cAA9D;AACA,WAAK8b,cAAL,GAAsB,CAAtB;AACD,KALD,MAMK;AACH,WAAK7mB,uBAAL,CAA6B,YAA7B;AACA,WAAK7S,eAAL,CAAqBsW,IAArB;AACA,WAAKoH,iBAAL,CAAuB/H,WAAvB,CAAmC,WAAnC,EAAgD5lB,IAAhD,CAAqD,YAArD,EAAkE,KAAKiD,EAAL,CAAQsvB,cAA1E;AACA,WAAK5E,iBAAL,CAAuB3sB,IAAvB,CAA4B,mBAA5B,EAAiD8T,IAAjD,CAAsD,KAAK7R,EAAL,CAAQsvB,cAA9D;AACA,WAAKoX,cAAL,GAAsB,CAAtB;AACD;AACD,SAAKh6B,YAAL,CAAkB,gBAAlB;AACD,GAfD;;AAiBAzQ,aAAWsE,SAAX,CAAqBomC,gBAArB,GAAwC,YAAY;AAClD,QAAI,KAAKv5B,WAAL,CAAiB5I,EAAjB,CAAoB,UAApB,CAAJ,EAAqC;AACnC,WAAK4I,WAAL,CAAiB/K,IAAjB;AACA,WAAKkoB,WAAL,CAAiB7Y,QAAjB,CAA0B,WAA1B,EAAuC3U,IAAvC,CAA4C,YAA5C,EAAyD,KAAKiD,EAAL,CAAQ4mC,QAAjE;AACA,WAAKrc,WAAL,CAAiBxsB,IAAjB,CAAsB,mBAAtB,EAA2C8T,IAA3C,CAAgD,KAAK7R,EAAL,CAAQ4mC,QAAxD;AACA,WAAKC,QAAL,GAAgB,CAAhB;AACD,KALD,MAMK;AACH,WAAKhnB,uBAAL,CAA6B,MAA7B;AACA,WAAKzS,WAAL,CAAiBkW,IAAjB;AACA,WAAKiH,WAAL,CAAiB5H,WAAjB,CAA6B,WAA7B,EAA0C5lB,IAA1C,CAA+C,YAA/C,EAA4D,KAAKiD,EAAL,CAAQ8mC,QAApE;AACA,WAAKvc,WAAL,CAAiBxsB,IAAjB,CAAsB,mBAAtB,EAA2C8T,IAA3C,CAAgD,KAAK7R,EAAL,CAAQ8mC,QAAxD;AACA,WAAKD,QAAL,GAAgB,CAAhB;AACD;AACD,SAAKn6B,YAAL,CAAkB,UAAlB;AACD,GAfD;;AAiBAzQ,aAAWsE,SAAX,CAAqB6jC,YAArB,GAAoC,YAAY;AAC9C,QAAI,KAAKxD,yBAAL,EAAJ,EAAsC;AACpC,aAAQllC,SAASqrC,iBAAT,IACArrC,SAASsrC,uBADT,IAEAtrC,SAASurC,8BAFT,IAGAvrC,SAASwrC,oBAHT,IAIAxrC,SAASyrC,mBAJV,GAIiC,IAJjC,GAIwC,KAJ/C;AAKD,KAND,MAOK;AACH,aAAO,KAAKC,qBAAL,GAA6B,IAA7B,GAAoC,KAA3C;AACD;AACF,GAXD;;AAaAnrC,aAAWsE,SAAX,CAAqB8H,aAArB,GAAqC,UAAU60B,UAAV,EAAsB;;AAEzD,QAAI,KAAKkH,YAAL,MAAuBlH,UAA3B,EAAuC;AACrC;AACD;AACD,QAAIj9B,UAAU,IAAd;AACA,QAAI4B,MAAM,KAAKkc,YAAf;AACA,QAAIspB,KAAKxlC,IAAI,CAAJ,CAAT;;AAEA,QAAI,KAAK++B,yBAAL,EAAJ,EAAsC;AACpC;AACA,UAAI1D,UAAJ,EAAgB;AACd;AACA,YAAImK,GAAGC,iBAAP,EAA0B;AACxBD,aAAGC,iBAAH;AACD,SAFD,MAGK,IAAID,GAAGE,uBAAP,EAAgC;AACnCF,aAAGE,uBAAH;AACD,SAFI,MAGA,IAAIF,GAAGG,oBAAP,EAA6B;AAChCH,aAAGG,oBAAH;AACD,SAFI,MAGA,IAAIH,GAAGI,mBAAP,EAA4B;AAC/BJ,aAAGI,mBAAH;AACD;AACF,OAdD,MAeK;AACH;AACA,YAAI/rC,SAASgsC,cAAb,EAA6B;AAC3BhsC,mBAASgsC,cAAT;AACD,SAFD,MAGK,IAAIhsC,SAASisC,oBAAb,EAAmC;AACtCjsC,mBAASisC,oBAAT;AACD,SAFI,MAGA,IAAIjsC,SAASksC,sBAAb,EAAqC;AACxClsC,mBAASksC,sBAAT;AACD,SAFI,MAGA,IAAIlsC,SAASmsC,mBAAb,EAAkC;AACrCnsC,mBAASmsC,mBAAT;AACD,SAFI,MAGA,IAAInsC,SAASosC,gBAAb,EAA+B;AAClCpsC,mBAASosC,gBAAT;AACD;AACF;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACArsC,QAAEC,QAAF,EAAY8mB,EAAZ,CAAe,gFAAf,EAAiG,YAAW;AAC1G,YAAI,CAACviB,QAAQmkC,YAAR,EAAL,EAA6B;AAC3B;AACA,cAAInkC,QAAQQ,MAAR,KAAmB,SAAvB,EAAkC;AAChCR,oBAAQ8nC,wBAAR,GAAmC,IAAnC;AACA9nC,oBAAQ+nC,YAAR,CAAqB/nC,QAAQohB,OAA7B,EAAsCphB,QAAQqhB,QAA9C;AACD,WAHD,MAIK;AACHrhB,oBAAQ+nC,YAAR,CAAqB/nC,QAAQ8d,YAAR,CAAqBjT,KAArB,EAArB,EAAmD7K,QAAQ8d,YAAR,CAAqB9S,MAArB,EAAnD;AACD;AACF;AACF,OAXD;AAYD,KAtDD,MAuDK;AACH;AACA;AACA,UAAI,CAAC,KAAKg9B,gBAAV,EAA4B;AAC1B,YAAIC,aAAazsC,EAAE,OAAF,CAAjB;AACA;AACA,YAAI0sC,iBAAiB1sC,EAAE,KAAF,EAAQ;AAC3B,mBAAS;AADkB,SAAR,EAElBoW,IAFkB,CAEb,KAAK7R,EAAL,CAAQk9B,UAFK,CAArB,CAH0B,CAKG;AAC7BgL,mBAAW5lC,MAAX,CAAkB6lC,cAAlB;AACA;AACA,aAAKF,gBAAL,GAAwB,IAAIzyB,gBAAJ,CAAqB0yB,UAArB,EAAiC,KAAKrd,iBAAtC,EAAyD,QAAzD,EAAmE,yBAAnE,EAA8Fsd,cAA9F,EAA8G,KAAKnoC,EAAL,CAAQukC,cAAtH,EAAsI,MAAtI,EAA8I,IAA9I,EAAoJ,YAAY;AAAEtkC,kBAAQmoC,sBAAR;AAAkC,SAApM,CAAxB;AACA3sC,UAAE,MAAF,EAAU6G,MAAV,CAAiB4lC,UAAjB;AACD;;AAED;AACA,UAAIG,YAAY,KAAKjG,QAAL,EAAhB;;AAEA,UAAIlF,UAAJ,EAAgB;AACd,aAAKkK,qBAAL,GAA6B,IAA7B;AACA,aAAKa,gBAAL,CAAsB3kB,IAAtB;;AAEA;AACA;AACA,aAAKglB,2BAAL,GAAmC7sC,EAAE,2BAAF,CAAnC;AACA,aAAK6sC,2BAAL,CAAiCC,WAAjC,CAA6C1mC,GAA7C;AACAA,YAAI6f,QAAJ,CAAa,KAAKumB,gBAAL,CAAsB1K,KAAnC;;AAEA;AACA,YAAI17B,QAAQ,KAAK2mC,eAAjB,EAAkC;AAChC3mC,cAAIiJ,KAAJ,CAAU,MAAV;AACD;AACD,YAAI29B,YAAYhtC,EAAES,MAAF,EAAU+O,MAAV,KAAqB,KAAKiU,UAAL,CAAgBjU,MAAhB,EAArC;AACA,YAAI,CAAC,KAAKsM,QAAL,CAAc/S,EAAd,CAAiB,SAAjB,CAAL,EAAkC;AAChCikC,uBAAa,KAAKlxB,QAAL,CAActM,MAAd,EAAb;AACD;AACD,aAAK+8B,YAAL,CAAkBvsC,EAAES,MAAF,EAAU4O,KAAV,EAAlB,EAAqC29B,SAArC;AACD,OAnBD,MAoBK;AACH,aAAKrB,qBAAL,GAA6B,KAA7B;AACA,YAAIvlC,QAAQ,KAAK2mC,eAAjB,EAAkC;AAChC3mC,cAAIiJ,KAAJ,CAAU,KAAV;AACD;AACDjJ,YAAI0mC,WAAJ,CAAgB,KAAKD,2BAArB;AACA,aAAKA,2BAAL,CAAiC5lC,MAAjC;AACA,aAAKulC,gBAAL,CAAsB5lC,IAAtB;AACA,aAAK2lC,YAAL,CAAkB,KAAKjqB,YAAL,CAAkBjT,KAAlB,EAAlB,EAA6C,KAAKiT,YAAL,CAAkB9S,MAAlB,EAA7C;AACD;;AAED;AACA;;AAEA;AACA,UAAI,CAACo9B,SAAD,IAAc,KAAKjG,QAAL,EAAlB,EAAmC;AACjC,aAAK9O,SAAL;AACD;AACF;AACD,SAAK/qB,eAAL;AACD,GA1HD;;AA4HAtM,aAAWsE,SAAX,CAAqB6nC,sBAArB,GAA8C,YAAY;AACxD,QAAIM,cAAc,KAAKtG,QAAL,EAAlB,CADwD,CACrB;AACnC,SAAK/5B,aAAL,CAAmB,CAAC,KAAK+7B,YAAL,EAApB;AACA,QAAIsE,WAAJ,EAAiB;AACf,WAAKzI,UAAL,GADe,CACI;AACpB,KAFD,MAGK,IAAI,CAACyI,WAAL,EAAkB;AACrB,WAAKpV,SAAL,GADqB,CACH;AACnB;AACF,GATD;;AAWAr3B,aAAWsE,SAAX,CAAqBooC,0BAArB,GAAkD,UAAUnyB,GAAV,EAAe;;AAE/D,SAAKnS,oBAAL,GAA4BmS,GAA5B,CAF+D,CAE9B;AACjC,SAAKiuB,wBAAL,GAAgC,CAACjuB,GAAjC,CAH+D,CAGzB;AACtC,SAAK9J,YAAL,CAAkB,0BAAlB;AACA,SAAKnE,eAAL;AACD,GAND;;AASAtM,aAAWsE,SAAX,CAAqB6pB,WAArB,GAAmC,UAASwe,QAAT,EAAmB;;AAEpD,QAAKA,QAAD,CAAWpkC,EAAX,CAAc,WAAd,CAAJ,EAAgC;AAC9BokC,eAASC,IAAT,CAAc,IAAd,EAAmB,IAAnB,EAAyBvlB,IAAzB,GAAgCwlB,KAAhC,CAAsC,IAAtC,EAA4CC,OAA5C,CAAoD,IAApD;AACD,KAFD,MAGK;AACHH,eAASC,IAAT,GAAgBvlB,IAAhB,GAAuBwlB,KAAvB,CAA6B,IAA7B,EAAmCC,OAAnC,CAA2C,IAA3C;AACD;AACF,GARD;;AAUA9sC,aAAWsE,SAAX,CAAqBuW,SAArB,GAAiC,UAAUkyB,GAAV,EAAe7nC,QAAf,EAA0B;;AAEzD;AACA;AACA;AACA;AACA;AACA,QAAIlB,OAAJ,EAAawhB,SAAb,EAAwBwnB,aAAxB,EAAuCC,SAAvC,EAAkDC,QAAlD;;AAEAlpC,cAAU,IAAV;;AAEA,QAAIkB,aAAa,YAAjB,EAA+B;AAC7BsgB,kBAAY,KAAK2nB,gBAAjB;AACAH,sBAAgB,KAAKj8B,eAArB;AACD,KAHD,MAIK,IAAI7L,aAAa,MAAjB,EAAyB;AAC5BsgB,kBAAY,KAAK4nB,UAAjB;AACAJ,sBAAgB,KAAK77B,WAArB;AACD,KAHI,MAIA,IAAIjM,aAAa,cAAjB,EAAiC;AACpCsgB,kBAAY,KAAKG,WAAjB;AACD,KAFI,MAGA;AACHH,kBAAY,KAAKA,SAAjB;AACD;AACDA,cAAU6B,IAAV;AACA7B,cAAU5P,IAAV,CAAem3B,GAAf;AACA,QAAI7nC,YAAY,YAAZ,IAA4BA,aAAa,MAA7C,EAAqD;AACnD,UAAI8nC,cAAcn+B,KAAd,KAAwB2W,UAAU3W,KAAV,EAA5B,EAA+C;AAC7Co+B,oBAAYD,cAAcn+B,KAAd,KAAwB,CAAxB,GAA4B2W,UAAU3W,KAAV,KAAoB,CAA5D;AACD,OAFD,MAGK;AACH;AACAo+B,oBAAY,EAAZ;AACD;AACD,UAAI/nC,aAAa,MAAjB,EAAyB;AACvB;AACAgoC,mBAAYF,cAAch+B,MAAd,KAAyB,CAA1B,GAA+B,CAA1C;AACD,OAHD,MAIK,IAAI9J,aAAa,YAAjB,EAA+B;AAClC;AACAgoC,mBAAW,KAAKG,kBAAL,CAAwBr+B,MAAxB,KAAmC,EAA9C;AACD;AACDwW,gBAAUlf,GAAV,CAAc;AACZ2K,aAAKi8B,WAAW,IADJ;AAEZh8B,cAAM+7B,YAAY;AAFN,OAAd;AAID,KApBD,MAqBK,IAAI/nC,aAAa,cAAjB,EAAiC;AACpC;AACA;AACA;AACA;AACAsgB,gBAAUlf,GAAV,CAAc;AACZ4K,cAAO,KAAK+R,UAAL,CAAgBpU,KAAhB,KAA0B,CAA3B,GAAiC2W,UAAU3W,KAAV,KAAoB;AAD/C,OAAd;AAGD;AACD,QAAI3J,aAAa,cAAjB,EAAiC;AAC/BokB,iBAAW,YAAY;AACrB9D,kBAAUsnB,OAAV,CAAkB,GAAlB;AACD,OAFD,EAEG,IAFH;AAGD;AACF,GA9DD;;AAgEA9sC,aAAWsE,SAAX,CAAqBgpC,WAArB,GAAmC,UAAUlzB,KAAV,EAAiB;;AAElD;AACA;AACA;;AAEA,QAAIA,UAAU,YAAd,EAA4B;AAC1B,UAAI,KAAKmzB,qBAAT,EAAgC;AAC9B,eAAO,IAAP;AACD,OAFD,MAGK;AACH,eAAO,KAAP;AACD;AACF,KAPD,MAQK,IAAInzB,UAAU,MAAd,EAAsB;AACzB,UAAI,KAAKozB,eAAT,EAA0B;AACxB,eAAO,IAAP;AACD,OAFD,MAGK;AACH,eAAO,KAAP;AACD;AACF;AACD,WAAO,KAAP;AACD,GAvBD;;AAyBA;AACAxtC,aAAWsE,SAAX,CAAqBynC,YAArB,GAAoC,UAAUl9B,KAAV,EAAiBG,MAAjB,EAAyB;;AAE3D,QAAI1B,QAAJ,EAAcmgC,gBAAd,EAAgCC,gBAAhC,EAAkDC,WAAlD,EAA+DC,cAA/D,EAA+EC,aAA/E;;AAEA,QAAI,KAAK1F,YAAL,EAAJ,EAAyB;AACvB,UAAI,OAAO,KAAKlmB,gBAAZ,KAAiC,WAArC,EAAkD;AAChD,aAAKH,YAAL,CAAkBxb,GAAlB,CAAsB;AACpB,mBAASuI,QAAQ,IADG;AAEpB,uBAAa;AAFO,SAAtB;AAIA,aAAKoT,gBAAL,CAAsB3b,GAAtB,CAA0B;AACxB,oBAAU0I,SAAS,IADK;AAExB,mBAASH;AAFe,SAA1B;AAIA,aAAKxG,MAAL,CAAY/B,GAAZ,CAAgB;AACd,oBAAU0I,SAAS,IADL;AAEd,mBAASH;AAFK,SAAhB;AAID;AACD,UAAI,OAAO,KAAKkC,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,aAAK+8B,uBAAL,CAA6B,YAA7B,EAA0Cj/B,KAA1C,EAAgDG,MAAhD;AACD;AACD,UAAI,OAAO,KAAKmC,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C,aAAK28B,uBAAL,CAA6B,MAA7B,EAAoCj/B,KAApC,EAA0CG,MAA1C;AACD;AACF,KArBD,MAsBK;AACH;AACA;AACA,UAAI,KAAKxK,MAAL,KAAgB,SAApB,EAA+B;AAC7B,aAAKsd,YAAL,CAAkBxb,GAAlB,CAAsB;AACpB,uBAAauI,QAAQ,IADD;AAEpB,mBAAS;AAFW,SAAtB;AAID,OALD,MAMK,IAAI,KAAKrK,MAAL,KAAgB,IAApB,EAA0B;AAC7B;AACA;AACA8I,mBAAW+Q,KAAKqH,KAAL,CAAW7W,QAAM,KAAKk/B,aAAtB,EAAqC,CAArC,CAAX;AACA,aAAKC,gBAAL,CAAsB1nC,GAAtB,CAA0B;AACxB,mBAASuI,KADe;AAExB,oBAAUvB;AAFc,SAA1B;AAID,OARI,MASA;AACH,aAAKwU,YAAL,CAAkBxb,GAAlB,CAAsB;AACpB,uBAAa,KAAK6C,cAAL,GAAsB,IADf;AAEpB,mBAAS;AAFW,SAAtB;AAID;AACD,UAAI,OAAO,KAAK8Y,gBAAZ,KAAiC,WAArC,EAAkD;AAChD,aAAKA,gBAAL,CAAsB3b,GAAtB,CAA0B;AACxB,oBAAU,EADc;AAExB,mBAAS;AAFe,SAA1B;AAID;AACD,WAAK+B,MAAL,CAAY/B,GAAZ,CAAgB;AACd,iBAAS,MADK;AAEd,kBAAU;AAFI,OAAhB;AAID;;AAED,QAAI,OAAO,KAAK+U,YAAZ,KAA6B,WAAjC,EAA8C;;AAE5C;AACA;AACA;AACAoyB,yBAAmB,GAAnB;AACAC,yBAAmB,IAAnB;AACAC,oBAAcvkC,SAAS,KAAK2I,gBAAd,EAA+B,EAA/B,CAAd;;AAEA;AACA,UAAIlD,QAAQ6+B,gBAAZ,EAA8B;AAC5BE,yBAAiBD,cAAc,GAA/B;AACD,OAFD,MAGK,IAAI9+B,QAAQ4+B,gBAAZ,EAA8B;AACjCG,yBAAiBD,cAAc,GAA/B;AACD,OAFI,MAGA;AACHC,yBAAiBD,WAAjB;AACD;AACDE,sBAAgBD,iBAAiB,EAAjC;AACA,WAAKvyB,YAAL,CAAkB/U,GAAlB,CAAsB,WAAtB,EAAkCsnC,iBAAiB,GAAnD;AACA,WAAK/Y,gBAAL,CAAsBvuB,GAAtB,CAA0B,aAA1B,EAAwCunC,gBAAgB,GAAxD;AACD;;AAED,QAAI,KAAKrpC,MAAL,KAAgB,SAAhB,IAA6B,KAAKwW,aAAtC,EAAqD;AACnD,WAAKsc,mBAAL;AACD,KAFD,MAGK,IAAI,KAAK9yB,MAAL,KAAgB,IAAhB,IAAwB,KAAKgK,QAAjC,EAA2C;AAC9C,UAAI,KAAKhG,SAAL,KAAmB,OAAvB,EAAgC;AAC9B;AACA,aAAKgG,QAAL,CAAcy/B,MAAd,CAAqBp/B,KAArB,EAA2B,CAA3B;AACD,OAHD,MAIK;AACH,aAAKL,QAAL,CAAcy/B,MAAd,CAAqBp/B,KAArB,EAA4BvB,QAA5B;AACD;AACF;AACD,SAAKhB,eAAL;AACD,GAnGD;;AAqGAtM,aAAWsE,SAAX,CAAqBwpC,uBAArB,GAA+C,UAAU1zB,KAAV,EAAiBvL,KAAjB,EAAwBG,MAAxB,EAAiC;;AAE9E;AACA;AACA;;AAEA,QAAI/O,MAAJ,EAAY2Q,SAAZ,EAAuBs9B,SAAvB,EAAkCC,UAAlC,EAA8CC,WAA9C,EAA2DvpB,WAA3D,EAAwEwpB,YAAxE,EAAsFC,YAAtF;;AAEA,QAAIl0B,SAAS,YAAb,EAA2B;AACzBna,eAAS,KAAK8Q,eAAd;AACD,KAFD,MAGK,IAAIqJ,SAAS,MAAb,EAAqB;AACxBna,eAAS,KAAKkR,WAAd;AACD;AACD0T,kBAAc5kB,OAAO4O,KAAP,EAAd;AACAy/B,mBAAeruC,OAAO+O,MAAP,EAAf;AACA4B,gBAAY3Q,OAAO+Q,QAAP,EAAZ;AACAk9B,gBAAYt9B,UAAUK,GAAtB;AACAk9B,iBAAav9B,UAAUM,IAAvB;AACAk9B,kBAAcD,aAAatpB,WAA3B;AACAwpB,mBAAeH,YAAYI,YAA3B;;AAEA,QAAIJ,YAAY,CAAhB,EAAmB;AAAE;AACnBA,kBAAY,EAAZ;AACAjuC,aAAOqG,GAAP,CAAW,KAAX,EAAiB4nC,SAAjB;AACD;AACD,QAAIC,aAAa,CAAjB,EAAoB;AAAE;AACpBA,mBAAa,EAAb;AACAluC,aAAOqG,GAAP,CAAW,MAAX,EAAkB6nC,UAAlB;AACD;AACD,QAAIC,cAAcv/B,KAAlB,EAAyB;AAAE;AACzBs/B,mBAAct/B,QAAQ,EAAT,GAAegW,WAA5B;AACA5kB,aAAOqG,GAAP,CAAW,MAAX,EAAkB6nC,UAAlB;AACD;AACD,QAAIE,eAAer/B,MAAnB,EAA2B;AAAE;AAC3Bk/B,kBAAal/B,SAAS,EAAV,GAAgBs/B,YAA5B;AACAruC,aAAOqG,GAAP,CAAW,KAAX,EAAiB4nC,SAAjB;AACD;AACF,GAtCD;;AAwCAluC,aAAWsE,SAAX,CAAqBiqC,gBAArB,GAAwC,YAAW;;AAEjD;AACA;;AAEA,QAAI3U,GAAJ,EAASl0B,SAAT,EAAoB8oC,CAApB;AACA5U,UAAM,CAAN;;AAEA;AACAl0B,gBAAYlG,EAAE,QAAF,EAAYuiC,GAAZ,CAAgB,mFAAhB,CAAZ;;AAEAr8B,cAAU/F,IAAV,CAAe,YAAU;AACvB6uC,UAAIhvC,EAAE,IAAF,EAAQ8G,GAAR,CAAY,SAAZ,CAAJ;AACA,UAAImoC,OAAOC,SAAP,CAAiB,CAACF,CAAlB,CAAJ,EAA0B;AAAE;AAC1B,YAAIplC,SAASolC,CAAT,IAAc5U,GAAlB,EAAuB;AACrBA,gBAAMxwB,SAASolC,CAAT,CAAN;AACD;AACF;AACF,KAPD;AAQA,WAAO5U,GAAP;AACD,GApBD;;AAsBA55B,aAAWsE,SAAX,CAAqB6f,YAArB,GAAoC,UAAS/J,KAAT,EAAgB;;AAElD;AACA;AACA;;AAEA,QAAIu0B,WAAJ,EAAiBC,KAAjB,EAAwBC,QAAxB,EAAkCC,OAAlC;;AAEA,QAAI,OAAO,KAAK/9B,eAAZ,KAAgC,WAAhC,IAA+C,OAAO,KAAKI,WAAZ,KAA4B,WAA/E,EAA6F;AAC3F;AACA,aAAO,KAAP;AACD;;AAED;AACAw9B,kBAAcvlC,SAAS,KAAK2H,eAAL,CAAqBzK,GAArB,CAAyB,SAAzB,CAAT,CAAd;AACAsoC,YAAQxlC,SAAS,KAAK+H,WAAL,CAAiB7K,GAAjB,CAAqB,SAArB,CAAT,CAAR;;AAEA,QAAIqoC,gBAAgBC,KAApB,EAA2B;AACzB;AACAC,iBAAWF,cAAc,IAAzB;AACAG,gBAAUH,WAAV;AACD,KAJD,MAKK,IAAIA,cAAcC,KAAlB,EAAyB;AAC5B,UAAIx0B,UAAU,YAAd,EAA4B;AAC1B;AACA,eAAO,KAAP;AACD,OAHD,MAIK;AACH;AACAy0B,mBAAWF,WAAX;AACAG,kBAAUF,KAAV;AACD;AACF,KAVI,MAWA;AAAE;AACL,UAAIx0B,UAAU,MAAd,EAAsB;AACpB,eAAO,KAAP;AACD,OAFD,MAGK;AACHy0B,mBAAWD,KAAX;AACAE,kBAAUH,WAAV;AACD;AACF;;AAED;AACA,QAAIv0B,UAAU,YAAd,EAA4B;AAC1B,WAAKrJ,eAAL,CAAqBzK,GAArB,CAAyB,SAAzB,EAAmCuoC,QAAnC;AACA,WAAK19B,WAAL,CAAiB7K,GAAjB,CAAqB,SAArB,EAA+BwoC,OAA/B;AACD,KAHD,MAIK,IAAI10B,UAAU,MAAd,EAAsB;AACzB,WAAKjJ,WAAL,CAAiB7K,GAAjB,CAAqB,SAArB,EAA+BuoC,QAA/B;AACA,WAAK99B,eAAL,CAAqBzK,GAArB,CAAyB,SAAzB,EAAmCwoC,OAAnC;AACD;AACF,GApDD;;AAsDA9uC,aAAWsE,SAAX,CAAqB+I,kBAArB,GAA0C,UAAUc,MAAV,EAAkBhB,QAAlB,EAA4B;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIxH,CAAJ,EAAOiF,QAAP,EAAiBipB,YAAjB,EAA+BtL,QAA/B,EAAyCuL,IAAzC;;AAEA;AACA,SAAKnuB,CAAL,IAAU,KAAKiF,QAAf,EAAyB;AACvB,UAAI,KAAKA,QAAL,CAAcjF,CAAd,EAAiBwH,QAAjB,KAA8BA,QAAlC,EAA4C;AAC1CvC,mBAAW,KAAKA,QAAL,CAAcjF,CAAd,CAAX;AACD;AACF;AACD;AACA,SAAKA,CAAL,IAAU,KAAK4iB,QAAf,EAAyB;AACvB,UAAI,KAAKA,QAAL,CAAc5iB,CAAd,EAAiBwH,QAAjB,KAA8BA,QAAlC,EAA4C;AAC1Cob,mBAAW,KAAKA,QAAL,CAAc5iB,CAAd,CAAX;AACD;AACF;AACD;AACA,SAAK,IAAIA,CAAT,IAAc,KAAKkuB,YAAnB,EAAiC;AAC/B,UAAI,KAAKA,YAAL,CAAkBluB,CAAlB,EAAqBwH,QAArB,KAAkCA,QAAtC,EAAgD;AAC9C0mB,uBAAe,KAAKA,YAAL,CAAkBluB,CAAlB,CAAf;AACD;AACF;AACD;AACA,SAAK,IAAIA,CAAT,IAAc,KAAKmuB,IAAnB,EAAyB;AACvB,UAAI,KAAKA,IAAL,CAAUnuB,CAAV,EAAawH,QAAb,KAA0BA,QAA9B,EAAwC;AACtC2mB,eAAO,KAAKA,IAAL,CAAUnuB,CAAV,CAAP;AACD;AACF;;AAED;AACA,SAAKopC,cAAL,GAAsB5hC,QAAtB;;AAEA,QAAIgB,WAAW,MAAX,IAAqBA,WAAW,UAApC,EAAgD;AAC9C,WAAKjB,WAAL,GAAmBC,QAAnB;AACA,WAAKC,gBAAL,GAAwBxC,QAAxB;AACA,WAAK6d,gBAAL,GAAwBF,QAAxB;AACA,WAAKwb,oBAAL,GAA4BlQ,YAA5B;AACA,WAAKmb,YAAL,GAAoBlb,IAApB;AACA,WAAKmb,kBAAL,GAA0BrkC,QAA1B;AACA,WAAKskC,kBAAL,GAA0B3mB,QAA1B;AACA,WAAK4mB,sBAAL,GAA8Btb,YAA9B;AACA,WAAKub,kBAAL;AACA,WAAKhkC,WAAL,CAAiB,UAAjB;AACD,KAXD,MAYK,IAAI+C,WAAW,YAAf,EAA6B;AAChC,WAAK8gC,kBAAL,GAA0BrkC,QAA1B;AACA,WAAKskC,kBAAL,GAA0B3mB,QAA1B;AACA,WAAK4mB,sBAAL,GAA8Btb,YAA9B;AACD;AACD,SAAKvoB,gBAAL;AACD,GA3DD;AA6DD,CAn/CD,EAm/CG1G,MAn/CH;;AAq/CA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqB+G,aAArB,GAAqC,UAAUkW,IAAV,EAAgB;AACnD,QAAI,CAAC,KAAKxU,oBAAN,IAA+B,OAAO,KAAK8nB,gBAAZ,KAAiC,WAApE,EAAkF;AAChF,UAAI,KAAK/b,UAAT,EAAqB;AACnB,aAAK+b,gBAAL,CAAsBxN,IAAtB;AACA,aAAKrO,YAAL,CAAkBuI,QAAQ,KAAKyhB,UAAL,EAA1B;AACD,OAHD,MAIK,IAAI,KAAKnO,gBAAT,EAA2B;AAC9B,aAAKA,gBAAL,CAAsBzuB,IAAtB;AACA,aAAKojB,YAAL,GAAoB,CAApB;AACD;AACF;AACF,GAXD;;AAaA;AACA;AACAxpB,aAAWsE,SAAX,CAAqB0kB,uBAArB,GAA+C,UAAUjB,KAAV,EAAiB;AAC9D,QAAI/jB,UAAU,IAAd;AACA,WAAO,YAAY;AACjBA,cAAQoJ,gBAAR,GAA2B2a,KAA3B;AACA/jB,cAAQkJ,WAAR,GAAsB6a,MAAM5a,QAA5B;AACAnJ,cAAQ8wB,cAAR,GAAyB,CAAC,CAA1B;;AAEA,UAAI9wB,QAAQ+I,oBAAZ,EAAkC;AAChC,YAAI/I,QAAQ8U,UAAZ,EAAwB;AACtB,cAAI,OAAO9U,QAAQkX,eAAf,KAAmC,WAAvC,EAAoD;AAClD;AACAlX,oBAAQgX,aAAR,CAAsBC,SAAtB,CAAgCjX,QAAQkX,eAAxC,EAAyD,OAAzD,EAAkE,EAAC,gBAAgBlX,QAAQkJ,WAAzB,EAAlE;AACD,WAHD,MAIK;AACH;AACA;AACA;AACD;AACF,SAVD,MAWK;AACH;AACA;AACA;AACAlJ,kBAAQqrC,wBAAR,GAAmC,IAAnC;AACArrC,kBAAQgX,aAAR,CAAsB6uB,UAAtB,CAAiC7lC,QAAQkX,eAAzC;AACD;AACF,OAnBD,MAoBK;AACHlX,gBAAQqJ,kBAAR,CAA2B,UAA3B,EAAsCrJ,QAAQkJ,WAA9C;AACA,YAAI,CAAC,KAAKimB,WAAV,EAAuB;AACrBnvB,kBAAQqH,aAAR;AACArH,kBAAQ++B,eAAR,CAAwB/+B,QAAQg/B,UAAR,EAAxB;AACD;AACF;AACDh/B,cAAQ8U,UAAR,GAAqB,IAArB;AACA;AACA;AACA9U,cAAQqlB,WAAR,GAAsB,IAAtB;AACArlB,cAAQgjB,aAAR,CAAsB5gB,IAAtB;AACA;AACA;AACAkjB,iBAAW,YAAW;AACpBtlB,gBAAQqlB,WAAR,GAAsB,KAAtB;AACD,OAFD,EAEG,GAFH;AAGArlB,cAAQijB,SAAR,CAAkBN,KAAlB;;AAEA;AACA3iB,cAAQwlB,YAAR,GAAuB,CAAvB;AACAxlB,cAAQyM,YAAR,CAAqB,cAArB;;AAEAzM,cAAQsI,eAAR;AACD,KAjDD;AAkDD,GApDD;;AAsDA;AACAtM,aAAWsE,SAAX,CAAqBmlB,qBAArB,GAA6C,YAAY;AACvD,QAAIzlB,UAAU,IAAd;AACA,WAAO,YAAY;AACjB,UAAIA,QAAQQ,MAAR,IAAkB,SAAtB,EAAiC;AAC/BR,gBAAQgX,aAAR,CAAsBye,YAAtB,CAAmCz1B,QAAQkX,eAA3C;AACD;AACDlX,cAAQ8U,UAAR,GAAqB,KAArB;AACA9U,cAAQ8wB,cAAR,GAAyB,CAAC,CAA1B;AACA;AACA;AACA9wB,cAAQqlB,WAAR,GAAsB,IAAtB;AACArlB,cAAQgjB,aAAR,CAAsB5gB,IAAtB;AACA;AACA;AACAkjB,iBAAW,YAAW;AACpBtlB,gBAAQqlB,WAAR,GAAsB,KAAtB;AACD,OAFD,EAEG,GAFH;AAGArlB,cAAQijB,SAAR,CAAkBN,KAAlB;;AAEA;AACA3iB,cAAQwlB,YAAR,GAAuB,CAAvB;AACAxlB,cAAQyM,YAAR,CAAqB,cAArB;AACA,UAAI,CAAC,KAAK0iB,WAAV,EAAuB;AACrBnvB,gBAAQsI,eAAR;AACAtI,gBAAQqH,aAAR;AACD;AACF,KAxBD;AAyBD,GA3BD;;AA6BArL,aAAWsE,SAAX,CAAqB0U,YAArB,GAAoC,UAAS2qB,GAAT,EAAc;AAChD,QAAIpmB,CAAJ,EAAO+xB,WAAP,EAAoBC,WAApB;AACA,QAAIrzB,IAAJ;AACA,QAAI,KAAK9O,gBAAT,EAA2B;AACzB8O,aAAO,KAAK9O,gBAAL,CAAsB8O,IAA7B;AACD,KAFD,MAGK,IAAI,KAAKtR,QAAL,CAAcjK,MAAd,IAAwB,CAA5B,EAA+B;AAClCub,aAAO,KAAKtR,QAAL,CAAc,CAAd,EAAiBsR,IAAxB;AACD,KAFI,MAGA;AACHA,aAAO,EAAP;AACD;AACD,SAAKqB,CAAL,IAAUrB,IAAV,EAAgB;AACd,UAAKA,KAAKqB,CAAL,EAAQsC,KAAR,IAAiB8jB,GAAlB,IAA2BznB,KAAKqB,CAAL,EAAQuC,GAAR,GAAc6jB,GAA7C,EAAmD;AACjD2L,sBAAc/xB,CAAd;AACA;AACD;AACF;AACD,QAAI,OAAO+xB,WAAP,KAAuB,WAA3B,EAAwC;AACtC,UAAI,KAAKxa,cAAL,KAAwBwa,WAA5B,EAAyC;AACvC;AACAC,sBAAc,KAAKtmB,oBAAL,CAA0B/M,KAAKozB,WAAL,CAA1B,EAA6CluC,OAA7C,CAAqD,IAArD,EAA2D,MAA3D,CAAd;AACA,aAAKia,YAAL,CAAkB1E,IAAlB,CAAuB44B,WAAvB;AACA,aAAKza,cAAL,GAAsBwa,WAAtB;AACA,YAAIC,YAAY5uC,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACA,eAAK0a,YAAL,CAAkB/U,GAAlB,CAAsB,SAAtB,EAAgC,MAAhC;AACD,SAHD,MAIK;AACH,eAAK+U,YAAL,CAAkB/U,GAAlB,CAAsB,SAAtB,EAAgC,cAAhC;AACD;AACF;AACF,KAdD,MAeK;AACH,WAAK+U,YAAL,CAAkB1E,IAAlB,CAAuB,EAAvB;AACA,WAAKme,cAAL,GAAsB,CAAC,CAAvB;AACD;AACF,GArCD;;AAuCA90B,aAAWsE,SAAX,CAAqB2kB,oBAArB,GAA4C,UAAUumB,GAAV,EAAe;;AAEzD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIxvB,SAAS,EAAb;;AAEA,QAAIyvB,mBAAmB,SAAnBA,gBAAmB,CAAU3L,SAAV,EAAqB;AAC1C,UAAI9jB,SAAS,EAAb;AACA,UAAI8jB,UAAUvsB,IAAV,KAAmB,QAAvB,EAAiC;AAC/ByI,eAAO5R,IAAP,CAAY01B,UAAUpsB,KAAtB;AACD,OAFD,MAGK,IAAIosB,UAAUvsB,IAAV,KAAmB,GAAvB,EAA4B;AAC/ByI,eAAO5R,IAAP,CAAY,MAAM01B,UAAUpsB,KAAhB,GAAwB,GAApC;AACA,aAAK,IAAIxJ,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACF,OALI,MAMA,IAAI41B,UAAUvsB,IAAV,KAAmB,GAAvB,EAA4B;AAC/ByI,eAAO5R,IAAP,CAAY,MAAZ;AACA,aAAK,IAAIF,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACD8R,eAAO5R,IAAP,CAAY,OAAZ;AACD,OANI,MAOA,IAAI01B,UAAUvsB,IAAV,KAAmB,GAAvB,EAA4B;AAC/ByI,eAAO5R,IAAP,CAAY,UAAZ;AACA,aAAK,IAAIF,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACD8R,eAAO5R,IAAP,CAAY,WAAZ;AACD,OANI,MAOA;AACH,aAAK,IAAIF,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACF;AACD,aAAO8R,OAAOc,IAAP,CAAY,EAAZ,CAAP;AACD,KA/BD;;AAiCA,QAAI,OAAO0uB,IAAI7vB,UAAX,KAA0B,WAA9B,EAA2C;AACzC,WAAK,IAAIzR,EAAT,IAAeshC,IAAI7vB,UAAJ,CAAeQ,QAA9B,EAAwC;AACtCH,eAAO5R,IAAP,CAAYqhC,iBAAiBD,IAAI7vB,UAAJ,CAAeQ,QAAf,CAAwBjS,EAAxB,CAAjB,CAAZ;AACD;AACF;AACD,WAAO8R,OAAOc,IAAP,CAAY,EAAZ,CAAP;AACD,GA9DD;;AAgEA9gB,aAAWsE,SAAX,CAAqBwT,kBAArB,GAA0C,UAASoyB,IAAT,EAAe;;AAEvD,QAAI51B,UAAU,EAAd;;AAEA,YAAQ41B,IAAR;;AAEE,WAAK,kBAAL;AACE51B,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQ2rC,KAArB;AACAp7B,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQ+N,IAArB;AACAwC,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQ4rC,OAArB;AACAr7B,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQ6rC,OAArB;AACAt7B,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQ8rC,SAArB;AACA;;AAEF,WAAK,mBAAL;AACA,WAAK,qBAAL;AACE;AACAv7B,gBAAQ,CAAR,IAAa,CAAC,OAAD,EAAS,KAAKvQ,EAAL,CAAQ+rC,KAAjB,CAAb;AACAx7B,gBAAQ,CAAR,IAAa,CAAC,QAAD,EAAU,KAAKvQ,EAAL,CAAQgsC,MAAlB,CAAb;AACAz7B,gBAAQ,CAAR,IAAa,CAAC,OAAD,EAAS,KAAKvQ,EAAL,CAAQiC,KAAjB,CAAb;AACAsO,gBAAQ,CAAR,IAAa,CAAC,MAAD,EAAQ,KAAKvQ,EAAL,CAAQisC,IAAhB,CAAb;AACA17B,gBAAQ,CAAR,IAAa,CAAC,MAAD,EAAQ,KAAKvQ,EAAL,CAAQkC,IAAhB,CAAb;AACAqO,gBAAQ,CAAR,IAAa,CAAC,SAAD,EAAW,KAAKvQ,EAAL,CAAQksC,OAAnB,CAAb;AACA37B,gBAAQ,CAAR,IAAa,CAAC,KAAD,EAAO,KAAKvQ,EAAL,CAAQgC,GAAf,CAAb;AACAuO,gBAAQ,CAAR,IAAa,CAAC,OAAD,EAAS,KAAKvQ,EAAL,CAAQmsC,KAAjB,CAAb;AACA;;AAEF,WAAK,kBAAL;AACE57B,gBAAQ,CAAR,IAAa,KAAb;AACAA,gBAAQ,CAAR,IAAa,MAAb;AACAA,gBAAQ,CAAR,IAAa,MAAb;AACAA,gBAAQ,CAAR,IAAa,MAAb;AACAA,gBAAQ,CAAR,IAAa,MAAb;AACA;;AAEF,WAAK,qBAAL;AACEA,gBAAQ,CAAR,IAAa,IAAb;AACAA,gBAAQ,CAAR,IAAa,KAAb;AACAA,gBAAQ,CAAR,IAAa,KAAb;AACAA,gBAAQ,CAAR,IAAa,KAAb;AACAA,gBAAQ,CAAR,IAAa,MAAb;AACA;;AAEF,WAAK,mBAAL;AACEA,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQosC,kBAArB;AACA77B,gBAAQ,CAAR,IAAa,KAAKvQ,EAAL,CAAQqsC,mBAArB;AACA;;AAEF,WAAK,sBAAL;AACE97B,gBAAQ,CAAR,IAAa,SAAb;AACAA,gBAAQ,CAAR,IAAa,OAAb;AACA;;AA/CJ;AAkDA,WAAOA,OAAP;AACD,GAvDD;;AAyDAtU,aAAWsE,SAAX,CAAqB6W,cAArB,GAAsC,UAAS+uB,IAAT,EAAexyB,KAAf,EAAsB24B,YAAtB,EAAoC;;AAExE;AACA,QAAIA,gBAAgB,SAApB,EAA+B;AAC7B,UAAInG,SAAS,MAAb,EAAqB;AACnB;AACA,gBAAQxyB,KAAR;AACE,eAAK,KAAL;AACE,mBAAO,CAAC,CAAR;AACF,eAAK,MAAL;AACE,mBAAO,CAAP;AACF,eAAK,MAAL;AACE,mBAAO,CAAP;AACF,eAAK,MAAL;AACE,mBAAO,CAAP;AACF,eAAK,MAAL;AACE,mBAAO,CAAP;AAVJ;AAYD;AACF;AACD,WAAO,KAAP;AACD,GArBD;;AAuBA1X,aAAWsE,SAAX,CAAqBsT,eAArB,GAAuC,UAASqN,QAAT,EAAmBilB,IAAnB,EAAyB;;AAE9D;AACA;AACA;AACA;AACA,QAAIoG,QAAJ,EAAc11B,QAAd,EAAwB21B,OAAxB,EAAiCC,UAAjC;;AAEA,QAAI,OAAOvrB,QAAP,KAAoB,WAAxB,EAAqC;AACnC,UAAIilB,QAAQ,sBAAZ,EAAoC;AAClC,aAAKuG,gBAAL;AACD,OAFD,MAGK,IAAI,OAAOvG,IAAP,KAAgB,WAApB,EAAiC;AACpC;AACA,YAAIA,SAAS,kBAAb,EAAiC;AAC/BoG,qBAAW,aAAX;AACD,SAFD,MAGK,IAAIpG,SAAS,kBAAb,EAAiC;AACpCoG,qBAAW,WAAX;AACD,SAFI,MAGA,IAAIpG,SAAS,mBAAb,EAAkC;AACrCoG,qBAAW,OAAX;AACD,SAFI,MAGA,IAAIpG,SAAS,qBAAb,EAAoC;AACvCoG,qBAAW,kBAAX;AACD,SAFI,MAGA,IAAIpG,SAAS,qBAAb,EAAoC;AACvCoG,qBAAW,SAAX;AACD;AACD,YAAIpG,SAAS,qBAAb,EAAoC;AAClCtvB,qBAAW81B,WAAWlxC,EAAE,MAAM,KAAKmJ,OAAX,GAAqB,GAArB,GAA2BuhC,IAA7B,EAAmC3vB,GAAnC,EAAX,IAAuD,KAAlE;AACD,SAFD,MAGK;AACHK,qBAAWpb,EAAE,MAAM,KAAKmJ,OAAX,GAAqB,GAArB,GAA2BuhC,IAA7B,EAAmC3vB,GAAnC,EAAX;AACD;AACD0K,iBAAS3e,GAAT,CAAagqC,QAAb,EAAuB11B,QAAvB;AACD,OAxBI,MAyBA;AAAE;AACL21B,kBAAUG,WAAW,KAAKx+B,mBAAhB,IAAuC,KAAjD;AACA+S,iBAAS3e,GAAT,CAAa;AACX,yBAAe,KAAKuL,gBADT;AAEX,uBAAa,KAAKE,gBAFP;AAGX,mBAAS,KAAKC,iBAHH;AAIX,8BAAoB,KAAKC,mBAJd;AAKX,qBAAWs+B;AALA,SAAb;AAOA,YAAItrB,aAAa,KAAK5J,YAAtB,EAAoC;AAClC,cAAI,OAAO,KAAKs1B,eAAZ,KAAgC,WAApC,EAAiD;AAC/CH,yBAAapnC,SAAS,KAAK2I,gBAAd,EAA+B,EAA/B,IAAqC,EAAlD;AACA,iBAAK8iB,gBAAL,CAAsBvuB,GAAtB,CAA0B,aAA1B,EAAwCkqC,aAAa,GAArD;AACD;AACF;AACD,YAAI,KAAK5+B,oBAAL,KAA8B,OAAlC,EAA2C;AACzC;AACA,cAAI,OAAO,KAAK++B,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,iBAAK9b,gBAAL,CAAsBvuB,GAAtB,CAA0B;AACxB,kCAAoB,KAAK2L,mBADD;AAExB,yBAAW;AAFa,aAA1B;AAID;AACF,SARD,MASK,IAAI,KAAKL,oBAAL,KAA8B,SAAlC,EAA6C;AAChD;AACA,cAAI,OAAO,KAAK++B,eAAZ,KAAgC,WAApC,EAAiD;AAC/C,iBAAK9b,gBAAL,CAAsBvuB,GAAtB,CAA0B;AACxB,kCAAoB,aADI;AAExB,yBAAW;AAFa,aAA1B;AAID;AACF;AACD,aAAKmqC,gBAAL;AACD;AACF;AACF,GAzED;AA0EAzwC,aAAWsE,SAAX,CAAqBmsC,gBAArB,GAAwC,UAASz/B,QAAT,EAAmB;;AAEzD;AACA;AACA;AACA,QAAI,OAAOA,QAAP,KAAoB,WAAxB,EAAqC;AACnCA,iBAAW,KAAKY,oBAAhB;AACD;AACD,QAAI,OAAO,KAAKijB,gBAAZ,KAAiC,WAArC,EAAkD;;AAEhD,UAAI7jB,YAAY,OAAhB,EAAyB;AACvB,aAAK6jB,gBAAL,CAAsBnO,WAAtB,CAAkC,uBAAlC,EAA2DjR,QAA3D,CAAoE,qBAApE;AACA;AACA,aAAKof,gBAAL,CAAsBvuB,GAAtB,CAA0B;AACxB,8BAAoB,KAAK2L,mBADD;AAExB,qBAAW;AAFa,SAA1B;AAID,OAPD,MAQK;AACH,aAAK4iB,gBAAL,CAAsBnO,WAAtB,CAAkC,qBAAlC,EAAyDjR,QAAzD,CAAkE,uBAAlE;AACA,aAAKof,gBAAL,CAAsBvuB,GAAtB,CAA0B;AACxB,8BAAoB,aADI;AAExB,qBAAW;AAFa,SAA1B;AAID;AACF;AACF,GA1BD;AA4BD,CAjYD,EAiYG1B,MAjYH;;AAmYA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBiH,mBAArB,GAA2C,YAAW;;AAEpD,QAAIqlC,YAAJ,EAAkBnuB,WAAlB,EAA+BouB,SAA/B,EAA0CC,gBAA1C,EACEC,aADF;;AAGA,QAAIvxC,EAAE,MAAM,KAAK2C,mBAAb,CAAJ,EAAuC;AACrC,WAAK6uC,YAAL,GAAoBxxC,EAAE,MAAM,KAAK2C,mBAAb,CAApB;AACA,WAAK6uC,YAAL,CAAkBv7B,QAAlB,CAA2B,mBAA3B;;AAEA;AACA,UAAI,KAAKrT,aAAT,EAAwB;AACtBwuC,uBAAe,KAAKjuB,mBAAL,CAAyB,KAAKquB,YAA9B,CAAf;AACAvuB,sBAAc,MAAMmuB,aAAazrC,QAAb,EAApB;AACA0rC,oBAAY,KAAKloC,OAAL,GAAe,mBAA3B;AACAmoC,2BAAmBtxC,EAAE,MAAMijB,WAAN,GAAoB,GAAtB,EAA2B;AAC5C,mBAAS,uBADmC;AAE5C,gBAAMouB;AAFsC,SAA3B,EAGhBj7B,IAHgB,CAGX,KAAKxT,aAHM,CAAnB;AAIA,aAAK4uC,YAAL,CAAkB3qC,MAAlB,CAAyByqC,gBAAzB;AACD;;AAED,WAAKG,YAAL,GAAoBzxC,EAAE,OAAF,CAApB;AACA,UAAI,KAAK4C,aAAT,EAAwB;AACtB,aAAK6uC,YAAL,CAAkBnwC,IAAlB,CAAuB,iBAAvB,EAAyC+vC,SAAzC;AACD,OAFD,MAGK;AACH,aAAKI,YAAL,CAAkBnwC,IAAlB,CAAuB,YAAvB,EAAoC,KAAKiD,EAAL,CAAQwkB,QAA5C;AACD;AACD,WAAKyoB,YAAL,CAAkB3qC,MAAlB,CAAyB,KAAK4qC,YAA9B;;AAEA;AACA,WAAK7B,kBAAL;AACD;AACF,GAjCD;;AAmCApvC,aAAWsE,SAAX,CAAqB8qC,kBAArB,GAA0C,YAAW;;AAEnD,QAAIprC,OAAJ,EAAakY,IAAb,EAAmB60B,aAAnB,EAAkCxzB,CAAlC,EAAqC2zB,WAArC,EACEC,YADF,EACgBC,cADhB,EACgCC,QADhC,EAC0C1pB,UAD1C,EAEEwB,gBAFF,EAEoBmoB,YAFpB,EAEkCP,aAFlC,EAEiDQ,gBAFjD;;AAIAvtC,cAAU,IAAV;;AAEA,QAAI,CAAC,KAAKitC,YAAV,EAAwB;AACtB,aAAO,KAAP;AACD;;AAED,QAAI,KAAKxoB,gBAAT,EAA2B;AACzBvM,aAAO,KAAKuM,gBAAL,CAAsBvM,IAA7B;AACD,KAFD,MAGK,IAAI,KAAKqM,QAAL,CAAc5nB,MAAd,IAAwB,CAA5B,EAA+B;AAClCub,aAAO,KAAKqM,QAAL,CAAc,CAAd,EAAiBrM,IAAxB;AACD,KAFI,MAGA;AACHA,aAAO,EAAP;AACD;AACD,QAAIA,KAAKvb,MAAL,GAAc,CAAlB,EAAqB;AACnBowC,sBAAgBvxC,EAAE,MAAF,CAAhB;AACA,WAAK+d,CAAL,IAAUrB,IAAV,EAAgB;AACdg1B,sBAAc3zB,CAAd;AACA4zB,uBAAe3xC,EAAE,WAAF,CAAf;AACA4xC,yBAAiB5xC,EAAE,UAAF,EAAa;AAC5B,kBAAQ,QADoB;AAE5B,iBAAO0xC;AAFqB,SAAb,EAGdt7B,IAHc,CAGT,KAAKqT,oBAAL,CAA0B/M,KAAKg1B,WAAL,CAA1B,CAHS,CAAjB;;AAKA;AACA/nB,2BAAmB,0BAAU5H,IAAV,EAAgB;AACjC,iBAAO,YAAY;AACjB+vB,2BAAe9xC,EAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,CAAf;AACAkjB,4BAAgBvxC,EAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,EAAsB/rB,IAAtB,CAA2B,IAA3B,CAAhB;AACAyvC,+BAAmBR,cAAcnxC,KAAd,CAAoB0xC,YAApB,CAAnB;AACAP,0BAAcrqB,WAAd,CAA0B,sBAA1B,EAAkD5lB,IAAlD,CAAuD,eAAvD,EAAuE,EAAvE;AACAwwC,yBAAa77B,QAAb,CAAsB,sBAAtB,EAA8C3U,IAA9C,CAAmD,eAAnD,EAAmE,MAAnE;AACA;AACA;AACAkD,oBAAQolB,MAAR,CAAe7H,IAAf;AACD,WATD;AAUD,SAXD;AAYA6vB,uBAAe7qB,EAAf,CAAkB,OAAlB,EAA0B4C,iBAAiBjN,KAAKg1B,WAAL,EAAkBrxB,KAAnC,CAA1B,EArBc,CAqBwD;AACtEuxB,uBAAe7qB,EAAf,CAAkB,OAAlB,EAA0B,YAAW;AACnC/mB,YAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,EAAsB/rB,IAAtB,CAA2B,IAA3B,EAAiC4kB,WAAjC,CAA6C,YAA7C;AACAlnB,YAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,EAAsBpY,QAAtB,CAA+B,YAA/B;AACD,SAHD;AAIA07B,qBAAa5qB,EAAb,CAAgB,OAAhB,EAAwB,YAAW;AACjC/mB,YAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,EAAsB/rB,IAAtB,CAA2B,IAA3B,EAAiC4kB,WAAjC,CAA6C,YAA7C;AACAlnB,YAAE,IAAF,EAAQiW,QAAR,CAAiB,YAAjB;AACD,SAHD;AAIA07B,qBAAa5qB,EAAb,CAAgB,YAAhB,EAA6B,YAAW;AACtC/mB,YAAE,IAAF,EAAQknB,WAAR,CAAoB,YAApB;AACD,SAFD;AAGA0qB,uBAAe7qB,EAAf,CAAkB,MAAlB,EAAyB,YAAW;AAClC/mB,YAAE,IAAF,EAAQquB,OAAR,CAAgB,IAAhB,EAAsBnH,WAAtB,CAAkC,YAAlC;AACD,SAFD;;AAIA;AACAyqB,qBAAa9qC,MAAb,CAAoB+qC,cAApB;AACAL,sBAAc1qC,MAAd,CAAqB8qC,YAArB;AACA,YAAI,KAAK9uC,cAAL,IAAuB6Z,KAAKg1B,WAAL,EAAkBz5B,EAA7C,EAAiD;AAC/C25B,yBAAetwC,IAAf,CAAoB,eAApB,EAAoC,MAApC,EAA4CoJ,MAA5C,CAAmD,IAAnD,EAAyDuL,QAAzD,CAAkE,sBAAlE;AACAkS,uBAAa,IAAb;AACD;AACF;AACD,UAAI,CAACA,UAAL,EAAiB;AACf;AACAopB,sBAAcjvC,IAAd,CAAmB,QAAnB,EAA6BwG,KAA7B,GAAqCxH,IAArC,CAA0C,eAA1C,EAA0D,MAA1D,EACGoJ,MADH,CACU,IADV,EACgBuL,QADhB,CACyB,sBADzB;AAED;AACD,WAAKw7B,YAAL,CAAkBt6B,IAAlB,CAAuBo6B,aAAvB;AACD;AACD,WAAO,KAAP;AACD,GA5ED;;AA8EA/wC,aAAWsE,SAAX,CAAqBmH,oBAArB,GAA4C,YAAW;AACrD;AACA;AACA,QAAI9F,IAAE,CAAN;AACA,WAAOA,IAAI,KAAK4iB,QAAL,CAAc5nB,MAAzB,EAAiC;AAC/B,UAAI,KAAK4nB,QAAL,CAAc5iB,CAAd,EAAiB8R,EAAjB,KAAwB,KAAKpV,cAAjC,EAAiD;AAC/C;AACA,aAAK+mB,MAAL,CAAY,KAAKb,QAAL,CAAc5iB,CAAd,EAAiBka,KAA7B;AACD;AACDla;AACD;AACF,GAXD;;AAaA3F,aAAWsE,SAAX,CAAqBktC,aAArB,GAAqC,UAAU7N,GAAV,EAAe;;AAElD;;AAEA,QAAI,OAAO,KAAKpb,QAAZ,KAAyB,WAA7B,EAA0C;AACxC;AACD;;AAED,QAAIA,QAAJ,EAAc5iB,CAAd,EAAiB4rC,gBAAjB,EAAmCE,YAAnC;;AAEAlpB,eAAW,KAAKA,QAAhB;AACA,SAAK5iB,CAAL,IAAU4iB,QAAV,EAAoB;AAClB,UAAKA,SAAS5iB,CAAT,EAAYka,KAAZ,IAAqB8jB,GAAtB,IAA+Bpb,SAAS5iB,CAAT,EAAYma,GAAZ,GAAkB6jB,GAArD,EAA2D;AACzD4N,2BAAmB5rC,CAAnB;AACA;AACD;AACF;AACD,QAAI,OAAO4rC,gBAAP,KAA4B,WAAhC,EAA6C;AAC3C,UAAI,KAAK/J,cAAL,KAAwBjf,SAASgpB,gBAAT,CAA5B,EAAwD;AACtD;AACA,aAAK/J,cAAL,GAAsBjf,SAASgpB,gBAAT,CAAtB;AACA,YAAI,KAAK5kC,eAAT,EAA0B;AACxB,eAAKC,eAAL,GAAuB,KAAKy6B,kBAAL,EAAvB;AACA,eAAKv6B,sBAAL,GAA8B,KAA9B,CAFwB,CAEa;AACtC;AACD,YAAI,OAAO,KAAKkkC,YAAZ,KAA6B,WAAjC,EAA8C;AAC5C;AACA,eAAKA,YAAL,CAAkBlvC,IAAlB,CAAuB,IAAvB,EAA6BA,IAA7B,CAAkC,IAAlC,EAAwC4kB,WAAxC,CAAoD,sBAApD,EAA4E5lB,IAA5E,CAAiF,eAAjF,EAAiG,EAAjG;AACA,eAAKkwC,YAAL,CAAkBlvC,IAAlB,CAAuB,IAAvB,EAA6BA,IAA7B,CAAkC,IAAlC,EAAwC6N,EAAxC,CAA2C4hC,gBAA3C,EACG97B,QADH,CACY,sBADZ,EACoC3U,IADpC,CACyC,eADzC,EACyD,MADzD;AAED;AACD;AACA2wC,uBAAe,KAAK1tC,EAAL,CAAQ2tC,UAAR,GAAqB,IAArB,GAA4B,KAAKzoB,oBAAL,CAA0B,KAAKue,cAA/B,CAA3C;AACA,aAAK3sB,SAAL,CAAe42B,YAAf,EAA4B,cAA5B;AACD;AACF;AACF,GApCD;;AAsCAzxC,aAAWsE,SAAX,CAAqB+iC,kBAArB,GAA0C,YAAY;;AAEpD;AACA;;AAEA,QAAIsK,aAAJ,EAAmBpL,gBAAnB,EAAqCqL,UAArC;;AAEA,QAAI,OAAO,KAAKpK,cAAZ,KAA+B,WAAnC,EAAgD;AAC9C,aAAO,CAAP;AACD;AACDmK,oBAAgB,KAAK9kC,WAAL,EAAhB;AACA05B,uBAAmB,KAAKhe,QAAL,CAAc5nB,MAAd,GAAqB,CAAxC;AACA,QAAI,KAAK4nB,QAAL,CAAcge,gBAAd,KAAmC,KAAKiB,cAA5C,EAA4D;AAC1D;AACA,UAAI,KAAKA,cAAL,CAAoB1nB,GAApB,KAA4B6xB,aAAhC,EAA+C;AAC7C;AACAC,qBAAaD,aAAb;AACA,aAAKnK,cAAL,CAAoB1nB,GAApB,GAA0B6xB,aAA1B;AACD,OAJD,MAKK;AACHC,qBAAa,KAAKpK,cAAL,CAAoB1nB,GAAjC;AACD;AACF,KAVD,MAWK;AAAE;AACL8xB,mBAAa,KAAKpK,cAAL,CAAoB1nB,GAAjC;AACD;AACD,WAAO8xB,aAAa,KAAKpK,cAAL,CAAoB3nB,KAAxC;AACD,GA3BD;;AA6BA7f,aAAWsE,SAAX,CAAqBijC,iBAArB,GAAyC,YAAY;;AAEnD;AACA;AACA,QAAI,OAAO,KAAKC,cAAZ,KAA+B,WAAnC,EAAgD;AAC9C,aAAO,CAAP;AACD;AACD,QAAImK,gBAAgB,KAAK9kC,WAAL,EAApB;AACA,QAAIglC,eAAe,KAAK7O,UAAL,EAAnB;AACA,QAAI6O,eAAe,KAAKrK,cAAL,CAAoB3nB,KAAvC,EAA8C;AAC5C,aAAOgyB,eAAe,KAAKrK,cAAL,CAAoB3nB,KAA1C;AACD,KAFD,MAGK;AACH,aAAO,CAAP;AACD;AACF,GAfD;;AAiBA7f,aAAWsE,SAAX,CAAqBwtC,6BAArB,GAAqD,UAAUC,WAAV,EAAuB;;AAE1E;AACA;AACA,QAAI,OAAO,KAAKvK,cAAZ,KAA+B,WAAnC,EAAgD;AAC9C,UAAIxC,UAAU,KAAKwC,cAAL,CAAoB3nB,KAApB,GAA4BkyB,WAA1C;AACA,UAAI/M,UAAU,KAAKwC,cAAL,CAAoB1nB,GAAlC,EAAuC;AACrC,eAAO,KAAK0nB,cAAL,CAAoB1nB,GAA3B;AACD,OAFD,MAGK;AACH,eAAOklB,OAAP;AACD;AACF,KARD,MASK;AACH,aAAO+M,WAAP;AACD;AACF,GAhBD;AAkBD,CAtOD,EAsOGntC,MAtOH;;AAwOA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqB0tC,UAArB,GAAkC,UAAUzwB,IAAV,EAAgB;AAChD,QAAI,KAAKgU,OAAT,EAAkB;AAChB,UAAI,KAAK9xB,QAAL,KAAkB,MAAtB,EAA8B;AAC5B,aAAK6xB,QAAL,CAAcjO,IAAd;AACA,aAAK4qB,QAAL,CAAc1wB,QAAQ,KAAKyhB,UAAL,EAAtB;AACD,OAHD,MAIK;AACH,aAAKiP,QAAL,CAAc1wB,QAAQ,KAAKyhB,UAAL,EAAtB;AACD;AACF;AACF,GAVD;;AAYAhjC,aAAWsE,SAAX,CAAqB2tC,QAArB,GAAgC,UAAStO,GAAT,EAAc;AAC5C,QAAIuO,CAAJ,EAAOC,QAAP,EAAiBj2B,IAAjB,EAAuBk2B,OAAvB,EAAgCC,QAAhC,EAA0C1sC,CAA1C,EAA6CwW,IAA7C,EAAmDm2B,WAAnD;AACA,QAAI,KAAKxe,IAAL,CAAUnzB,MAAV,IAAoB,CAAxB,EAA2B;AACzBub,aAAO,KAAK4X,IAAZ;AACD,KAFD,MAGK;AACH5X,aAAO,EAAP;AACD;AACD,SAAKg2B,CAAL,IAAUh2B,IAAV,EAAgB;AACd,UAAKA,KAAKg2B,CAAL,EAAQryB,KAAR,IAAiB8jB,GAAlB,IAA2BznB,KAAKg2B,CAAL,EAAQpyB,GAAR,GAAc6jB,GAA7C,EAAmD;AACjDwO,mBAAWD,CAAX;AACA;AACD;AACF;AACD,QAAI,OAAOC,QAAP,KAAoB,WAAxB,EAAqC;AACnC,UAAI,KAAKI,WAAL,KAAqBJ,QAAzB,EAAmC;AACjC,YAAI,KAAK1uC,QAAL,KAAkB,MAAtB,EAA8B;AAC5B;AACA,eAAK6xB,QAAL,CAAc3e,IAAd,CAAmB,KAAK67B,iBAAL,CAAuBt2B,KAAKi2B,QAAL,CAAvB,EAAuC/wC,OAAvC,CAA+C,IAA/C,EAAqD,MAArD,CAAnB;AACD,SAHD,MAIK,IAAI,KAAKqC,QAAL,KAAkB,UAAtB,EAAkC;AACrC;AACA2uC,oBAAU,KAAKI,iBAAL,CAAuBt2B,KAAKi2B,QAAL,CAAvB,CAAV;AACAE,qBAAWD,QAAQ7rC,KAAR,CAAc,IAAd,CAAX;AACA,eAAKZ,IAAE,CAAP,EAAUA,IAAE0sC,SAAS1xC,MAArB,EAA6BgF,GAA7B,EAAkC;AAChCwW,mBAAO3c,EAAEwf,IAAF,CAAOqzB,SAAS1sC,CAAT,CAAP,CAAP;AACA,gBAAIwW,KAAKgZ,WAAL,GAAmBnW,IAAnB,OAA8B,OAAlC,EAA2C;AACzC;AACA,mBAAKupB,iBAAL,GAAyB,IAAzB;AACA,mBAAKvE,UAAL;AACD,aAJD,MAKK,IAAI7nB,KAAKgZ,WAAL,GAAmB5vB,SAAnB,CAA6B,CAA7B,EAA+B,CAA/B,KAAqC,QAAzC,EAAmD;AACtD+sC,4BAAcn2B,KAAK5W,SAAL,CAAe,CAAf,EAAkByZ,IAAlB,EAAd;AACA,kBAAIxf,EAAE8yC,WAAF,EAAe3xC,MAAnB,EAA2B;AACzBnB,kBAAE8yC,WAAF,EAAe3rB,KAAf;AACD;AACF,aALI,MAMA;AACH,kBAAInnB,EAAE2c,IAAF,EAAQxb,MAAZ,EAAoB;AAClB;AACAnB,kBAAE2c,IAAF,EAAQkL,IAAR;AACA;AACA,qBAAKmO,gBAAL,CAAsBpnB,IAAtB,CAA2B+N,IAA3B;AACD;AACF;AACF;AACF;AACD,aAAKo2B,WAAL,GAAmBJ,QAAnB;AACD;AACF,KAnCD,MAoCK;AACH,UAAI,OAAO,KAAK7c,QAAZ,KAAyB,WAA7B,EAA0C;AACxC,aAAKA,QAAL,CAAc3e,IAAd,CAAmB,EAAnB;AACD;AACD,UAAI,KAAK6e,gBAAL,IAAyB,KAAKA,gBAAL,CAAsB70B,MAAnD,EAA2D;AACzD,aAAKgF,IAAE,CAAP,EAAUA,IAAE,KAAK6vB,gBAAL,CAAsB70B,MAAlC,EAA0CgF,GAA1C,EAA+C;AAC7CnG,YAAE,KAAKg2B,gBAAL,CAAsB7vB,CAAtB,CAAF,EAA4BS,IAA5B;AACD;AACD;AACA,aAAKovB,gBAAL,GAAwB,EAAxB;AACD;AACD,WAAK+c,WAAL,GAAmB,CAAC,CAApB;AACD;AACF,GA/DD;;AAiEA;AACAvyC,aAAWsE,SAAX,CAAqBkuC,iBAArB,GAAyC,UAAUhD,GAAV,EAAe;AACtD,QAAIxvB,SAAS,EAAb;;AAEA,QAAIyvB,mBAAmB,SAAnBA,gBAAmB,CAAU3L,SAAV,EAAqB;AAC1C,UAAI9jB,SAAS,EAAb;AACA,UAAI8jB,UAAUvsB,IAAV,KAAmB,QAAvB,EAAiC;AAC/ByI,eAAO5R,IAAP,CAAY01B,UAAUpsB,KAAtB;AACD,OAFD,MAGK,IAAIosB,UAAUvsB,IAAV,KAAmB,GAAvB,EAA4B;AAC/ByI,eAAO5R,IAAP,CAAY,MAAM01B,UAAUpsB,KAAhB,GAAwB,GAApC;AACA,aAAK,IAAIxJ,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACF,OALI,MAMA;AACH,aAAK,IAAIA,EAAT,IAAe41B,UAAU3jB,QAAzB,EAAmC;AACjCH,iBAAO5R,IAAP,CAAYqhC,iBAAiB3L,UAAU3jB,QAAV,CAAmBjS,EAAnB,CAAjB,CAAZ;AACD;AACF;AACD,aAAO8R,OAAOc,IAAP,CAAY,EAAZ,CAAP;AACD,KAjBD;;AAmBA,SAAK,IAAI5S,EAAT,IAAeshC,IAAI7vB,UAAJ,CAAeQ,QAA9B,EAAwC;AACtCH,aAAO5R,IAAP,CAAYqhC,iBAAiBD,IAAI7vB,UAAJ,CAAeQ,QAAf,CAAwBjS,EAAxB,CAAjB,CAAZ;AACD;;AAED,WAAO8R,OAAOc,IAAP,CAAY,EAAZ,CAAP;AACD,GA3BD;AA6BD,CA5GD,EA4GGlc,MA5GH;;AA8GA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqB8d,oBAArB,GAA4C,YAAW;;AAErD,QAAIpe,UAAU,IAAd;;AAEA,SAAK+M,eAAL,GAAuBvR,EAAE,OAAF,EAAW;AAChC,eAAS,sBADuB;AAEhC,kBAAY;AAFoB,KAAX,CAAvB;;AAKA,SAAK6tC,kBAAL,GAA0B7tC,EAAE,OAAF,EAAW;AACnC,eAAS,8BAA8B,KAAKgH,gBAAnC,GAAsD;AAD5B,KAAX,CAA1B;;AAIA,SAAKkoB,cAAL,GAAsBlvB,EAAE,OAAF,EAAW;AAC/B,eAAU;AADqB,KAAX,CAAtB;;AAIA;AACA,SAAKipC,6BAAL,GAAqCjpC,EAAE,6DAAF,CAArC;AACA,SAAK6tC,kBAAL,CAAwBhnC,MAAxB,CAA+B7G,EAAE,iDAAiD,KAAKuE,EAAL,CAAQ0uC,UAAzD,GAAsE,YAAxE,CAA/B,EAAsH,KAAKhK,6BAA3H;;AAEA;AACA;AACA,SAAK59B,yBAAL,GAAiCrL,EAAE,0CAAF,CAAjC;AACA;AACA;AACA,SAAKu1B,wBAAL,GAAgCv1B,EAAE,2BAA2B,KAAKuE,EAAL,CAAQ2uC,OAAnC,GAA6C,WAA/C,CAAhC;AACA,SAAK7nC,yBAAL,CAA+BxE,MAA/B,CAAsC,KAAK0uB,wBAA3C;AACA,SAAKlqB,yBAAL,CAA+ByP,IAA/B,CAAoC,UAApC,EAAgD,IAAhD;;AAEA,QAAIq4B,wBAAwBnzC,EAAE,kDAAF,CAA5B;AACA,SAAKozC,kCAAL,GAA0CD,qBAA1C;;AAEAA,0BAAsBtsC,MAAtB,CAA6B7G,EAAE,6CAA6C,KAAKuE,EAAL,CAAQoJ,QAArD,GAAgE,YAAlE,CAA7B,EAA8G,KAAKtC,yBAAnH;AACA,SAAKwiC,kBAAL,CAAwBhnC,MAAxB,CAA+BssC,qBAA/B;;AAEA,SAAK5hC,eAAL,CAAqB1K,MAArB,CAA4B,KAAKgnC,kBAAjC,EAAqD,KAAK3e,cAA1D;;AAEA;AACA;AACA,QAAI,KAAK3sB,qBAAT,EAAgC;AAC9BvC,QAAE,MAAM,KAAKuC,qBAAb,EAAoCsE,MAApC,CAA2C,KAAK0K,eAAhD;AACD,KAFD,MAGK;AACH,WAAK+Q,YAAL,CAAkBzb,MAAlB,CAAyB,KAAK0K,eAA9B;AACD;;AAED;AACA,QAAI,CAAC,KAAKhP,qBAAV,EAAiC;AAC/B,WAAK8wC,YAAL,CAAkB,YAAlB;AACA,UAAI,KAAKpI,cAAL,KAAwB,CAA5B,EAA+B;AAC7B;AACA,aAAK7mB,uBAAL,CAA6B,YAA7B,EAA0C,KAAKD,eAAL,CAAqB,YAArB,CAA1C;AACD;AACF;;AAED;AACA,QAAI,CAAC,KAAK8mB,cAAN,IAAwB,CAAC,KAAK1oC,qBAAlC,EAAyD;AACvD,WAAKgP,eAAL,CAAqB3K,IAArB;AACD;AACF,GA5DD;;AA8DApG,aAAWsE,SAAX,CAAqBge,uBAArB,GAA+C,YAAW;;AAExD,QAAIte,UAAU,IAAd;;AAEA,SAAKykC,6BAAL,CAAmC7uB,KAAnC,CAAyC,YAAY;AACnD5V,cAAQ0oC,0BAAR,CAAmC1oC,QAAQykC,6BAAR,CAAsCnuB,IAAtC,CAA2C,SAA3C,CAAnC;AACD,KAFD;;AAIA,SAAKoU,cAAL,CAAoBokB,IAApB,CAAyB,wCAAzB,EAAmE,UAAU34B,KAAV,EAAiB;AAClF;AACA;AACA,UAAI,CAACnW,QAAQ4kC,mBAAb,EAAkC;AAChC5kC,gBAAQoE,oBAAR,GAA+B,KAA/B;AACApE,gBAAQsI,eAAR;AACD;AACDtI,cAAQ4kC,mBAAR,GAA8B,KAA9B;AACD,KARD;;AAUA,QAAI,OAAO,KAAK/9B,yBAAZ,KAA0C,WAA9C,EAA2D;;AAEzD,WAAKA,yBAAL,CAA+B0b,EAA/B,CAAkC,iBAAlC,EAAoD,UAAUpM,KAAV,EAAiB;AACnE;AACA;AACAA,cAAM2nB,eAAN;AACD,OAJD;;AAMA,WAAKj3B,yBAAL,CAA+B0b,EAA/B,CAAkC,QAAlC,EAA2C,YAAY;;AAErD,YAAIpZ,WAAWnJ,QAAQ6G,yBAAR,CAAkC0P,GAAlC,EAAf;;AAEAvW,gBAAQqJ,kBAAR,CAA2B,YAA3B,EAAwCF,QAAxC;AACD,OALD;AAMD;AACF,GAjCD;;AAmCAnN,aAAWsE,SAAX,CAAqBzC,6BAArB,GAAqD,YAAW;;AAE9D;AACA;AACA;;AAEA,QAAIrC,EAAE,MAAM,KAAKoC,aAAb,EAA4BjB,MAAhC,EAAwC;AACtC,WAAKoQ,eAAL,GAAuBvR,EAAE,MAAM,KAAKoC,aAAb,CAAvB;AACA,UAAI,KAAKmP,eAAL,CAAqBjP,IAArB,CAA0B,sBAA1B,EAAkDnB,MAAtD,EAA8D;AAC5D,aAAK0sC,kBAAL,GAA0B,KAAKt8B,eAAL,CAAqBjP,IAArB,CAA0B,sBAA1B,EAAkD6N,EAAlD,CAAqD,CAArD,CAA1B;AACA,YAAI,KAAKoB,eAAL,CAAqBjP,IAArB,CAA0B,kBAA1B,EAA8CnB,MAAlD,EAA0D;AACxD,eAAK+tB,cAAL,GAAsB,KAAK3d,eAAL,CAAqBjP,IAArB,CAA0B,kBAA1B,EAA8C6N,EAA9C,CAAiD,CAAjD,CAAtB;AACA,cAAI,KAAKoB,eAAL,CAAqBjP,IAArB,CAA0B,4BAA1B,EAAwDnB,MAA5D,EAAoE;AAClE,iBAAKoyC,qBAAL,GAA6B,KAAKhiC,eAAL,CAAqBjP,IAArB,CAA0B,4BAA1B,CAA7B;AACA,mBAAO,IAAP;AACD;AACF;AACF;AACF;AACD,WAAO,KAAP;AACD,GApBD;;AAsBA9B,aAAWsE,SAAX,CAAqB+d,qBAArB,GAA6C,YAAW;;AAEtD;;AAEA,SAAKomB,6BAAL,GAAqCjpC,EAAE,6DAAF,CAArC;AACA,SAAK6tC,kBAAL,CAAwBhnC,MAAxB,CAA+B7G,EAAE,iDAAiD,KAAKuE,EAAL,CAAQ0uC,UAAzD,GAAsE,YAAxE,CAA/B,EAAsH,KAAKhK,6BAA3H;AAED,GAPD;;AASAzoC,aAAWsE,SAAX,CAAqBgH,gBAArB,GAAwC,YAAW;;AAEjD,QAAI,CAAC,KAAK3J,cAAV,EAA0B;AACxB;AACD;;AAED,QAAI,KAAKA,cAAL,KAAwB,UAAxB,IAAsC,KAAKA,cAAL,KAAwB,OAAlE,EAA2E;;AAEzE,UAAI4mB,QAAJ,EAAc3d,QAAd,EAAwBipB,YAAxB;;AAEA;AACA;AACA,UAAI,KAAKkb,cAAT,EAAyB;AACvBnkC,mBAAW,KAAKqkC,kBAAL,CAAwB/yB,IAAnC;AACD,OAFD,MAGK;AACH,YAAI,KAAK+yB,kBAAT,EAA6B;AAC3B,eAAKF,cAAL,GAAsB,KAAKE,kBAAL,CAAwB9hC,QAA9C;AACAvC,qBAAW,KAAKqkC,kBAAL,CAAwB/yB,IAAnC;AACD,SAHD,MAIK,IAAI,KAAK9O,gBAAT,EAA2B;AAC9B,eAAK2hC,cAAL,GAAsB,KAAK7hC,WAA3B;AACAtC,qBAAW,KAAKwC,gBAAL,CAAsB8O,IAAjC;AACD;AACF;;AAED;AACA,UAAI,KAAKgzB,kBAAT,EAA6B;AAC3B3mB,mBAAW,KAAK2mB,kBAAL,CAAwBhzB,IAAnC;AACD,OAFD,MAGK,IAAI,KAAKqM,QAAL,CAAc5nB,MAAd,GAAuB,CAA3B,EAA8B;AACjC;AACA,YAAI,KAAKouC,cAAT,EAAyB;AACvB,eAAK,IAAI7gC,EAAT,IAAe,KAAKqa,QAApB,EAA8B;AAC5B,gBAAI,KAAKA,QAAL,CAAcra,EAAd,EAAkBf,QAAlB,KAA+B,KAAK4hC,cAAxC,EAAwD;AACtDxmB,yBAAW,KAAKA,QAAL,CAAcra,EAAd,EAAkBgO,IAA7B;AACD;AACF;AACF;AACD,YAAI,OAAOqM,QAAP,KAAoB,WAAxB,EAAqC;AACnCA,qBAAW,KAAKA,QAAL,CAAc,CAAd,EAAiBrM,IAAjB,IAAyB,EAApC;AACD;AACF;;AAED;AACA,UAAI,KAAKizB,sBAAT,EAAiC;AAC/Btb,uBAAe,KAAKsb,sBAAL,CAA4BjzB,IAA3C;AACD,OAFD,MAGK,IAAI,KAAK2X,YAAL,CAAkBlzB,MAAlB,GAA2B,CAA/B,EAAkC;AACrC;AACA,YAAI,KAAKouC,cAAT,EAAyB;AACvB,eAAK,IAAI7gC,EAAT,IAAe,KAAK2lB,YAApB,EAAkC;AAChC,gBAAI,KAAKA,YAAL,CAAkB3lB,EAAlB,EAAsBf,QAAtB,KAAmC,KAAK4hC,cAA5C,EAA4D;AAC1Dlb,6BAAe,KAAKA,YAAL,CAAkB3lB,EAAlB,EAAsBgO,IAArC;AACD;AACF;AACF;AACD,YAAI,CAAC2X,YAAL,EAAmB;AACjBA,yBAAe,KAAKA,YAAL,CAAkB,CAAlB,EAAqB3X,IAArB,IAA6B,EAA5C;AACD;AACF;;AAED,UAAIwd,MAAM,KAAKsZ,kBAAL,CAAwBzqB,YAAY,EAApC,EAAwC3d,YAAY,EAApD,EAAwDipB,gBAAgB,EAAxE,CAAV;;AAEA,WAAKnF,cAAL,CAAoB/X,IAApB,CAAyB+iB,GAAzB;AACA;AACA,UAAI,KAAK7uB,yBAAT,EAAoC;AAClC,aAAKA,yBAAL,CAA+B/I,IAA/B,CAAoC,iBAApC,EAAuDhB,IAAvD,CAA4D,UAA5D,EAAuE,EAAvE;AACA,aAAK+J,yBAAL,CAA+B/I,IAA/B,CAAoC,iBAAiB,KAAKitC,cAAtB,GAAuC,GAA3E,EAAgFjuC,IAAhF,CAAqF,UAArF,EAAgG,UAAhG;AACD;AACF;;AAED,QAAIkD,UAAU,IAAd;;AAEA;AACA,QAAI,KAAK2N,YAAL,KAAsB,CAA1B,EAA6B;AAC3BnS,QAAE,iDAAF,EAAqDsB,IAArD,CAA0D,UAA1D,EAAqE,GAArE;AACD;;AAED;AACA;AACA;AACA;AACA,QAAI,KAAKiQ,eAAL,CAAqBpQ,MAArB,GAA8B,CAAlC,EAAqC;AACnC,WAAKoQ,eAAL,CAAqBjP,IAArB,CAA0B,gCAA1B,EAA4D8X,KAA5D,CAAkE,UAASO,KAAT,EAAgB;AAChF,YAAI84B,YAAYvC,WAAWlxC,EAAE,IAAF,EAAQsB,IAAR,CAAa,YAAb,CAAX,CAAhB;AACA;AACAmyC,qBAAa,GAAb;AACAjvC,gBAAQolB,MAAR,CAAe6pB,SAAf;AACD,OALD;AAMD;AACF,GA3FD;;AA6FAjzC,aAAWsE,SAAX,CAAqB4uC,mBAArB,GAA2C,UAAU/N,WAAV,EAAuB;;AAEhE;;AAEA,QAAI,CAAC,KAAKxjC,cAAV,EAA0B;AACxB;AACD;;AAED,QAAIke,KAAJ,EAAWC,GAAX;AACA,QAAI9b,UAAU,IAAd;;AAEAmhC,kBAAcuL,WAAWvL,WAAX,CAAd;;AAEA;AACA,SAAKp0B,eAAL,CAAqBjP,IAArB,CAA0B,8BAA1B,EAA0DnC,IAA1D,CAA+D,YAAW;AACxEkgB,cAAQ6wB,WAAWlxC,EAAE,IAAF,EAAQsB,IAAR,CAAa,YAAb,CAAX,CAAR;AACAgf,YAAM4wB,WAAWlxC,EAAE,IAAF,EAAQsB,IAAR,CAAa,UAAb,CAAX,CAAN;AACA,UAAIqkC,eAAetlB,KAAf,IAAwBslB,eAAerlB,GAA3C,EAAgD;AAC9C;AACA9b,gBAAQ+M,eAAR,CAAwBjP,IAAxB,CAA6B,iBAA7B,EAAgD4kB,WAAhD,CAA4D,gBAA5D;AACAlnB,UAAE,IAAF,EAAQiW,QAAR,CAAiB,gBAAjB;AACA,eAAO,KAAP;AACD;AACF,KATD;AAUAzR,YAAQ0kC,gBAAR,GAA2BlpC,EAAE,iBAAF,CAA3B;AACA,QAAIwE,QAAQ0kC,gBAAR,CAAyB/nC,MAAzB,KAAoC,CAAxC,EAA2C;AACzC;AACAqD,cAAQ0kC,gBAAR,GAA2B,IAA3B;AACD;AACF,GA7BD;;AA+BA1oC,aAAWsE,SAAX,CAAqB0uC,kBAArB,GAA0C,UAASzqB,QAAT,EAAmB3d,QAAnB,EAA6BipB,YAA7B,EAA2C;;AAEnF,QAAI7vB,UAAU,IAAd;;AAEA,QAAImvC,QAAQ3zC,EAAE,+CAAF,CAAZ;AACA,QAAIyC,eAAJ;;AAEA,QAAI,OAAO,KAAKA,eAAZ,KAAgC,WAApC,EAAiD;AAC/CA,wBAAkB,KAAKA,eAAvB;AACD,KAFD,MAGK,IAAI,KAAKD,UAAT,EAAqB;AACxBC,wBAAkB,KAAK8B,EAAL,CAAQqvC,WAA1B;AACD,KAFI,MAGA;AACHnxC,wBAAkB,KAAK8B,EAAL,CAAQ9B,eAA1B;AACD;;AAED,QAAI,OAAO,KAAKF,qBAAZ,KAAsC,WAA1C,EAAuD;AACrD;AACA;AACA,UAAIqgC,gBAAgB,KAAK1f,kBAAzB;AACA0f,uBAAiB,CAAjB;AACA,UAAIiR,uBAAuBjR,gBAAgB,CAA3C;;AAEA,UAAIA,iBAAiB,CAArB,EAAwB;AACtB,YAAIkR,oBAAoB,MAAMlR,cAAcj9B,QAAd,EAA9B;AACD,OAFD,MAGK;AACH,YAAImuC,oBAAoB,KAAxB;AACD;AACD;AACA,UAAIC,wBAAwB/zC,EAAE,MAAM8zC,iBAAN,GAA0B,GAA5B,CAA5B;AACAC,4BAAsB99B,QAAtB,CAA+B,yBAA/B;AACA,UAAI2sB,gBAAgB,CAApB,EAAuB;AACrBmR,8BAAsBzyC,IAAtB,CAA2B;AACzB,kBAAQ,SADiB;AAEzB,wBAAcshC;AAFW,SAA3B;AAID;AACDmR,4BAAsB39B,IAAtB,CAA2B3T,eAA3B;;AAEAkxC,YAAM9sC,MAAN,CAAaktC,qBAAb;AACD;;AAED,QAAIC,cAAc,CAAlB;AACA,QAAIC,UAAU,CAAd;AACA,QAAIC,WAAW,CAAf;;AAEA,QAAIC,aAAa,SAAbA,UAAa,CAASja,GAAT,EAAcka,IAAd,EAAoB;;AAEnC,UAAIP,wBAAwB,CAA5B,EAA+B;AAC7B,YAAIQ,iBAAiB,MAAMR,qBAAqBluC,QAArB,EAA3B;AACD,OAFD,MAGK;AACH,YAAI0uC,iBAAiB,KAArB;AACD;;AAED,UAAIC,qBAAqBt0C,EAAE,MAAMq0C,cAAN,GAAuB,GAAzB,EAA6B;AACpD,iBAAS;AAD2C,OAA7B,CAAzB;AAGA,UAAIR,uBAAuB,CAA3B,EAA8B;AAC5BS,2BAAmBhzC,IAAnB,CAAwB;AACtB,kBAAQ,SADc;AAEtB,wBAAcuyC;AAFQ,SAAxB;AAID;;AAED,UAAIU,6BAA6B,SAA7BA,0BAA6B,CAASC,IAAT,EAAe;;AAE9C,YAAIh0B,SAAS,EAAb;AACA,YAAIg0B,KAAKz8B,IAAL,KAAc,QAAlB,EAA4B;AAC1ByI,iBAAO5R,IAAP,CAAY4lC,KAAKt8B,KAAjB;AACD,SAFD,MAGK;AACH,eAAK,IAAIxJ,EAAT,IAAe8lC,KAAK7zB,QAApB,EAA8B;AAC5BH,qBAASA,OAAOmL,MAAP,CAAc4oB,2BAA2BC,KAAK7zB,QAAL,CAAcjS,EAAd,CAA3B,CAAd,CAAT;AACD;AACF;AACD,eAAO8R,MAAP;AACD,OAZD;;AAcA,UAAIi0B,YAAYz0C,EAAE,QAAF,EAAW;AACzB,iBAAS;AADgB,OAAX,CAAhB;AAGA,WAAK,IAAI0O,EAAT,IAAe0lC,KAAKj0B,UAAL,CAAgBQ,QAA/B,EAAyC;AACvC,YAAIvD,UAAUm3B,2BAA2BH,KAAKj0B,UAAL,CAAgBQ,QAAhB,CAAyBjS,EAAzB,CAA3B,CAAd;AACA,aAAK,IAAIgmC,EAAT,IAAet3B,OAAf,EAAwB;AACtBq3B,oBAAU5tC,MAAV,CAAiBuW,QAAQs3B,EAAR,CAAjB;AACD;AACF;AACDD,gBAAUnzC,IAAV,CAAe,YAAf,EAA6B8yC,KAAK/zB,KAAL,CAAW1a,QAAX,EAA7B;AACA8uC,gBAAUnzC,IAAV,CAAe,UAAf,EAA2B8yC,KAAK9zB,GAAL,CAAS3a,QAAT,EAA3B;AACA2uC,yBAAmBztC,MAAnB,CAA0B4tC,SAA1B;;AAEAva,UAAIrzB,MAAJ,CAAWytC,kBAAX;AACD,KA/CD;;AAiDA,QAAIK,iBAAiB,SAAjBA,cAAiB,CAASza,GAAT,EAAc0a,IAAd,EAAoB;AACvC,UAAI94B,WAAW9b,EAAE,OAAF,EAAW;AACxB,iBAAS;AADe,OAAX,CAAf;AAGA,UAAI60C,kBAAkB70C,EAAE,QAAF,EAAW;AAC/B,iBAAS;AADsB,OAAX,CAAtB;AAGA60C,sBAAgBz+B,IAAhB,CAAqB,eAArB;AACA0F,eAASjV,MAAT,CAAgBguC,eAAhB;;AAEA,UAAIxQ,iCAAiC,SAAjCA,8BAAiC,CAASmQ,IAAT,EAAe;;AAElD,YAAIh0B,SAAS,EAAb;AACA,YAAIg0B,KAAKz8B,IAAL,KAAc,QAAlB,EAA4B;AAC1ByI,iBAAO5R,IAAP,CAAY4lC,KAAKt8B,KAAjB;AACD,SAFD,MAGK;AACH,eAAK,IAAIxJ,EAAT,IAAe8lC,KAAK7zB,QAApB,EAA8B;AAC5BH,qBAASA,OAAOmL,MAAP,CAAc0Y,+BAA+BmQ,KAAK7zB,QAAL,CAAcjS,EAAd,CAA/B,CAAd,CAAT;AACD;AACF;AACD,eAAO8R,MAAP;AACD,OAZD;;AAcA,UAAIs0B,YAAY90C,EAAE,QAAF,EAAW;AACzB,iBAAS;AADgB,OAAX,CAAhB;AAGA,WAAK,IAAI0O,EAAT,IAAekmC,KAAKz0B,UAAL,CAAgBQ,QAA/B,EAAyC;AACvC,YAAIvD,UAAUinB,+BAA+BuQ,KAAKz0B,UAAL,CAAgBQ,QAAhB,CAAyBjS,EAAzB,CAA/B,CAAd;AACA,aAAK,IAAIgmC,EAAT,IAAet3B,OAAf,EAAwB;AACtB03B,oBAAUjuC,MAAV,CAAiBuW,QAAQs3B,EAAR,CAAjB;AACD;AACF;AACDI,gBAAUxzC,IAAV,CAAe,YAAf,EAA6BszC,KAAKv0B,KAAL,CAAW1a,QAAX,EAA7B;AACAmvC,gBAAUxzC,IAAV,CAAe,UAAf,EAA2BszC,KAAKt0B,GAAL,CAAS3a,QAAT,EAA3B;AACAmW,eAASjV,MAAT,CAAgBiuC,SAAhB;;AAEA5a,UAAIrzB,MAAJ,CAAWiV,QAAX;AACD,KAtCD;;AAwCA,QAAIi5B,aAAa,SAAbA,UAAa,CAAS7a,GAAT,EAAc8a,GAAd,EAAmB;;AAElC,UAAIC,WAAWj1C,EAAE,QAAF,EAAW;AACxB,iBAAS;AADe,OAAX,CAAf;;AAIA,UAAIk1C,6BAA6B,SAA7BA,0BAA6B,CAASV,IAAT,EAAe;;AAE9C,YAAIh0B,SAAS,EAAb;;AAEA,YAAI20B,gBAAgB,SAAhBA,aAAgB,CAAUC,GAAV,EAAe;AACjC,cAAI50B,SAAS,EAAb;AACA,cAAI40B,QAAQ,EAAZ,EAAgB;AACd,mBAAO50B,MAAP;AACD;AACD,cAAI60B,cAAcD,IAAIvvC,OAAJ,CAAY,GAAZ,CAAlB;AACA,cAAIyvC,eAAeF,IAAIvvC,OAAJ,CAAY,GAAZ,CAAnB;AACA,cAAI0vC,YAAYH,IAAIvvC,OAAJ,CAAY,GAAZ,CAAhB;AACA,cAAI2vC,aAAaJ,IAAIvvC,OAAJ,CAAY,GAAZ,CAAjB;;AAEA,cAAI4vC,cAAcJ,gBAAgB,CAAC,CAAjB,IAAsBC,iBAAiB,CAAC,CAA1D;AACA,cAAII,YAAYH,cAAc,CAAC,CAAf,IAAoBC,eAAe,CAAC,CAApD;;AAEA,cAAKE,aAAaD,WAAb,IAA4BJ,cAAcE,SAA3C,IAAyDE,WAA7D,EAA0E;AACxEj1B,qBAASA,OAAOmL,MAAP,CAAcwpB,cAAcC,IAAIrvC,SAAJ,CAAc,CAAd,EAAiBsvC,WAAjB,CAAd,CAAd,CAAT;AACA,gBAAIM,cAAc31C,EAAE,QAAF,EAAW;AAC3B,uBAAS;AADkB,aAAX,CAAlB;AAGA21C,wBAAYv/B,IAAZ,CAAiBg/B,IAAIrvC,SAAJ,CAAcsvC,WAAd,EAA2BC,eAAe,CAA1C,CAAjB;AACA90B,mBAAO5R,IAAP,CAAY+mC,WAAZ;AACAn1B,qBAASA,OAAOmL,MAAP,CAAcwpB,cAAcC,IAAIrvC,SAAJ,CAAcwvC,SAAd,EAAyBC,aAAa,CAAtC,CAAd,CAAd,CAAT;AACD,WARD,MASK,IAAIE,SAAJ,EAAe;AAClBl1B,qBAASA,OAAOmL,MAAP,CAAcwpB,cAAcC,IAAIrvC,SAAJ,CAAc,CAAd,EAAiBwvC,SAAjB,CAAd,CAAd,CAAT;AACA,gBAAII,cAAc31C,EAAE,QAAF,EAAW;AAC3B,uBAAS;AADkB,aAAX,CAAlB;AAGA21C,wBAAYv/B,IAAZ,CAAiBg/B,IAAIrvC,SAAJ,CAAcsvC,WAAd,EAA2BC,eAAe,CAA1C,CAAjB;AACA90B,mBAAO5R,IAAP,CAAY+mC,WAAZ;AACAn1B,qBAASA,OAAOmL,MAAP,CAAcwpB,cAAcC,IAAIrvC,SAAJ,CAAcyvC,aAAa,CAA3B,CAAd,CAAd,CAAT;AACD,WARI,MASA;AACHh1B,mBAAO5R,IAAP,CAAYwmC,GAAZ;AACD;AACD,iBAAO50B,MAAP;AACD,SAnCD;;AAqCA,YAAIg0B,KAAKz8B,IAAL,KAAc,QAAlB,EAA4B;AAC1ByI,mBAASA,OAAOmL,MAAP,CAAcwpB,cAAcX,KAAKt8B,KAAnB,CAAd,CAAT;AACD,SAFD,MAGK,IAAIs8B,KAAKz8B,IAAL,KAAc,GAAlB,EAAuB;AAC1B,cAAI69B,SAAS51C,EAAE,QAAF,EAAW;AACtB,qBAAS;AADa,WAAX,CAAb;AAGA41C,iBAAOx/B,IAAP,CAAY,MAAMo+B,KAAKt8B,KAAX,GAAmB,GAA/B;AACAsI,iBAAO5R,IAAP,CAAYgnC,MAAZ;AACA,eAAK,IAAIlnC,EAAT,IAAe8lC,KAAK7zB,QAApB,EAA8B;AAC5B,gBAAIk1B,aAAaX,2BAA2BV,KAAK7zB,QAAL,CAAcjS,EAAd,CAA3B,CAAjB;AACA,iBAAK,IAAIgmC,EAAT,IAAemB,UAAf,EAA2B;AACzBr1B,qBAAO5R,IAAP,CAAYinC,WAAWnB,EAAX,CAAZ;AACD;AACF;AACF,SAZI,MAaA,IAAIF,KAAKz8B,IAAL,KAAc,GAAd,IAAqBy8B,KAAKz8B,IAAL,KAAc,GAAvC,EAA4C;AAC/C,cAAIy8B,KAAKz8B,IAAL,KAAc,GAAlB,EAAuB;AACrB,gBAAI+9B,OAAO91C,EAAE,UAAF,CAAX;AACD,WAFD,MAGK,IAAIw0C,KAAKz8B,IAAL,KAAc,GAAlB,EAAuB;AAC1B,gBAAI+9B,OAAO91C,EAAE,MAAF,CAAX;AACD;AACD,eAAK,IAAI0O,EAAT,IAAe8lC,KAAK7zB,QAApB,EAA8B;AAC5B,gBAAIk1B,aAAaX,2BAA2BV,KAAK7zB,QAAL,CAAcjS,EAAd,CAA3B,CAAjB;AACA,iBAAK,IAAIgmC,EAAT,IAAemB,UAAf,EAA2B;AACzBC,mBAAKjvC,MAAL,CAAYgvC,WAAWnB,EAAX,CAAZ;AACD;AACF;AACD,cAAIF,KAAKz8B,IAAL,KAAc,GAAd,IAAqBy8B,KAAKz8B,IAAL,IAAa,GAAtC,EAA2C;AACzCyI,mBAAO5R,IAAP,CAAYknC,IAAZ;AACD;AACF,SAhBI,MAiBA;AACH,eAAK,IAAIpnC,EAAT,IAAe8lC,KAAK7zB,QAApB,EAA8B;AAC5BH,qBAASA,OAAOmL,MAAP,CAAcupB,2BAA2BV,KAAK7zB,QAAL,CAAcjS,EAAd,CAA3B,CAAd,CAAT;AACD;AACF;AACD,eAAO8R,MAAP;AACD,OAhFD;;AAkFA,WAAK,IAAI9R,EAAT,IAAesmC,IAAI70B,UAAJ,CAAeQ,QAA9B,EAAwC;AACtC,YAAIvD,UAAU83B,2BAA2BF,IAAI70B,UAAJ,CAAeQ,QAAf,CAAwBjS,EAAxB,CAA3B,CAAd;AACA,aAAK,IAAIgmC,EAAT,IAAet3B,OAAf,EAAwB;AACtB,cAAIoD,SAASpD,QAAQs3B,EAAR,CAAb;AACA,cAAI,OAAOl0B,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,gBAAIhc,QAAQhC,UAAZ,EAAwB;AACtB;AACAge,uBAASA,OAAO5e,OAAP,CAAe,IAAf,EAAoB,MAApB,IAA8B,MAAvC;AACD,aAHD,MAIK;AACH;AACA4e,wBAAU,GAAV;AACD;AACF;AACDy0B,mBAASpuC,MAAT,CAAgB2Z,MAAhB;AACD;AACF;AACDy0B,eAAS3zC,IAAT,CAAc,YAAd,EAA4B0zC,IAAI30B,KAAJ,CAAU1a,QAAV,EAA5B;AACAsvC,eAAS3zC,IAAT,CAAc,UAAd,EAA0B0zC,IAAI10B,GAAJ,CAAQ3a,QAAR,EAA1B;AACAu0B,UAAIrzB,MAAJ,CAAWouC,QAAX;AACA/a,UAAIrzB,MAAJ,CAAW,KAAX;AACD,KA7GD;;AA+GA;AACA,WAAQmtC,cAAcjrB,SAAS5nB,MAAxB,IAAoC+yC,WAAW7f,aAAalzB,MAA5D,IAAwE8yC,UAAU7oC,SAASjK,MAAlG,EAA2G;;AAEzG,UAAK6yC,cAAcjrB,SAAS5nB,MAAxB,IAAoC+yC,WAAW7f,aAAalzB,MAA5D,IAAwE8yC,UAAU7oC,SAASjK,MAA/F,EAAwG;AACtG;AACA,YAAI40C,aAAal3B,KAAKC,GAAL,CAASiK,SAASirB,WAAT,EAAsB3zB,KAA/B,EAAqCgU,aAAa6f,QAAb,EAAuB7zB,KAA5D,EAAkEjV,SAAS6oC,OAAT,EAAkB5zB,KAApF,CAAjB;AACD,OAHD,MAIK,IAAK2zB,cAAcjrB,SAAS5nB,MAAxB,IAAoC+yC,WAAW7f,aAAalzB,MAAhE,EAAyE;AAC5E;AACA,YAAI40C,aAAal3B,KAAKC,GAAL,CAASiK,SAASirB,WAAT,EAAsB3zB,KAA/B,EAAqCgU,aAAa6f,QAAb,EAAuB7zB,KAA5D,CAAjB;AACD,OAHI,MAIA,IAAK2zB,cAAcjrB,SAAS5nB,MAAxB,IAAoC8yC,UAAU7oC,SAASjK,MAA3D,EAAoE;AACvE;AACA,YAAI40C,aAAal3B,KAAKC,GAAL,CAASiK,SAASirB,WAAT,EAAsB3zB,KAA/B,EAAqCjV,SAAS6oC,OAAT,EAAkB5zB,KAAvD,CAAjB;AACD,OAHI,MAIA,IAAK6zB,WAAW7f,aAAalzB,MAAzB,IAAqC8yC,UAAU7oC,SAASjK,MAA5D,EAAqE;AACxE;AACA,YAAI40C,aAAal3B,KAAKC,GAAL,CAASuV,aAAa6f,QAAb,EAAuB7zB,KAAhC,EAAsCjV,SAAS6oC,OAAT,EAAkB5zB,KAAxD,CAAjB;AACD,OAHI,MAIA;AACH,YAAI01B,aAAa,IAAjB;AACD;AACD,UAAIA,eAAe,IAAnB,EAAyB;AACvB,YAAI,OAAOhtB,SAASirB,WAAT,CAAP,KAAiC,WAAjC,IAAgDjrB,SAASirB,WAAT,EAAsB3zB,KAAtB,KAAgC01B,UAApF,EAAgG;AAC9F5B,qBAAWR,KAAX,EAAkB5qB,SAASirB,WAAT,CAAlB;AACAA,yBAAe,CAAf;AACD,SAHD,MAIK,IAAI,OAAO3f,aAAa6f,QAAb,CAAP,KAAkC,WAAlC,IAAiD7f,aAAa6f,QAAb,EAAuB7zB,KAAvB,KAAiC01B,UAAtF,EAAkG;AACrGpB,yBAAehB,KAAf,EAAsBtf,aAAa6f,QAAb,CAAtB;AACAA,sBAAY,CAAZ;AACD,SAHI,MAIA;AACHa,qBAAWpB,KAAX,EAAkBvoC,SAAS6oC,OAAT,CAAlB;AACAA,qBAAW,CAAX;AACD;AACF,OAbD,MAcK;AACH,YAAID,cAAcjrB,SAAS5nB,MAA3B,EAAmC;AACjCgzC,qBAAWR,KAAX,EAAkB5qB,SAASirB,WAAT,CAAlB;AACAA,yBAAe,CAAf;AACD,SAHD,MAIK,IAAIE,WAAW7f,aAAalzB,MAA5B,EAAoC;AACvCwzC,yBAAehB,KAAf,EAAsBtf,aAAa6f,QAAb,CAAtB;AACAA,sBAAY,CAAZ;AACD,SAHI,MAIA,IAAID,UAAU7oC,SAASjK,MAAvB,EAA+B;AAClC4zC,qBAAWpB,KAAX,EAAkBvoC,SAAS6oC,OAAT,CAAlB;AACAA,qBAAW,CAAX;AACD;AACF;AACF;AACD;AACA,QAAI+B,cAAcrC,MAAMhzB,QAAN,EAAlB;AACA,QAAIs1B,YAAY,CAAhB;AACA,QAAIC,YAAY,IAAhB;AACAF,gBAAY71C,IAAZ,CAAiB,YAAW;AAC1B,UAAIH,EAAE,IAAF,EAAQsuB,QAAR,CAAiB,yBAAjB,CAAJ,EAAiD;AAC/C,YAAItuB,EAAE,IAAF,EAAQoW,IAAR,GAAevQ,OAAf,CAAuB,GAAvB,MAAgC,CAAC,CAAjC,IAAsC7F,EAAE,IAAF,EAAQoW,IAAR,GAAevQ,OAAf,CAAuB,GAAvB,MAAgC,CAAC,CAA3E,EAA8E;AAC5E;AACA;AACA,cAAIowC,YAAY,CAAhB,EAAmB;AACjBtC,kBAAMrxC,IAAN,CAAW,kBAAX,EAA+B4kB,WAA/B,CAA2C,iBAA3C,EAA8DivB,OAA9D,CAAsE,2CAAtE;AACAF,wBAAY,CAAZ;AACD;AACF;AACDj2C,UAAE,IAAF,EAAQiW,QAAR,CAAiB,iBAAjB;AACAggC;AACD,OAXD,MAYK;AACH;AACA,YAAIA,YAAY,CAAhB,EAAmB;AACjBtC,gBAAMrxC,IAAN,CAAW,kBAAX,EAA+B4kB,WAA/B,CAA2C,iBAA3C,EAA8DivB,OAA9D,CAAsE,2CAAtE;AACAF,sBAAY,CAAZ;AACD;AACF;AACF,KApBD;AAqBA,WAAOtC,KAAP;AACD,GArUD;AAuUD,CArkBD,EAqkBGvuC,MArkBH;;AAukBA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBkH,iBAArB,GAAyC,YAAW;;AAElD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAIxH,UAAU,IAAd;;AAEA,QAAI,KAAKJ,SAAL,IAAkB,KAAKD,YAA3B,EAAyC;AACvC,UAAInE,EAAE,MAAM,KAAKo2C,SAAb,CAAJ,EAA6B;AAC3B,YAAIC,eAAe,KAAKC,SAAL,CAAe,KAAKnyC,YAApB,CAAnB;AACA,YAAIkyC,aAAal1C,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,cAAIo1C,iBAAiBv2C,EAAE,KAAF,EAAQ;AAC3B,qBAAS;AADkB,WAAR,CAArB;AAGA,cAAIw2C,qBAAqB,mBAAmBH,aAAal1C,MAAhC,GAAyC,4BAAlE;AACAq1C,gCAAsB,0CAAtB;AACAA,gCAAsB,oCAAtB;AACAD,yBAAep/B,IAAf,CAAoBq/B,kBAApB;AACA,cAAIC,cAAcz2C,EAAE,MAAF,CAAlB;AACA,eAAK,IAAImG,CAAT,IAAckwC,YAAd,EAA4B;AAC1B,gBAAIK,cAAc12C,EAAE,MAAF,EAAS,EAAT,CAAlB;AAEA,gBAAI22C,gBAAgB,KAAKC,aAAL,CAAmBP,aAAalwC,CAAb,EAAgB,OAAhB,CAAnB,CAApB;AACA,gBAAI0wC,gBAAgB72C,EAAE,QAAF,EAAW;AAC7B,uBAAS,0BADoB;AAE7B,4BAAcq2C,aAAalwC,CAAb,EAAgB,OAAhB,CAFe;AAG7B,uBAASwwC,cAAc,OAAd,CAHoB;AAI7B,0BAAY;AAJiB,aAAX,CAApB;AAMAE,0BAAczgC,IAAd,CAAmBugC,cAAc,OAAd,CAAnB;AACA;AACAE,0BAAcz8B,KAAd,CAAoB,UAASO,KAAT,EAAgB;AAClC,kBAAI84B,YAAYvC,WAAWlxC,EAAE,IAAF,EAAQsB,IAAR,CAAa,YAAb,CAAX,CAAhB;AACA;AACAmyC,2BAAa,GAAb;AACAjvC,sBAAQ4zB,OAAR,GAAkB,IAAlB;AACA5zB,sBAAQolB,MAAR,CAAe6pB,SAAf;AACD,aAND;;AAQA,gBAAIqD,WAAW92C,EAAE,QAAF,EAAW;AACxB,uBAAS;AADe,aAAX,CAAf;AAGA82C,qBAAS3/B,IAAT,CAAc,QAAQk/B,aAAalwC,CAAb,EAAgB,SAAhB,CAAR,GAAqC,KAAnD;AACAuwC,wBAAY7vC,MAAZ,CAAmBgwC,aAAnB,EAAkCC,QAAlC;AACAL,wBAAY5vC,MAAZ,CAAmB6vC,WAAnB;AACD;AACD12C,YAAE,MAAM,KAAKoE,SAAb,EAAwByC,MAAxB,CAA+B0vC,cAA/B,EAA+CE,WAA/C;AACD,SArCD,MAsCK;AACH,cAAIM,YAAY/2C,EAAE,KAAF,EAASoW,IAAT,CAAc,mBAAd,CAAhB;AACApW,YAAE,MAAM,KAAKoE,SAAb,EAAwByC,MAAxB,CAA+BkwC,SAA/B;AACD;AACF;AACF;AACF,GA5DD;;AA8DAv2C,aAAWsE,SAAX,CAAqBwxC,SAArB,GAAiC,UAASnyC,YAAT,EAAuB;;AAEtD;;AAEA,QAAIuJ,WAAJ,EAAiBtC,QAAjB,EAA2BgS,OAA3B,EAAoC45B,OAApC,EAA6Cj5B,CAA7C,EAAgD5X,CAAhD,EAAmDoN,CAAnD;;AAEA;AACA,QAAI0jC,cAAc9yC,aAAa4C,KAAb,CAAmB,GAAnB,CAAlB;AACA,QAAI,KAAKqE,QAAL,CAAcjK,MAAd,GAAuB,CAA3B,EAA8B;AAC5BuM,oBAAc,KAAKtC,QAAL,CAAc,CAAd,EAAiBuC,QAA/B,CAD4B,CACa;AACzCvC,iBAAW,KAAKA,QAAL,CAAc,CAAd,EAAiBsR,IAA5B;AACA,UAAItR,SAASjK,MAAT,GAAkB,CAAtB,EAAyB;AACvB,YAAIic,UAAU,EAAd;AACAW,YAAI,CAAJ;AACA,aAAK5X,CAAL,IAAUiF,QAAV,EAAoB;AAClB,cAAIpL,EAAEghB,OAAF,CAAU5V,SAASjF,CAAT,EAAYga,UAAZ,CAAuBQ,QAAvB,CAAgC,CAAhC,EAAmC,MAAnC,CAAV,EAAsD,CAAC,QAAD,EAAU,GAAV,EAAc,GAAd,EAAkB,GAAlB,EAAsB,GAAtB,EAA0B,GAA1B,CAAtD,MAA0F,CAAC,CAA/F,EAAkG;AAChGq2B,sBAAU,KAAKvtB,oBAAL,CAA0Bre,SAASjF,CAAT,CAA1B,CAAV;AACA,iBAAKoN,CAAL,IAAU0jC,WAAV,EAAuB;AACrB,kBAAID,QAAQnxC,OAAR,CAAgBoxC,YAAY1jC,CAAZ,CAAhB,MAAoC,CAAC,CAAzC,EAA4C;AAC1C6J,wBAAQW,CAAR,IAAa,EAAb;AACAX,wBAAQW,CAAR,EAAW,OAAX,IAAsB3S,SAASjF,CAAT,EAAYka,KAAlC;AACAjD,wBAAQW,CAAR,EAAW,SAAX,IAAwB,KAAKm5B,mBAAL,CAAyBD,WAAzB,EAAqC1jC,CAArC,EAAuCyjC,OAAvC,CAAxB;AACAj5B;AACA;AACD;AACF;AACF;AACF;AACF;AACF;;AAED,WAAOX,OAAP;AACD,GAhCD;;AAkCA5c,aAAWsE,SAAX,CAAqBoyC,mBAArB,GAA2C,UAASD,WAAT,EAAsB72C,KAAtB,EAA6B+2C,YAA7B,EAA2C;;AAEpF;AACA;AACA;;AAEA,QAAIhxC,CAAJ,EAAOixC,UAAP,EAAmBC,SAAnB,EAA8BC,UAA9B,EAA0CC,IAA1C,EAAgDC,IAAhD,EAAsDC,IAAtD;;AAEA,SAAKtxC,IAAE/F,KAAP,EAAc+F,IAAE8wC,YAAY91C,MAA5B,EAAoCgF,GAApC,EAAyC;;AAEvCixC,mBAAaH,YAAY9wC,CAAZ,CAAb;AACAkxC,kBAAYF,aAAatxC,OAAb,CAAqBuxC,UAArB,CAAZ;AACA,UAAIC,cAAc,CAAC,CAAnB,EAAsB;AACpBC,qBAAaF,WAAWj2C,MAAxB;AACA,YAAIm2C,aAAa,CAAjB,EAAoB;AAClBC,iBAAOJ,aAAapxC,SAAb,CAAuB,CAAvB,EAA0BsxC,SAA1B,CAAP;AACAG,iBAAO,oCAAoCJ,UAApC,GAAiD,SAAxD;AACAK,iBAAON,aAAapxC,SAAb,CAAuBsxC,YAAUC,UAAjC,CAAP;AACAH,yBAAeI,OAAOC,IAAP,GAAcC,IAA7B;AACD,SALD,MAMK;AACHF,iBAAO,oCAAoCH,UAApC,GAAiD,SAAxD;AACAI,iBAAOL,aAAapxC,SAAb,CAAuBsxC,YAAUC,UAAjC,CAAP;AACAH,yBAAeI,OAAOC,IAAtB;AACD;AACF;AACF;AACD,WAAOL,YAAP;AACD,GA5BD;;AA8BA32C,aAAWsE,SAAX,CAAqB8xC,aAArB,GAAqC,UAASc,YAAT,EAAuB;;AAE1D;AACA;AACA;;AAEA;AACA,QAAIA,eAAe74B,KAAK+e,KAAL,CAAW8Z,YAAX,CAAnB;;AAEA,QAAI11B,QAAQpY,SAAU8tC,eAAe,IAAzB,EAAgC,EAAhC,IAAsC,EAAlD;AACA,QAAIz1B,UAAUrY,SAAU8tC,eAAe,EAAzB,EAA8B,EAA9B,IAAoC,EAAlD;AACA,QAAIx1B,UAAUw1B,eAAe,EAA7B;AACA,QAAIx/B,QAAQ,EAAZ;AACA,QAAI5T,QAAQ,EAAZ;AACA,QAAI0d,QAAQ,CAAZ,EAAe;AACb9J,eAAS8J,QAAQ,GAAjB;AACA1d,cAAQ0d,KAAR,GAAgB,SAAhB;AACD;AACD,QAAIC,UAAU,EAAd,EAAkB;AAChB/J,eAAS,MAAM+J,OAAN,GAAgB,GAAzB;AACA,UAAIA,UAAU,CAAd,EAAiB;AACf3d,iBAAS2d,UAAU,WAAnB;AACD;AACF,KALD,MAMK;AACH/J,eAAS+J,UAAU,GAAnB;AACA3d,eAAS2d,UAAU,WAAnB;AACD;AACD,QAAIC,UAAU,EAAd,EAAkB;AAChBhK,eAAS,MAAMgK,OAAf;AACA,UAAIA,UAAU,CAAd,EAAiB;AACf5d,iBAAS4d,UAAU,WAAnB;AACD;AACF,KALD,MAMK;AACHhK,eAASgK,OAAT;AACA5d,eAAS4d,UAAU,WAAnB;AACD;AACD,QAAIH,OAAO,EAAX;AACAA,SAAK,OAAL,IAAgB7J,KAAhB;AACA6J,SAAK,OAAL,IAAgBzd,KAAhB;AACA,WAAOyd,IAAP;AACD,GA1CD;AA2CD,CA1KD,EA0KG3c,MA1KH;;AA4KA,CAAC,UAAUpF,CAAV,EAAa;AACZ;AACAQ,aAAWsE,SAAX,CAAqB6yC,iBAArB,GAAyC,YAAY;;AAEnD,QAAIhS,cAAc,KAAKnC,UAAL,EAAlB;AACA,QAAI,KAAK7P,WAAL,IAAqB,OAAO,KAAKmQ,QAAZ,KAAyB,WAAlD,EAAgE;AAC9D,UAAI,KAAKA,QAAL,KAAkB6B,WAAtB,EAAmC;AACjC;AACA,YAAI,KAAKtgC,OAAT,EAAkB;AAChB;AACA,eAAKwyB,SAAL;AACA;AACA,eAAKlE,WAAL,GAAmB,KAAnB;AACA,eAAKmQ,QAAL,GAAgB,IAAhB;AACD;AACF;AACF,KAXD,MAYK,IAAI,KAAKn7B,cAAT,EAAyB;AAC5B;AACA,UAAI,KAAKuJ,aAAL,KAAuB,CAA3B,EAA8B;AAC5B,aAAKwhC,mBAAL,CAAyB/N,WAAzB;AACD;AACD,WAAK95B,aAAL;AACA,WAAK03B,eAAL,CAAqBoC,WAArB;AACA,WAAKqM,aAAL,CAAmBrM,WAAnB;AACA,WAAK6M,UAAL;AACA,WAAK1lC,eAAL;AACD,KAVI,MAWA,IAAI,KAAKsrB,OAAT,EAAkB;AACrB,UAAI,KAAK32B,SAAL,KAAmBkkC,WAAvB,EAAoC;AAClC;AACA,aAAKvN,OAAL,GAAe,KAAf;AACA,YAAI,KAAK72B,QAAL,IAAiB,KAAK8D,OAA1B,EAAmC;AACjC,eAAKwyB,SAAL;AACD;AACF;AACF,KARI,MASA;AAAE;AACL,UAAI,KAAKt2B,QAAT,EAAmB;AACjB,aAAKs2B,SAAL;AACD;AACF;AACF,GAxCD;;AA0CAr3B,aAAWsE,SAAX,CAAqB8yC,YAArB,GAAoC,YAAY;AAC9C;AACD,GAFD;;AAIAp3C,aAAWsE,SAAX,CAAqB+yC,eAArB,GAAuC,YAAY;AACjD;AACA,QAAI,KAAKxtC,WAAT,EAAsB;AACpB,UAAI,KAAKE,aAAL,KAAwB,KAAKD,SAAL,CAAenJ,MAAf,GAAwB,CAApD,EAAwD;AACtD;AACA,YAAI,KAAKK,IAAT,EAAe;AACb,eAAK+I,aAAL,GAAqB,CAArB;AACA,eAAK+b,UAAL,CAAgB,CAAhB;AACD;AACF,OAND,MAOK;AACH;AACA,aAAK/b,aAAL;AACA,aAAK+b,UAAL,CAAgB,KAAK/b,aAArB;AACD;AACF;AACD,SAAKuC,eAAL;AACD,GAjBD;;AAmBAtM,aAAWsE,SAAX,CAAqBgzC,oBAArB,GAA4C,YAAY;;AAEtD,QAAI,KAAKnkB,WAAL,KAAqB,IAAzB,EAA+B;AAC7B;AACA,UAAI,KAAKmQ,QAAL,GAAgB,CAApB,EAAuB;AACrB;AACA;AACA,aAAKla,MAAL,CAAY,KAAKka,QAAjB;AACD,OAJD,MAKK;AACH,YAAI,KAAKz+B,OAAT,EAAkB;AAChB;AACA,cAAI,KAAKL,MAAL,KAAgB,IAApB,EAA0B;AACxB,gBAAIA,SAAS,KAAKgK,QAAlB;AACA;AACA;AACA8a,uBAAW,YAAY;AACrB9kB,qBAAO6T,IAAP,CAAY,IAAZ;AACD,aAFD,EAEG,GAFH;AAGD,WAPD,MAQK;AACH,iBAAKgf,SAAL;AACD;AACF;AACD,aAAKlE,WAAL,GAAmB,KAAnB,CAfG,CAeuB;AAC1B,aAAK7mB,eAAL;AACD;AACF;AACF,GA5BD;;AA8BA;;AAEAtM,aAAWsE,SAAX,CAAqBizC,cAArB,GAAsC,YAAY;AAChD,QAAI,KAAKpP,YAAL,EAAJ,EAAyB;;AAEvB,UAAIqP,QAAJ,EAAchL,SAAd;;AAEAgL,iBAAWh4C,EAAES,MAAF,EAAU4O,KAAV,EAAX;;AAEA;AACA;AACA;AACA,UAAI,KAAKS,WAAL,CAAiB,SAAjB,KAA+B,KAAKA,WAAL,CAAiB,SAAjB,CAA/B,IAA8D,KAAKA,WAAL,CAAiB,MAAjB,CAAlE,EAA4F;AAC1Fk9B,oBAAYvsC,OAAOw3C,WAAP,GAAqB,KAAKx0B,UAAL,CAAgB6mB,WAAhB,EAArB,GAAqD,EAAjE;AACD,OAFD,MAGK,IAAI7pC,OAAO6pC,WAAP,IAAsB7pC,OAAOw3C,WAAjC,EAA8C;AACjD;AACAjL,oBAAYvsC,OAAOw3C,WAAP,GAAqB,KAAKx0B,UAAL,CAAgB6mB,WAAhB,EAAjC;AACD,OAHI,MAIA;AACH;AACA;AACA;AACA0C,oBAAYvsC,OAAO6pC,WAAnB;AACD;AACD,UAAI,CAAC,KAAKxuB,QAAL,CAAc/S,EAAd,CAAiB,SAAjB,CAAL,EAAkC;AAChCikC,qBAAa,KAAKlxB,QAAL,CAActM,MAAd,EAAb;AACD;AACD,WAAKyhC,gBAAL,CAAsB,SAAtB;AACD,KA1BD,MA2BK;AAAE;AACL+G,iBAAW,KAAK11B,YAAL,CAAkBjT,KAAlB,EAAX;AACA29B,kBAAY,KAAK1qB,YAAL,CAAkB9S,MAAlB,EAAZ;AACA,WAAKyhC,gBAAL,GAHG,CAGsB;AAC1B;AACD,SAAK1E,YAAL,CAAkByL,QAAlB,EAA4BhL,SAA5B;AACD,GAlCD;;AAoCAxsC,aAAWsE,SAAX,CAAqBozC,mBAArB,GAA2C,YAAY;AACrD,QAAI1zC,UAAU,IAAd;;AAEA;AACA,SAAKkpB,OAAL,CAAaqN,OAAb,CAAqBhU,EAArB,CAAwB,eAAxB,EAAyC,UAAUpM,KAAV,EAAiB;AACxDnW,cAAQ2zC,oBAAR,GAA+B3zC,QAAQmiC,QAAR,EAA/B;AACAniC,cAAQggC,UAAR;AACD,KAHD,EAGGzd,EAHH,CAGM,UAHN,EAGkB,UAAUpM,KAAV,EAAiBnJ,QAAjB,EAA2B;AAC3C;AACAhN,cAAQkvC,mBAAR,CAA4BliC,QAA5B;AACAhN,cAAQqH,aAAR,CAAsB2F,QAAtB;AACAhN,cAAQ++B,eAAR,CAAwB/xB,QAAxB;AACAhN,cAAQwtC,aAAR,CAAsBxtC,QAAQ8tC,6BAAR,CAAsC9gC,QAAtC,CAAtB;AACAhN,cAAQguC,UAAR,CAAmBhhC,QAAnB;AACAhN,cAAQsI,eAAR;AACD,KAXD,EAWGia,EAXH,CAWM,cAXN,EAWsB,UAAUpM,KAAV,EAAiBnJ,QAAjB,EAA2B;AAC/C,UAAIhN,QAAQ2I,eAAZ,EAA6B;AAC3B3I,gBAAQolB,MAAR,CAAeplB,QAAQ8tC,6BAAR,CAAsC9gC,QAAtC,CAAf;AACD,OAFD,MAGK;AACHhN,gBAAQolB,MAAR,CAAepY,QAAf;AACD;AACD,UAAI,CAAChN,QAAQ2zC,oBAAb,EAAmC;AACjCruB,mBAAW,YAAY;AACrBtlB,kBAAQqzB,SAAR;AACD,SAFD,EAEG,GAFH;AAGD;AACF,KAvBD;AAwBD,GA5BD;;AA8BAr3B,aAAWsE,SAAX,CAAqBszC,mBAArB,GAA2C,UAAUxM,EAAV,EAAc;AACvD;AACA,QAAIyM,cAAcr4C,EAAE4rC,EAAF,EAAMtqC,IAAN,CAAW,OAAX,EAAoByF,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,EAAkCuxC,MAAlC,CAAyC,EAAzC,CAAlB;AACA,QAAID,gBAAgB,MAApB,EAA4B;AAC1B,WAAK70B,UAAL;AACD,KAFD,MAGK,IAAI60B,gBAAgB,SAApB,EAA+B;AAClC,WAAK3O,aAAL;AACD,KAFI,MAGA,IAAI2O,gBAAgB,QAApB,EAA8B;AACjC,WAAK1O,YAAL;AACD,KAFI,MAGA,IAAI0O,gBAAgB,SAApB,EAA+B;AAClC,WAAKxO,iBAAL;AACD,KAFI,MAGA,IAAIwO,gBAAgB,MAApB,EAA4B;AAC/B,WAAKtX,UAAL;AACD,KAFI,MAGA,IAAIsX,gBAAgB,QAApB,EAA8B;AACjC,WAAK1Y,YAAL;AACD,KAFI,MAGA,IAAI0Y,gBAAgB,QAApB,EAA8B;AACjC,WAAKvO,kBAAL;AACD,KAFI,MAGA,IAAIuO,gBAAgB,QAApB,EAA8B;AACjC,WAAKrO,kBAAL;AACD,KAFI,MAGA,IAAIqO,gBAAgB,UAApB,EAAgC;AACnC,WAAKjO,mBAAL;AACD,KAFI,MAGA,IAAIiO,gBAAgB,UAApB,EAAgC;AACnC,WAAK9N,cAAL;AACD,KAFI,MAGA,IAAI8N,gBAAgB,cAApB,EAAoC;AACvC,WAAK7N,uBAAL;AACD,KAFI,MAGA,IAAI6N,gBAAgB,MAApB,EAA4B;AAC/B,WAAKnN,gBAAL;AACD,KAFI,MAGA,IAAImN,gBAAgB,aAApB,EAAmC;AACtC,WAAK5N,gBAAL;AACD,KAFI,MAGA,IAAI4N,gBAAgB,MAApB,EAA4B;AAC/B,WAAKvN,eAAL;AACD,KAFI,MAGA,IAAIuN,gBAAgB,YAApB,EAAkC;AACrC,WAAKrN,sBAAL;AACD,KAFI,MAGA,IAAIqN,gBAAgB,YAApB,EAAkC;AACrC,WAAK1L,sBAAL;AACD;AACF,GAnDD;;AAqDAnsC,aAAWsE,SAAX,CAAqByzC,kBAArB,GAA0C,YAAY;;AAEpD;AACA;AACA,QAAItQ,gBAAgBjoC,EAAEC,SAASgoC,aAAX,EAA0BntB,IAA1B,CAA+B,SAA/B,CAApB;AACA,QAAImtB,kBAAkB,OAAtB,EAA+B;AAC7B,aAAO,KAAP;AACD,KAFD,MAGK;AACH,aAAO,IAAP;AACD;AACF,GAXD;;AAaAznC,aAAWsE,SAAX,CAAqB7D,gBAArB,GAAwC,UAAUH,CAAV,EAAa;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAI,CAAC,KAAKy3C,kBAAL,EAAL,EAAgC;AAC9B,aAAO,KAAP;AACD;AACD;AACA,QAAI39B,QAAQ9Z,EAAE8Z,KAAd;;AAEA,QAAIA,SAAS,EAAT,IAAeA,SAAS,EAA5B,EAAgC;AAC9BA,eAAS,EAAT;AACD;AACD,QAAIA,UAAU,EAAd,EAAkB;AAChB,WAAKwM,WAAL;AACD,KAFD,MAGK,IAAIxM,UAAU,EAAd,EAAkB;AAAE;AACvB,UAAI,CAAE5a,EAAE,yBAAF,EAA6B+I,EAA7B,CAAgC,QAAhC,CAAN,EAAkD;AAChD;AACA;AACA,aAAKya,UAAL;AACD;AACF,KANI,MAOA,IAAI5I,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK0iB,UAAL;AACD;AACF,KAJI,MAKA,IAAI5I,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK4oC,aAAL;AACD;AACF,KAJI,MAKA,IAAI9uB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAKigC,UAAL;AACD;AACF,KAJI,MAKA,IAAInmB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK6+B,YAAL;AACD;AACF,KAJI,MAKA,IAAI/kB,SAAS,EAAT,IAAeA,SAAS,EAA5B,EAAgC;AAAE;AACrC,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK6+B,YAAL,CAAkB/kB,KAAlB;AACD;AACF,KAJI,MAKA,IAAIA,UAAU,EAAd,EAAkB;AAAE;AACvB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAKspC,mBAAL;AACD;AACF,KAJI,MAKA,IAAIxvB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK0pC,uBAAL;AACD;AACF,KAJI,MAKA,IAAI5vB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK+oC,iBAAL;AACD;AACF,KAJI,MAKA,IAAIjvB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK6oC,YAAL;AACD;AACF,KAJI,MAKA,IAAI/uB,UAAU,GAAd,EAAmB;AAAE;AACxB,UAAI,KAAKsB,iBAAL,CAAuBpb,CAAvB,CAAJ,EAA+B;AAC7B,aAAK2pC,gBAAL;AACD;AACF,KAJI,MAKA,IAAI7vB,UAAU,EAAd,EAAkB;AAAE;AACvB,UAAI49B,cAAcx4C,EAAEC,SAASgoC,aAAX,CAAlB;AACA,UAAIuQ,YAAY19B,IAAZ,CAAiB,SAAjB,MAAgC,MAApC,EAA4C;AAC1C;AACA;AACA09B,oBAAYp+B,KAAZ;AACD,OAJD,MAKK,IAAIo+B,YAAY19B,IAAZ,CAAiB,SAAjB,MAAgC,IAApC,EAA0C;AAC7C09B,oBAAYp+B,KAAZ;AACD;AACF;AACF,GAxFD;;AA0FA5Z,aAAWsE,SAAX,CAAqB2zC,sBAArB,GAA8C,YAAY;AACxD,QAAIj0C,UAAU,IAAd;;AAEA;AACA;AACA,SAAKqE,MAAL,CACGke,EADH,CACM,SADN,EACgB,YAAW;AACvB;AACD,KAHH,EAIGA,EAJH,CAIM,gBAJN,EAIuB,YAAW;AAC9BviB,cAAQszC,oBAAR;AACD,KANH,EAOG/wB,EAPH,CAOM,SAPN,EAOgB,YAAW;AACvB;AACA;AACA;AACD,KAXH,EAYGA,EAZH,CAYM,gBAZN,EAYuB,YAAW;AAC9B,UAAIviB,QAAQ/C,SAAR,IAAqB,CAAC+C,QAAQmE,cAAlC,EAAkD;AAChD,YAAInE,QAAQ4zB,OAAZ,EAAqB;AACnB;AACA;AACA5zB,kBAAQ4zB,OAAR,GAAkB,KAAlB;AACD,SAJD,MAKK;AACH;AACA5zB,kBAAQolB,MAAR,CAAeplB,QAAQ/C,SAAvB;AACD;AACF;AACF,KAxBH,EAyBGslB,EAzBH,CAyBM,SAzBN,EAyBgB,YAAW;AACvBviB,cAAQa,OAAR,GAAkB,IAAlB;AACAb,cAAQsI,eAAR;AACD,KA5BH,EA6BGia,EA7BH,CA6BM,OA7BN,EA6Bc,YAAW;AACrBviB,cAAQqzC,eAAR;AACD,KA/BH,EAgCG9wB,EAhCH,CAgCM,UAhCN,EAgCkB,YAAW;AACzBviB,cAAQsI,eAAR;AACD,KAlCH,EAmCGia,EAnCH,CAmCM,SAnCN,EAmCgB,YAAW;AACvBviB,cAAQsI,eAAR;AACD,KArCH,EAsCGia,EAtCH,CAsCM,gBAtCN,EAsCuB,YAAW;AAC9B;AACAviB,cAAQsI,eAAR;AACD,KAzCH,EA0CGia,EA1CH,CA0CM,YA1CN,EA0CmB,YAAW;AAC1BviB,cAAQmzC,iBAAR;AACD,KA5CH,EA6CG5wB,EA7CH,CA6CM,MA7CN,EA6Ca,YAAW;AACpB,UAAIviB,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,kBAAZ;AACD;AACF,KAjDH,EAkDG4c,EAlDH,CAkDM,OAlDN,EAkDc,YAAW;AACrBviB,cAAQozC,YAAR;AACD,KApDH,EAqDG7wB,EArDH,CAqDM,YArDN,EAqDmB,YAAW;AAC1B;AACD,KAvDH,EAwDGA,EAxDH,CAwDM,cAxDN,EAwDqB,YAAW;AAC5BviB,cAAQzC,MAAR,GAAiByC,QAAQq8B,SAAR,EAAjB;AACA,UAAIr8B,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,4BAA4B3F,QAAQzC,MAApC,GAA6C,IAA7C,GAAoDyC,QAAQ2mB,YAA5D,GAA2E,GAAvF;AACD;AACF,KA7DH,EA8DGpE,EA9DH,CA8DM,OA9DN,EA8Dc,YAAW;AACrB,UAAIviB,QAAQ9C,KAAZ,EAAmB;AACjB,gBAAQ8C,QAAQtD,KAAR,CAAcqI,KAAd,CAAoBmvC,IAA5B;AACE,eAAK,CAAL;AACEhwC,oBAAQyB,GAAR,CAAY,sCAAZ;AACA;AACF,eAAK,CAAL;AACEzB,oBAAQyB,GAAR,CAAY,uCAAZ;AACA;AACF,eAAK,CAAL;AACEzB,oBAAQyB,GAAR,CAAY,sCAAZ;AACA;AACF,eAAK,CAAL;AACEzB,oBAAQyB,GAAR,CAAY,iDAAZ;AACA;AAZJ;AAcD;AACF,KA/EH;AAgFD,GArFD;;AAuFA3J,aAAWsE,SAAX,CAAqB6zC,mBAArB,GAA2C,YAAY;AACrD,QAAIn0C,UAAU,IAAd;AACA;AACA,SAAKwK,QAAL,CACG4pC,MADH,CACU,YAAW;AACjBp0C,cAAQmzC,iBAAR;AACD,KAHH,EAIGkB,UAJH,CAIc,YAAW;AACrBr0C,cAAQqzC,eAAR;AACD,KANH,EAOGjgB,OAPH,CAOW,YAAW;AAClB,UAAIpzB,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,+BAAZ;AACD;AACD;AACA;AACAnK,QAAE,MAAMwE,QAAQ8J,IAAhB,EAAsB0N,UAAtB,CAAiC,UAAjC;;AAEA;AACAxX,cAAQgqC,gBAAR,GAA2BxuC,EAAE,MAAMwE,QAAQ2E,OAAd,GAAwB,mBAA1B,CAA3B;AACA3E,cAAQs0C,oBAAR,GAA+Bt0C,QAAQgqC,gBAAR,CAAyBn/B,KAAzB,EAA/B;AACA7K,cAAQu0C,qBAAR,GAAgCv0C,QAAQgqC,gBAAR,CAAyBh/B,MAAzB,EAAhC;AACAhL,cAAQ+pC,aAAR,GAAwB/pC,QAAQs0C,oBAAR,GAA+Bt0C,QAAQu0C,qBAA/D;;AAEA,UAAIv0C,QAAQ/C,SAAR,GAAoB,CAApB,IAAyB,CAAC+C,QAAQmE,cAAtC,EAAsD;AACpDnE,gBAAQolB,MAAR,CAAeplB,QAAQ/C,SAAvB;AACA+C,gBAAQmE,cAAR,GAAyB,IAAzB;AACD;AACDnE,cAAQsI,eAAR;AACD,KA1BH,EA2BGksC,MA3BH,CA2BU,UAASr+B,KAAT,EAAgB;AACtB;AACA;AACA,UAAInW,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,gBAAgBwQ,MAAMnJ,QAAtB,GAAiC,YAAjC,GAAgDmJ,MAAM4K,MAAlE;AACD;;AAED,UAAI/gB,QAAQohC,WAAZ,EAAyB;AACvB;AACAphC,gBAAQohC,WAAR,GAAsB,KAAtB;AACAphC,gBAAQqzB,SAAR;AACD;;AAED/N,iBAAW,YAAY;AACrBtlB,gBAAQsI,eAAR;AACD,OAFD,EAEG,GAFH;AAGD,KA3CH,EA4CGmsC,MA5CH,CA4CU,YAAW;AACjB,UAAIz0C,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,8BAAZ;AACD;AACD3F,cAAQsI,eAAR;AACD,KAjDH,EAkDGosC,OAlDH,CAkDW,YAAW;AAClB10C,cAAQozC,YAAR;AACD,KApDH,EAqDGuB,QArDH,CAqDY,YAAW;AACnB,UAAI30C,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,gCAAZ;AACD;AACD3F,cAAQsI,eAAR;AACD,KA1DH,EA2DGssC,cA3DH,CA2DkB,YAAW;AACzB50C,cAAQsI,eAAR;AACD,KA7DH,EA8DGusC,MA9DH,CA8DU,UAASv4C,CAAT,EAAY;AAClB,UAAI0D,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,8BAAZ;AACD;AACD3F,cAAQsI,eAAR;AACD,KAnEH,EAoEGwsC,MApEH,CAoEU,YAAW;AACjB,UAAI90C,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,8BAAZ;AACD;AACF,KAxEH,EAyEGovC,UAzEH,CAyEc,YAAW;AACrB,UAAI/0C,QAAQ9C,KAAZ,EAAmB;AACjBgH,gBAAQyB,GAAR,CAAY,kCAAZ;AACD;;AAED;AACA3F,cAAQszC,oBAAR;AACD,KAhFH;AAiFD,GApFD;;AAsFAt3C,aAAWsE,SAAX,CAAqB2H,iBAArB,GAAyC,YAAY;AACnD,QAAIjI,OAAJ,EAAa6zC,WAAb,EAA0BG,WAA1B;;AAEA;AACAh0C,cAAU,IAAV;;AAEA;AACAxE,MAAES,MAAF,EAAUguC,MAAV,CAAiB,YAAY;AAC3BjqC,cAAQuzC,cAAR;AACD,KAFD;;AAIA;AACA;AACA;AACA;AACA,QAAIyB,SAAS,KAAKn3B,QAAL,CAAc,CAAd,CAAb;AACA,QAAI4N,WAAW,IAAIE,gBAAJ,CAAqB,UAASspB,SAAT,EAAoB;AACtDA,gBAAUC,OAAV,CAAkB,UAASC,QAAT,EAAmB;AACnC,YAAIA,SAAS5hC,IAAT,KAAkB,YAAlB,IAAkC4hC,SAASC,aAAT,KAA2B,OAAjE,EAA0E;AACxE;AACA,cAAIp1C,QAAQ6d,QAAR,CAAiBtZ,EAAjB,CAAoB,UAApB,CAAJ,EAAqC;AACnCvE,oBAAQsI,eAAR;AACD;AACF;AACF,OAPD;AAQD,KATc,CAAf;AAUA,QAAI+sC,SAAS,EAAErpB,YAAY,IAAd,EAAoBF,WAAW,IAA/B,EAAqCwpB,eAAe,IAApD,EAAb;AACA7pB,aAASG,OAAT,CAAiBopB,MAAjB,EAAyBK,MAAzB;;AAEA,SAAK3B,mBAAL;;AAEA;AACA,SAAKv0B,cAAL,CAAoBrhB,IAApB,CAAyB,QAAzB,EAAmCykB,EAAnC,CAAsC,OAAtC,EAA8C,YAAU;AACtDviB,cAAQ4zC,mBAAR,CAA4B,IAA5B;AACD,KAFD;;AAIA;AACA;AACA,SAAK/1B,QAAL,CAAcxhB,OAAd,CAAsB,UAAUC,CAAV,EAAa;AACjC,UAAIN,WAAWO,SAAX,GAAuB,CAA3B,EAA8B;AAC5ByD,gBAAQvD,gBAAR,CAAyBH,CAAzB;AACD;AACF,KAJD;;AAMA;AACA;AACA,QAAI,KAAKyQ,eAAT,EAA0B;AACxB,WAAKA,eAAL,CAAqB1Q,OAArB,CAA6B,UAAUC,CAAV,EAAa;AACxC,YAAIN,WAAWO,SAAX,GAAuB,CAA3B,EAA8B;AAC5ByD,kBAAQvD,gBAAR,CAAyBH,CAAzB;AACD;AACF,OAJD;AAKD;;AAED;AACA,QAAI,KAAKwJ,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAe8P,KAAf,CAAqB,YAAW;AAC9B5V,gBAAQ+F,aAAR,GAAwBvK,EAAE,IAAF,EAAQI,KAAR,EAAxB;AACAoE,gBAAQ8hB,UAAR,CAAmB9hB,QAAQ+F,aAA3B;AACD,OAHD;AAID;;AAED;AACA,SAAK1B,MAAL,CAAYuR,KAAZ,CAAkB,YAAY;AAC5B5V,cAAQgf,UAAR;AACD,KAFD;;AAIA;AACA,QAAI,KAAKxe,MAAL,KAAgB,OAApB,EAA6B;AAC3B,WAAKyzC,sBAAL;AACD,KAFD,MAGK,IAAI,KAAKzzC,MAAL,KAAgB,IAApB,EAA0B;AAC7B,WAAK2zC,mBAAL;AACD,KAFI,MAGA,IAAI,KAAK3zC,MAAL,KAAgB,SAApB,EAA+B;AAClC;AACA+0C,kBAAY,YAAY;AACtBv1C,gBAAQmzC,iBAAR;AACD,OAFD,EAEG,GAFH;AAGD;AACF,GAhFD;AAiFD,CA/jBD,EA+jBGvyC,MA/jBH;;AAikBA,CAAC,UAAUpF,CAAV,EAAa;;AAEZQ,aAAWsE,SAAX,CAAqBuuC,YAArB,GAAoC,UAAWz4B,KAAX,EAAmB;;AAErD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,QAAIpW,OAAJ,EAAa2M,OAAb,EAAsB6oC,QAAtB,EAAgCC,UAAhC,EAA4CC,aAA5C,EAA2DC,YAA3D;;AAEA31C,cAAU,IAAV;;AAEA,QAAIoW,UAAU,YAAd,EAA4B;AAC1BzJ,gBAAU,KAAKI,eAAf;AACA0oC,mBAAa,mBAAb;AACAD,iBAAW,KAAKnM,kBAAhB;AACD,KAJD,MAKK,IAAIjzB,UAAU,MAAd,EAAsB;AACzBzJ,gBAAU,KAAKQ,WAAf;AACAsoC,mBAAa,aAAb;AACAD,iBAAW,KAAKI,YAAhB;AACD;;AAED;AACAJ,aAAS/jC,QAAT,CAAkB,gBAAlB;;AAEA;AACAikC,oBAAgBl6C,EAAE,OAAF,EAAU;AACxB,eAAS;AADe,KAAV,CAAhB;AAGA;AACAm6C,mBAAevwC,SAASuH,QAAQrK,GAAR,CAAY,SAAZ,CAAT,IAAmC,GAAlD;AACAozC,kBAAcpzC,GAAd,CAAkB,SAAlB,EAA4BqzC,YAA5B;AACAhpC,YAAQtK,MAAR,CAAeqzC,aAAf;;AAEA;AACA;AACAF,aAASjzB,EAAT,CAAY,WAAZ,EAAyB,UAASpM,KAAT,EAAgB;AACvCA,YAAM2nB,eAAN;AACA,UAAI,CAAC99B,QAAQ61C,yBAAb,EAAwC;AACtC71C,gBAAQ61C,yBAAR,GAAoC,IAApC;AACA71C,gBAAQ81C,WAAR,GAAsB3/B,MAAMihB,KAA5B;AACAp3B,gBAAQ+1C,WAAR,GAAsB5/B,MAAMuhB,KAA5B;AACA13B,gBAAQg2C,UAAR,GAAqB,OAArB;AACAh2C,gBAAQi2C,SAAR,CAAkB7/B,KAAlB,EAAyBzJ,OAAzB;AACD;AACD,aAAO,KAAP;AACD,KAVD;AAWA6oC,aAASjzB,EAAT,CAAY,SAAZ,EAAuB,UAASpM,KAAT,EAAgB;AACrCA,YAAM2nB,eAAN;AACA,UAAI99B,QAAQk2C,QAAR,IAAoBl2C,QAAQg2C,UAAR,KAAuB,OAA/C,EAAwD;AACtDh2C,gBAAQm2C,OAAR,CAAgB//B,KAAhB;AACD;AACD,aAAO,KAAP;AACD,KAND;;AAQA;AACAs/B,kBAAcnzB,EAAd,CAAiB,WAAjB,EAA8B,UAASpM,KAAT,EAAgB;AAC5CA,YAAM2nB,eAAN;AACA,UAAI,CAAC99B,QAAQ61C,yBAAb,EAAwC;AACtC71C,gBAAQ61C,yBAAR,GAAoC,IAApC;AACA71C,gBAAQ81C,WAAR,GAAsB3/B,MAAMihB,KAA5B;AACAp3B,gBAAQ+1C,WAAR,GAAsB5/B,MAAMuhB,KAA5B;AACA13B,gBAAQo2C,WAAR,CAAoBhgC,KAApB,EAA2BzJ,OAA3B;AACA,eAAO,KAAP;AACD;AACF,KATD;AAUA+oC,kBAAcnzB,EAAd,CAAiB,SAAjB,EAA4B,UAASpM,KAAT,EAAgB;AAC1CA,YAAM2nB,eAAN;AACA,UAAI99B,QAAQq2C,QAAZ,EAAsB;AACpBr2C,gBAAQs2C,SAAR,CAAkBlgC,KAAlB;AACD;AACD,aAAO,KAAP;AACD,KAND;;AAQA;AACAzJ,YAAQ4V,EAAR,CAAW,OAAX,EAAoB,YAAW;AAC7B,UAAI,CAACviB,QAAQ61C,yBAAT,IAAsC,CAAC71C,QAAQu2C,aAAnD,EAAkE;AAChEv2C,gBAAQmgB,YAAR,CAAqB/J,KAArB;AACD;AACDpW,cAAQu2C,aAAR,GAAwB,KAAxB;AACD,KALD;;AAOA,SAAKC,aAAL,CAAmBpgC,KAAnB,EAAyBzJ,OAAzB,EAAiC8oC,UAAjC;AACD,GAzFD;;AA2FAz5C,aAAWsE,SAAX,CAAqBk2C,aAArB,GAAqC,UAASpgC,KAAT,EAAgBzJ,OAAhB,EAAyB8oC,UAAzB,EAAqC;;AAGxE,QAAIz1C,OAAJ,EAAay2C,YAAb,EAA2BC,UAA3B,EAAuCC,WAAvC,EAAoD9uB,YAApD,EAAkE+uB,UAAlE,EACEC,YADF,EACgBrvB,SADhB,EAC2BmhB,QAD3B,EACqC3mB,MADrC,EAEE+C,KAFF,EAES/X,QAFT,EAEmB0c,YAFnB,EAEiCC,WAFjC,EAE8CjC,QAF9C,EAEwDD,QAFxD,EAEkEsC,YAFlE,EAEgFG,OAFhF,EAGE4sB,WAHF,EAGe9yB,SAHf,EAG0B1T,OAH1B,EAGmC3O,CAHnC,EAGsCo1C,WAHtC,EAGmD/lB,MAHnD,EAIE/M,OAJF,EAIW+yB,YAJX,EAIyBC,WAJzB;;AAMAj3C,cAAU,IAAV;;AAEA;AACA;AACA;AACA,SAAK61C,yBAAL,GAAiC,KAAjC;;AAEA;AACA;AACA,SAAKU,aAAL,GAAqB,KAArB;;AAEA;AACAE,mBAAej7C,EAAE,0BAAF,CAAf;AACAi7C,iBAAahlC,QAAb,CAAsB,YAAtB;AACAglC,iBAAah1B,QAAb,CAAsB,KAAKy1B,aAA3B;AACAT,iBAAan0C,GAAb,CAAiB;AACf2K,WAAKN,QAAQoU,MAAR,GAAiB9T;AADP,KAAjB;;AAIA;AACA;AACAypC,iBAAal7C,EAAE,UAAF,EAAa;AACxB,cAAQ,QADgB;AAExB,kBAAY,GAFY;AAGxB,oBAAc,KAAKuE,EAAL,CAAQo3C,iBAHE;AAIxB,eAAS;AAJe,KAAb,CAAb;AAMA,QAAI,KAAKv4C,QAAL,KAAkB,MAAtB,EAA8B;AAC5B+3C,oBAAcn7C,EAAE,QAAF,EAAW;AACvB,iBAAS,kBADc;AAEvB,uBAAe;AAFQ,OAAX,CAAd;AAIAk7C,iBAAWr0C,MAAX,CAAkBs0C,WAAlB;AACD,KAND,MAOK;AACH;AACA9uB,qBAAe,KAAK1qB,QAAL,GAAgB,SAAhB,GAA4B,KAAKqF,gBAAjC,GAAoD,kBAAnE;AACAo0C,mBAAap7C,EAAE,OAAF,EAAU;AACrB,eAAOqsB,YADc;AAErB,eAAO,EAFc;AAGrB,gBAAQ;AAHa,OAAV,CAAb;AAKA6uB,iBAAWr0C,MAAX,CAAkBu0C,UAAlB;AACD;;AAED;AACAC,mBAAer7C,EAAE,QAAF,EAAW;AACxB,eAAS;AADe,KAAX,EAEZoW,IAFY,CAEP,KAAK7R,EAAL,CAAQo3C,iBAFD,CAAf;AAGAT,eAAWr0C,MAAX,CAAkBw0C,YAAlB;;AAEA;AACArvB,gBAAY,KAAK7iB,OAAL,GAAe,GAAf,GAAqB8wC,UAArB,GAAkC,UAA9C;AACA9M,eAAWntC,EAAE,OAAF,EAAU;AACnB,eAAU,cADS;AAEnB,YAAOgsB;AAFY,KAAV,CAAX;AAIAkvB,eAAWn0B,EAAX,CAAc,kBAAd,EAAiC,UAASpM,KAAT,EAAgB;AAC/C,UAAI4O,QAAQvpB,EAAE,IAAF,EAAQsB,IAAR,CAAa,YAAb,CAAZ;AACA;AACA,UAAIkQ,WAAWxR,EAAE,IAAF,EAAQwR,QAAR,EAAf;AACA,UAAI0c,eAAeluB,EAAE,IAAF,EAAQwP,MAAR,EAAnB;AACA,UAAI2e,cAAcnuB,EAAE,IAAF,EAAQqP,KAAR,EAAlB;AACA,UAAI6c,WAAW1a,SAASC,GAAT,GAAeyc,YAAf,GAA8B,CAA7C;AACA,UAAIjC,WAAW,CAAf;AACA,UAAIsC,eAAe;AACjB7c,cAAM,EADW;AAEjB8c,eAAOvC,WAAW,IAFD;AAGjBxa,aAAKya,WAAW;AAHC,OAAnB;AAKA,UAAIwC,UAAU1uB,EAAE,MAAMgsB,SAAR,EAAmB5V,IAAnB,CAAwBmT,KAAxB,EAA+BziB,GAA/B,CAAmCynB,YAAnC,CAAd;AACA/pB,cAAQmqB,WAAR,CAAoBD,OAApB;AACA1uB,QAAE,IAAF,EAAQ+mB,EAAR,CAAW,iBAAX,EAA6B,YAAW;AACtC/mB,UAAE,MAAMgsB,SAAR,EAAmB5V,IAAnB,CAAwB,EAAxB,EAA4BxP,IAA5B;AACD,OAFD;AAGD,KAlBD;;AAoBA;AACA,QAAI4f,SAAS,KAAKD,WAAL,CAAiB0zB,UAAjB,CAAb;AACA,QAAIqB,cAAct7C,EAAE,WAAF,CAAlB;AACA,QAAIwoB,YAAY,KAAKrf,OAAL,GAAe,GAAf,GAAqB8wC,UAArB,GAAkC,SAAlD;;AAEA,QAAInlC,UAAU,EAAd;AACAA,YAAQlG,IAAR,CAAa;AACX,cAAQ,MADG;AAEX,eAAS,KAAKrK,EAAL,CAAQq3C;AAFN,KAAb;AAIA9mC,YAAQlG,IAAR,CAAa;AACX,cAAQ,QADG;AAEX,eAAS,KAAKrK,EAAL,CAAQs3C;AAFN,KAAb;AAIA,SAAK,IAAI11C,CAAT,IAAc2O,OAAd,EAAuB;AACrB,UAAIymC,cAAcv7C,EAAE,WAAF,CAAlB;AACA,UAAIw1B,SAAS1gB,QAAQ3O,CAAR,CAAb;AACA,UAAIsiB,UAAUD,YAAY,GAAZ,GAAkBriB,CAAhC;AACA,UAAIq1C,eAAex7C,EAAE,SAAF,EAAY;AAC7B,gBAAQ,OADqB;AAE7B,eAAOw1B,OAAOxd,IAFe;AAG7B,gBAAQwQ,SAHqB;AAI7B,cAAMC;AAJuB,OAAZ,CAAnB;AAMA,UAAIgzB,cAAcz7C,EAAE,SAAF,EAAY;AAC5B,eAAOyoB;AADqB,OAAZ,CAAlB;AAGAgzB,kBAAYrlC,IAAZ,CAAiBof,OAAOjM,KAAxB;AACAiyB,mBAAaz0B,EAAb,CAAgB,OAAhB,EAAwB,UAASjmB,CAAT,EAAY;AAClCd,UAAE,IAAF,EAAQ6iC,OAAR,CAAgB,IAAhB,EAAsBliB,QAAtB,CAA+B,IAA/B,EAAqCuG,WAArC,CAAiD,YAAjD;AACAlnB,UAAE,IAAF,EAAQ0K,MAAR,CAAe,IAAf,EAAqBuL,QAArB,CAA8B,YAA9B;AACD,OAHD;AAIAulC,mBAAaz0B,EAAb,CAAgB,OAAhB,EAAwB,UAASjmB,CAAT,EAAY;AAClCA,UAAEwhC,eAAF;AACA,YAAI,CAAC99B,QAAQ61C,yBAAT,IAAsC,CAAC71C,QAAQu2C,aAAnD,EAAkE;AAChEv2C,kBAAQ61C,yBAAR,GAAoC,IAApC;AACA71C,kBAAQs3C,gBAAR,CAA0BlhC,KAA1B,EAAiC5a,EAAE,IAAF,EAAQ+a,GAAR,EAAjC,EAAgDja,EAAEiX,IAAlD;AACD;AACF,OAND;AAOA;AACA;AACA;AACA;AACA;AACA0jC,kBAAY10B,EAAZ,CAAe,iBAAf,EAAkC,YAAW;AAC3C,YAAIg1B,YAAY/7C,EAAE,IAAF,EAAQsB,IAAR,CAAa,KAAb,CAAhB;AACAtB,UAAE,MAAM+7C,SAAR,EAAmB3hC,KAAnB;AACD,OAHD;AAIAmhC,kBAAY10C,MAAZ,CAAmB20C,YAAnB,EAAgCC,WAAhC;AACAH,kBAAYz0C,MAAZ,CAAmB00C,WAAnB;AACD;AACD/0B,WAAO3f,MAAP,CAAcy0C,WAAd;AACAJ,eAAWn0B,EAAX,CAAc,yBAAd,EAAwC,UAASjmB,CAAT,EAAY;AAClDA,QAAEwhC,eAAF;AACA,UAAI,CAAC99B,QAAQ61C,yBAAT,IAAsC,CAAC71C,QAAQu2C,aAAnD,EAAkE;AAChE;AACAv2C,gBAAQw3C,uBAAR,CAAgCphC,KAAhC,EAAuC9Z,CAAvC;AACD;AACD0D,cAAQu2C,aAAR,GAAwB,KAAxB;AACD,KAPD;;AASA;AACA,QAAIngC,UAAU,YAAd,EAA4B;AAC1B,WAAK+yB,gBAAL,GAAwBsN,YAAxB;AACA,WAAKgB,sBAAL,GAA8Bf,UAA9B;AACA,WAAKgB,gBAAL,GAAwB11B,MAAxB;AACA,WAAKqnB,kBAAL,CAAwBhnC,MAAxB,CAA+Bo0C,YAA/B,EAA4CC,UAA5C,EAAuD/N,QAAvD,EAAgE3mB,MAAhE;AACD,KALD,MAMK,IAAI5L,UAAU,MAAd,EAAsB;AACzB,WAAKgzB,UAAL,GAAkBqN,YAAlB;AACA,WAAKkB,gBAAL,GAAwBjB,UAAxB;AACA,WAAKkB,UAAL,GAAkB51B,MAAlB;AACA,WAAK4zB,YAAL,CAAkBvzC,MAAlB,CAAyBo0C,YAAzB,EAAsCC,UAAtC,EAAiD/N,QAAjD,EAA0D3mB,MAA1D;AACD;;AAED,SAAK61B,eAAL,CAAqBzhC,KAArB,EAA4BzJ,OAA5B;AACD,GAlKD;;AAoKA3Q,aAAWsE,SAAX,CAAqBu3C,eAArB,GAAuC,UAAUzhC,KAAV,EAAiBzJ,OAAjB,EAA0B;;AAE/D,QAAI3M,OAAJ,EAAamjB,YAAb,EAA2BC,aAA3B,EACE00B,OADF,EACWC,QADX,EACqBC,aADrB,EACoCC,cADpC,EACoDC,WADpD,EAEEC,WAFF,EAEeC,cAFf,EAGEC,eAHF,EAGmBC,iBAHnB,EAGsCC,iBAHtC,EAIEC,gBAJF,EAIoBC,kBAJpB,EAIwCC,kBAJxC,EAKEC,SALF,EAKaC,UALb,EAMEC,WANF,EAMeC,aANf,EAM8BtF,QAN9B,EAMwChL,SANxC,EAMmDuQ,YANnD;;AAQA/4C,cAAU,IAAV;;AAEA,QAAIoW,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACAt0B,sBAAgB,KAAKq0B,sBAArB;AACD,KAHD,MAIK,IAAIrhC,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACAx0B,sBAAgB,KAAKu0B,gBAArB;AACD;;AAEDG,cAAU,KAAKnzC,OAAL,GAAe,UAAf,GAA4ByR,KAA5B,GAAoC,QAA9C;AACA2hC,eAAW,KAAKpzC,OAAL,GAAe,UAAf,GAA4ByR,KAA5B,GAAoC,SAA/C;AACA4hC,oBAAgBrrC,QAAQ9B,KAAR,EAAhB;AACAotC,qBAAiBtrC,QAAQ3B,MAAR,EAAjB;AACAktC,kBAAcF,gBAAgBC,cAA9B;;AAEAE,kBAAc38C,EAAE,aAAF,EAAgB;AAC5B,eAAU;AADkB,KAAhB,CAAd;;AAIA;AACA48C,qBAAiB58C,EAAE,aAAF,CAAjB;;AAEA;AACA68C,sBAAkB78C,EAAE,aAAF,CAAlB;AACA88C,wBAAoB98C,EAAE,SAAF,EAAY;AAC9B,cAAQ,MADsB;AAE9B,YAAMs8C,OAFwB;AAG9B,eAASE;AAHqB,KAAZ,CAApB;AAKAO,wBAAoB/8C,EAAE,SAAF,EAAY;AAC9B,aAAOs8C;AADuB,KAAZ,EAEjBlmC,IAFiB,CAEZ,KAAK7R,EAAL,CAAQ8K,KAFI,CAApB;;AAIA;AACA2tC,uBAAmBh9C,EAAE,aAAF,CAAnB;AACAi9C,yBAAqBj9C,EAAE,SAAF,EAAY;AAC/B,cAAQ,MADuB;AAE/B,YAAMu8C,QAFyB;AAG/B,eAASE;AAHsB,KAAZ,CAArB;AAKAS,yBAAqBl9C,EAAE,SAAF,EAAY;AAC/B,aAAOu8C;AADwB,KAAZ,EAElBnmC,IAFkB,CAEb,KAAK7R,EAAL,CAAQiL,MAFK,CAArB;;AAIA,QAAIoL,UAAU,MAAd,EAAsB;AACpB;AACA;AACAqiC,yBAAmBniC,IAAnB,CAAwB,UAAxB,EAAmC,IAAnC;AACAgiC,wBAAkB/1B,EAAlB,CAAqB,OAArB,EAA6B,YAAW;AACtCo2B,oBAAYn9C,EAAE,IAAF,EAAQ+a,GAAR,EAAZ;AACAqiC,qBAAav+B,KAAKqH,KAAL,CAAWi3B,YAAUT,WAArB,EAAkC,CAAlC,CAAb;AACAO,2BAAmBliC,GAAnB,CAAuBqiC,UAAvB;AACD,OAJD;AAKD;;AAED;AACAC,kBAAcr9C,EAAE,kCAAkC,KAAKuE,EAAL,CAAQ2V,IAA1C,GAAiD,WAAnD,CAAd;AACAojC,oBAAgBt9C,EAAE,kCAAkC,KAAKuE,EAAL,CAAQ4V,MAA1C,GAAmD,WAArD,CAAhB;AACAkjC,gBAAYt2B,EAAZ,CAAe,OAAf,EAAuB,YAAY;AACjCixB,iBAAWh4C,EAAE,MAAMs8C,OAAR,EAAiBvhC,GAAjB,EAAX;AACAiyB,kBAAYhtC,EAAE,MAAMu8C,QAAR,EAAkBxhC,GAAlB,EAAZ;AACA,UAAIi9B,aAAawE,aAAb,IAA8BxP,cAAcyP,cAAhD,EAAgE;AAC9DtrC,gBAAQrK,GAAR,CAAY;AACV,mBAASkxC,WAAW,IADV;AAEV,oBAAUhL,YAAY;AAFZ,SAAZ;AAIAxoC,gBAAQyM,YAAR,CAAqB2J,KAArB;AACD;AACD2iC,mBAAa32C,IAAb;AACA+gB,mBAAa/gB,IAAb;AACAghB,oBAAcT,KAAd;AACD,KAbD;AAcAm2B,kBAAcv2B,EAAd,CAAiB,OAAjB,EAAyB,YAAY;AACnCw2B,mBAAa32C,IAAb;AACA+gB,mBAAa/gB,IAAb;AACAghB,oBAAcT,KAAd;AACD,KAJD;;AAMA;AACA01B,oBAAgBh2C,MAAhB,CAAuBk2C,iBAAvB,EAAyCD,iBAAzC;AACAE,qBAAiBn2C,MAAjB,CAAwBq2C,kBAAxB,EAA2CD,kBAA3C;AACAL,mBAAe/1C,MAAf,CAAsBg2C,eAAtB,EAAsCG,gBAAtC;AACAL,gBAAY91C,MAAZ,CAAmB+1C,cAAnB,EAAkC,MAAlC,EAAyCS,WAAzC,EAAqDC,aAArD;;AAEA;AACA;AACA;AACA;AACAt9C,MAAE,MAAF,EAAU6G,MAAV,CAAiB81C,WAAjB;AACAY,mBAAe,IAAIxjC,gBAAJ,CAAqB4iC,WAArB,EAAkC/0B,aAAlC,EAAiD,OAAjD,EAA0D,KAAKrjB,EAAL,CAAQi5C,mBAAlE,EAAuFZ,cAAvF,EAAuG,KAAKr4C,EAAL,CAAQ0V,gBAA/G,EAAiI,MAAjI,CAAf;AACA,QAAIW,UAAU,YAAd,EAA4B;AAC1B,WAAK6iC,sBAAL,GAA8BF,YAA9B;AACD,KAFD,MAGK,IAAI3iC,UAAU,MAAd,EAAsB;AACzB,WAAK8iC,gBAAL,GAAwBH,YAAxB;AACD;AACF,GA5GD;;AA8GA/8C,aAAWsE,SAAX,CAAqBk3C,uBAArB,GAA+C,UAAUphC,KAAV,EAAiB9Z,CAAjB,EAAoB;;AAEjE,QAAI0D,OAAJ,EAAamjB,YAAb,EAA2BC,aAA3B,EAA0CoyB,QAA1C,EAAoD2D,QAApD;;AAEAn5C,cAAU,IAAV;;AAEA,QAAI1D,EAAEiX,IAAF,KAAW,SAAf,EAA0B;AACxB;AACA,UAAIjX,EAAE8Z,KAAF,KAAY,EAAZ,IAAkB9Z,EAAE8Z,KAAF,KAAY,EAA9B,IAAoC9Z,EAAE8Z,KAAF,KAAY,EAApD,EAAwD;AACtD;AACA,aAAKy/B,yBAAL,GAAiC,IAAjC;AACD,OAHD,MAIK;AACH,eAAO,KAAP;AACD;AACF,KATD,MAUK;AACH;AACA,WAAKA,yBAAL,GAAiC,IAAjC;AACD;AACD,QAAIz/B,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACAt0B,sBAAgB,KAAKq0B,sBAArB;AACAjC,iBAAW,KAAKnM,kBAAhB;AACD,KAJD,MAKK,IAAIjzB,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACAx0B,sBAAgB,KAAKu0B,gBAArB;AACAnC,iBAAW,KAAKI,YAAhB;AACD;;AAED,QAAIzyB,aAAa5e,EAAb,CAAgB,UAAhB,CAAJ,EAAiC;AAC/B4e,mBAAa/gB,IAAb,CAAkB,GAAlB,EAAsB,EAAtB,EAAyB,YAAW;AAClCpC,gBAAQ61C,yBAAR,GAAoC,KAApC,CADkC,CACS;AAC5C,OAFD;AAGA1yB,mBAAarlB,IAAb,CAAkB,IAAlB,EAAwB4kB,WAAxB,CAAoC,YAApC;AACAU,oBAAcT,KAAd;AACD,KAND,MAOK;AACH;AACA,WAAKxC,YAAL,CAAkB/J,KAAlB;AACA+iC,iBAAW/1B,cAAcpW,QAAd,GAAyBC,GAAzB,GAA+BmW,cAAc0iB,WAAd,EAA1C;AACA3iB,mBAAa7gB,GAAb,CAAiB,KAAjB,EAAwB62C,QAAxB;AACAh2B,mBAAaE,IAAb,CAAkB,GAAlB,EAAsB,EAAtB,EAAyB,YAAW;AAClC7nB,UAAE,IAAF,EAAQsC,IAAR,CAAa,OAAb,EAAsBwG,KAAtB,GAA8Bqe,KAA9B,GAAsCzc,MAAtC,GAA+CuL,QAA/C,CAAwD,YAAxD;AACAzR,gBAAQ61C,yBAAR,GAAoC,KAApC,CAFkC,CAES;AAC5C,OAHD;AAID;AACF,GAhDD;;AAkDA75C,aAAWsE,SAAX,CAAqBg3C,gBAArB,GAAwC,UAAUlhC,KAAV,EAAiBgjC,MAAjB,EAAyBC,SAAzB,EAAoC;;AAE1E,QAAIr5C,OAAJ,EAAa2M,OAAb,EAAsBwW,YAAtB,EAAoCC,aAApC,EAAmD21B,YAAnD,EAAiEO,UAAjE;;AAEAt5C,cAAU,IAAV;;AAEA,QAAIoW,UAAU,YAAd,EAA4B;AAC1BzJ,gBAAU,KAAKI,eAAf;AACAoW,qBAAe,KAAKu0B,gBAApB;AACAt0B,sBAAgB,KAAKq0B,sBAArB;AACAsB,qBAAe,KAAKE,sBAApB;AACD,KALD,MAMK,IAAI7iC,UAAU,MAAd,EAAsB;AACzBzJ,gBAAU,KAAKQ,WAAf;AACAgW,qBAAe,KAAKy0B,UAApB;AACAx0B,sBAAgB,KAAKu0B,gBAArB;AACAoB,qBAAe,KAAKG,gBAApB;AACD;;AAED;AACA/1B,iBAAa/gB,IAAb,CAAkB,MAAlB,EAA0B,YAAW;AAClCpC,cAAQ61C,yBAAR,GAAoC,KAApC,CADkC,CACS;AAC7C,KAFD;AAGAzyB,kBAAcT,KAAd;;AAEA,QAAIy2B,WAAW,MAAf,EAAuB;AACrB,UAAI,CAAC,KAAK9P,WAAL,CAAiBlzB,KAAjB,CAAL,EAA8B;AAC5B,aAAKS,SAAL,CAAe,KAAK9W,EAAL,CAAQw5C,eAAvB,EAAuCnjC,KAAvC;AACA,YAAIA,UAAU,YAAd,EAA4B;AAC1B,eAAKmzB,qBAAL,GAA6B,IAA7B;AACD,SAFD,MAGK,IAAInzB,UAAU,MAAd,EAAsB;AACzB,eAAKozB,eAAL,GAAuB,IAAvB;AACD;AACF;AACD,UAAI6P,cAAc,SAAlB,EAA6B;AAC3B,aAAKrD,UAAL,GAAkB,UAAlB;AACD,OAFD,MAGK;AACH,aAAKA,UAAL,GAAkB,OAAlB;AACD;AACD,WAAKC,SAAL,CAAe7/B,KAAf,EAAsBzJ,OAAtB;AACAwW,mBAAa/gB,IAAb,GAAoB8D,MAApB,GAA6Byc,KAA7B;AACD,KAlBD,MAmBK,IAAIy2B,UAAU,QAAd,EAAwB;AAC3B;AACAL,mBAAa11B,IAAb;AACD;AACF,GAhDD;;AAkDArnB,aAAWsE,SAAX,CAAqB21C,SAArB,GAAiC,UAAS7/B,KAAT,EAAgB6K,QAAhB,EAA0B;;AAEzD,QAAIjhB,OAAJ,EAAamjB,YAAb,EAA2BlD,MAA3B,EAAmCu5B,QAAnC,EAA6CC,IAA7C,EAAmDC,IAAnD;AACA15C,cAAU,IAAV;;AAEA,SAAKk3C,aAAL,GAAqBj2B,QAArB;AACA,SAAKi1B,QAAL,GAAgB,IAAhB;;AAEA,QAAI9/B,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACD,KAFD,MAGK,IAAIthC,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACD;;AAED,QAAI,CAAC,KAAKtO,WAAL,CAAiBlzB,KAAjB,CAAL,EAA8B;AAC5B,WAAKS,SAAL,CAAe,KAAK9W,EAAL,CAAQw5C,eAAvB,EAAuCnjC,KAAvC;AACA,UAAIA,UAAU,YAAd,EAA4B;AAC1B,aAAKmzB,qBAAL,GAA6B,IAA7B;AACD,OAFD,MAGK,IAAInzB,UAAU,MAAd,EAAsB;AACzB,aAAKozB,eAAL,GAAuB,IAAvB;AACD;AACF;;AAED;AACA,QAAIrmB,aAAa5e,EAAb,CAAgB,UAAhB,CAAJ,EAAiC;AAC/B4e,mBAAa/gB,IAAb;AACD;;AAED;AACA,SAAK+d,YAAL,CAAkB/J,KAAlB;;AAEA;AACAojC,eAAW,KAAKtC,aAAL,CAAmBlqC,QAAnB,EAAX;AACA,SAAK2sC,UAAL,GAAkBH,SAAStsC,IAA3B;AACA,SAAK0sC,UAAL,GAAkBJ,SAASvsC,GAA3B;;AAEA,QAAI,OAAO,KAAK6oC,WAAZ,KAA4B,WAAhC,EAA6C;AAC3C,WAAKE,UAAL,GAAkB,UAAlB;AACA,WAAK6D,QAAL,GAAgB,KAAKF,UAArB;AACA,WAAKG,QAAL,GAAgB,KAAKF,UAArB;AACA;AACA,WAAKG,YAAL,GAAoB,IAApB;AACD,KAND,MAOK;AACH,WAAK/D,UAAL,GAAkB,OAAlB;AACA;AACA,WAAKgE,WAAL,GAAmB,KAAKlE,WAAL,GAAmB,KAAK6D,UAA3C;AACA,WAAKM,WAAL,GAAmB,KAAKlE,WAAL,GAAmB,KAAK6D,UAA3C;AACD;;AAED;AACA,SAAK1C,aAAL,CAAmBzlC,QAAnB,CAA4B,WAA5B,EAAyCnP,GAAzC,CAA6C;AAC3C,kBAAY,UAD+B;AAE3C,aAAO,KAAKs3C,UAAL,GAAkB,IAFkB;AAG3C,cAAQ,KAAKD,UAAL,GAAkB;AAHiB,KAA7C,EAIGh3B,KAJH;;AAMA;AACA,QAAI,KAAKqzB,UAAL,KAAoB,OAAxB,EAAiC;AAC/Bx6C,QAAEC,QAAF,EAAY8mB,EAAZ,CAAe,WAAf,EAA2B,UAASjmB,CAAT,EAAY;AACrC,YAAI0D,QAAQk2C,QAAZ,EAAsB;AACpB;AACAuD,iBAAOn9C,EAAE86B,KAAF,GAAUp3B,QAAQg6C,WAAzB;AACAN,iBAAOp9C,EAAEo7B,KAAF,GAAU13B,QAAQi6C,WAAzB;AACAj6C,kBAAQk6C,kBAAR,CAA4BT,IAA5B,EAAkCC,IAAlC;AACD;AACF,OAPD;AAQD,KATD,MAUK,IAAI,KAAK1D,UAAL,KAAoB,UAAxB,EAAoC;AACvC,WAAKkB,aAAL,CAAmB30B,EAAnB,CAAsB,SAAtB,EAAgC,UAASjmB,CAAT,EAAY;AAC1C,YAAI0D,QAAQk2C,QAAZ,EAAsB;AACpBl2C,kBAAQm6C,QAAR,CAAiB/jC,KAAjB,EAAwB9Z,CAAxB;AACD;AACF,OAJD;AAKD;AACD,WAAO,KAAP;AACD,GA9ED;;AAgFAN,aAAWsE,SAAX,CAAqB65C,QAArB,GAAgC,UAAS/jC,KAAT,EAAgB9Z,CAAhB,EAAmB;;AAEjD,QAAI89C,GAAJ,EAASC,QAAT;;AAEA,QAAIr6C,UAAU,IAAd;;AAEA;AACA;AACA,QAAI,KAAK+5C,YAAT,EAAuB;AACrB,WAAKA,YAAL,GAAoB,KAApB;AACA,aAAO,KAAP;AACD;AACDK,UAAM99C,EAAE8Z,KAAR;AACAikC,eAAW,EAAX,CAbiD,CAalC;;AAEf,YAAQD,GAAR;AACA,WAAK,EAAL,CADA,CACS;AACP,WAAK,KAAL;AACD,aAAKP,QAAL,IAAiBQ,QAAjB;AACG;AACF,WAAK,EAAL,CALF,CAKW;AACT,WAAK,KAAL;AACF,aAAKP,QAAL,IAAiBO,QAAjB;AACI;AACF,WAAK,EAAL,CATF,CASW;AACT,WAAK,KAAL;AACF,aAAKR,QAAL,IAAiBQ,QAAjB;AACI;AACF,WAAK,EAAL,CAbF,CAaW;AACT,WAAK,KAAL;AACF,aAAKP,QAAL,IAAiBO,QAAjB;AACI;AACF,WAAK,EAAL,CAjBF,CAiBY;AACV,WAAK,EAAL;AAAU;AACZ,aAAKlE,OAAL,CAAa//B,KAAb;AACI,eAAO,KAAP;AACF;AACF,eAAO,KAAP;AAtBA;AAwBA,SAAK8jC,kBAAL,CAAwB,KAAKL,QAA7B,EAAsC,KAAKC,QAA3C;AACA,QAAIx9C,EAAEumB,cAAN,EAAsB;AACtBvmB,QAAEumB,cAAF;AACC;AACD,WAAO,KAAP;AACD,GA5CD;;AA8CA7mB,aAAWsE,SAAX,CAAqB45C,kBAArB,GAA0C,UAAW3sB,CAAX,EAAckK,CAAd,EAAiB;AACzD,SAAKyf,aAAL,CAAmB50C,GAAnB,CAAuB;AACrB,cAAQirB,IAAI,IADS;AAErB,aAAOkK,IAAI;AAFU,KAAvB;AAID,GALD,EAOAz7B,WAAWsE,SAAX,CAAqBg6C,YAArB,GAAoC,UAAWlkC,KAAX,EAAkBvL,KAAlB,EAAyBG,MAAzB,EAAkC;;AAEpE,QAAIyoC,WAAJ;;AAEA;AACA,SAAKyD,aAAL,CAAmB50C,GAAnB,CAAuB;AACrB,eAASuI,QAAQ,IADI;AAErB,gBAAUG,SAAS;AAFE,KAAvB;;AAKA,QAAIoL,UAAU,YAAd,EAA4B;AAC1B;AACA;AACA;AACAq9B,oBAAczoC,SAAS,EAAvB;AACA,WAAK0f,cAAL,CAAoBpoB,GAApB,CAAwB,QAAxB,EAAkCmxC,cAAc,IAAhD;AACD;AACF,GAxBD;;AA0BAz3C,aAAWsE,SAAX,CAAqB61C,OAArB,GAA+B,UAAS//B,KAAT,EAAgB;;AAE7C,QAAIzJ,OAAJ,EAAawW,YAAb,EAA2BC,aAA3B;;AAEA,QAAIhN,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACAt0B,sBAAgB,KAAKq0B,sBAArB;AACD,KAHD,MAIK,IAAIrhC,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACAx0B,sBAAgB,KAAKu0B,gBAArB;AACD;;AAEDn8C,MAAEC,QAAF,EAAY8+C,GAAZ,CAAgB,mBAAhB;AACA,SAAKrD,aAAL,CAAmBqD,GAAnB,CAAuB,SAAvB,EAAkC73B,WAAlC,CAA8C,WAA9C;;AAEA,QAAI,KAAKszB,UAAL,KAAoB,UAAxB,EAAoC;AAClC5yB,oBAAcT,KAAd;AACD;AACD,SAAKuzB,QAAL,GAAgB,KAAhB;;AAEA;AACA,SAAKzpC,YAAL,CAAkB2J,KAAlB;;AAEA;AACA,SAAK0/B,WAAL,GAAmB/5C,SAAnB;AACA,SAAKg6C,WAAL,GAAmBh6C,SAAnB;;AAEA;AACA,SAAK85C,yBAAL,GAAiC,KAAjC;AACA,SAAKU,aAAL,GAAqB,IAArB,CA9B6C,CA8BlB;;AAE3B;AACA;AACA;AACA;AACAjxB,eAAW,YAAW;AACpB,WAAKixB,aAAL,GAAqB,KAArB;AACD,KAFD,EAEG,GAFH;AAGD,GAvCD;;AAyCAv6C,aAAWsE,SAAX,CAAqBk6C,eAArB,GAAuC,UAAS7tC,OAAT,EAAkB8tC,MAAlB,EAA0BC,MAA1B,EAAkC;;AAEvE;AACA,QAAIC,SAAJ,EAAe3tC,QAAf,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCrC,KAApC,EAA2CG,MAA3C,EAAmDujB,MAAnD,EAA2DvE,KAA3D;;AAEA2wB,gBAAY,EAAZ,CALuE,CAKvD;;AAEhB;AACA3tC,eAAWL,QAAQoU,MAAR,EAAX;AACA9T,UAAMD,SAASC,GAAf;AACAC,WAAOF,SAASE,IAAhB;AACArC,YAAQ8B,QAAQ9B,KAAR,EAAR;AACAG,aAAS2B,QAAQ3B,MAAR,EAAT;AACAujB,aAASthB,MAAMjC,MAAf;AACAgf,YAAQ9c,OAAOrC,KAAf;AACA,QAAKwP,KAAK+hB,GAAL,CAAS7N,SAAOmsB,MAAhB,KAA2BC,SAA5B,IAA2CtgC,KAAK+hB,GAAL,CAASpS,QAAMywB,MAAf,KAA0BE,SAAzE,EAAqF;AACnF,aAAO,IAAP;AACD;AACD,WAAO,KAAP;AACD,GAnBD;;AAqBA3+C,aAAWsE,SAAX,CAAqB81C,WAArB,GAAmC,UAAShgC,KAAT,EAAgB6K,QAAhB,EAA0B;;AAE3D,QAAIjhB,OAAJ,EAAamjB,YAAb,EAA2BlD,MAA3B,EAAmCu5B,QAAnC,EAA6ChG,QAA7C,EAAuDhL,SAAvD;AACAxoC,cAAU,IAAV;;AAEA,SAAKk3C,aAAL,GAAqBj2B,QAArB;AACA,SAAKo1B,QAAL,GAAgB,IAAhB;;AAEA,QAAIjgC,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACD,KAFD,MAGK,IAAIthC,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACD;;AAED;AACA,QAAIz0B,aAAa5e,EAAb,CAAgB,UAAhB,CAAJ,EAAiC;AAC/B4e,mBAAa/gB,IAAb,GAAoB8D,MAApB,GAA6Byc,KAA7B;AACD;;AAED;AACA62B,eAAW,KAAKtC,aAAL,CAAmBlqC,QAAnB,EAAX;AACA,SAAK6sC,QAAL,GAAgB,KAAKF,UAArB;AACA,SAAKG,QAAL,GAAgB,KAAKF,UAArB;AACA,SAAKgB,cAAL,GAAsB,KAAK1D,aAAL,CAAmBrsC,KAAnB,EAAtB;AACA,SAAKgwC,eAAL,GAAuB,KAAK3D,aAAL,CAAmBlsC,MAAnB,EAAvB;;AAEA;AACAxP,MAAEC,QAAF,EAAY8mB,EAAZ,CAAe,WAAf,EAA2B,UAASjmB,CAAT,EAAY;AACrC,UAAI0D,QAAQq2C,QAAZ,EAAsB;AACpB;AACA7C,mBAAWxzC,QAAQ46C,cAAR,IAA0Bt+C,EAAE86B,KAAF,GAAUp3B,QAAQ81C,WAA5C,CAAX;AACAtN,oBAAYxoC,QAAQ66C,eAAR,IAA2Bv+C,EAAEo7B,KAAF,GAAU13B,QAAQ+1C,WAA7C,CAAZ;AACA/1C,gBAAQs6C,YAAR,CAAsBlkC,KAAtB,EAA6Bo9B,QAA7B,EAAuChL,SAAvC;AACD;AACF,KAPD;AAQA,WAAO,KAAP;AACD,GArCD;;AAuCAxsC,aAAWsE,SAAX,CAAqBg2C,SAArB,GAAiC,UAASlgC,KAAT,EAAgB;;AAE/C,QAAIzJ,OAAJ,EAAawW,YAAb,EAA2BC,aAA3B;;AAEA,QAAIhN,UAAU,YAAd,EAA4B;AAC1B+M,qBAAe,KAAKu0B,gBAApB;AACAt0B,sBAAgB,KAAKq0B,sBAArB;AACD,KAHD,MAIK,IAAIrhC,UAAU,MAAd,EAAsB;AACzB+M,qBAAe,KAAKy0B,UAApB;AACAx0B,sBAAgB,KAAKu0B,gBAArB;AACD;;AAEDn8C,MAAEC,QAAF,EAAY8+C,GAAZ,CAAgB,mBAAhB;AACA,SAAKrD,aAAL,CAAmBqD,GAAnB,CAAuB,SAAvB;;AAEAn3B,kBAAcC,IAAd,GAAqBV,KAArB;AACA,SAAK0zB,QAAL,GAAgB,KAAhB;AACA,SAAKa,aAAL,CAAmBx0B,WAAnB,CAA+B,aAA/B;;AAEA;AACA,SAAKjW,YAAL,CAAkB2J,KAAlB;;AAEA;AACA,SAAKy/B,yBAAL,GAAiC,KAAjC;AACA,SAAKU,aAAL,GAAqB,IAArB;;AAEA;AACA;AACA;AACA;AACAjxB,eAAW,YAAW;AACpB,WAAKixB,aAAL,GAAqB,KAArB;AACD,KAFD,EAEG,GAFH;AAGD,GAlCD;AAoCD,CApvBD,EAovBG31C,MApvBH;;AAsvBA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBmG,gBAArB,GAAwC,YAAW;AACjD;AACA,QAAI,KAAKjG,MAAL,KAAgB,OAApB,EAA6B;AAC3B;AACA;AACA;AACA,WAAKs6C,QAAL,GAAgB,KAAKj2C,QAAL,CAAcP,KAAd,GAAsBxH,IAAtB,CAA2B,eAA3B,CAAhB;AACA,UAAI,KAAKg+C,QAAT,EAAmB;AACjB,YAAI,KAAK59C,KAAT,EAAgB;AACdgH,kBAAQyB,GAAR,CAAY,yDAAyD,KAAKm1C,QAA1E;AACD;AACD,aAAK7zB,eAAL,GAAuB,IAAvB;AACA,aAAK8zB,oBAAL;AACD,OAND,MAOK;AACH,aAAK9zB,eAAL,GAAuB,KAAvB;AACD;AACF;AACF,GAlBD;;AAoBAjrB,aAAWsE,SAAX,CAAqBy6C,oBAArB,GAA4C,YAAW;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAI/6C,OAAJ,EAAag7C,WAAb,EAA0BC,cAA1B,EAA0Ct5C,CAA1C,EAA6Cu5C,OAA7C,EAAsD/b,OAAtD,EAA+Dgc,WAA/D;;AAEAn7C,cAAU,IAAV;;AAEAi7C,qBAAiB,KAAKt7B,eAAL,CAAqB,MAArB,CAAjB;;AAEAq7B,kBAAc,KAAKr2C,OAAL,GAAe,OAA7B;AACA,SAAKy2C,UAAL,GAAkB5/C,EAAE,SAAF,EAAY;AAC5B,YAAOw/C,WADqB;AAE5B,kBAAa;AAFe,KAAZ,CAAlB;AAIA,SAAKpe,SAAL,GAAiB,KAAKwe,UAAL,CAAgB,CAAhB,CAAjB;AACA;AACA,SAAKz5C,IAAE,CAAP,EAAUA,IAAI,KAAKkD,QAAL,CAAclI,MAA5B,EAAoCgF,GAApC,EAAyC;AACvCu5C,gBAAU,KAAKr2C,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,eAA9B,CAAV;AACAyzB,gBAAU,KAAKt6B,QAAL,CAAclD,CAAd,EAAiB+J,YAAjB,CAA8B,MAA9B,CAAV;AACA,UAAIwvC,OAAJ,EAAa;AACXC,sBAAc3/C,EAAE,UAAF,EAAa;AACzB,iBAAQ0/C,OADiB;AAEzB,kBAAS/b;AAFgB,SAAb,CAAd;AAIA,aAAKic,UAAL,CAAgB/4C,MAAhB,CAAuB84C,WAAvB;AACD,OAND,MAOK;AACH;AACA;AACA,aAAKl0B,eAAL,GAAuB,KAAvB;AACA;AACD;AACF;;AAED,SAAK9Z,WAAL,GAAmB3R,EAAE,OAAF,EAAU;AAC3B,eAAU,kBADiB;AAE3B,kBAAY;AAFe,KAAV,CAAnB;AAIA,SAAKo6C,YAAL,GAAoBp6C,EAAE,OAAF,EAAU;AAC5B,eAAS;AADmB,KAAV,CAApB;;AAIA,SAAK2R,WAAL,CAAiB9K,MAAjB,CAAwB,KAAKuzC,YAA7B,EAA2C,KAAKwF,UAAhD;;AAEA,SAAKt9B,YAAL,CAAkBzb,MAAlB,CAAyB,KAAK8K,WAA9B;;AAEA;AACA,SAAK0hC,YAAL,CAAkB,MAAlB;;AAEA,QAAI,KAAKjI,QAAL,KAAkB,CAAtB,EAAyB;AACvB;AACA,WAAKhnB,uBAAL,CAA6B,MAA7B,EAAoC,KAAKD,eAAL,CAAqB,MAArB,CAApC;AACD,KAHD,MAIK;AACH,WAAKxS,WAAL,CAAiB/K,IAAjB;AACD;AACF,GApED;AAsED,CA3FD,EA2FGxB,MA3FH;;AA6FA,CAAC,UAAUpF,CAAV,EAAa;AACZ;AACA;AACA;AACA;AACA;;AAEA,MAAI6/C,WAAW;AACb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KADQ;AAKb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KALQ;AASb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KATQ;AAab,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KAbQ;AAiBb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjBQ;AAqBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArBQ;AAyBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzBQ;AA6Bb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KA7BQ;AAiCb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjCQ;AAqCb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KArCQ;AAyCb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzCQ;AA6Cb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7CQ;AAiDb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjDQ;AAqDb,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KArDQ;AAyDb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzDQ;AA6Db,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7DQ;AAiEb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjEQ;AAqEb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KArEQ;AAyEb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzEQ;AA6Eb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7EQ;AAiFb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjFQ;AAqFb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArFQ;AAyFb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzFQ;AA6Fb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KA7FQ;AAiGb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjGQ;AAqGb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArGQ;AAyGb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAzGQ;AA6Gb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7GQ;AAiHb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjHQ;AAqHb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArHQ;AAyHb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzHQ;AA6Hb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7HQ;AAiIb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjIQ;AAqIb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KArIQ;AAyIb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAzIQ;AA6Ib,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7IQ;AAiJb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjJQ;AAqJb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArJQ;AAyJb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzJQ;AA6Jb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7JQ;AAiKb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjKQ;AAqKb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KArKQ;AAyKb,UAAK;AACD,cAAO,KADN;AAED,oBAAa;AAFZ,KAzKQ;AA6Kb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7KQ;AAiLb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjLQ;AAqLb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArLQ;AAyLb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzLQ;AA6Lb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KA7LQ;AAiMb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjMQ;AAqMb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KArMQ;AAyMb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzMQ;AA6Mb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7MQ;AAiNb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjNQ;AAqNb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KArNQ;AAyNb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzNQ;AA6Nb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7NQ;AAiOb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjOQ;AAqOb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArOQ;AAyOb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzOQ;AA6Ob,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KA7OQ;AAiPb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjPQ;AAqPb,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KArPQ;AAyPb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KAzPQ;AA6Pb,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KA7PQ;AAiQb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAjQQ;AAqQb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KArQQ;AAyQb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzQQ;AA6Qb,UAAK;AACD,cAAO,KADN;AAED,oBAAa;AAFZ,KA7QQ;AAiRb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjRQ;AAqRb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArRQ;AAyRb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAzRQ;AA6Rb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KA7RQ;AAiSb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjSQ;AAqSb,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KArSQ;AAySb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzSQ;AA6Sb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7SQ;AAiTb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjTQ;AAqTb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArTQ;AAyTb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzTQ;AA6Tb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7TQ;AAiUb,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KAjUQ;AAqUb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArUQ;AAyUb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KAzUQ;AA6Ub,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7UQ;AAiVb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjVQ;AAqVb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArVQ;AAyVb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAzVQ;AA6Vb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7VQ;AAiWb,UAAK;AACD,cAAO,eADN;AAED,oBAAa;AAFZ,KAjWQ;AAqWb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArWQ;AAyWb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KAzWQ;AA6Wb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7WQ;AAiXb,UAAK;AACD,cAAO,KADN;AAED,oBAAa;AAFZ,KAjXQ;AAqXb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KArXQ;AAyXb,UAAK;AACD,cAAO,cADN;AAED,oBAAa;AAFZ,KAzXQ;AA6Xb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7XQ;AAiYb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KAjYQ;AAqYb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KArYQ;AAyYb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAzYQ;AA6Yb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7YQ;AAiZb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjZQ;AAqZb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArZQ;AAyZb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzZQ;AA6Zb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7ZQ;AAiab,UAAK;AACD,cAAO,aADN;AAED,oBAAa;AAFZ,KAjaQ;AAqab,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAraQ;AAyab,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzaQ;AA6ab,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7aQ;AAibb,UAAK;AACD,cAAO,kBADN;AAED,oBAAa;AAFZ,KAjbQ;AAqbb,UAAK;AACD,cAAO,eADN;AAED,oBAAa;AAFZ,KArbQ;AAybb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzbQ;AA6bb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7bQ;AAicb,UAAK;AACD,cAAO,mBADN;AAED,oBAAa;AAFZ,KAjcQ;AAqcb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KArcQ;AAycb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzcQ;AA6cb,UAAK;AACD,cAAO,eADN;AAED,oBAAa;AAFZ,KA7cQ;AAidb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjdQ;AAqdb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArdQ;AAydb,UAAK;AACD,cAAO,iBADN;AAED,oBAAa;AAFZ,KAzdQ;AA6db,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7dQ;AAieb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAjeQ;AAqeb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAreQ;AAyeb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzeQ;AA6eb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KA7eQ;AAifb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjfQ;AAqfb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArfQ;AAyfb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAzfQ;AA6fb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KA7fQ;AAigBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjgBQ;AAqgBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArgBQ;AAygBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzgBQ;AA6gBb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KA7gBQ;AAihBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjhBQ;AAqhBb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KArhBQ;AAyhBb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAzhBQ;AA6hBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7hBQ;AAiiBb,UAAK;AACD,cAAO,eADN;AAED,oBAAa;AAFZ,KAjiBQ;AAqiBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAriBQ;AAyiBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAziBQ;AA6iBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7iBQ;AAijBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjjBQ;AAqjBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KArjBQ;AAyjBb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAzjBQ;AA6jBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7jBQ;AAikBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAjkBQ;AAqkBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArkBQ;AAykBb,UAAK;AACD,cAAO,gBADN;AAED,oBAAa;AAFZ,KAzkBQ;AA6kBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7kBQ;AAilBb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjlBQ;AAqlBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArlBQ;AAylBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzlBQ;AA6lBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7lBQ;AAimBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAjmBQ;AAqmBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KArmBQ;AAymBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzmBQ;AA6mBb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KA7mBQ;AAinBb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAjnBQ;AAqnBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArnBQ;AAynBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAznBQ;AA6nBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7nBQ;AAioBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjoBQ;AAqoBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAroBQ;AAyoBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzoBQ;AA6oBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7oBQ;AAipBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAjpBQ;AAqpBb,UAAK;AACD,cAAO,KADN;AAED,oBAAa;AAFZ,KArpBQ;AAypBb,UAAK;AACD,cAAO,UADN;AAED,oBAAa;AAFZ,KAzpBQ;AA6pBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KA7pBQ;AAiqBb,UAAK;AACD,cAAO,WADN;AAED,oBAAa;AAFZ,KAjqBQ;AAqqBb,UAAK;AACD,cAAO,MADN;AAED,oBAAa;AAFZ,KArqBQ;AAyqBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzqBQ;AA6qBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7qBQ;AAirBb,UAAK;AACD,cAAO,YADN;AAED,oBAAa;AAFZ,KAjrBQ;AAqrBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KArrBQ;AAyrBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KAzrBQ;AA6rBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KA7rBQ;AAisBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAjsBQ;AAqsBb,UAAK;AACD,cAAO,iBADN;AAED,oBAAa;AAFZ,KArsBQ;AAysBb,UAAK;AACD,cAAO,OADN;AAED,oBAAa;AAFZ,KAzsBQ;AA6sBb,UAAK;AACD,cAAO,SADN;AAED,oBAAa;AAFZ,KA7sBQ;AAitBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ,KAjtBQ;AAqtBb,UAAK;AACD,cAAO,QADN;AAED,oBAAa;AAFZ;AArtBQ,GAAf;;AA2tBAr/C,aAAWsE,SAAX,CAAqBqwB,eAArB,GAAuC,UAAUypB,GAAV,EAAe;AACtDA,UAAMA,IAAI1qB,KAAJ,CAAU,CAAV,EAAY,CAAZ,CAAN;AACA,QAAInwB,OAAO87C,SAASjB,GAAT,CAAX;AACA,WAAO76C,OAAOA,KAAKiU,IAAZ,GAAmBzX,SAA1B;AACA,GAJA;AAKAC,aAAWsE,SAAX,CAAqBg7C,qBAArB,GAA6C,UAAUlB,GAAV,EAAe;AAC5DA,UAAMA,IAAI1qB,KAAJ,CAAU,CAAV,EAAY,CAAZ,CAAN;AACA,QAAInwB,OAAO87C,SAASjB,GAAT,CAAX;AACA,WAAO76C,OAAOA,KAAKg8C,UAAZ,GAAyBx/C,SAAhC;AACA,GAJA;AAMD,CA7uBD,EA6uBG6E,MA7uBH;AA8uBA,CAAC,UAAUpF,CAAV,EAAa;AACZQ,aAAWsE,SAAX,CAAqBk7C,iBAArB,GAAyC,YAAW;AAClD;AACA;AACA,QAAIC,QAAQ,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAAZ;AACA,WAAOA,KAAP;AACD,GALD;;AAOAz/C,aAAWsE,SAAX,CAAqBJ,kBAArB,GAA0C,YAAW;;AAEnD;AACA,QAAIw7C,WAAJ,EAAiBn8C,IAAjB,EAAuBS,OAAvB,EAAgC+oC,GAAhC;;AAEA2S,kBAAclgD,EAAEyI,QAAF,EAAd;;AAEA;AACA;AACA,QAAI,CAAC,KAAKzE,SAAV,EAAqB;AACnB,UAAIhE,EAAE,MAAF,EAAUsB,IAAV,CAAe,MAAf,CAAJ,EAA4B;AAC1ByC,eAAO/D,EAAE,MAAF,EAAUsB,IAAV,CAAe,MAAf,CAAP;AACD,OAFD,MAGK,IAAItB,EAAE,MAAF,EAAUsB,IAAV,CAAe,MAAf,CAAJ,EAA4B;AAC/ByC,eAAO/D,EAAE,MAAF,EAAUsB,IAAV,CAAe,MAAf,CAAP;AACD;AACD,UAAIyC,SAAS,KAAKA,IAAlB,EAAwB;AACtBwpC,cAAM,2BAA2BxpC,IAA3B,GAAiC,IAAvC;AACA,YAAI/D,EAAEghB,OAAF,CAAUjd,IAAV,EAAe,KAAKi8C,iBAAL,EAAf,MAA6C,CAAC,CAAlD,EAAqD;AACnD;AACAzS,iBAAO,qCAAP;AACA,eAAKxpC,IAAL,GAAYA,IAAZ;AACD,SAJD,MAKK;AACHwpC,iBAAO,0DAA0D,KAAKxpC,IAA/D,GAAsE,GAA7E;AACD;AACD,YAAI,KAAKrC,KAAT,EAAgB;AACdgH,kBAAQyB,GAAR,CAAYojC,GAAZ;AACD;AACF;AACF;;AAED;AACA;;;AAGJ,QAAI4S,KAAK;;AAET,uBAAiB,cAFR;;AAIT,gBAAU,WAJD;;AAMT,gBAAU,WAND;;AAQT,kBAAY,SARH;;AAUT,oBAAc,eAVL;;AAYT,cAAQ,WAZC;;AAcT,eAAS,OAdA;;AAgBT,cAAQ,UAhBC;;AAkBT,iBAAW,UAlBF;;AAoBT,qBAAe,oBApBN;;AAsBT,qBAAe,iBAtBN;;AAwBT,mBAAa,kBAxBJ;;AA0BT,mBAAa,eA1BJ;;AA4BT,gBAAU,iBA5BD;;AA8BT,iBAAW,mBA9BF;;AAgCT,kBAAY,YAhCH;;AAkCT,sBAAgB,qBAlCP;;AAoCT,sBAAgB,uBApCP;;AAsCT,qBAAe,wBAtCN;;AAwCT,wBAAkB,wBAxCT;;AA0CT,wBAAkB,yBA1CT;;AA4CT,4BAAsB,8BA5Cb;;AA8CT,6BAAuB,8BA9Cd;;AAgDT,kBAAY,SAhDH;;AAkDT,cAAQ,iBAlDC;;AAoDT,kBAAY,0BApDH;;AAsDT,kBAAY,4BAtDH;;AAwDT,sBAAgB,UAxDP;;AA0DT,cAAQ,iBA1DC;;AA4DT,gBAAU,iBA5DD;;AA8DT,gBAAU,YA9DD;;AAgET,oBAAc,2DAhEL;;AAkET,sBAAgB,kBAlEP;;AAoET,4BAAsB,4BApEb;;AAsET,qBAAe,eAtEN;;AAwET,yBAAmB,2BAxEV;;AA0ET,wBAAkB,yBA1ET;;AA4ET,oBAAc,eA5EL;;AA8ET,eAAS,iBA9EA;;AAgFT,aAAO,KAhFE;;AAkFT,YAAM,MAlFG;;AAoFT,kBAAY,WApFH;;AAsFT,yBAAmB,eAtFV;;AAwFT,qBAAe,MAxFN;;AA0FT,oBAAc,sBA1FL;;AA4FT,iBAAW,WA5FF;;AA8FT,uBAAiB,WA9FR;;AAgGT,sBAAgB,UAhGP;;AAkGT,uBAAiB,YAlGR;;AAoGT,uBAAiB,SApGR;;AAsGT,yBAAmB,2BAtGV;;AAwGT,yBAAmB,2CAxGV;;AA0GT,2BAAqB,yCA1GZ;;AA4GT,2BAAqB,4CA5GZ;;AA8GT,6BAAuB,0CA9Gd;;AAgHT,2BAAqB,gCAhHZ;;AAkHT,mBAAa,iBAlHJ;;AAoHT,uBAAiB,oBApHR;;AAsHT,+BAAyB,gDAtHhB;;AAwHT,kCAA4B,iDAxHnB;;AA0HT,wBAAkB,gDA1HT;;AA4HT,wBAAkB,iDA5HT;;AA8HT,kBAAY,YA9HH;;AAgIT,0BAAoB,YAhIX;;AAkIT,8BAAwB,oBAlIf;;AAoIT,0BAAoB,UApIX;;AAsIT,4BAAsB,eAtIb;;AAwIT,2BAAqB,0BAxIZ;;AA0IT,+BAAyB,gCA1IhB;;AA4IT,2BAAqB,wBA5IZ;;AA8IT,6BAAuB,6BA9Id;;AAgJT,2BAAqB,mEAhJZ;;AAkJT,+BAAyB,8DAlJhB;;AAoJT,+BAAyB,yBApJhB;;AAsJT,kCAA4B,gDAtJnB;;AAwJT,+BAAyB,2EAxJhB;;AA0JT,+BAAyB,mGA1JhB;;AA4JT,4BAAsB,sGA5Jb;;AA8JT,4BAAsB,gFA9Jb;;AAgKT,4BAAsB,+IAhKb;;AAkKT,6BAAuB,oEAlKd;;AAoKT,2BAAqB,+DApKZ;;AAsKT,8BAAwB,wCAtKf;;AAwKT,8BAAwB,mCAxKf;;AA0KT,gCAA0B,kBA1KjB;;AA4KT,oCAA8B,+BA5KrB;;AA8KT,6BAAuB,YA9Kd;;AAgLT,+BAAyB,2BAhLhB;;AAkLT,oBAAc,KAlLL;;AAoLT,qBAAe,MApLN;;AAsLT,sBAAgB,eAtLP;;AAwLT,mBAAa,WAxLJ;;AA0LT,2BAAqB,yBA1LZ;;AA4LT,wBAAkB,oBA5LT;;AA8LT,4BAAsB,8DA9Lb;;AAgMT,+BAAyB,uDAhMhB;;AAkMT,gCAA0B,+CAlMjB;;AAoMT,+BAAyB,sEApMhB;;AAsMT,gCAA0B,oCAtMjB;;AAwMT,uBAAiB,2EAxMR;;AA0MT,yBAAmB,yEA1MV;;AA4MT,uBAAiB,+DA5MR;;AA8MT,sBAAgB,qDA9MP;;AAgNT,0BAAoB,YAhNX;;AAkNT,2BAAqB,cAlNZ;;AAoNT,6BAAuB,aApNd;;AAsNT,0BAAoB,aAtNX;;AAwNT,6BAAuB,WAxNd;;AA0NT,2BAAqB,MA1NZ;;AA4NT,eAAS,gBA5NA;;AA8NT,cAAQ,qBA9NC;;AAgOT,iBAAW,QAhOF;;AAkOT,iBAAW,iBAlOF;;AAoOT,mBAAa,4BApOJ;;AAsOT,eAAS,MAtOA;;AAwOT,gBAAU,MAxOD;;AA0OT,eAAS,MA1OA;;AA4OT,cAAQ,MA5OC;;AA8OT,cAAQ,MA9OC;;AAgPT,iBAAW,SAhPF;;AAkPT,aAAO,KAlPE;;AAoPT,eAAS,SApPA;;AAsPT,qBAAe,aAtPN;;AAwPT,eAAS,gBAxPA;;AA0PT,4BAAsB,QA1Pb;;AA4PT,6BAAuB,SA5Pd;;AA8PT,8BAAwB,UA9Pf;;AAgQT,iCAA2B,YAhQlB;;AAkQT,+BAAyB,WAlQhB;;AAoQT,2BAAqB,cApQZ;;AAsQT,qBAAe,qCAtQN;;AAwQT,sBAAgB,uCAxQP;;AA0QT,cAAQ,OA1QC;;AA4QT,mBAAa,OA5QJ;;AA8QT,cAAQ,WA9QC;;AAgRT,gBAAU,WAhRD;;AAkRT,YAAM,IAlRG;;AAoRT,cAAQ,QApRC;;AAsRT,0BAAoB,WAtRX;;AAwRT,2BAAqB,wBAxRZ;;AA0RT,oBAAc,aA1RL;;AA4RT,yBAAmB,yEA5RV;;AA8RT,sBAAgB,iBA9RP;;AAgST,6BAAuB,mCAhSd;;AAkST,2BAAqB,4BAlSZ;;AAoST,eAAS,QApSA;;AAsST,gBAAU,MAtSD;;AAwST,wBAAkB,gCAxST;;AA0ST,6BAAuB,iFA1Sd;;AA4ST,wBAAkB,0BA5ST;;AA8ST,6BAAuB;;AA9Sd,KAAT;AAiTA,QAAIC,KAAK;;AAET,uBAAiB,cAFR;;AAIT,gBAAU,QAJD;;AAMT,gBAAU,QAND;;AAQT,cAAQ,MARC;;AAUT,eAAS,OAVA;;AAYT,cAAQ,MAZC;;AAcT,iBAAW,SAdF;;AAgBT,qBAAe,kBAhBN;;AAkBT,qBAAe,cAlBN;;AAoBT,mBAAa,gBApBJ;;AAsBT,mBAAa,YAtBJ;;AAwBT,gBAAU,QAxBD;;AA0BT,iBAAW,SA1BF;;AA4BT,kBAAY,UA5BH;;AA8BT,sBAAgB,eA9BP;;AAgCT,sBAAgB,eAhCP;;AAkCT,qBAAe,cAlCN;;AAoCT,wBAAkB,iBApCT;;AAsCT,wBAAkB,iBAtCT;;AAwCT,4BAAsB,sBAxCb;;AA0CT,6BAAuB,uBA1Cd;;AA4CT,kBAAY,UA5CH;;AA8CT,oBAAc,aA9CL;;AAgDT,kBAAY,UAhDH;;AAkDT,cAAQ,eAlDC;;AAoDT,kBAAY,oBApDH;;AAsDT,kBAAY,oBAtDH;;AAwDT,sBAAgB,UAxDP;;AA0DT,cAAQ,MA1DC;;AA4DT,gBAAU,QA5DD;;AA8DT,gBAAU,QA9DD;;AAgET,oBAAc,+BAhEL;;AAkET,sBAAgB,gBAlEP;;AAoET,4BAAsB,sBApEb;;AAsET,qBAAe,aAtEN;;AAwET,yBAAmB,mBAxEV;;AA0ET,wBAAkB,kBA1ET;;AA4ET,oBAAc,aA5EL;;AA8ET,eAAS,OA9EA;;AAgFT,aAAO,KAhFE;;AAkFT,YAAM,IAlFG;;AAoFT,kBAAY,UApFH;;AAsFT,yBAAmB,YAtFV;;AAwFT,qBAAe,QAxFN;;AA0FT,oBAAc,aA1FL;;AA4FT,iBAAW,SA5FF;;AA8FT,uBAAiB,SA9FR;;AAgGT,sBAAgB,QAhGP;;AAkGT,uBAAiB,SAlGR;;AAoGT,uBAAiB,SApGR;;AAsGT,yBAAmB,WAtGV;;AAwGT,yBAAmB,yBAxGV;;AA0GT,2BAAqB,2BA1GZ;;AA4GT,2BAAqB,6BA5GZ;;AA8GT,6BAAuB,+BA9Gd;;AAgHT,2BAAqB,oBAhHZ;;AAkHT,mBAAa,cAlHJ;;AAoHT,uBAAiB,gBApHR;;AAsHT,+BAAyB,iDAtHhB;;AAwHT,kCAA4B,+CAxHnB;;AA0HT,wBAAkB,4CA1HT;;AA4HT,wBAAkB,iEA5HT;;AA8HT,kBAAY,WA9HH;;AAgIT,0BAAoB,UAhIX;;AAkIT,8BAAwB,cAlIf;;AAoIT,0BAAoB,UApIX;;AAsIT,4BAAsB,YAtIb;;AAwIT,2BAAqB,sBAxIZ;;AA0IT,+BAAyB,+BA1IhB;;AA4IT,2BAAqB,sBA5IZ;;AA8IT,6BAAuB,wBA9Id;;AAgJT,2BAAqB,+DAhJZ;;AAkJT,+BAAyB,4DAlJhB;;AAoJT,+BAAyB,wBApJhB;;AAsJT,kCAA4B,8DAtJnB;;AAwJT,+BAAyB,8EAxJhB;;AA0JT,+BAAyB,qGA1JhB;;AA4JT,4BAAsB,8HA5Jb;;AA8JT,4BAAsB,gEA9Jb;;AAgKT,4BAAsB,yLAhKb;;AAkKT,6BAAuB,8DAlKd;;AAoKT,2BAAqB,2CApKZ;;AAsKT,8BAAwB,kCAtKf;;AAwKT,8BAAwB,4BAxKf;;AA0KT,gCAA0B,mBA1KjB;;AA4KT,oCAA8B,8BA5KrB;;AA8KT,6BAAuB,UA9Kd;;AAgLT,+BAAyB,wBAhLhB;;AAkLT,oBAAc,KAlLL;;AAoLT,qBAAe,SApLN;;AAsLT,sBAAgB,OAtLP;;AAwLT,mBAAa,QAxLJ;;AA0LT,2BAAqB,oCA1LZ;;AA4LT,wBAAkB,kBA5LT;;AA8LT,4BAAsB,wDA9Lb;;AAgMT,+BAAyB,wCAhMhB;;AAkMT,gCAA0B,kCAlMjB;;AAoMT,+BAAyB,oDApMhB;;AAsMT,gCAA0B,wBAtMjB;;AAwMT,uBAAiB,mDAxMR;;AA0MT,yBAAmB,0BA1MV;;AA4MT,uBAAiB,qCA5MR;;AA8MT,sBAAgB,4BA9MP;;AAgNT,0BAAoB,MAhNX;;AAkNT,2BAAqB,YAlNZ;;AAoNT,6BAAuB,YApNd;;AAsNT,0BAAoB,WAtNX;;AAwNT,6BAAuB,SAxNd;;AA0NT,2BAAqB,OA1NZ;;AA4NT,eAAS,OA5NA;;AA8NT,cAAQ,YA9NC;;AAgOT,iBAAW,SAhOF;;AAkOT,iBAAW,SAlOF;;AAoOT,mBAAa,WApOJ;;AAsOT,eAAS,OAtOA;;AAwOT,gBAAU,QAxOD;;AA0OT,eAAS,OA1OA;;AA4OT,cAAQ,MA5OC;;AA8OT,cAAQ,MA9OC;;AAgPT,iBAAW,SAhPF;;AAkPT,aAAO,KAlPE;;AAoPT,eAAS,OApPA;;AAsPT,qBAAe,aAtPN;;AAwPT,eAAS,OAxPA;;AA0PT,4BAAsB,QA1Pb;;AA4PT,6BAAuB,SA5Pd;;AA8PT,8BAAwB,UA9Pf;;AAgQT,iCAA2B,SAhQlB;;AAkQT,+BAAyB,aAlQhB;;AAoQT,2BAAqB,qBApQZ;;AAsQT,qBAAe,+BAtQN;;AAwQT,sBAAgB,8BAxQP;;AA0QT,cAAQ,MA1QC;;AA4QT,mBAAa,MA5QJ;;AA8QT,cAAQ,MA9QC;;AAgRT,gBAAU,QAhRD;;AAkRT,YAAM,IAlRG;;AAoRT,cAAQ,MApRC;;AAsRT,0BAAoB,cAtRX;;AAwRT,2BAAqB,gBAxRZ;;AA0RT,oBAAc,MA1RL;;AA4RT,yBAAmB,0DA5RV;;AA8RT,sBAAgB,QA9RP;;AAgST,6BAAuB,eAhSd;;AAkST,2BAAqB,8BAlSZ;;AAoST,eAAS,OApSA;;AAsST,gBAAU,QAtSD;;AAwST,wBAAkB,cAxST;;AA0ST,6BAAuB,sDA1Sd;;AA4ST,wBAAkB,gBA5ST;;AA8ST,6BAAuB;;AA9Sd,KAAT;;AAkTA,QAAIC,KAAK;;AAET,uBAAiB,cAFR;;AAIT,gBAAU,QAJD;;AAMT,gBAAU,OAND;;AAQT,cAAQ,MARC;;AAUT,eAAS,OAVA;;AAYT,cAAQ,SAZC;;AAcT,iBAAW,WAdF;;AAgBT,qBAAe,mBAhBN;;AAkBT,qBAAe,oBAlBN;;AAoBT,mBAAa,gBApBJ;;AAsBT,mBAAa,iBAtBJ;;AAwBT,gBAAU,WAxBD;;AA0BT,iBAAW,WA1BF;;AA4BT,kBAAY,YA5BH;;AA8BT,sBAAgB,oBA9BP;;AAgCT,sBAAgB,oBAhCP;;AAkCT,qBAAe,gBAlCN;;AAoCT,wBAAkB,uBApCT;;AAsCT,wBAAkB,uBAtCT;;AAwCT,4BAAsB,yBAxCb;;AA0CT,6BAAuB,4BA1Cd;;AA4CT,kBAAY,WA5CH;;AA8CT,oBAAc,gBA9CL;;AAgDT,kBAAY,QAhDH;;AAkDT,cAAQ,iBAlDC;;AAoDT,kBAAY,yBApDH;;AAsDT,kBAAY,yBAtDH;;AAwDT,sBAAgB,UAxDP;;AA0DT,cAAQ,WA1DC;;AA4DT,gBAAU,kBA5DD;;AA8DT,gBAAU,SA9DD;;AAgET,oBAAc,yCAhEL;;AAkET,sBAAgB,cAlEP;;AAoET,4BAAsB,0BApEb;;AAsET,qBAAe,cAtEN;;AAwET,yBAAmB,yBAxEV;;AA0ET,wBAAkB,4BA1ET;;AA4ET,oBAAc,mBA5EL;;AA8ET,eAAS,WA9EA;;AAgFT,aAAO,GAhFE;;AAkFT,YAAM,GAlFG;;AAoFT,kBAAY,mBApFH;;AAsFT,yBAAmB,YAtFV;;AAwFT,qBAAe,OAxFN;;AA0FT,oBAAc,2BA1FL;;AA4FT,iBAAW,aA5FF;;AA8FT,uBAAiB,eA9FR;;AAgGT,sBAAgB,SAhGP;;AAkGT,uBAAiB,UAlGR;;AAoGT,uBAAiB,WApGR;;AAsGT,yBAAmB,aAtGV;;AAwGT,yBAAmB,6BAxGV;;AA0GT,2BAAqB,2BA1GZ;;AA4GT,2BAAqB,gCA5GZ;;AA8GT,6BAAuB,8BA9Gd;;AAgHT,2BAAqB,6BAhHZ;;AAkHT,mBAAa,cAlHJ;;AAoHT,uBAAiB,oBApHR;;AAsHT,+BAAyB,+CAtHhB;;AAwHT,kCAA4B,iDAxHnB;;AA0HT,wBAAkB,oDA1HT;;AA4HT,wBAAkB,yEA5HT;;AA8HT,kBAAY,YA9HH;;AAgIT,0BAAoB,YAhIX;;AAkIT,8BAAwB,eAlIf;;AAoIT,0BAAoB,SApIX;;AAsIT,4BAAsB,eAtIb;;AAwIT,2BAAqB,4BAxIZ;;AA0IT,+BAAyB,kCA1IhB;;AA4IT,2BAAqB,yBA5IZ;;AA8IT,6BAAuB,+BA9Id;;AAgJT,2BAAqB,yEAhJZ;;AAkJT,+BAAyB,+DAlJhB;;AAoJT,+BAAyB,wBApJhB;;AAsJT,kCAA4B,8DAtJnB;;AAwJT,+BAAyB,mGAxJhB;;AA0JT,+BAAyB,2HA1JhB;;AA4JT,4BAAsB,6IA5Jb;;AA8JT,4BAAsB,iFA9Jb;;AAgKT,4BAAsB,sOAhKb;;AAkKT,6BAAuB,qEAlKd;;AAoKT,2BAAqB,qDApKZ;;AAsKT,8BAAwB,wDAtKf;;AAwKT,8BAAwB,yCAxKf;;AA0KT,gCAA0B,eA1KjB;;AA4KT,oCAA8B,wBA5KrB;;AA8KT,6BAAuB,YA9Kd;;AAgLT,+BAAyB,2BAhLhB;;AAkLT,oBAAc,KAlLL;;AAoLT,qBAAe,SApLN;;AAsLT,sBAAgB,YAtLP;;AAwLT,mBAAa,QAxLJ;;AA0LT,2BAAqB,+CA1LZ;;AA4LT,wBAAkB,mBA5LT;;AA8LT,4BAAsB,iEA9Lb;;AAgMT,+BAAyB,yCAhMhB;;AAkMT,gCAA0B,yCAlMjB;;AAoMT,+BAAyB,uDApMhB;;AAsMT,gCAA0B,sBAtMjB;;AAwMT,uBAAiB,iEAxMR;;AA0MT,yBAAmB,8DA1MV;;AA4MT,uBAAiB,qDA5MR;;AA8MT,sBAAgB,qCA9MP;;AAgNT,0BAAoB,QAhNX;;AAkNT,2BAAqB,iBAlNZ;;AAoNT,6BAAuB,OApNd;;AAsNT,0BAAoB,kBAtNX;;AAwNT,6BAAuB,UAxNd;;AA0NT,2BAAqB,QA1NZ;;AA4NT,eAAS,OA5NA;;AA8NT,cAAQ,YA9NC;;AAgOT,iBAAW,SAhOF;;AAkOT,iBAAW,UAlOF;;AAoOT,mBAAa,gBApOJ;;AAsOT,eAAS,QAtOA;;AAwOT,gBAAU,UAxOD;;AA0OT,eAAS,OA1OA;;AA4OT,cAAQ,MA5OC;;AA8OT,cAAQ,MA9OC;;AAgPT,iBAAW,SAhPF;;AAkPT,aAAO,MAlPE;;AAoPT,eAAS,OApPA;;AAsPT,qBAAe,cAtPN;;AAwPT,eAAS,QAxPA;;AA0PT,4BAAsB,QA1Pb;;AA4PT,6BAAuB,SA5Pd;;AA8PT,8BAAwB,UA9Pf;;AAgQT,iCAA2B,QAhQlB;;AAkQT,+BAAyB,kBAlQhB;;AAoQT,2BAAqB,+BApQZ;;AAsQT,qBAAe,iCAtQN;;AAwQT,sBAAgB,+BAxQP;;AA0QT,cAAQ,OA1QC;;AA4QT,mBAAa,OA5QJ;;AA8QT,cAAQ,SA9QC;;AAgRT,gBAAU,UAhRD;;AAkRT,YAAM,IAlRG;;AAoRT,cAAQ,OApRC;;AAsRT,0BAAoB,0BAtRX;;AAwRT,2BAAqB,qBAxRZ;;AA0RT,oBAAc,OA1RL;;AA4RT,yBAAmB,oFA5RV;;AA8RT,sBAAgB,eA9RP;;AAgST,6BAAuB,4CAhSd;;AAkST,2BAAqB,oCAlSZ;;AAoST,eAAS,OApSA;;AAsST,gBAAU,MAtSD;;AAwST,wBAAkB,cAxST;;AA0ST,6BAAuB,+DA1Sd;;AA4ST,wBAAkB,iBA5ST;;AA8ST,6BAAuB;;AA9Sd,KAAT;;AAkTA,QAAIC,KAAK;;AAET,uBAAiB,oBAFR;;AAIT,gBAAU,iBAJD;;AAMT,gBAAU,gBAND;;AAQT,cAAQ,SARC;;AAUT,eAAS,OAVA;;AAYT,cAAQ,OAZC;;AAcT,iBAAW,YAdF;;AAgBT,qBAAe,qBAhBN;;AAkBT,qBAAe,mBAlBN;;AAoBT,mBAAa,kBApBJ;;AAsBT,mBAAa,gBAtBJ;;AAwBT,gBAAU,SAxBD;;AA0BT,iBAAW,SA1BF;;AA4BT,kBAAY,aA5BH;;AA8BT,sBAAgB,0BA9BP;;AAgCT,sBAAgB,yBAhCP;;AAkCT,qBAAe,wBAlCN;;AAoCT,wBAAkB,2BApCT;;AAsCT,wBAAkB,0BAtCT;;AAwCT,4BAAsB,0BAxCb;;AA0CT,6BAAuB,6BA1Cd;;AA4CT,kBAAY,WA5CH;;AA8CT,oBAAc,kBA9CL;;AAgDT,kBAAY,QAhDH;;AAkDT,cAAQ,iBAlDC;;AAoDT,kBAAY,6BApDH;;AAsDT,kBAAY,2BAtDH;;AAwDT,sBAAgB,UAxDP;;AA0DT,cAAQ,eA1DC;;AA4DT,gBAAU,YA5DD;;AA8DT,gBAAU,QA9DD;;AAgET,oBAAc,2CAhEL;;AAkET,sBAAgB,0BAlEP;;AAoET,4BAAsB,yBApEb;;AAsET,qBAAe,aAtEN;;AAwET,yBAAmB,6BAxEV;;AA0ET,wBAAkB,6BA1ET;;AA4ET,oBAAc,aA5EL;;AA8ET,eAAS,SA9EA;;AAgFT,aAAO,IAhFE;;AAkFT,YAAM,IAlFG;;AAoFT,kBAAY,oBApFH;;AAsFT,yBAAmB,eAtFV;;AAwFT,qBAAe,SAxFN;;AA0FT,oBAAc,wBA1FL;;AA4FT,iBAAW,SA5FF;;AA8FT,uBAAiB,kBA9FR;;AAgGT,sBAAgB,mBAhGP;;AAkGT,uBAAiB,qBAlGR;;AAoGT,uBAAiB,SApGR;;AAsGT,yBAAmB,YAtGV;;AAwGT,yBAAmB,mCAxGV;;AA0GT,2BAAqB,kCA1GZ;;AA4GT,2BAAqB,uCA5GZ;;AA8GT,6BAAuB,sCA9Gd;;AAgHT,2BAAqB,kCAhHZ;;AAkHT,mBAAa,iBAlHJ;;AAoHT,uBAAiB,eApHR;;AAsHT,+BAAyB,kEAtHhB;;AAwHT,kCAA4B,sDAxHnB;;AA0HT,wBAAkB,uDA1HT;;AA4HT,wBAAkB,iFA5HT;;AA8HT,kBAAY,+BA9HH;;AAgIT,0BAAoB,aAhIX;;AAkIT,8BAAwB,cAlIf;;AAoIT,0BAAoB,SApIX;;AAsIT,4BAAsB,eAtIb;;AAwIT,2BAAqB,mCAxIZ;;AA0IT,+BAAyB,4CA1IhB;;AA4IT,2BAAqB,8BA5IZ;;AA8IT,6BAAuB,qCA9Id;;AAgJT,2BAAqB,yEAhJZ;;AAkJT,+BAAyB,kFAlJhB;;AAoJT,+BAAyB,qBApJhB;;AAsJT,kCAA4B,6GAtJnB;;AAwJT,+BAAyB,6FAxJhB;;AA0JT,+BAAyB,6HA1JhB;;AA4JT,4BAAsB,qKA5Jb;;AA8JT,4BAAsB,4FA9Jb;;AAgKT,4BAAsB,yPAhKb;;AAkKT,6BAAuB,0EAlKd;;AAoKT,2BAAqB,0EApKZ;;AAsKT,8BAAwB,uDAtKf;;AAwKT,8BAAwB,6CAxKf;;AA0KT,gCAA0B,oBA1KjB;;AA4KT,oCAA8B,8BA5KrB;;AA8KT,6BAAuB,aA9Kd;;AAgLT,+BAAyB,2BAhLhB;;AAkLT,oBAAc,KAlLL;;AAoLT,qBAAe,MApLN;;AAsLT,sBAAgB,OAtLP;;AAwLT,mBAAa,KAxLJ;;AA0LT,2BAAqB,qDA1LZ;;AA4LT,wBAAkB,mBA5LT;;AA8LT,4BAAsB,yDA9Lb;;AAgMT,+BAAyB,4CAhMhB;;AAkMT,gCAA0B,gCAlMjB;;AAoMT,+BAAyB,0DApMhB;;AAsMT,gCAA0B,uBAtMjB;;AAwMT,uBAAiB,wEAxMR;;AA0MT,yBAAmB,yBA1MV;;AA4MT,uBAAiB,+CA5MR;;AA8MT,sBAAgB,mCA9MP;;AAgNT,0BAAoB,sBAhNX;;AAkNT,2BAAqB,kBAlNZ;;AAoNT,6BAAuB,cApNd;;AAsNT,0BAAoB,qBAtNX;;AAwNT,6BAAuB,SAxNd;;AA0NT,2BAAqB,OA1NZ;;AA4NT,eAAS,kBA5NA;;AA8NT,cAAQ,kBA9NC;;AAgOT,iBAAW,kBAhOF;;AAkOT,iBAAW,uBAlOF;;AAoOT,mBAAa,eApOJ;;AAsOT,eAAS,OAtOA;;AAwOT,gBAAU,OAxOD;;AA0OT,eAAS,MA1OA;;AA4OT,cAAQ,MA5OC;;AA8OT,cAAQ,MA9OC;;AAgPT,iBAAW,SAhPF;;AAkPT,aAAO,OAlPE;;AAoPT,eAAS,MApPA;;AAsPT,qBAAe,aAtPN;;AAwPT,eAAS,QAxPA;;AA0PT,4BAAsB,QA1Pb;;AA4PT,6BAAuB,SA5Pd;;AA8PT,8BAAwB,UA9Pf;;AAgQT,iCAA2B,YAhQlB;;AAkQT,+BAAyB,eAlQhB;;AAoQT,2BAAqB,2BApQZ;;AAsQT,qBAAe,sCAtQN;;AAwQT,sBAAgB,sCAxQP;;AA0QT,cAAQ,MA1QC;;AA4QT,mBAAa,MA5QJ;;AA8QT,cAAQ,aA9QC;;AAgRT,gBAAU,SAhRD;;AAkRT,YAAM,IAlRG;;AAoRT,cAAQ,SApRC;;AAsRT,0BAAoB,oBAtRX;;AAwRT,2BAAqB,oBAxRZ;;AA0RT,oBAAc,UA1RL;;AA4RT,yBAAmB,8HA5RV;;AA8RT,sBAAgB,gBA9RP;;AAgST,6BAAuB,2CAhSd;;AAkST,2BAAqB,kCAlSZ;;AAoST,eAAS,SApSA;;AAsST,gBAAU,SAtSD;;AAwST,wBAAkB,wBAxST;;AA0ST,6BAAuB,oEA1Sd;;AA4ST,wBAAkB,wBA5ST;;AA8ST,6BAAuB;;AA9Sd,KAAT;;AAkTA,QAAIC,KAAK;;AAET,uBAAiB,WAFR;;AAIT,gBAAU,KAJD;;AAMT,gBAAU,KAND;;AAQT,cAAQ,IARC;;AAUT,eAAS,MAVA;;AAYT,cAAQ,IAZC;;AAcT,iBAAW,IAdF;;AAgBT,qBAAe,SAhBN;;AAkBT,qBAAe,SAlBN;;AAoBT,mBAAa,QApBJ;;AAsBT,mBAAa,QAtBJ;;AAwBT,gBAAU,MAxBD;;AA0BT,iBAAW,KA1BF;;AA4BT,kBAAY,QA5BH;;AA8BT,sBAAgB,aA9BP;;AAgCT,sBAAgB,eAhCP;;AAkCT,qBAAe,WAlCN;;AAoCT,wBAAkB,UApCT;;AAsCT,wBAAkB,cAtCT;;AAwCT,4BAAsB,SAxCb;;AA0CT,6BAAuB,WA1Cd;;AA4CT,kBAAY,OA5CH;;AA8CT,oBAAc,UA9CL;;AAgDT,kBAAY,IAhDH;;AAkDT,cAAQ,IAlDC;;AAoDT,kBAAY,OApDH;;AAsDT,kBAAY,QAtDH;;AAwDT,sBAAgB,UAxDP;;AA0DT,cAAQ,IA1DC;;AA4DT,gBAAU,MA5DD;;AA8DT,gBAAU,IA9DD;;AAgET,oBAAc,qBAhEL;;AAkET,sBAAgB,OAlEP;;AAoET,4BAAsB,WApEb;;AAsET,qBAAe,IAtEN;;AAwET,yBAAmB,OAxEV;;AA0ET,wBAAkB,UA1ET;;AA4ET,oBAAc,OA5EL;;AA8ET,eAAS,MA9EA;;AAgFT,aAAO,GAhFE;;AAkFT,YAAM,KAlFG;;AAoFT,kBAAY,QApFH;;AAsFT,yBAAmB,OAtFV;;AAwFT,qBAAe,IAxFN;;AA0FT,oBAAc,SA1FL;;AA4FT,iBAAW,IA5FF;;AA8FT,uBAAiB,KA9FR;;AAgGT,sBAAgB,OAhGP;;AAkGT,uBAAiB,IAlGR;;AAoGT,uBAAiB,KApGR;;AAsGT,yBAAmB,UAtGV;;AAwGT,yBAAmB,aAxGV;;AA0GT,2BAAqB,cA1GZ;;AA4GT,2BAAqB,iBA5GZ;;AA8GT,6BAAuB,qBA9Gd;;AAgHT,2BAAqB,iBAhHZ;;AAkHT,mBAAa,UAlHJ;;AAoHT,uBAAiB,WApHR;;AAsHT,+BAAyB,uBAtHhB;;AAwHT,kCAA4B,qBAxHnB;;AA0HT,wBAAkB,+BA1HT;;AA4HT,wBAAkB,oCA5HT;;AA8HT,kBAAY,IA9HH;;AAgIT,0BAAoB,QAhIX;;AAkIT,8BAAwB,MAlIf;;AAoIT,0BAAoB,OApIX;;AAsIT,4BAAsB,IAtIb;;AAwIT,2BAAqB,WAxIZ;;AA0IT,+BAAyB,SA1IhB;;AA4IT,2BAAqB,UA5IZ;;AA8IT,6BAAuB,OA9Id;;AAgJT,2BAAqB,mCAhJZ;;AAkJT,+BAAyB,oCAlJhB;;AAoJT,+BAAyB,sBApJhB;;AAsJT,kCAA4B,8BAtJnB;;AAwJT,+BAAyB,gCAxJhB;;AA0JT,+BAAyB,gDA1JhB;;AA4JT,4BAAsB,sEA5Jb;;AA8JT,4BAAsB,6CA9Jb;;AAgKT,4BAAsB,gGAhKb;;AAkKT,6BAAuB,0BAlKd;;AAoKT,2BAAqB,uBApKZ;;AAsKT,8BAAwB,cAtKf;;AAwKT,8BAAwB,kBAxKf;;AA0KT,gCAA0B,MA1KjB;;AA4KT,oCAA8B,aA5KrB;;AA8KT,6BAAuB,QA9Kd;;AAgLT,+BAAyB,aAhLhB;;AAkLT,oBAAc,KAlLL;;AAoLT,qBAAe,SApLN;;AAsLT,sBAAgB,OAtLP;;AAwLT,mBAAa,QAxLJ;;AA0LT,2BAAqB,yBA1LZ;;AA4LT,wBAAkB,WA5LT;;AA8LT,4BAAsB,iCA9Lb;;AAgMT,+BAAyB,kBAhMhB;;AAkMT,gCAA0B,cAlMjB;;AAoMT,+BAAyB,iCApMhB;;AAsMT,gCAA0B,WAtMjB;;AAwMT,uBAAiB,sBAxMR;;AA0MT,yBAAmB,aA1MV;;AA4MT,uBAAiB,wBA5MR;;AA8MT,sBAAgB,cA9MP;;AAgNT,0BAAoB,MAhNX;;AAkNT,2BAAqB,KAlNZ;;AAoNT,6BAAuB,KApNd;;AAsNT,0BAAoB,SAtNX;;AAwNT,6BAAuB,MAxNd;;AA0NT,2BAAqB,IA1NZ;;AA4NT,eAAS,OA5NA;;AA8NT,cAAQ,YA9NC;;AAgOT,iBAAW,SAhOF;;AAkOT,iBAAW,SAlOF;;AAoOT,mBAAa,WApOJ;;AAsOT,eAAS,GAtOA;;AAwOT,gBAAU,IAxOD;;AA0OT,eAAS,GA1OA;;AA4OT,cAAQ,KA5OC;;AA8OT,cAAQ,GA9OC;;AAgPT,iBAAW,MAhPF;;AAkPT,aAAO,GAlPE;;AAoPT,eAAS,GApPA;;AAsPT,qBAAe,IAtPN;;AAwPT,eAAS,KAxPA;;AA0PT,4BAAsB,QA1Pb;;AA4PT,6BAAuB,SA5Pd;;AA8PT,8BAAwB,IA9Pf;;AAgQT,iCAA2B,UAhQlB;;AAkQT,+BAAyB,OAlQhB;;AAoQT,2BAAqB,YApQZ;;AAsQT,qBAAe,aAtQN;;AAwQT,sBAAgB,eAxQP;;AA0QT,cAAQ,KA1QC;;AA4QT,mBAAa,KA5QJ;;AA8QT,cAAQ,IA9QC;;AAgRT,gBAAU,OAhRD;;AAkRT,YAAM,IAlRG;;AAoRT,cAAQ,IApRC;;AAsRT,0BAAoB,WAtRX;;AAwRT,2BAAqB,UAxRZ;;AA0RT,oBAAc,IA1RL;;AA4RT,yBAAmB,wCA5RV;;AA8RT,sBAAgB,SA9RP;;AAgST,6BAAuB,aAhSd;;AAkST,2BAAqB,oBAlSZ;;AAoST,eAAS,GApSA;;AAsST,gBAAU,IAtSD;;AAwST,wBAAkB,OAxST;;AA0ST,6BAAuB,mCA1Sd;;AA4ST,wBAAkB,OA5ST;;AA8ST,6BAAuB;;AA9Sd,KAAT;;AAkTA;;AAEI,SAAKh8C,EAAL,GAAUi8C,KAAK,KAAKz8C,IAAV,CAAV;;AAEA;AACAm8C,gBAAYx2C,OAAZ;AACA,WAAOw2C,YAAY53C,OAAZ,EAAP;AACD,GApiDD;AAqiDD,CA7iDD,EA6iDGlD,MA7iDH;;AA+iDA;AACA,CAAC,CAAC,UAASpF,CAAT,EAAW;;AAET;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CAA,IAAE84B,MAAF,GAAW,UAAShkB,OAAT,EAAkB;;AAEzB,WAAO9U,EAAEyI,QAAF,CAAW,UAASg4C,GAAT,EAAa;;AAE3B,UAAIC,MAAM1gD,EAAE2gD,MAAF,CAAS,EAAT,EAAa;AACfl8C,cAAY,IADG;AAEfqd,cAAY,gBAAU,CAAE,CAFT;AAGfkX,kBAAY,GAHG;AAIfC,kBAAY,GAJG;AAKf2nB,iBAAY;AALG,OAAb,EAON9rC,OAPM,EAQN;AACI+rC,iBAAS;AADb,OARM,CAAV;AAAA,UAWIC,gBAAgB,SAAhBA,aAAgB,GAAU;;AAEtB;AACA,YAAIJ,IAAIj8C,IAAJ,OAAe,IAAnB,EAAyB;;AAErBi8C,cAAI5+B,IAAJ,CAASi/B,IAAT,CAAcN,IAAIn4C,OAAJ,EAAd;AACAm4C,cAAI/2C,OAAJ;AACA;AAEH;;AAED;AACAg3C,YAAIG,OAAJ,GAAc9G,YAAY,YAAU;;AAE5B,cAAI2G,IAAIznB,QAAJ,KAAiB,CAArB,EAAwB;;AAEpB+nB,0BAAcN,IAAIG,OAAlB;AACAJ,gBAAIxzC,MAAJ;AAEH,WALD,MAKO;;AAEH,cAAEyzC,IAAIznB,QAAN;;AAEA,gBAAIynB,IAAIj8C,IAAJ,OAAe,IAAnB,EAAyB;;AAErBi8C,kBAAIznB,QAAJ,GAAe,CAAf;AACA+nB,4BAAcN,IAAIG,OAAlB;AACAH,kBAAI5+B,IAAJ,CAASi/B,IAAT,CAAcN,IAAIn4C,OAAJ,EAAd;AACAm4C,kBAAI/2C,OAAJ;AAEH;AAEJ;AAEJ,SAtBS,EAsBPg3C,IAAI1nB,QAtBG,CAAd;AAwBH,OA/CL;;AAiDA,UAAI0nB,IAAIE,OAAJ,GAAc,CAAlB,EAAqB;;AAEjB92B,mBAAWg3B,aAAX,EAA0B7R,OAAOyR,IAAIE,OAAX,CAA1B;AAEH,OAJD,MAIO;;AAEHE;AAEH;AAEJ,KA7DM,EA6DJx4C,OA7DI,EAAP;AA+DH,GAjED;AAmEH,CA/GA,EA+GElD,MA/GF","file":"ableplayer.049e2704.map","sourcesContent":["/*\n  // JavaScript for Able Player\n\n  // HTML5 Media API:\n  // http://www.w3.org/TR/html5/embedded-content-0.html#htmlmediaelement\n  // http://dev.w3.org/html5/spec-author-view/video.html\n\n  // W3C API Test Page:\n  // http://www.w3.org/2010/05/video/mediaevents.html\n\n  // Uses JW Player as fallback\n  // JW Player configuration options:\n  // http://support.jwplayer.com/customer/portal/articles/1413113-configuration-options-reference\n  // (NOTE: some options are not documented, e.g., volume)\n  // JW Player 6 API reference:\n  // http://support.jwplayer.com/customer/portal/articles/1413089-javascript-api-reference\n\n  // YouTube Player API for iframe Embeds\n  https://developers.google.com/youtube/iframe_api_reference\n  // YouTube Player Parameters\n  https://developers.google.com/youtube/player_parameters?playerVersion=HTML5\n\n  // YouTube Data API\n  https://developers.google.com/youtube/v3\n\n  // Google API Client Library for JavaScript\n  https://developers.google.com/api-client-library/javascript/dev/dev_jscript\n\n  // Google API Explorer: YouTube services and methods\n  https://developers.google.com/apis-explorer/#s/youtube/v3/\n*/\n\n/*jslint node: true, browser: true, white: true, indent: 2, unparam: true, plusplus: true */\n/*global $, jQuery */\n\"use strict\";\n\n(function ($) {\n  $(document).ready(function () {\n    $('video, audio').each(function (index, element) {\n      if ($(element).data('able-player') !== undefined) {\n        new AblePlayer($(this),$(element));\n      }\n    });\n  });\n\n  // YouTube player support; pass ready event to jQuery so we can catch in player.\n  window.onYouTubeIframeAPIReady = function() {\n    AblePlayer.youtubeIframeAPIReady = true;\n    $('body').trigger('youtubeIframeAPIReady', []);\n  };\n\n  // If there is only one player on the page, dispatch global keydown events to it\n  // Otherwise, keydowwn events are handled locally (see event.js > handleEventListeners())\n  $(window).keydown(function(e) {\n    if (AblePlayer.nextIndex === 1) {\n      AblePlayer.lastCreated.onPlayerKeyPress(e);\n    }\n  });\n\n  // Construct an AblePlayer object\n  // Parameters are:\n  // media - jQuery selector or element identifying the media.\n  window.AblePlayer = function(media) {\n\n    // Keep track of the last player created for use with global events.\n    AblePlayer.lastCreated = this;\n\n    this.media = media;\n    if ($(media).length === 0) {\n      this.provideFallback('ERROR: No media specified.');\n      return;\n    }\n\n    // Define built-in variables that CANNOT be overridden with HTML attributes\n    this.setDefaults();\n\n    ///////////////////////////////\n    //\n    // Default variables assignment\n    //\n    ///////////////////////////////\n\n    // The following variables CAN be overridden with HTML attributes\n\n    // autoplay\n    if ($(media).attr('autoplay') !== undefined && $(media).attr('autoplay') !== \"false\") {\n      this.autoplay = true;\n    }\n    else {\n      this.autoplay = false;\n    }\n\n    // loop (NOT FULLY SUPPORTED)\n    if ($(media).attr('loop') !== undefined && $(media).attr('loop') !== \"false\") {\n      this.loop = true;\n    }\n    else {\n      this.loop = false;\n    }\n\n    // start-time\n    if ($(media).data('start-time') !== undefined && $(media).data('start-time') !== \"\") {\n      this.startTime = $(media).data('start-time');\n    }\n    else {\n      this.startTime = 0;\n    }\n\n    // debug\n    if ($(media).data('debug') !== undefined && $(media).data('debug') !== \"false\") {\n      this.debug = true;\n    }\n    else {\n      this.debug = false;\n    }\n\n    // Path to root directory of Able Player code\n    if ($(media).data('root-path') !== undefined) {\n      // remove trailing slashes if there are any\n      this.rootPath = $(media).data('root-path').replace(/\\/+$/, \"\");\n    }\n    else {\n      this.rootPath = this.getRootWebSitePath();\n    }\n\n    // Volume\n    // Range is 0 to 10. Best not to crank it to avoid overpowering screen readers\n    this.defaultVolume = 7;\n    if ($(media).data('volume') !== undefined && $(media).data('volume') !== \"\") {\n      var volume = $(media).data('volume');\n      if (volume >= 0 && volume <= 10) {\n        this.defaultVolume = volume;\n      }\n    }\n    this.volume = this.defaultVolume;\n\n\n    // Optional Buttons\n    // Buttons are added to the player controller if relevant media is present\n    // However, in some applications it might be undesirable to show buttons\n    // (e.g., if chapters or transcripts are provided in an external container)\n\n    if ($(media).data('use-chapters-button') !== undefined && $(media).data('use-chapters-button') === false) {\n      this.useChaptersButton = false;\n    }\n    else {\n      this.useChaptersButton = true;\n    }\n\n    if ($(media).data('use-transcript-button') !== undefined && $(media).data('use-transcript-button') === false) {\n      this.useTranscriptButton = false;\n    }\n    else {\n      this.useTranscriptButton = true;\n    }\n\n    if ($(media).data('use-descriptions-button') !== undefined && $(media).data('use-descriptions-button') === false) {\n      this.useDescriptionsButton = false;\n    }\n    else {\n      this.useDescriptionsButton = true;\n    }\n\n    // Transcripts\n    // There are three types of interactive transcripts.\n    // In descending of order of precedence (in case there are conflicting tags), they are:\n    // 1. \"manual\" - A manually coded external transcript (requires data-transcript-src)\n    // 2. \"external\" - Automatically generated, written to an external div (requires data-transcript-div)\n    // 3. \"popup\" - Automatically generated, written to a draggable, resizable popup window that can be toggled on/off with a button\n    // If data-include-transcript=\"false\", there is no \"popup\" transcript\n\n    this.transcriptType = null;\n    if ($(media).data('transcript-src') !== undefined) {\n      this.transcriptSrc = $(media).data('transcript-src');\n      if (this.transcriptSrcHasRequiredParts()) {\n        this.transcriptType = 'manual';\n      }\n      else {\n        this.transcriptType = null;\n      }\n    }\n    else if (media.find('track[kind=\"captions\"], track[kind=\"subtitles\"]').length > 0) {\n      // required tracks are present. COULD automatically generate a transcript\n      if ($(media).data('transcript-div') !== undefined && $(media).data('transcript-div') !== \"\") {\n        this.transcriptDivLocation = $(media).data('transcript-div');\n        this.transcriptType = 'external';\n      }\n      else if ($(media).data('include-transcript') !== undefined) {\n        if ($(media).data('include-transcript') !== false) {\n          this.transcriptType = 'popup';\n        }\n      }\n      else {\n        this.transcriptType = 'popup';\n      }\n    }\n    // In \"Lyrics Mode\", line breaks in WebVTT caption files are supported in the transcript\n    // If false (default), line breaks are are removed from transcripts in order to provide a more seamless reading experience\n    // If true, line breaks are preserved, so content can be presented karaoke-style, or as lines in a poem\n\n    if ($(media).data('lyrics-mode') !== undefined && $(media).data('lyrics-mode') !== \"false\") {\n      this.lyricsMode = true;\n    }\n    else {\n      this.lyricsMode = false;\n    }\n    // Transcript Title\n    if ($(media).data('transcript-title') !== undefined && $(media).data('transcript-title') !== \"\") {\n      this.transcriptTitle = $(media).data('transcript-title');\n    }\n    else {\n      // do nothing. The default title will be defined later (see transcript.js)\n    }\n\n    // Captions\n    // data-captions-position can be used to set the default captions position\n    // this is only the default, and can be overridden by user preferences\n    // valid values of data-captions-position are 'below' and 'overlay'\n    if ($(media).data('captions-position') === 'overlay') {\n      this.defaultCaptionsPosition = 'overlay';\n    }\n    else { // the default, even if not specified\n      this.defaultCaptionsPosition = 'below';\n    }\n\n    // Chapters\n    if ($(media).data('chapters-div') !== undefined && $(media).data('chapters-div') !== \"\") {\n      this.chaptersDivLocation = $(media).data('chapters-div');\n    }\n\n    if ($(media).data('chapters-title') !== undefined) {\n      // NOTE: empty string is valid; results in no title being displayed\n      this.chaptersTitle = $(media).data('chapters-title');\n    }\n\n    if ($(media).data('chapters-default') !== undefined && $(media).data('chapters-default') !== \"\") {\n      this.defaultChapter = $(media).data('chapters-default');\n      this.chapterId = this.defaultChapter; // the id of the default chapter (as defined within WebVTT file)\n    }\n\n    // Previous/Next buttons\n    // valid values of data-prevnext-unit are 'playlist' and 'chapter'; will also accept 'chapters'\n    if ($(media).data('prevnext-unit') === 'chapter' || $(media).data('prevnext-unit') === 'chapters') {\n      this.prevNextUnit = 'chapter';\n    }\n    else if ($(media).data('prevnext-unit') === 'playlist') {\n      this.prevNextUnit = 'playlist';\n    }\n    else {\n      this.prevNextUnit = false;\n    }\n\n    // Slower/Faster buttons\n    // valid values of data-speed-icons are 'arrows' (default) and 'animals'\n    // use 'animals' to use turtle and rabbit\n    if ($(media).data('speed-icons') === 'animals') {\n      this.speedIcons = 'animals';\n    }\n    else {\n      this.speedIcons = 'arrows';\n    }\n\n    // Seekbar\n    // valid values of data-seekbar-scope are 'chapter' and 'video'; will also accept 'chapters'\n    if ($(media).data('seekbar-scope') === 'chapter' || $(media).data('seekbar-scope') === 'chapters') {\n      this.seekbarScope = 'chapter';\n    }\n    else {\n      this.seekbarScope = 'video';\n    }\n\n    // YouTube\n    if ($(media).data('youtube-id') !== undefined && $(media).data('youtube-id') !== \"\") {\n      this.youTubeId = $(media).data('youtube-id');\n    }\n\n    if ($(media).data('youtube-desc-id') !== undefined && $(media).data('youtube-desc-id') !== \"\") {\n      this.youTubeDescId = $(media).data('youtube-desc-id');\n    }\n\n    // Icon type\n    // By default, AblePlayer uses scalable icomoon fonts for the player controls\n    // and falls back to images if the user has a custom style sheet that overrides font-family\n    // use data-icon-type to force controls to use either 'font', 'images' or 'svg'\n    this.iconType = 'font';\n    this.forceIconType = false;\n    if ($(media).data('icon-type') !== undefined && $(media).data('icon-type') !== \"\") {\n      var iconType = $(media).data('icon-type');\n      if (iconType === 'font' || iconType == 'image' || iconType == 'svg') {\n        this.iconType = iconType;\n        this.forceIconType = true;\n      }\n    }\n\n    if ($(media).data('allow-fullscreen') !== undefined && $(media).data('allow-fullscreen') === false) {\n      this.allowFullScreen = false;\n    }\n    else {\n      this.allowFullScreen = true;\n    }\n\n    // Seek interval\n    // Number of seconds to seek forward or back with Rewind & Forward buttons\n    // Unless specified with data-seek-interval, the default value is re-calculated in initialize.js > setSeekInterval();\n    // Calculation attempts to intelligently assign a reasonable interval based on media length\n    this.defaultSeekInterval = 10;\n    this.useFixedSeekInterval = false;\n    if ($(media).data('seek-interval') !== undefined && $(media).data('seek-interval') !== \"\") {\n      var seekInterval = $(media).data('seek-interval');\n      if (/^[1-9][0-9]*$/.test(seekInterval)) { // must be a whole number greater than 0\n        this.seekInterval = seekInterval;\n        this.useFixedSeekInterval = true; // do not override with calculuation\n      }\n    }\n\n    // Now Playing\n    // Shows \"Now Playing:\" plus the title of the current track above player\n    // Only used if there is a playlist\n    if ($(media).data('show-now-playing') !== undefined && $(media).data('show-now-playing') === \"false\") {\n      this.showNowPlaying = false;\n    }\n    else {\n      this.showNowPlaying = true;\n    }\n\n    // Fallback Player\n    // The only supported fallback is JW Player, licensed separately\n    // JW Player files must be included in folder specified in this.fallbackPath\n    // JW Player will be loaded as needed in browsers that don't support HTML5 media\n    // NOTE: As of 2.3.44, NO FALLBACK is used unless data-fallback='jw'\n\n    this.fallback = null;\n    this.fallbackPath = null;\n    this.testFallback = false;\n\n    if ($(media).data('fallback') !== undefined && $(media).data('fallback') !== \"\") {\n      var fallback =  $(media).data('fallback');\n      if (fallback === 'jw') {\n        this.fallback = fallback;\n      }\n    }\n\n    if (this.fallback === 'jw') {\n\n      if ($(media).data('fallback-path') !== undefined && $(media).data('fallback-path') !== \"false\") {\n        this.fallbackPath = $(media).data('fallback-path');\n      }\n      else {\n        this.fallbackPath = this.rootPath + '/thirdparty/';\n      }\n\n      if ($(media).data('test-fallback') !== undefined && $(media).data('test-fallback') !== \"false\") {\n        this.testFallback = true;\n      }\n    }\n\n    // Language\n    this.lang = 'en';\n    if ($(media).data('lang') !== undefined && $(media).data('lang') !== \"\") {\n      var lang = $(media).data('lang');\n      if (lang.length == 2) {\n        this.lang = lang;\n      }\n    }\n    // Player language is determined as follows:\n    // 1. Lang attributes on <html> or <body>, if a matching translation file is available\n    // 2. The value of this.lang, if a matching translation file is available\n    // 3. English\n    // To override this formula and force #2 to take precedence over #1, set data-force-lang=\"true\"\n    if ($(media).data('force-lang') !== undefined && $(media).data('force-lang') !== \"false\") {\n      this.forceLang = true;\n    }\n    else {\n      this.forceLang = false;\n    }\n\n\n    // Metadata Tracks\n    if ($(media).data('meta-type') !== undefined && $(media).data('meta-type') !== \"\") {\n      this.metaType = $(media).data('meta-type');\n    }\n\n    if ($(media).data('meta-div') !== undefined && $(media).data('meta-div') !== \"\") {\n      this.metaDiv = $(media).data('meta-div');\n    }\n\n    // Search\n    if ($(media).data('search') !== undefined && $(media).data('search') !== \"\") {\n      // conducting a search currently requires an external div in which to write the results\n      if ($(media).data('search-div') !== undefined && $(media).data('search-div') !== \"\") {\n        this.searchString = $(media).data('search');\n        this.searchDiv = $(media).data('search-div');\n      }\n    }\n    ////////////////////////////////////////\n    //\n    // End assignment of default variables\n    //\n    ////////////////////////////////////////\n\n    this.ableIndex = AblePlayer.nextIndex;\n    AblePlayer.nextIndex += 1;\n\n    this.title = $(media).attr('title');\n\n    // populate translation object with localized versions of all labels and prompts\n    // use defer method to defer additional processing until text is retrieved\n    this.tt = {};\n    var thisObj = this;\n    $.when(this.getTranslationText()).then(\n      function () {\n        if (thisObj.countProperties(thisObj.tt) > 50) {\n          // close enough to ensure that most text variables are populated\n          thisObj.setup();\n        }\n        else {\n          // can't continue loading player with no text\n          thisObj.provideFallback('ERROR: Failed to load translation table');\n        }\n      }\n    );\n  };\n\n  // Index to increment every time new player is created.\n  AblePlayer.nextIndex = 0;\n\n  AblePlayer.prototype.setup = function() {\n\n    var thisObj = this;\n    this.reinitialize().then(function () {\n      if (!thisObj.player) {\n        // No player for this media, show last-line fallback.\n        thisObj.provideFallback('Unable to play media');\n      }\n      else {\n        thisObj.setupInstance().then(function () {\n          thisObj.recreatePlayer();\n        });\n      }\n    });\n  };\n\n  AblePlayer.youtubeIframeAPIReady = false;\n  AblePlayer.loadingYoutubeIframeAPI = false;\n})(jQuery);\n\n(function ($) {\n  // Set default variable values.\n  AblePlayer.prototype.setDefaults = function () {\n\n    // this.playing will change to true after 'playing' event is triggered\n    this.playing = false;\n\n    this.getUserAgent();\n    this.setIconColor();\n    this.setButtonImages();\n  };\n\n  AblePlayer.prototype.getRootWebSitePath = function() {\n\n    var _location = document.location.toString();\n    var domainNameIndex = _location.indexOf('/', _location.indexOf('://') + 3);\n    var domainName = _location.substring(0, domainNameIndex) + '/';\n    var webFolderIndex = _location.indexOf('/', _location.indexOf(domainName) + domainName.length);\n    var webFolderFullPath = _location.substring(0, webFolderIndex);\n    return webFolderFullPath;\n  };\n\n  AblePlayer.prototype.setIconColor = function() {\n\n    // determine the best color choice (white or black) for icons,\n    // given the background-color of their container elements\n    // Source for relative luminance formula:\n    // https://en.wikipedia.org/wiki/Relative_luminance\n\n    // We need to know the color *before* creating the element\n    // so the element doesn't exist yet when this function is called\n    // therefore, need to create a temporary element then remove it after color is determined\n    // Temp element must be added to the DOM or WebKit can't retrieve its CSS properties\n\n    var $elements, i, $el, bgColor, rgb, red, green, blue, luminance, iconColor;\n\n    $elements = ['controller', 'toolbar'];\n    for (i=0; i<$elements.length; i++) {\n      if ($elements[i] == 'controller') {\n        $el =  $('<div>', {\n          'class': 'able-controller'\n        }).hide();\n      }\n      else if ($elements[i] === 'toolbar') {\n        $el =  $('<div>', {\n          'class': 'able-window-toolbar'\n        }).hide();\n      }\n      $('body').append($el);\n      bgColor = $el.css('background-color');\n      // bgColor is a string in the form 'rgb(R, G, B)', perhaps with a 4th item for alpha;\n      // split the 3 or 4 channels into an array\n      rgb = bgColor.replace(/[^\\d,]/g, '').split(',');\n      red = rgb[0];\n      green = rgb[1];\n      blue = rgb[2];\n      luminance = (0.2126 * red) + (0.7152 * green) + (0.0722 * blue);\n      // range is 1 - 255; therefore 125 is the tipping point\n      if (luminance < 125) { // background is dark\n        iconColor = 'white';\n      }\n      else { // background is light\n        iconColor = 'black';\n      }\n      if ($elements[i] === 'controller') {\n        this.iconColor = iconColor;\n      }\n      else if ($elements[i] === 'toolbar') {\n        this.toolbarIconColor = iconColor;\n      }\n      $el.remove();\n    }\n  };\n\n  AblePlayer.prototype.setButtonImages = function() {\n\n    // NOTE: volume button images are now set dynamically within volume.js\n\n    this.imgPath = this.rootPath + '/button-icons/' + this.iconColor + '/';\n\n    this.playButtonImg = this.imgPath + 'play.png';\n    this.pauseButtonImg = this.imgPath + 'pause.png';\n\n    this.restartButtonImg = this.imgPath + 'restart.png';\n\n    this.rewindButtonImg = this.imgPath + 'rewind.png';\n    this.forwardButtonImg = this.imgPath + 'forward.png';\n\n    this.previousButtonImg = this.imgPath + 'previous.png';\n    this.nextButtonImg = this.imgPath + 'next.png';\n\n    if (this.speedIcons === 'arrows') {\n      this.fasterButtonImg = this.imgPath + 'slower.png';\n      this.slowerButtonImg = this.imgPath + 'faster.png';\n    }\n    else if (this.speedIcons === 'animals') {\n      this.fasterButtonImg = this.imgPath + 'rabbit.png';\n      this.slowerButtonImg = this.imgPath + 'turtle.png';\n    }\n\n    this.captionsButtonImg = this.imgPath + 'captions.png';\n    this.chaptersButtonImg = this.imgPath + 'chapters.png';\n    this.signButtonImg = this.imgPath + 'sign.png';\n    this.transcriptButtonImg = this.imgPath + 'transcript.png';\n    this.descriptionsButtonImg = this.imgPath + 'descriptions.png';\n\n    this.fullscreenExpandButtonImg = this.imgPath + 'fullscreen-expand.png';\n    this.fullscreenCollapseButtonImg = this.imgPath + 'fullscreen-collapse.png';\n\n    this.prefsButtonImg = this.imgPath + 'preferences.png';\n    this.helpButtonImg = this.imgPath + 'help.png';\n  };\n\n  // Initialize player based on data on page.\n  // This sets some variables, but does not modify anything.  Safe to call multiple times.\n  // Can call again after updating this.media so long as new media element has the same ID.\n  AblePlayer.prototype.reinitialize = function () {\n\n    var deferred, promise, thisObj, errorMsg, srcFile;\n\n    deferred = new $.Deferred();\n    promise = deferred.promise();\n    thisObj = this;\n\n    // if F12 Developer Tools aren't open in IE (through 9, no longer a problen in IE10)\n    // console.log causes an error - can't use debug without a console to log messages to\n    if (! window.console) {\n      this.debug = false;\n    }\n\n    this.startedPlaying = false;\n    // TODO: Move this setting to cookie.\n    this.autoScrollTranscript = true;\n    //this.autoScrollTranscript = this.getCookie(autoScrollTranscript); // (doesn't work)\n\n    // Bootstrap from this.media possibly being an ID or other selector.\n    this.$media = $(this.media).first();\n    this.media = this.$media[0];\n\n    // Set media type to 'audio' or 'video'; this determines some of the behavior of player creation.\n    if (this.$media.is('audio')) {\n      this.mediaType = 'audio';\n    }\n    else if (this.$media.is('video')) {\n      this.mediaType = 'video';\n    }\n    else {\n      this.mediaType = this.$media.get(0).tagName;\n      errorMsg = 'Media player initialized with ' + this.mediaType + '#' + this.mediaId + '. ';\n      errorMsg += 'Expecting an HTML5 audio or video element.';\n      this.provideFallback(errorMsg);\n      deferred.fail();\n      return promise;\n    }\n\n    this.$sources = this.$media.find('source');\n\n    this.player = this.getPlayer();\n    if (!this.player) {\n      // an error was generated in getPlayer()\n      this.provideFallback(this.error);\n    }\n    this.setIconType();\n    this.setDimensions();\n\n    deferred.resolve();\n    return promise;\n  };\n\n  AblePlayer.prototype.setDimensions = function() {\n\n    // if <video> element includes width and height attributes,\n    // use these to set the max-width and max-height of the player\n    if (this.$media.attr('width')) {\n      this.playerMaxWidth = parseInt(this.$media.attr('width'), 10);\n    }\n    if (this.$media.attr('height')) {\n      this.playerMaxHeight = parseInt(this.$media.attr('height'), 10);\n    }\n    // override width and height attributes with in-line CSS to make video responsive\n    this.$media.css({\n      'width': '100%',\n      'height': 'auto'\n    });\n  };\n\n  AblePlayer.prototype.setIconType = function() {\n    // returns either \"font\" or \"image\"\n    // create a temporary play span and check to see if button has font-family == \"able\" (the default)\n    // if it doesn't, user has a custom style sheet and icon fonts will not display properly\n    // use images as fallback\n\n    var $tempButton, $testButton, controllerFont;\n\n    if (this.forceIconType) {\n      // use value specified in data-icon-type\n      return false;\n    }\n\n    if (window.getComputedStyle) {\n\n      // webkit doesn't return calculated styles unless element has been added to the DOM\n      // and is visible (note: visibly clipped is considered \"visible\")\n      // use playpauseButton for font-family test if it exists; otherwise must create a new temp button\n      if ($('span.icon-play').length) {\n        $testButton = $('span.icon-play');\n      }\n      else {\n        $tempButton = $('<span>',{\n          'class': 'icon-play able-clipped'\n        });\n        $('body').append($tempButton);\n        $testButton = $tempButton;\n      }\n\n      // the following retrieves the computed value of font-family\n      // tested in Firefox 45.x with \"Allow pages to choose their own fonts\" unchecked - works!\n      // tested in Chrome 49.x with Font Changer plugin - works!\n      // tested in IE with user-defined style sheet enables - works!\n      // It does NOT account for users who have \"ignore font styles on web pages\" checked in IE\n      // There is no known way to check for that ???\n      controllerFont = window.getComputedStyle($testButton.get(0), null).getPropertyValue('font-family');\n      if (typeof controllerFont !== 'undefined') {\n        if (controllerFont.indexOf('able') !== -1) {\n          this.iconType = 'font';\n        }\n        else {\n          this.iconType = 'image';\n        }\n      }\n      else {\n        // couldn't get computed font-family; use images to be safe\n        this.iconType = 'image';\n      }\n    }\n    else { // window.getComputedStyle is not supported (IE 8 and earlier)\n      // No known way to detect computed font\n      // The following retrieves the value from the style sheet, not the computed font\n      // controllerFont = $tempButton.get(0).currentStyle.fontFamily;\n      // It will therefore return \"able\", even if the user is overriding that with a custom style sheet\n      // To be safe, use images\n      this.iconType = 'image';\n    }\n    if (this.debug) {\n      console.log('Using ' + this.iconType + 's for player controls');\n    }\n    if (typeof $tempButton !== 'undefined') {\n      $tempButton.remove();\n    }\n  };\n\n\n  // Perform one-time setup for this instance of player; called after player is first initialized.\n  AblePlayer.prototype.setupInstance = function () {\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n\n    if (this.$media.attr('id')) {\n      this.mediaId = this.$media.attr('id');\n    }\n    else {\n      // Ensure the base media element always has an ID.\n      this.mediaId = \"ableMediaId_\" + this.ableIndex;\n      this.$media.attr('id', this.mediaId);\n    }\n    // get playlist for this media element\n    this.setupInstancePlaylist();\n\n    deferred.resolve();\n    return promise;\n  };\n\n  AblePlayer.prototype.setupInstancePlaylist = function() {\n    // find a matching playlist and set this.hasPlaylist\n    // if there is one, also set this.$playlist, this.playlistIndex, & this.playlistEmbed\n    var thisObj = this;\n\n    this.hasPlaylist = false; // will change to true if a matching playlist is found\n\n    $('.able-playlist').each(function() {\n      if ($(this).data('player') === thisObj.mediaId) {\n        // this is the playlist for the current player\n        thisObj.hasPlaylist = true;\n        // If using an embedded player, we'll replace $playlist with the clone later.\n        thisObj.$playlist = $(this).find('li');\n        // add tabindex to each list item\n        $(this).find('li').attr('tabindex', '0');\n        thisObj.playlistIndex = 0;\n        var dataEmbedded = $(this).data('embedded');\n        if (typeof dataEmbedded !== 'undefined' && dataEmbedded !== false) {\n          // embed playlist within player\n          thisObj.playlistEmbed = true;\n        }\n        else {\n          thisObj.playlistEmbed = false;\n        }\n      }\n    });\n\n    if (this.hasPlaylist && this.playlistEmbed) {\n      // Copy the playlist out of the dom, so we can reinject when we build the player.\n      var parent = this.$playlist.parent();\n      this.$playlistDom = parent.clone();\n      parent.remove();\n    }\n  };\n\n  // Creates the appropriate player for the current source.\n  AblePlayer.prototype.recreatePlayer = function () {\n\n    var thisObj, prefsGroups, i;\n    thisObj = this;\n\n    // TODO: Ensure when recreating player that we carry over the mediaId\n    if (!this.player) {\n      console.log(\"Can't create player; no appropriate player type detected.\");\n      return;\n    }\n\n    this.setMediaAttributes();\n\n    this.loadCurrentPreferences();\n\n    this.injectPlayerCode();\n    this.initSignLanguage();\n    this.setupTracks().then(function() {\n\n      thisObj.setupAltCaptions().then(function() {\n\n        if (thisObj.transcriptType === 'external' || thisObj.transcriptType === 'popup') {\n          if (thisObj.captions.length <= 1) {\n            // without captions/subtitles in multiple languages,\n            // there is no need for a transcript language selector\n            thisObj.$transcriptLanguageSelect.parent().remove();\n          }\n        }\n\n        thisObj.initDescription();\n        thisObj.initDefaultCaption();\n\n        thisObj.initPlayer().then(function() { // initPlayer success\n          thisObj.initializing = false;\n\n          // inject each of the hidden forms that will be accessed from the Preferences popup menu\n          prefsGroups = thisObj.getPreferencesGroups();\n          for (i in prefsGroups) {\n            thisObj.injectPrefsForm(prefsGroups[i]);\n          }\n          thisObj.setupPopups();\n          thisObj.updateCaption();\n          thisObj.updateTranscript();\n          if (thisObj.chaptersDivLocation) {\n            thisObj.populateChaptersDiv();\n          }\n          thisObj.showSearchResults();\n          if (thisObj.defaultChapter) {\n            thisObj.seekToDefaultChapter();\n            // thisObj.updateChapter(thisObj.getElapsed());\n          }\n        },\n        function() {  // initPlayer fail\n          thisObj.provideFallback(this.error);\n        }\n        );\n      });\n    });\n  };\n\n  AblePlayer.prototype.initPlayer = function () {\n\n    var thisObj = this;\n    var playerPromise;\n\n    // First run player specific initialization.\n    if (this.player === 'html5') {\n      playerPromise = this.initHtml5Player();\n    }\n    else if (this.player === 'jw') {\n      playerPromise = this.initJwPlayer();\n    }\n    else if (this.player === 'youtube') {\n      playerPromise = this.initYouTubePlayer();\n    }\n\n    // After player specific initialization is done, run remaining general initialization.\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n    playerPromise.done(\n      function () { // done/resolved\n        if (thisObj.useFixedSeekInterval === false) {\n          thisObj.setSeekInterval();\n        }\n        thisObj.addControls();\n        thisObj.addEventListeners();\n        // Calling these set functions also initializes some icons.\n        if (thisObj.Volume) {\n          thisObj.setMute(false);\n        }\n        thisObj.setFullscreen(false);\n        thisObj.setVolume(thisObj.defaultVolume);\n        thisObj.refreshControls();\n\n        // After done messing with the player, this is necessary to fix playback on iOS\n        if (thisObj.player === 'html5' && thisObj.isIOS()) {\n          thisObj.$media[0].load();\n        }\n        deferred.resolve();\n      }\n    ).fail(function () { // failed\n      deferred.reject();\n      }\n    );\n\n    return promise;\n  };\n\n  AblePlayer.prototype.setSeekInterval = function () {\n    // this function is only called if this.useFixedSeekInterval is false\n    // if this.useChapterTimes, this is called as each new chapter is loaded\n    // otherwise, it's called once, as the player is initialized\n    var duration;\n    this.seekInterval = this.defaultSeekInterval;\n    if (this.useChapterTimes) {\n      duration = this.chapterDuration;\n    }\n    else {\n      duration = this.getDuration();\n    }\n    if (typeof duration === 'undefined' || duration < 1) {\n      // no duration; just use default for now but keep trying until duration is available\n      this.seekIntervalCalculated = false;\n      return;\n    }\n    else {\n      if (duration <= 20) {\n         this.seekInterval = 5;  // 4 steps max\n      }\n      else if (duration <= 30) {\n         this.seekInterval = 6; // 5 steps max\n      }\n      else if (duration <= 40) {\n         this.seekInterval = 8; // 5 steps max\n      }\n      else if (duration <= 100) {\n         this.seekInterval = 10; // 10 steps max\n      }\n      else {\n        // never more than 10 steps from start to end\n         this.seekInterval = (duration / 10);\n      }\n      this.seekIntervalCalculated = true;\n    }\n  };\n\n  AblePlayer.prototype.initDefaultCaption = function () {\n\n    var captions, i;\n\n    if (this.usingYouTubeCaptions) {\n      captions = this.ytCaptions;\n    }\n    else {\n      captions = this.captions;\n    }\n\n    if (captions.length > 0) {\n      for (i=0; i<captions.length; i++) {\n        if (captions[i].def === true) {\n          this.captionLang = captions[i].language;\n          this.selectedCaptions = captions[i];\n        }\n      }\n      if (typeof this.captionLang === 'undefined') {\n        // No caption track was flagged as default\n        // find and use a caption language that matches the player language\n        for (i=0; i<captions.length; i++) {\n          if (captions[i].language === this.lang) {\n            this.captionLang = captions[i].language;\n            this.selectedCaptions = captions[i];\n          }\n        }\n      }\n      if (typeof this.captionLang === 'undefined') {\n        // Still no matching caption track\n        // just use the first track\n        this.captionLang = captions[0].language;\n        this.selectedCaptions = captions[0];\n      }\n      if (typeof this.captionLang !== 'undefined') {\n        // reset transcript selected <option> to this.captionLang\n        if (this.$transcriptLanguageSelect) {\n          this.$transcriptLanguageSelect.find('option[lang=' + this.captionLang + ']').attr('selected','selected');\n        }\n        // sync all other tracks to this same languge\n        this.syncTrackLanguages('init',this.captionLang);\n      }\n    }\n  };\n\n  AblePlayer.prototype.initHtml5Player = function () {\n    // Nothing special to do!\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n    deferred.resolve();\n    return promise;\n  };\n\n  AblePlayer.prototype.initJwPlayer = function () {\n\n    var jwHeight;\n    var thisObj = this;\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n\n    $.ajax({\n      async: false,\n      url: this.fallbackPath + 'jwplayer.js',\n      dataType: 'script',\n      success: function( data, textStatus, jqXHR) {\n        // Successfully loaded the JW Player\n        // add an id to div.able-media-container (JW Player needs this)\n        thisObj.jwId = thisObj.mediaId + '_fallback';\n        thisObj.$mediaContainer.attr('id', thisObj.jwId);\n        if (thisObj.mediaType === 'audio') {\n          // JW Player always shows its own controls if height <= 40\n          // Must set height to 0 to hide them\n          jwHeight = 0;\n        }\n        else {\n          jwHeight = thisObj.playerHeight;\n        }\n        var sources = [];\n        $.each(thisObj.$sources, function (ii, source) {\n          sources.push({file: $(source).attr('src')});\n        });\n\n        var flashplayer = thisObj.fallbackPath + 'jwplayer.flash.swf';\n        var html5player = thisObj.fallbackPath + 'jwplayer.html5.js';\n\n        // Initializing JW Player with width:100% results in player that is either the size of the video\n        // or scaled down to fit the container if container is smaller\n        // After onReady event fires, actual dimensions will be collected for future use\n        // in preserving the video ratio\n        if (thisObj.mediaType === 'video') {\n          thisObj.jwPlayer = jwplayer(thisObj.jwId).setup({\n            playlist: [{\n              image: thisObj.$media.attr('poster'),\n              sources: sources\n            }],\n            flashplayer: flashplayer,\n            html5player: html5player,\n            controls: false,\n            volume: thisObj.defaultVolume * 100,\n            width: '100%',\n            fallback: false,\n            primary: 'flash',\n            wmode: 'transparent' // necessary to get HTML captions to appear as overlay\n          });\n        }\n        else { // if this is an audio player\n          thisObj.jwPlayer = jwplayer(thisObj.jwId).setup({\n            playlist: [{\n              sources: sources\n            }],\n            flashplayer: flashplayer,\n            html5player: html5player,\n            controls: false,\n            volume: this.defaultVolume * 100,\n            height: 0,\n            width: '100%',\n            fallback: false,\n            primary: 'flash'\n          });\n        }\n        // remove the media element - we're done with it\n        // keeping it would cause too many potential problems with HTML5 & JW event listeners both firing\n        thisObj.$media.remove();\n\n        deferred.resolve();\n      },\n      error: function(jqXHR, textStatus, errorThrown) {\n        // Loading the JW Player failed\n        this.error = 'Failed to load JW Player.';\n        deferred.reject();\n      }\n    });\n    // Done with JW Player initialization.\n    return promise;\n  };\n\n  // Sets media/track/source attributes; is called whenever player is recreated since $media may have changed.\n  AblePlayer.prototype.setMediaAttributes = function () {\n    // Firefox puts videos in tab order; remove.\n    this.$media.attr('tabindex', -1);\n\n    // Keep native player from displaying captions/subtitles.\n    // This *should* work but isn't supported in all browsers\n    // For example, Safari 8.0.2 always displays captions if default attribute is present\n    // even if textTracks.mode is 'disabled' or 'hidden'\n    // Still using this here in case it someday is reliable\n    // Meanwhile, the only reliable way to suppress browser captions is to remove default attribute\n    // We're doing that in track.js > setupCaptions()\n    var textTracks = this.$media.get(0).textTracks;\n    if (textTracks) {\n      var i = 0;\n      while (i < textTracks.length) {\n        // mode is either 'disabled', 'hidden', or 'showing'\n        // neither 'disabled' nor 'hidden' hides default captions in Safari 8.0.2\n        textTracks[i].mode = 'disabled';\n        i += 1;\n      }\n    }\n  };\n\n  AblePlayer.prototype.getPlayer = function() {\n\n    // Determine which player to use, if any\n    // return 'html5', 'jw' or null\n    var i, sourceType, $newItem;\n    if (this.youTubeId) {\n      if (this.mediaType !== 'video') {\n        this.error = 'To play a YouTube video, use the &lt;video&gt; tag.';\n        return null;\n      }\n      else {\n        return 'youtube';\n      }\n    }\n    else if (this.testFallback ||\n             ((this.isUserAgent('msie 7') || this.isUserAgent('msie 8') || this.isUserAgent('msie 9')) && this.mediaType === 'video') ||\n             (this.isIOS() && (this.isIOS(4) || this.isIOS(5) || this.isIOS(6)))\n            ) {\n      // the user wants to test the fallback player, or\n      // the user is using an older version of IE or IOS,\n      // both of which had buggy implementation of HTML5 video\n      if (this.fallback === 'jw' && this.jwCanPlay()) {\n        return 'jw';\n      }\n      else {\n        this.error = 'The fallback player (JW Player) is unable to play the available media file.';\n        return null;\n      }\n    }\n    else if (this.media.canPlayType) {\n      return 'html5';\n    }\n    else {\n      this.error = 'This browser does not support the available media file.';\n      return null;\n    }\n  };\n\n  AblePlayer.prototype.jwCanPlay = function() {\n    // Determine whether there are media files that JW supports\n    var i, sourceType, $firstItem;\n\n    if (this.$sources.length > 0) { // this media has one or more <source> elements\n      for (i = 0; i < this.$sources.length; i++) {\n        sourceType = this.$sources[i].getAttribute('type');\n        if ((this.mediaType === 'video' && sourceType === 'video/mp4') ||\n            (this.mediaType === 'audio' && sourceType === 'audio/mpeg')) {\n            // JW Player can play this\n            return true;\n        }\n      }\n    }\n    // still here? That means there's no source that JW can play\n    // check for an mp3 or mp4 in a able-playlist\n    // TODO: Implement this more efficiently\n    // Playlist is initialized later in setupInstancePlaylist()\n    // but we can't wait for that...\n    if ($('.able-playlist')) {\n      // there's at least one playlist on this page\n      // get the first item from the first playlist\n      // if JW Player can play that one, assume it can play all items in all playlists\n      $firstItem = $('.able-playlist').eq(0).find('li').eq(0);\n      if (this.mediaType === 'audio') {\n        if ($firstItem.attr('data-mp3')) {\n          return true;\n        }\n        else if (this.mediaType === 'video') {\n          if ($firstItem.attr('data-mp4')) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.setCookie = function(cookieValue) {\n    Cookies.set('Able-Player', cookieValue, { expires:90 });\n    // set the cookie lifetime for 90 days\n  };\n\n  AblePlayer.prototype.getCookie = function() {\n\n    var defaultCookie = {\n      preferences: {},\n      sign: {},\n      transcript: {}\n    };\n\n    var cookie;\n    try {\n      cookie = Cookies.getJSON('Able-Player');\n    }\n    catch (err) {\n      // Original cookie can't be parsed; update to default\n      Cookies.getJSON(defaultCookie);\n      cookie = defaultCookie;\n    }\n    if (cookie) {\n      return cookie;\n    }\n    else {\n      return defaultCookie;\n    }\n  };\n\n  AblePlayer.prototype.updateCookie = function( setting ) {\n\n    // called when a particular setting had been updated\n    // useful for settings updated indpedently of Preferences dialog\n    // e.g., prefAutoScrollTranscript, which is updated in control.js > handleTranscriptLockToggle()\n    // setting is any supported preference name (e.g., \"prefCaptions\")\n    // OR 'transcript' or 'sign' (not user-defined preferences, used to save position of draggable windows)\n    var cookie, $window, windowPos, available, i, prefName;\n    cookie = this.getCookie();\n\n    if (setting === 'transcript' || setting === 'sign') {\n      if (setting === 'transcript') {\n        $window = this.$transcriptArea;\n        windowPos = $window.position();\n        if (typeof cookie.transcript === 'undefined') {\n          cookie.transcript = {};\n        }\n        cookie.transcript['position'] = $window.css('position'); // either 'relative' or 'absolute'\n        cookie.transcript['zindex'] = $window.css('z-index');\n        cookie.transcript['top'] = windowPos.top;\n        cookie.transcript['left'] = windowPos.left;\n        cookie.transcript['width'] = $window.width();\n        cookie.transcript['height'] = $window.height();\n      }\n      else if (setting === 'sign') {\n        $window = this.$signWindow;\n        windowPos = $window.position();\n        if (typeof cookie.sign === 'undefined') {\n          cookie.sign = {};\n        }\n        cookie.sign['position'] = $window.css('position'); // either 'relative' or 'absolute'\n        cookie.sign['zindex'] = $window.css('z-index');\n        cookie.sign['top'] = windowPos.top;\n        cookie.sign['left'] = windowPos.left;\n        cookie.sign['width'] = $window.width();\n        cookie.sign['height'] = $window.height();\n      }\n    }\n    else {\n      available = this.getAvailablePreferences();\n      // Rebuild cookie with current cookie values,\n      // replacing the one value that's been changed\n      for (i = 0; i < available.length; i++) {\n        prefName = available[i]['name'];\n        if (prefName == setting) {\n          // this is the one that requires an update\n          cookie.preferences[prefName] = this[prefName];\n        }\n      }\n    }\n    // Save updated cookie\n    this.setCookie(cookie);\n  };\n\n  AblePlayer.prototype.getPreferencesGroups = function() {\n\n    // return array of groups in the order in which they will appear\n    // in the Preferences popup menu\n    // Human-readable label for each group is defined in translation table\n    if (this.mediaType === 'video') {\n      return ['captions','descriptions','keyboard','transcript'];\n    }\n    else if (this.mediaType === 'audio') {\n      var groups = [];\n      groups.push('keyboard');\n      if (this.lyricsMode) {\n        groups.push('transcript');\n      }\n      return groups;\n    }\n  }\n\n  AblePlayer.prototype.getAvailablePreferences = function() {\n\n    // Return the list of currently available preferences.\n    // Preferences with no 'label' are set within player, not shown in Prefs dialog\n    var prefs = [];\n\n    // Modifier keys preferences\n    prefs.push({\n      'name': 'prefAltKey', // use alt key with shortcuts\n      'label': this.tt.prefAltKey,\n      'group': 'keyboard',\n      'default': 1\n    });\n    prefs.push({\n      'name': 'prefCtrlKey', // use ctrl key with shortcuts\n      'label': this.tt.prefCtrlKey,\n      'group': 'keyboard',\n      'default': 1\n    });\n    prefs.push({\n      'name': 'prefShiftKey',\n      'label': this.tt.prefShiftKey,\n      'group': 'keyboard',\n      'default': 0\n    });\n\n    // Transcript preferences\n    prefs.push({\n      'name': 'prefTranscript', // transcript default state\n      'label': null,\n      'group': 'transcript',\n      'default': 0 // off because turning it on has a certain WOW factor\n    });\n    prefs.push({\n      'name': 'prefHighlight', // highlight transcript as media plays\n      'label': this.tt.prefHighlight,\n      'group': 'transcript',\n      'default': 1 // on because many users can benefit\n    });\n    prefs.push({\n      'name': 'prefAutoScrollTranscript',\n      'label': null,\n      'group': 'transcript',\n      'default': 1\n    });\n    prefs.push({\n      'name': 'prefTabbable', // tab-enable transcript\n      'label': this.tt.prefTabbable,\n      'group': 'transcript',\n      'default': 0 // off because if users don't need it, it impedes tabbing elsewhere on the page\n    });\n\n    if (this.mediaType === 'video') {\n\n      // Caption preferences\n      prefs.push({\n        'name': 'prefCaptions', // closed captions default state\n        'label': null,\n        'group': 'captions',\n        'default': 1\n      });\n/* // not supported yet\n      prefs.push({\n        'name': 'prefCaptionsStyle',\n        'label': this.tt.prefCaptionsStyle,\n        'group': 'captions',\n        'default': this.tt.captionsStylePopOn\n      });\n*/\n      prefs.push({\n        'name': 'prefCaptionsPosition',\n        'label': this.tt.prefCaptionsPosition,\n        'group': 'captions',\n        'default': this.defaultCaptionsPosition\n      });\n      prefs.push({\n        'name': 'prefCaptionsFont',\n        'label': this.tt.prefCaptionsFont,\n        'group': 'captions',\n        'default': this.tt.sans\n      });\n      prefs.push({\n        'name': 'prefCaptionsSize',\n        'label': this.tt.prefCaptionsSize,\n        'group': 'captions',\n        'default': '100%'\n      });\n      prefs.push({\n        'name': 'prefCaptionsColor',\n        'label': this.tt.prefCaptionsColor,\n        'group': 'captions',\n        'default': 'white'\n      });\n      prefs.push({\n        'name': 'prefCaptionsBGColor',\n        'label': this.tt.prefCaptionsBGColor,\n        'group': 'captions',\n        'default': 'black'\n      });\n      prefs.push({\n        'name': 'prefCaptionsOpacity',\n        'label': this.tt.prefCaptionsOpacity,\n        'group': 'captions',\n        'default': '100%'\n      });\n\n      // Description preferences\n      prefs.push({\n        'name': 'prefDesc', // audio description default state\n        'label': null,\n        'group': 'descriptions',\n        'default': 0 // off because users who don't need it might find it distracting\n      });\n      prefs.push({\n        'name': 'prefDescFormat', // audio description default state\n        'label': this.tt.prefDescFormat,\n        'group': 'descriptions',\n        'default': 'video'\n      });\n      prefs.push({\n        'name': 'prefDescPause', // automatically pause when closed description starts\n        'label': this.tt.prefDescPause,\n        'group': 'descriptions',\n        'default': 0 // off because it burdens user with restarting after every pause\n      });\n      prefs.push({\n        'name': 'prefVisibleDesc', // visibly show closed description (if avilable and used)\n        'label': this.tt.prefVisibleDesc,\n        'group': 'descriptions',\n        'default': 1 // on because sighted users probably want to see this cool feature in action\n      });\n\n      // Video preferences without a category (not shown in Preferences dialogs)\n      prefs.push({\n        'name': 'prefSign', // open sign language window by default if avilable\n        'label': null,\n        'group': null,\n        'default': 0 // off because clicking an icon to see the sign window has a powerful impact\n      });\n\n    }\n    return prefs;\n  };\n\n  // Loads current/default preferences from cookie into the AblePlayer object.\n  AblePlayer.prototype.loadCurrentPreferences = function () {\n    var available = this.getAvailablePreferences();\n    var cookie = this.getCookie();\n\n    // Copy current cookie values into this object, and fill in any default values.\n    for (var ii = 0; ii < available.length; ii++) {\n      var prefName = available[ii]['name'];\n      var defaultValue = available[ii]['default'];\n      if (cookie.preferences[prefName] !== undefined) {\n        this[prefName] = cookie.preferences[prefName];\n      }\n      else {\n        cookie.preferences[prefName] = defaultValue;\n        this[prefName] = defaultValue;\n      }\n    }\n\n    // Save since we may have added default values.\n    this.setCookie(cookie);\n  };\n\n  AblePlayer.prototype.injectPrefsForm = function (form) {\n\n    // Creates a preferences form and injects it.\n    // form is one of the supported forms (groups) defined in getPreferencesGroups()\n\n    var available, thisObj, $prefsDiv, formTitle, introText,\n      $prefsIntro,$prefsIntroP2,p3Text,$prefsIntroP3,i, j,\n      $fieldset, fieldsetClass, fieldsetId,\n      $descFieldset1, $descLegend1, $descFieldset2, $descLegend2, $legend,\n      thisPref, $thisDiv, thisClass, thisId, $thisLabel, $thisField,\n      $div1,id1,$radio1,$label1,\n      $div2,id2,$radio2,$label2,\n      options,$thisOption,optionValue,optionText,sampleCapsDiv,\n      changedPref,changedSpan,changedText,\n      currentDescState,\n      $kbHeading,$kbList,kbLabels,keys,kbListText,$kbListItem,\n      dialog,saveButton,cancelButton;\n\n    thisObj = this;\n    available = this.getAvailablePreferences();\n\n    // outer container, will be assigned role=\"dialog\"\n    $prefsDiv = $('<div>',{\n      'class': 'able-prefs-form '\n    });\n    var customClass = 'able-prefs-form-' + form;\n    $prefsDiv.addClass(customClass);\n\n    // add intro\n    if (form == 'captions') {\n      formTitle = this.tt.prefTitleCaptions;\n      introText = this.tt.prefIntroCaptions;\n      // Uncomment the following line to include a cookie warning\n      // Not included for now in order to cut down on unnecessary verbiage\n      // introText += ' ' + this.tt.prefCookieWarning;\n      $prefsIntro = $('<p>',{\n        text: introText\n      });\n      $prefsDiv.append($prefsIntro);\n    }\n    else if (form == 'descriptions') {\n      formTitle = this.tt.prefTitleDescriptions;\n      var $prefsIntro = $('<p>',{\n        text: this.tt.prefIntroDescription1\n      });\n      var $prefsIntroUL = $('<ul>');\n      var $prefsIntroLI1 = $('<li>',{\n        text: this.tt.prefDescFormatOption1\n      });\n      var $prefsIntroLI2 = $('<li>',{\n        text: this.tt.prefDescFormatOption2\n      });\n\n      $prefsIntroUL.append($prefsIntroLI1,$prefsIntroLI2);\n      if (this.hasOpenDesc && this.hasClosedDesc) {\n        currentDescState = this.tt.prefIntroDescription2 + ' ';\n        currentDescState += '<strong>' + this.tt.prefDescFormatOption1b + '</strong>';\n        currentDescState += ' <em>' + this.tt.and + '</em> <strong>' + this.tt.prefDescFormatOption2b + '</strong>.';\n      }\n      else if (this.hasOpenDesc) {\n        currentDescState = this.tt.prefIntroDescription2;\n        currentDescState += ' <strong>' + this.tt.prefDescFormatOption1b + '</strong>.';\n      }\n      else if (this.hasClosedDesc) {\n        currentDescState = this.tt.prefIntroDescription2;\n        currentDescState += ' <strong>' + this.tt.prefDescFormatOption2b + '</strong>.';\n      }\n      else {\n        currentDescState = this.tt.prefIntroDescriptionNone;\n      }\n      $prefsIntroP2 = $('<p>',{\n        html: currentDescState\n      });\n\n      p3Text = this.tt.prefIntroDescription3;\n      if (this.hasOpenDesc || this.hasClosedDesc) {\n        p3Text += ' ' + this.tt.prefIntroDescription4;\n      }\n      $prefsIntroP3 = $('<p>',{\n        text: p3Text\n      });\n\n      $prefsDiv.append($prefsIntro,$prefsIntroUL,$prefsIntroP2,$prefsIntroP3);\n    }\n    else if (form == 'keyboard') {\n      formTitle = this.tt.prefTitleKeyboard;\n      introText = this.tt.prefIntroKeyboard1;\n      introText += ' ' + this.tt.prefIntroKeyboard2;\n      introText += ' ' + this.tt.prefIntroKeyboard3;\n      $prefsIntro = $('<p>',{\n        text: introText\n      });\n      $prefsDiv.append($prefsIntro);\n    }\n    else if (form == 'transcript') {\n      formTitle = this.tt.prefTitleTranscript;\n      introText = this.tt.prefIntroTranscript;\n      // Uncomment the following line to include a cookie warning\n      // Not included for now in order to cut down on unnecessary verbiage\n      // introText += ' ' + this.tt.prefCookieWarning;\n      $prefsIntro = $('<p>',{\n        text: introText\n      });\n      $prefsDiv.append($prefsIntro);\n    }\n\n    if (form === 'descriptions') {\n      // descriptions form has two field sets\n\n      // Fieldset 1\n      $descFieldset1 = $('<fieldset>');\n      fieldsetClass = 'able-prefs-' + form + '1';\n      fieldsetId = this.mediaId + '-prefs-' + form + '1';\n      $descFieldset1.addClass(fieldsetClass).attr('id',fieldsetId);\n      $descLegend1 = $('<legend>' + this.tt.prefDescFormat + '</legend>');\n      $descFieldset1.append($descLegend1);\n\n      // Fieldset 2\n      $descFieldset2 = $('<fieldset>');\n      fieldsetClass = 'able-prefs-' + form + '2';\n      fieldsetId = this.mediaId + '-prefs-' + form + '2';\n      $descFieldset2.addClass(fieldsetClass).attr('id',fieldsetId);\n      $descLegend2 = $('<legend>' + this.tt.prefHeadingTextDescription + '</legend>');\n      $descFieldset2.append($descLegend2);\n    }\n    else {\n      // all other forms just have one fieldset\n      $fieldset = $('<fieldset>');\n      fieldsetClass = 'able-prefs-' + form;\n      fieldsetId = this.mediaId + '-prefs-' + form;\n      $fieldset.addClass(fieldsetClass).attr('id',fieldsetId);\n      if (form === 'keyboard') {\n        $legend = $('<legend>' + this.tt.prefHeadingKeyboard1 + '</legend>');\n        $fieldset.append($legend);\n      }\n    }\n    for (i=0; i<available.length; i++) {\n\n      // only include prefs on the current form if they have a label\n      if ((available[i]['group'] == form) && available[i]['label']) {\n\n        thisPref = available[i]['name'];\n        thisClass = 'able-' + thisPref;\n        thisId = this.mediaId + '_' + thisPref;\n        if (thisPref !== 'prefDescFormat') {\n          $thisDiv = $('<div>').addClass(thisClass);\n        }\n\n        // Audio Description preferred format radio buttons\n        if (thisPref == 'prefDescFormat') {\n\n          // option 1 radio button\n          $div1 = $('<div>');\n          id1 = thisId + '_1';\n          $label1 = $('<label>')\n            .attr('for',id1)\n            .text(this.capitalizeFirstLetter(this.tt.prefDescFormatOption1))\n          $radio1 = $('<input>',{\n            type: 'radio',\n            name: thisPref,\n            id: id1,\n            value: 'video'\n          });\n          if (this.prefDescFormat === 'video') {\n            $radio1.attr('checked','checked');\n          };\n          $div1.append($radio1,$label1);\n\n          // option 2 radio button\n          $div2 = $('<div>');\n          id2 = thisId + '_2';\n          $label2 = $('<label>')\n            .attr('for',id2)\n            .text(this.capitalizeFirstLetter(this.tt.prefDescFormatOption2));\n          $radio2 = $('<input>',{\n            type: 'radio',\n            name: thisPref,\n            id: id2,\n            value: 'text'\n          });\n          if (this.prefDescFormat === 'text') {\n            $radio2.attr('checked','checked');\n          };\n          $div2.append($radio2,$label2);\n        }\n        else if (form === 'captions') {\n          $thisLabel = $('<label for=\"' + thisId + '\"> ' + available[i]['label'] + '</label>');\n          $thisField = $('<select>',{\n            name: thisPref,\n            id: thisId,\n          });\n          if (thisPref !== 'prefCaptions' && thisPref !== 'prefCaptionsStyle') {\n            // add a change handler that updates the style of the sample caption text\n            $thisField.change(function() {\n              changedPref = $(this).attr('name');\n              thisObj.stylizeCaptions(thisObj.$sampleCapsDiv,changedPref);\n            });\n          }\n          options = this.getCaptionsOptions(thisPref);\n          for (j=0; j < options.length; j++) {\n            if (thisPref === 'prefCaptionsPosition') {\n              optionValue = options[j];\n              if (optionValue === 'overlay') {\n                optionText = this.tt.captionsPositionOverlay;\n              }\n              else if (optionValue === 'below') {\n                optionValue = options[j];\n                optionText = this.tt.captionsPositionBelow;\n              }\n            }\n            else if (thisPref === 'prefCaptionsColor' || thisPref === 'prefCaptionsBGColor') {\n              optionValue = options[j][0];\n              optionText = options[j][1];\n            }\n            else if (thisPref === 'prefCaptionsOpacity') {\n              optionValue = options[j];\n              optionText = options[j];\n              if (optionValue === '0%') {\n                optionText += ' (' + this.tt.transparent + ')';\n              }\n              else if (optionValue === '100%') {\n                optionText += ' (' + this.tt.solid + ')';\n              }\n            }\n            else {\n              optionValue = options[j];\n              optionText = options[j];\n            }\n            $thisOption = $('<option>',{\n              value: optionValue,\n              text: optionText\n            });\n            if (this[thisPref] === optionValue) {\n              $thisOption.attr('selected','selected');\n            }\n            $thisField.append($thisOption);\n          }\n          $thisDiv.append($thisLabel,$thisField);\n        }\n        else { // all other fields are checkboxes\n          $thisLabel = $('<label for=\"' + thisId + '\"> ' + available[i]['label'] + '</label>');\n          $thisField = $('<input>',{\n            type: 'checkbox',\n            name: thisPref,\n            id: thisId,\n            value: 'true'\n          });\n          // check current active value for this preference\n          if (this[thisPref] === 1) {\n            $thisField.attr('checked','checked');\n          }\n          if (form === 'keyboard') {\n            // add a change handler that updates the list of current keyboard shortcuts\n            $thisField.change(function() {\n              changedPref = $(this).attr('name');\n              if (changedPref === 'prefAltKey') {\n                changedSpan = '.able-modkey-alt';\n                changedText = thisObj.tt.prefAltKey + ' + ';\n              }\n              else if (changedPref === 'prefCtrlKey') {\n                changedSpan = '.able-modkey-ctrl';\n                changedText = thisObj.tt.prefCtrlKey + ' + ';\n              }\n              else if (changedPref === 'prefShiftKey') {\n                changedSpan = '.able-modkey-shift';\n                changedText = thisObj.tt.prefShiftKey + ' + ';\n              }\n              if ($(this).is(':checked')) {\n                $(changedSpan).text(changedText);\n              }\n              else {\n                $(changedSpan).text('');\n              }\n            });\n          }\n          $thisDiv.append($thisField,$thisLabel);\n        }\n        if (form === 'descriptions') {\n          if (thisPref === 'prefDescFormat') {\n            $descFieldset1.append($div1,$div2);\n          }\n          else {\n            $descFieldset2.append($thisDiv);\n          }\n        }\n        else {\n          $fieldset.append($thisDiv);\n        }\n      }\n    }\n    if (form === 'descriptions') {\n      $prefsDiv.append($descFieldset1,$descFieldset2);\n    }\n    else {\n      $prefsDiv.append($fieldset);\n    }\n    if (form === 'captions') {\n      // add a sample closed caption div to prefs dialog\n      if (this.mediaType === 'video') {\n        this.$sampleCapsDiv = $('<div>',{\n          'class': 'able-captions-sample'\n        }).text(this.tt.sampleCaptionText);\n        $prefsDiv.append(this.$sampleCapsDiv);\n        this.stylizeCaptions(this.$sampleCapsDiv);\n      }\n    }\n    else if (form === 'keyboard') {\n      // add a current list of keyboard shortcuts\n      $kbHeading = $('<h2>',{\n        text: this.tt.prefHeadingKeyboard2\n      });\n      $kbList = $('<ul>');\n      // create arrays of kbLabels and keys\n      kbLabels = [];\n      keys = [];\n      for (i=0; i<this.controls.length; i++) {\n        if (this.controls[i] === 'play') {\n          kbLabels.push(this.tt.play + '/' + this.tt.pause);\n          keys.push('p</span> <em>' + this.tt.or + '</em> <span class=\"able-help-modifiers\"> ' + this.tt.spacebar);\n        }\n        else if (this.controls[i] === 'restart') {\n          kbLabels.push(this.tt.restart);\n          keys.push('s');\n        }\n        else if (this.controls[i] === 'rewind') {\n          kbLabels.push(this.tt.rewind);\n          keys.push('r');\n        }\n        else if (this.controls[i] === 'forward') {\n          kbLabels.push(this.tt.forward);\n          keys.push('f');\n        }\n        else if (this.controls[i] === 'volume') {\n          kbLabels.push(this.tt.volume);\n          keys.push('v</span> <em>' + this.tt.or + '</em> <span class=\"able-modkey\">1-9');\n          // mute toggle\n          kbLabels.push(this.tt.mute + '/' + this.tt.unmute);\n          keys.push('m');\n        }\n        else if (this.controls[i] === 'captions') {\n          if (this.captions.length > 1) {\n            // caption button launches a Captions popup menu\n            kbLabels.push(this.tt.captions);\n          }\n          else {\n            // there is only one caption track\n            // therefore caption button is a toggle\n            if (this.captionsOn) {\n              kbLabels.push(this.tt.hideCaptions);\n            }\n            else {\n              kbLabels.push(this.tt.showCaptions);\n            }\n          }\n          keys.push('c');\n        }\n        else if (this.controls[i] === 'descriptions') {\n          if (this.descOn) {\n            kbLabels.push(this.tt.turnOffDescriptions);\n          }\n          else {\n            kbLabels.push(this.tt.turnOnDescriptions);\n          }\n          keys.push('d');\n        }\n        else if (this.controls[i] === 'prefs') {\n          kbLabels.push(this.tt.preferences);\n          keys.push('e');\n        }\n        else if (this.controls[i] === 'help') {\n          kbLabels.push(this.tt.help);\n          keys.push('h');\n        }\n      }\n      for (i=0; i<keys.length; i++) {\n        // alt\n        kbListText = '<span class=\"able-modkey-alt\">';\n        if (this.prefAltKey === 1) {\n          kbListText += this.tt.prefAltKey + ' + ';\n        }\n        kbListText += '</span>';\n        // ctrl\n        kbListText += '<span class=\"able-modkey-ctrl\">';\n        if (this.prefCtrlKey === 1) {\n          kbListText += this.tt.prefCtrlKey + ' + ';\n        }\n        kbListText += '</span>';\n        // shift\n        kbListText += '<span class=\"able-modkey-shift\">';\n        if (this.prefShiftKey === 1) {\n          kbListText += this.tt.prefShiftKey + ' + ';\n        }\n        kbListText += '</span>';\n        kbListText += '<span class=\"able-modkey\">' + keys[i] + '</span>';\n        kbListText += ' = ' + kbLabels[i];\n        $kbListItem = $('<li>',{\n          html: kbListText\n        });\n        $kbList.append($kbListItem);\n      }\n      // add Escape key\n      kbListText = '<span class=\"able-modkey\">' + this.tt.escapeKey + '</span>';\n      kbListText += ' = ' + this.tt.escapeKeyFunction;\n      $kbListItem = $('<li>',{\n        html: kbListText\n      });\n      $kbList.append($kbListItem);\n      // put it all together\n      $prefsDiv.append($kbHeading,$kbList);\n    }\n\n    // $prefsDiv (dialog) must be appended to the BODY!\n    // otherwise when aria-hidden=\"true\" is applied to all background content\n    // that will include an ancestor of the dialog,\n    // which will render the dialog unreadable by screen readers\n    $('body').append($prefsDiv);\n    dialog = new AccessibleDialog($prefsDiv, this.$prefsButton, 'dialog', formTitle, $prefsIntro, thisObj.tt.closeButtonLabel, '32em');\n\n    // Add save and cancel buttons.\n    $prefsDiv.append('<hr>');\n    saveButton = $('<button class=\"modal-button\">' + this.tt.save + '</button>');\n    cancelButton = $('<button class=\"modal-button\">' + this.tt.cancel + '</button>');\n    saveButton.click(function () {\n      dialog.hide();\n      thisObj.savePrefsFromForm();\n    });\n    cancelButton.click(function () {\n      dialog.hide();\n      thisObj.resetPrefsForm();\n    });\n\n    $prefsDiv.append(saveButton);\n    $prefsDiv.append(cancelButton);\n\n    // add global reference for future control\n    if (form === 'captions') {\n      this.captionPrefsDialog = dialog;\n    }\n    else if (form === 'descriptions') {\n      this.descPrefsDialog = dialog;\n    }\n    else if (form === 'keyboard') {\n      this.keyboardPrefsDialog = dialog;\n    }\n    else if (form === 'transcript') {\n      this.transcriptPrefsDialog = dialog;\n    }\n\n    // Add click handler for dialog close button\n    // (button is added in dialog.js)\n    $('div.able-prefs-form button.modalCloseButton').click(function() {\n      thisObj.resetPrefsForm();\n    })\n    // Add handler for escape key\n    $('div.able-prefs-form').keydown(function(event) {\n      if (event.which === 27) { // escape\n        thisObj.resetPrefsForm();\n      }\n    });\n  };\n\n   // Reset preferences form with default values from cookie\n   // Called when user clicks cancel or close button in Prefs Dialog\n   // also called when user presses Escape\n\n   AblePlayer.prototype.resetPrefsForm = function () {\n\n     var thisObj, cookie, available, i, prefName, thisDiv, thisId;\n\n     thisObj = this;\n     cookie = this.getCookie();\n     available = this.getAvailablePreferences();\n     for (i=0; i<available.length; i++) {\n       prefName = available[i]['name'];\n       if (prefName === 'prefDescFormat') {\n         if (this[prefName] === 'text') {\n           $('input[value=\"text\"]').prop('checked',true);\n         }\n         else {\n           $('input[value=\"video\"]').prop('checked',true);\n         }\n       }\n       else if ((prefName.indexOf('Captions') !== -1) && (prefName !== 'prefCaptions')) {\n         // this is a caption-related select box\n         $('select[name=\"' + prefName + '\"]').val(cookie.preferences[prefName]);\n       }\n       else { // all others are checkboxes\n         if (this[prefName] === 1) {\n           $('input[name=\"' + prefName + '\"]').prop('checked',true);\n          }\n          else {\n            $('input[name=\"' + prefName + '\"]').prop('checked',false);\n          }\n        }\n      }\n      // also restore style of sample caption div\n      this.stylizeCaptions(this.$sampleCapsDiv);\n   };\n\n  // Return a prefs object constructed from the form.\n  AblePlayer.prototype.savePrefsFromForm = function () {\n    // called when user saves the Preferences form\n    // update cookie with new value\n    var numChanges, numCapChanges, capSizeChanged, capSizeValue, newValue;\n\n    numChanges = 0;\n    numCapChanges = 0; // changes to caption-style-related preferences\n    capSizeChanged = false;\n    var cookie = this.getCookie();\n    var available = this.getAvailablePreferences();\n    for (var i=0; i < available.length; i++) {\n      // only prefs with labels are used in the Prefs form\n      if (available[i]['label']) {\n        var prefName = available[i]['name'];\n        if (prefName == 'prefDescFormat') {\n          this.prefDescFormat = $('input[name=\"' + prefName + '\"]:checked').val();\n          if (this.prefDescFormat !== cookie.preferences['prefDescFormat']) { // user changed setting\n            cookie.preferences['prefDescFormat'] = this.prefDescFormat;\n            numChanges++;\n          }\n        }\n        else if ((prefName.indexOf('Captions') !== -1) && (prefName !== 'prefCaptions')) {\n          // this is one of the caption-related select fields\n          newValue = $('select[name=\"' + prefName + '\"]').val();\n          if (cookie.preferences[prefName] !== newValue) { // user changed setting\n            cookie.preferences[prefName] = newValue;\n            // also update global var for this pref (for caption fields, not done elsewhere)\n            this[prefName] = newValue;\n            numChanges++;\n            numCapChanges++;\n          }\n          if (prefName === 'prefCaptionsSize') {\n            capSizeChanged = true;\n            capSizeValue = newValue;\n          }\n        }\n        else { // all other fields are checkboxes\n          if ($('input[name=\"' + prefName + '\"]').is(':checked')) {\n            cookie.preferences[prefName] = 1;\n            if (this[prefName] === 1) {\n              // nothing has changed\n            }\n            else {\n              // user has just turned this pref on\n              this[prefName] = 1;\n              numChanges++;\n            }\n          }\n          else { // thisPref is not checked\n            cookie.preferences[prefName] = 0;\n            if (this[prefName] === 1) {\n              // user has just turned this pref off\n              this[prefName] = 0;\n              numChanges++;\n            }\n            else {\n              // nothing has chaged\n            }\n          }\n        }\n      }\n    }\n    if (numChanges > 0) {\n      this.setCookie(cookie);\n      this.showAlert(this.tt.prefSuccess);\n    }\n    else {\n      this.showAlert(this.tt.prefNoChange);\n    }\n    if (this.player === 'youtube' &&\n      (typeof this.usingYouTubeCaptions !== 'undefined' && this.usingYouTubeCaptions) &&\n      capSizeChanged) {\n        // update font size of YouTube captions\n        this.youTubePlayer.setOption(this.ytCaptionModule,'fontSize',this.translatePrefs('size',capSizeValue,'youtube'));\n    }\n    this.updatePrefs();\n    if (numCapChanges > 0) {\n      this.stylizeCaptions(this.$captionsDiv);\n      // also apply same changes to descriptions, if present\n      if (typeof this.$descDiv !== 'undefined') {\n        this.stylizeCaptions(this.$descDiv);\n      }\n    }\n  }\n\n  // Updates player based on current prefs.  Safe to call multiple times.\n  AblePlayer.prototype.updatePrefs = function () {\n\n    var modHelp;\n\n    // modifier keys (update help text)\n    if (this.prefAltKey === 1) {\n      modHelp = 'Alt + ';\n    }\n    else {\n      modHelp = '';\n    }\n    if (this.prefCtrlKey === 1) {\n      modHelp += 'Control + ';\n    }\n    if (this.prefShiftKey === 1) {\n      modHelp += 'Shift + ';\n    }\n    $('.able-help-modifiers').text(modHelp);\n\n    // tabbable transcript\n    if (this.prefTabbable === 1) {\n      $('.able-transcript span.able-transcript-seekpoint').attr('tabindex','0');\n    }\n    else {\n      $('.able-transcript span.able-transcript-seekpoint').removeAttr('tabindex');\n    }\n    this.updateCaption();\n    // In case description-related settings have changed, re-initialize description\n    this.refreshingDesc = true;\n    this.initDescription();\n  };\n\n  AblePlayer.prototype.usingModifierKeys = function(e) {\n    // return true if user is holding down required modifier keys\n    if ((this.prefAltKey === 1) && !e.altKey) {\n      return false;\n    }\n    if ((this.prefCtrlKey === 1) && !e.ctrlKey) {\n      return false;\n    }\n    if ((this.prefShiftKey === 1) && !e.shiftKey) {\n      return false;\n    }\n    return true;\n  };\n\n})(jQuery);\n\n(function ($) {\n  // See section 4.1 of dev.w3.org/html5/webvtt for format details.\n  AblePlayer.prototype.parseWebVTT = function(srcFile,text) {\n\n    // Normalize line ends to \\n.\n    text = text.replace(/(\\r\\n|\\n|\\r)/g,'\\n');\n\n    var parserState = {\n      src: srcFile,\n      text: text,\n      error: null,\n      metadata: {},\n      cues: [],\n      line: 1,\n      column: 1\n    };\n\n    try {\n      act(parserState, parseFileBody);\n    }\n    catch (err) {\n      var errString = 'Invalid WebVTT file: ' + parserState.src + '\\n';\n      errString += 'Line: ' + parserState.line + ', ';\n      errString += 'Column: ' + parserState.column + '\\n';\n      errString += err;\n      if (console.warn) {\n        console.warn(errString);\n      }\n      else if (console.log) {\n        console.log(errString);\n      }\n    }\n    return parserState;\n  }\n\n  function actList(state, list) {\n    var results = [];\n    for (var ii in list) {\n      results.push(act(state, list[ii]));\n    }\n    return results;\n  }\n\n  // Applies the action and checks for errors.\n  function act(state, action) {\n    var val = action(state);\n    if (state.error !== null) {\n      throw state.error;\n    }\n    return val;\n  }\n\n  function updatePosition(state, cutText) {\n    for (var ii in cutText) {\n      if (cutText[ii] === '\\n') {\n        state.column = 1;\n        state.line += 1;\n      }\n      else {\n        state.column += 1;\n      }\n    }\n  }\n\n  function cut(state, length) {\n    var returnText = state.text.substring(0, length);\n    updatePosition(state, returnText);\n    state.text = state.text.substring(length);\n    return returnText;\n  }\n\n  function cutLine(state, length) {\n    var nextEOL = state.text.indexOf('\\n');\n    var returnText;\n    if (nextEOL === -1) {\n      returnText = state.text;\n      updatePosition(state, returnText);\n      state.text = '';\n    }\n    else {\n      returnText = state.text.substring(0, nextEOL);\n      updatePosition(state, returnText + '\\n');\n      state.text = state.text.substring(nextEOL + 1);\n    }\n    return returnText;\n  }\n\n  function peekLine(state) {\n    var nextEOL = state.text.indexOf('\\n');\n    if (nextEOL === -1) {\n      return state.text;\n    }\n    else {\n      return state.text.substring(0, nextEOL);\n    }\n  }\n\n  function parseFileBody(state) {\n    actList(state, [\n      eatOptionalBOM,\n      eatSignature]);\n    var c = state.text[0];\n    if (c === ' ' || c === '\\t' || c === '\\n') {\n      actList(state, [\n        eatUntilEOLInclusive,\n        parseMetadataHeaders,\n        eatAtLeast1EmptyLines,\n        parseCuesAndComments]);\n    }\n    else {\n      state.error = \"WEBVTT signature not followed by whitespace.\";\n    }\n  }\n\n  // Parses all metadata headers until a cue is discovered.\n  function parseMetadataHeaders(state) {\n    while (true) {\n      var nextLine = peekLine(state);\n      if (nextLine.indexOf('-->') !== -1) {\n        return;\n      }\n      else if (nextLine.length === 0) {\n        return;\n      }\n      else {\n        var keyValue = act(state, getMetadataKeyValue);\n        state.metadata[keyValue[0]] = keyValue[1];\n        act(state, eatUntilEOLInclusive);\n      }\n    }\n  }\n\n  function nextSpaceOrNewline(s) {\n    var possible = [];\n    var spaceIndex = s.indexOf(' ');\n    if (spaceIndex >= 0) {\n      possible.push(spaceIndex);\n    }\n    var tabIndex = s.indexOf('\\t');\n    if (tabIndex >= 0) {\n      possible.push(tabIndex);\n    }\n    var lineIndex = s.indexOf('\\n');\n    if (lineIndex >= 0) {\n      possible.push(lineIndex);\n    }\n\n    return Math.min.apply(null, possible);\n  }\n\n  function getMetadataKeyValue(state) {\n    var next = state.text.indexOf('\\n');\n    var pair = cut(state, next);\n    var colon = pair.indexOf(':');\n    if (colon === -1) {\n      state.error = 'Missing colon.';\n      return;\n    }\n    else {\n      var pairName = pair.substring(0, colon);\n      var pairValue = pair.substring(colon + 1);\n      return [pairName, pairValue];\n    }\n  }\n\n  function getSettingsKeyValue(state) {\n    var next = nextSpaceOrNewline(state.text);\n    var pair = cut(state, next);\n    var colon = pair.indexOf(':');\n    if (colon === -1) {\n      state.error = 'Missing colon.';\n      return;\n    }\n    else {\n      var pairName = pair.substring(0, colon);\n      var pairValue = pair.substring(colon + 1);\n      return [pairName, pairValue];\n    }\n  }\n\n  function parseCuesAndComments(state) {\n    while (true) {\n      var nextLine = peekLine(state);\n      // If NOTE is not on a line all its own, it must be followed by a space or tab.\n      if (nextLine.indexOf('NOTE') === 0 && ((nextLine.length === 4) || (nextLine[4] === ' ') || (nextLine[4] === '\\t'))) {\n        actList(state, [eatComment, eatEmptyLines]);\n      }\n      else if ($.trim(nextLine).length === 0 && state.text.length > 0) {\n        act(state, eatEmptyLines);\n      }\n      else if ($.trim(nextLine).length > 0) {\n        act(state, parseCue);\n      }\n      else {\n        // Everythings parsed!\n        return;\n      }\n    }\n  }\n\n  function parseCue(state) {\n\n    var nextLine = peekLine(state);\n    var cueId;\n    var errString;\n\n    if(nextLine.indexOf('-->') === -1) {\n    \tcueId = cutLine(state);\n    \tnextLine = peekLine(state);\n    \tif(nextLine.indexOf('-->') === -1) {\n        errString = 'Invalid WebVTT file: ' + state.src + '\\n';\n        errString += 'Line: ' + state.line + ', ';\n        errString += 'Column: ' + state.column + '\\n';\n        errString += 'Expected cue timing for cueId \\''+cueId+'\\' but found: ' + nextLine + '\\n';\n        if (console.warn) {\n          console.warn(errString);\n        }\n        else if (console.log) {\n          console.log(errString);\n        }\n        return; // Return leaving line for parseCuesAndComments to handle\n    \t}\n    }\n\n    var cueTimings = actList(state, [getTiming,\n                                     eatAtLeast1SpacesOrTabs,\n                                     eatArrow,\n                                     eatAtLeast1SpacesOrTabs,\n                                     getTiming]);\n\n    var startTime = cueTimings[0];\n    var endTime = cueTimings[4];\n    if (startTime >= endTime) {\n      state.error = 'Start time is not sooner than end time.';\n      return;\n    }\n\n    act(state, eatSpacesOrTabs);\n    var cueSettings = act(state, getCueSettings);\n    // Cut the newline.\n    cut(state, 1);\n    var components = act(state, getCuePayload);\n\n    if (typeof cueId === 'undefined') {\n      cueId = state.cues.length + 1;\n    }\n    state.cues.push({\n      id: cueId,\n      start: startTime,\n      end: endTime,\n      settings: cueSettings,\n      components: components\n    });\n  }\n\n  function getCueSettings(state) {\n    var cueSettings = {};\n    while (state.text.length > 0 && state.text[0] !== '\\n') {\n      var keyValue = act(state, getSettingsKeyValue);\n      cueSettings[keyValue[0]] = keyValue[1];\n      act(state, eatSpacesOrTabs);\n    }\n    return cueSettings;\n  }\n\n  function getCuePayload(state) {\n    // Parser based on instructions in draft.\n    var result = {type: 'internal', tagName: '', value: '', classes: [], annotation: '', parent: null, children: [], language: ''};\n    var current = result;\n    var languageStack = [];\n    while (state.text.length > 0) {\n      var nextLine = peekLine(state);\n      if (nextLine.indexOf('-->') !== -1 || /^\\s*$/.test(nextLine)) {\n        break; // Handle empty cues\n      }\n      // Have to separately detect double-lines ending cue due to our non-standard parsing.\n      // TODO: Redo outer algorithm to conform to W3 spec?\n      if (state.text.length >= 2 && state.text[0] === '\\n' && state.text[1] === '\\n') {\n        cut(state, 2);\n        break;\n      }\n\n      var token = getCueToken(state);\n      // We'll use the tokens themselves as objects where possible.\n      if (token.type === 'string') {\n        current.children.push(token);\n      }\n      else if (token.type === 'startTag') {\n        token.type = token.tagName;\n        // Define token.parent; added by Terrill to fix bug end 'endTag' loop\n        token.parent = current;\n        if ($.inArray(token.tagName, ['i', 'b', 'u', 'ruby']) !== -1) {\n          if (languageStack.length > 0) {\n            current.language = languageStack[languageStack.length - 1];\n          }\n          current.children.push(token);\n          current = token;\n        }\n        else if (token.tagName === 'rt' && current.tagName === 'ruby') {\n          if (languageStack.length > 0) {\n            current.language = languageStack[languageStack.length - 1];\n          }\n          current.children.push(token);\n          current = token;\n        }\n        else if (token.tagName === 'c') {\n          token.value = token.annotation;\n          if (languageStack.length > 0) {\n            current.language = languageStack[languageStack.length - 1];\n          }\n          current.children.push(token);\n          current = token;\n        }\n        else if (token.tagName === 'v') {\n          token.value = token.annotation;\n          if (languageStack.length > 0) {\n            current.language = languageStack[languageStack.length - 1];\n          }\n          current.children.push(token);\n          current = token;\n        }\n        else if (token.tagName === 'lang') {\n          languageStack.push(token.annotation);\n          if (languageStack.length > 0) {\n            current.language = languageStack[languageStack.length - 1];\n          }\n          current.children.push(token);\n          current = token;\n        }\n      }\n      else if (token.type === 'endTag') {\n        if (token.tagName === current.type && $.inArray(token.tagName, ['c', 'i', 'b', 'u', 'ruby', 'rt', 'v']) !== -1) {\n          // NOTE from Terrill: This was resulting in an error because current.parent was undefined\n          // Fixed (I think) by assigning current token to token.parent in 'startTag' loop\n          current = current.parent;\n        }\n        else if (token.tagName === 'lang' && current.type === 'lang') {\n          current = current.parent;\n          languageStack.pop();\n        }\n        else if (token.tagName === 'ruby' && current.type === 'rt') {\n          current = current.parent.parent;\n        }\n      }\n      else if (token.type === 'timestampTag') {\n        var tempState = {\n          text: token.value,\n          error: null,\n          metadata: {},\n          cues: [],\n          line: 1,\n          column: 1\n        };\n        try {\n          var timing = act(tempState, getTiming);\n          if (tempState.text.length === 0) {\n            token.value = timing;\n            current.push(token);\n          }\n        }\n        catch (err) {\n        }\n      }\n    }\n    return result;\n  }\n\n  // Gets a single cue token; uses the method in the w3 specification.\n  function getCueToken(state) {\n    var tokenState = 'data';\n    var result = [];\n    var buffer = '';\n    var token = {type: '', tagName: '', value: '', classes: [], annotation: '', children: []}\n\n    while (true) {\n      var c;\n      // Double newlines indicate end of token.\n      if (state.text.length >= 2 && state.text[0] === '\\n' && state.text[1] === '\\n') {\n        c = '\\u0004';\n      }\n      else if (state.text.length > 0) {\n        c = state.text[0];\n      }\n      else {\n        // End of file.\n        c = '\\u0004';\n      }\n      if (tokenState === 'data') {\n        if (c === '&') {\n          buffer = '&';\n          tokenState = 'escape';\n        }\n        else if (c === '<') {\n          if (result.length === 0) {\n            tokenState = 'tag';\n          }\n          else {\n            token.type = 'string';\n            token.value = result.join('');\n            return token;\n          }\n        }\n        else if (c === '\\u0004') {\n          return {type: 'string', value: result.join('')};\n        }\n        else {\n          result.push(c);\n        }\n      }\n      else if (tokenState === 'escape') {\n        if (c === '&') {\n          result.push(buffer);\n          buffer = '&';\n        }\n        else if (c.match(/[0-9a-z]/)) {\n          buffer += c;\n        }\n        else if (c === ';') {\n          if (buffer === '&amp') {\n            result.push('&');\n          }\n          else if (buffer === '&lt') {\n            result.push('<');\n          }\n          else if (buffer === '&gt') {\n            result.push('>');\n          }\n          else if (buffer === '&lrm') {\n            result.push('\\u200e');\n          }\n          else if (buffer === '&rlm') {\n            result.push('\\u200f');\n          }\n          else if (buffer === '&nbsp') {\n            result.push('\\u00a0');\n          }\n          else {\n            result.push(buffer);\n            result.push(';');\n          }\n          tokenState = 'data';\n        }\n        else if (c === '<' || c === '\\u0004') {\n          result.push(buffer);\n          token.type = 'string';\n          token.value = result.join('');\n          return token;\n        }\n        else if (c === '\\t' || c === '\\n' || c === '\\u000c' || c === ' ') { // Handle unescaped & chars as strings\n          result.push(buffer);\n          token.type = 'string';\n          token.value = result.join('');\n          return token;\n        }\n        else {\n          result.push(buffer);\n          tokenState = 'data';\n        }\n      }\n      else if (tokenState === 'tag') {\n        if (c === '\\t' || c === '\\n' || c === '\\u000c' || c === ' ') {\n          tokenState = 'startTagAnnotation';\n        }\n        else if (c === '.') {\n          tokenState = 'startTagClass';\n        }\n        else if (c === '/') {\n          tokenState = 'endTag';\n        }\n        else if (c.match('[0-9]')) {\n          tokenState = 'timestampTag';\n          result.push(c);\n        }\n        else if (c === '>') {\n          cut(state, 1);\n          break;\n        }\n        else if (c === '\\u0004') {\n          token.tagName = '';\n          token.type = 'startTag';\n          return token;\n        }\n        else {\n          result.push(c);\n          tokenState = 'startTag';\n        }\n      }\n      else if (tokenState === 'startTag') {\n        if (c === '\\t' || c === '\\u000c' || c === ' ') {\n          tokenState = 'startTagAnnotation';\n        }\n        else if (c === '\\n') {\n          buffer = c;\n          tokenState = 'startTagAnnotation';\n        }\n        else if (c === '.') {\n          tokenState = 'startTagClass';\n        }\n        else if (c === '>') {\n          cut(state, 1);\n          token.tagName = result.join('');\n          token.type = 'startTag';\n          return token;\n        }\n        else if (c === '\\u0004') {\n          token.tagName = result.join('');\n          token.type = 'startTag';\n          return token;\n        }\n        else {\n          result.push(c);\n        }\n      }\n      else if (tokenState === 'startTagClass') {\n        if (c === '\\t' || c === '\\u000c' || c === ' ') {\n          token.classes.push(buffer);\n          buffer = '';\n          tokenState = 'startTagAnnotation';\n        }\n        else if (c === '\\n') {\n          token.classes.push(buffer);\n          buffer = c;\n          tokenState = 'startTagAnnotation';\n        }\n        else if (c === '.') {\n          token.classes.push(buffer);\n          buffer = \"\";\n        }\n        else if (c === '>') {\n          cut(state, 1);\n          token.classes.push(buffer);\n          token.type = 'startTag';\n          token.tagName = result.join('');\n          return token;\n        }\n        else if (c === '\\u0004') {\n          token.classes.push(buffer);\n          token.type = 'startTag';\n          token.tagName = result.join('');\n          return token;\n        }\n        else {\n          buffer += 'c';\n        }\n      }\n      else if (tokenState === 'startTagAnnotation') {\n        if (c === '>') {\n          cut(state, 1);\n          buffer = $.trim(buffer).replace(/ +/, ' ');\n          token.type = 'startTag';\n          token.tagName = result.join('');\n          token.annotation = buffer;\n          return token;\n        }\n        else if (c === '\\u0004') {\n          buffer = $.trim(buffer).replace(/ +/, ' ');\n          token.type = 'startTag';\n          token.tagName = result.join('');\n          token.annotation = buffer;\n          return token;\n        }\n        else {\n          buffer += c;\n        }\n      }\n      else if (tokenState === 'endTag') {\n        if (c === '>') {\n          cut(state, 1);\n          token.type = 'endTag';\n          token.tagName = result.join('');\n          return token;\n        }\n        else if (c === '\\u0004') {\n          token.type = 'endTag';\n          token.tagName = result.join('');\n          return token;\n        }\n        else {\n          result.push(c);\n        }\n      }\n      else if (tokenState === 'timestampTag') {\n        if (c === '>') {\n          cut(state, 1);\n          token.type = 'timestampTag';\n          token.name = result.join('');\n          return token;\n        }\n        else if (c === '\\u0004') {\n          token.type = 'timestampTag';\n          token.name = result.join('');\n          return token;\n        }\n        else {\n          result.push(c);\n        }\n      }\n      else {\n        throw 'Unknown tokenState ' + tokenState;\n      }\n\n      cut(state, 1);\n    }\n  }\n\n  function eatComment(state) {\n    // Cut the NOTE line.\n    var noteLine = cutLine(state);\n    if (noteLine.indexOf('-->') !== -1) {\n      state.error = 'Invalid syntax: --> in NOTE line.';\n      return;\n    }\n    while (true) {\n      var nextLine = peekLine(state);\n      if ($.trim(nextLine).length === 0) {\n        // End of comment.\n        return;\n      }\n      else if (nextLine.indexOf('-->') !== -1) {\n        state.error = 'Invalid syntax: --> in comment.';\n        return;\n      }\n      else {\n        cutLine(state);\n      }\n    }\n  }\n\n  // Initial byte order mark.\n  function eatOptionalBOM(state) {\n    if (state.text[0] === '\\ufeff') {\n      cut(state, 1);\n    }\n\n  }\n\n  // \"WEBVTT\" string.\n  function eatSignature(state) {\n    if (state.text.substring(0,6) === 'WEBVTT') {\n      cut(state, 6);\n    }\n    else {\n      state.error = 'Invalid signature.';\n    }\n  }\n\n  function eatArrow(state) {\n    if (state.text.length < 3 || state.text.substring(0,3) !== '-->') {\n      state.error = 'Missing -->';\n    }\n    else {\n      cut(state, 3);\n    }\n  }\n\n  function eatSingleSpaceOrTab(state) {\n    if (state.text[0] === '\\t' || state.text[0] === ' ') {\n      cut(state, 1);\n    }\n    else {\n      state.error = 'Missing space.';\n    }\n  }\n\n  function eatSpacesOrTabs(state) {\n    while (state.text[0] === '\\t' || state.text[0] === ' ') {\n      cut(state, 1);\n    }\n  }\n\n  function eatAtLeast1SpacesOrTabs(state) {\n    var numEaten = 0;\n    while (state.text[0] === '\\t' || state.text[0] === ' ') {\n      cut(state, 1);\n      numEaten += 1;\n    }\n    if (numEaten === 0) {\n      state.error = 'Missing space.';\n    }\n  }\n\n  function eatUntilEOLInclusive(state) {\n    var nextEOL = state.text.indexOf('\\n');\n    if (nextEOL === -1) {\n      state.error = 'Missing EOL.';\n    }\n    else {\n      cut(state, nextEOL + 1);\n    }\n  }\n\n  function eatEmptyLines(state) {\n    while (state.text.length > 0) {\n      var nextLine = peekLine(state);\n      if ($.trim(nextLine).length === 0) {\n        cutLine(state);\n      }\n      else {\n        break;\n      }\n    }\n  }\n\n  // Eats empty lines, but throws an error if there's not at least one.\n  function eatAtLeast1EmptyLines(state) {\n    var linesEaten = 0;\n    while (state.text.length > 0) {\n      var nextLine = peekLine(state);\n      if ($.trim(nextLine).length === 0) {\n        cutLine(state);\n        linesEaten += 1;\n      }\n      else {\n        break;\n      }\n    }\n    if (linesEaten === 0) {\n      state.error = 'Missing empty line.';\n    }\n  }\n\n  function getTiming(state) {\n    var nextSpace = nextSpaceOrNewline(state.text);\n    if (nextSpace === -1) {\n      state.error('Missing timing.');\n      return;\n    }\n    var timestamp = cut(state, nextSpace);\n\n    var results = /((\\d\\d):)?((\\d\\d):)(\\d\\d).(\\d\\d\\d)|(\\d+).(\\d\\d\\d)/.exec(timestamp);\n\n    if (!results) {\n      state.error = 'Unable to parse timestamp';\n      return;\n    }\n    var time = 0;\n    var hours = results[2];\n    var minutes = results[4];\n\n    if (minutes) {\n      if (parseInt(minutes, 10) > 59) {\n        state.error = 'Invalid minute range';\n        return;\n      }\n      if (hours) {\n        time += 3600 * parseInt(hours, 10);\n      }\n      time += 60 * parseInt(minutes, 10);\n      var seconds = results[5];\n      if (parseInt(seconds, 10) > 59) {\n        state.error = 'Invalid second range';\n        return;\n      }\n\n      time += parseInt(seconds, 10);\n      time += parseInt(results[6], 10) / 1000;\n    }\n    else {\n      time += parseInt(results[7], 10);\n      time += parseInt(results[8], 10) / 1000;\n    }\n\n    return time;\n  }\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.injectPlayerCode = function() {\n    // create and inject surrounding HTML structure\n    // If IOS:\n    //  If video:\n    //   IOS does not support any of the player's functionality\n    //   - everything plays in its own player\n    //   Therefore, AblePlayer is not loaded & all functionality is disabled\n    //   (this all determined. If this is IOS && video, this function is never called)\n    //  If audio:\n    //   HTML cannot be injected as a *parent* of the <audio> element\n    //   It is therefore injected *after* the <audio> element\n    //   This is only a problem in IOS 6 and earlier,\n    //   & is a known bug, fixed in IOS 7\n\n    var thisObj, vidcapContainer, prefsGroups, i;\n    thisObj = this;\n\n    // create three wrappers and wrap them around the media element. From inner to outer:\n    // $mediaContainer - contains the original media element\n    // $ableDiv - contains the media player and all its objects (e.g., captions, controls, descriptions)\n    // $ableWrapper - contains additional widgets (e.g., transcript window, sign window)\n    this.$mediaContainer = this.$media.wrap('<div class=\"able-media-container\"></div>').parent();\n    this.$ableDiv = this.$mediaContainer.wrap('<div class=\"able\"></div>').parent();\n    this.$ableWrapper = this.$ableDiv.wrap('<div class=\"able-wrapper\"></div>').parent();\n\n    this.$ableWrapper.css({\n      'max-width': this.playerMaxWidth + 'px'\n    });\n\n    this.injectOffscreenHeading();\n\n    // youtube adds its own big play button\n    // if (this.mediaType === 'video' && this.player !== 'youtube') {\n    if (this.mediaType === 'video') {\n      if (this.iconType == 'font' && this.player !== 'youtube') {\n        this.injectBigPlayButton();\n      }\n\n      // add container that captions or description will be appended to\n      // Note: new Jquery object must be assigned _after_ wrap, hence the temp vidcapContainer variable\n      vidcapContainer = $('<div>',{\n        'class' : 'able-vidcap-container'\n      });\n      this.$vidcapContainer = this.$mediaContainer.wrap(vidcapContainer).parent();\n    }\n\n    this.injectPlayerControlArea();\n    this.injectTextDescriptionArea();\n\n    if (this.transcriptType) {\n      if (this.transcriptType === 'popup' || this.transcriptType === 'external') {\n        this.injectTranscriptArea();\n      }\n      else if (this.transcriptType === 'manual') {\n        this.setupManualTranscript();\n      }\n      this.addTranscriptAreaEvents();\n    }\n\n    this.injectAlert();\n    this.injectPlaylist();\n  };\n\n  AblePlayer.prototype.injectOffscreenHeading = function () {\n    // Add offscreen heading to the media container.\n    // The heading injected in $ableDiv is one level deeper than the closest parent heading\n    // as determined by getNextHeadingLevel()\n    var headingType;\n    this.playerHeadingLevel = this.getNextHeadingLevel(this.$ableDiv); // returns in integer 1-6\n    headingType = 'h' + this.playerHeadingLevel.toString();\n    this.$headingDiv = $('<' + headingType + '>');\n    this.$ableDiv.prepend(this.$headingDiv);\n    this.$headingDiv.addClass('able-offscreen');\n    this.$headingDiv.text(this.tt.playerHeading);\n  };\n\n  AblePlayer.prototype.injectBigPlayButton = function () {\n    this.$bigPlayButton = $('<button>', {\n      'class': 'able-big-play-button icon-play',\n      'aria-hidden': true,\n      'tabindex': -1\n    });\n\n    var thisObj = this;\n    this.$bigPlayButton.click(function () {\n      thisObj.handlePlay();\n    });\n\n    this.$mediaContainer.prepend(this.$bigPlayButton);\n  };\n\n  AblePlayer.prototype.injectPlayerControlArea = function () {\n    this.$playerDiv = $('<div>', {\n      'class' : 'able-player',\n      'role' : 'region',\n      'aria-label' : this.mediaType + ' player'\n    });\n    this.$playerDiv.addClass('able-'+this.mediaType);\n\n    // The default skin depends a bit on a Now Playing div\n    // so go ahead and add one\n    // However, it's only populated if this.showNowPlaying = true\n    this.$nowPlayingDiv = $('<div>',{\n      'class' : 'able-now-playing',\n      'aria-live' : 'assertive',\n      'aria-atomic': 'true'\n    });\n\n    this.$controllerDiv = $('<div>',{\n      'class' : 'able-controller'\n    });\n    this.$controllerDiv.addClass('able-' + this.iconColor + '-controls');\n\n    this.$statusBarDiv = $('<div>',{\n      'class' : 'able-status-bar'\n    });\n    this.$timer = $('<span>',{\n      'class' : 'able-timer'\n    });\n    this.$elapsedTimeContainer = $('<span>',{\n      'class': 'able-elapsedTime',\n      text: '0:00'\n    });\n    this.$durationContainer = $('<span>',{\n      'class': 'able-duration'\n    });\n    this.$timer.append(this.$elapsedTimeContainer).append(this.$durationContainer);\n\n    this.$speed = $('<span>',{\n      'class' : 'able-speed',\n      'aria-live' : 'assertive'\n    }).text(this.tt.speed + ': 1x');\n\n    this.$status = $('<span>',{\n      'class' : 'able-status',\n      'aria-live' : 'polite'\n    });\n\n    // Put everything together.\n    this.$statusBarDiv.append(this.$timer, this.$speed, this.$status);\n    this.$playerDiv.append(this.$nowPlayingDiv, this.$controllerDiv, this.$statusBarDiv);\n    this.$ableDiv.append(this.$playerDiv);\n  };\n\n  AblePlayer.prototype.injectTextDescriptionArea = function () {\n\n    // create a div for exposing description\n    // description will be exposed via role=\"alert\" & announced by screen readers\n    this.$descDiv = $('<div>',{\n      'class': 'able-descriptions',\n      'aria-live': 'assertive',\n      'aria-atomic': 'true'\n    });\n    // Start off with description hidden.\n    // It will be exposed conditionally within description.js > initDescription()\n    this.$descDiv.hide();\n    this.$ableDiv.append(this.$descDiv);\n  };\n\n  AblePlayer.prototype.getDefaultWidth = function(which) {\n\n    // return default width of resizable elements\n    // these values are somewhat arbitrary, but seem to result in good usability\n    // if users disagree, they can resize (and resposition) them\n    if (which === 'transcript') {\n      return 450;\n    }\n    else if (which === 'sign') {\n      return 400;\n    }\n  };\n\n  AblePlayer.prototype.positionDraggableWindow = function (which, width) {\n\n    // which is either 'transcript' or 'sign'\n\n    var cookie, cookiePos, $window, dragged, windowPos, currentWindowPos, firstTime, zIndex;\n\n    cookie = this.getCookie();\n    if (which === 'transcript') {\n      $window = this.$transcriptArea;\n      if (typeof cookie.transcript !== 'undefined') {\n        cookiePos = cookie.transcript;\n      }\n    }\n    else if (which === 'sign') {\n      $window = this.$signWindow;\n      if (typeof cookie.transcript !== 'undefined') {\n        cookiePos = cookie.sign;\n      }\n    }\n    if (typeof cookiePos !== 'undefined' && !($.isEmptyObject(cookiePos))) {\n      // position window using stored values from cookie\n      $window.css({\n        'position': cookiePos['position'],\n        'width': cookiePos['width'],\n        'z-index': cookiePos['zindex']\n      });\n      if (cookiePos['position'] === 'absolute') {\n        $window.css({\n          'top': cookiePos['top'],\n          'left': cookiePos['left']\n        });\n      }\n      // since cookie is not page-specific, z-index needs may vary across different pages\n      this.updateZIndex(which);\n    }\n    else {\n      // position window using default values\n      windowPos = this.getOptimumPosition(which, width);\n      if (typeof width === 'undefined') {\n        width = this.getDefaultWidth(which);\n      }\n      $window.css({\n        'position': windowPos[0],\n        'width': width,\n        'z-index': windowPos[3]\n      });\n      if (windowPos[0] === 'absolute') {\n        $window.css({\n          'top': windowPos[1] + 'px',\n          'left': windowPos[2] + 'px',\n        });\n      }\n    }\n  };\n\n  AblePlayer.prototype.getOptimumPosition = function (targetWindow, targetWidth) {\n\n    // returns optimum position for targetWindow, as an array with the following structure:\n    // 0 - CSS position ('absolute' or 'relative')\n    // 1 - top\n    // 2 - left\n    // 3 - zindex (if not default)\n    // targetWindow is either 'transcript' or 'sign'\n    // if there is room to the right of the player, position element there\n    // else if there is room the left of the player, position element there\n    // else position element beneath player\n\n    var gap, position, ableWidth, ableHeight, ableOffset, ableTop, ableLeft,\n       windowWidth, otherWindowWidth, zIndex;\n\n    if (typeof targetWidth === 'undefined') {\n      targetWidth = this.getDefaultWidth(targetWindow);\n    }\n\n    gap = 5; // number of pixels to preserve between Able Player objects\n\n    position = []; // position, top, left\n\n    ableWidth = this.$ableDiv.width();\n    ableHeight = this.$ableDiv.height();\n    ableOffset = this.$ableDiv.offset();\n    ableTop = ableOffset.top;\n    ableLeft = ableOffset.left;\n    windowWidth = $(window).width();\n    otherWindowWidth = 0; // width of other visiable draggable windows will be added to this\n\n    if (targetWindow === 'transcript') {\n      if (typeof this.$signWindow !== 'undefined') {\n        if (this.$signWindow.is(':visible')) {\n          otherWindowWidth = this.$signWindow.width() + gap;\n        }\n      }\n    }\n    else if (targetWindow === 'sign') {\n      if (typeof this.$transcriptArea !== 'undefined') {\n        if (this.$transcriptArea.is(':visible')) {\n          otherWindowWidth = this.$transcriptArea.width() + gap;\n        }\n      }\n    }\n    if (targetWidth < (windowWidth - (ableLeft + ableWidth + gap + otherWindowWidth))) {\n      // there's room to the left of $ableDiv\n      position[0] = 'absolute';\n      position[1] = 0;\n      position[2] = ableWidth + otherWindowWidth + gap;\n    }\n    else if (targetWidth + gap < ableLeft) {\n      // there's room to the right of $ableDiv\n      position[0] = 'absolute';\n      position[1] = 0;\n      position[2] = ableLeft - targetWidth - gap;\n    }\n    else {\n      // position element below $ableDiv\n      position[0] = 'relative';\n      // no need to define top, left, or z-index\n    }\n    return position;\n  };\n\n  AblePlayer.prototype.injectPoster = function ($element, context) {\n\n    // get poster attribute from media element and append that as an img to $element\n    // context is either 'youtube' or 'fallback'\n    var poster, width, height;\n\n    if (context === 'youtube') {\n      if (typeof this.ytWidth !== 'undefined') {\n        width = this.ytWidth;\n        height = this.ytHeight;\n      }\n      else if (typeof this.playerMaxWidth !== 'undefined') {\n        width = this.playerMaxWidth;\n        height = this.playerMaxHeight;\n      }\n      else if (typeof this.playerWidth !== 'undefined') {\n        width = this.playerWidth;\n        height = this.playerHeight;\n      }\n    }\n    else if (context === 'fallback') {\n      width = '100%';\n      height = 'auto';\n    }\n\n    if (this.$media.attr('poster')) {\n      poster = this.$media.attr('poster');\n      this.$posterImg = $('<img>',{\n        'class': 'able-poster',\n        'src' : poster,\n        'alt' : \"\",\n        'role': \"presentation\",\n        'width': width,\n        'height': height\n      });\n      $element.append(this.$posterImg);\n    }\n  };\n\n  AblePlayer.prototype.injectAlert = function () {\n\n    // inject two alerts, one visible for all users and one for screen reader users only\n\n    var top;\n\n    this.$alertBox = $('<div role=\"alert\"></div>');\n    this.$alertBox.addClass('able-alert');\n    this.$alertBox.appendTo(this.$ableDiv);\n    if (this.mediaType == 'audio') {\n      top = -10;\n    }\n    else {\n      top = Math.round(this.$mediaContainer.offset().top * 10) / 10;\n    }\n    this.$alertBox.css({\n      top: top + 'px'\n    });\n\n    this.$srAlertBox = $('<div role=\"alert\"></div>');\n    this.$srAlertBox.addClass('able-screenreader-alert');\n    this.$srAlertBox.appendTo(this.$ableDiv);\n  };\n\n  AblePlayer.prototype.injectPlaylist = function () {\n    if (this.playlistEmbed === true) {\n      // move playlist into player, immediately before statusBarDiv\n      var playlistClone = this.$playlistDom.clone();\n      playlistClone.insertBefore(this.$statusBarDiv);\n      // Update to the new playlist copy.\n      this.$playlist = playlistClone.find('li');\n    }\n\n    if (this.hasPlaylist && this.$sources.length === 0) {\n      // no source elements were provided. Construct them from the first playlist item\n      this.initializing = true;\n      this.swapSource(0);\n      // redefine this.$sources now that media contains one or more <source> elements\n      this.$sources = this.$media.find('source');\n    }\n  };\n\n  // Create popup div and append to player\n  // 'which' parameter is either 'captions', 'chapters', 'prefs', or 'X-window' (e.g., \"sign-window\")\n  AblePlayer.prototype.createPopup = function (which) {\n\n    var thisObj, $popup, $thisButton, $thisListItem, $prevButton, $nextButton,\n        selectedTrackIndex, selectedTrack;\n    thisObj = this;\n    $popup = $('<div>',{\n      'id': this.mediaId + '-' + which + '-menu',\n      'class': 'able-popup'\n    });\n    if (which === 'chapters' || which === 'prefs' || which === 'sign-window' || which === 'transcript-window') {\n      $popup.addClass('able-popup-no-radio');\n    }\n    $popup.on('keydown',function (e) {\n      $thisButton = $(this).find('input:focus');\n      $thisListItem = $thisButton.parent();\n      if ($thisListItem.is(':first-child')) {\n        // this is the first button\n        $prevButton = $(this).find('input').last(); // wrap to bottom\n        $nextButton = $thisListItem.next().find('input');\n      }\n      else if ($thisListItem.is(':last-child')) {\n        // this is the last button\n        $prevButton = $thisListItem.prev().find('input');\n        $nextButton = $(this).find('input').first(); // wrap to top\n      }\n      else {\n        $prevButton = $thisListItem.prev().find('input');\n        $nextButton = $thisListItem.next().find('input');\n      }\n      if (e.which === 9) { // Tab\n        if (e.shiftKey) {\n          $thisListItem.removeClass('able-focus');\n          $prevButton.focus();\n          $prevButton.parent().addClass('able-focus');\n        }\n        else {\n          $thisListItem.removeClass('able-focus');\n          $nextButton.focus();\n          $nextButton.parent().addClass('able-focus');\n        }\n      }\n      else if (e.which === 40 || e.which === 39) { // down or right arrow\n        $thisListItem.removeClass('able-focus');\n        $nextButton.focus();\n        $nextButton.parent().addClass('able-focus');\n      }\n      else if (e.which == 38 || e.which === 37) { // up or left arrow\n        $thisListItem.removeClass('able-focus');\n        $prevButton.focus();\n        $prevButton.parent().addClass('able-focus');\n      }\n      else if (e.which === 32 || e.which === 13) { // space or enter\n        $('input:focus').click();\n      }\n      else if (e.which === 27) {  // Escape\n        $thisListItem.removeClass('able-focus');\n        thisObj.closePopups();\n      }\n      e.preventDefault();\n    });\n    this.$controllerDiv.append($popup);\n    return $popup;\n  };\n\n  AblePlayer.prototype.closePopups = function () {\n    if (this.chaptersPopup && this.chaptersPopup.is(':visible')) {\n      this.chaptersPopup.hide();\n      this.$chaptersButton.focus();\n    }\n    if (this.captionsPopup && this.captionsPopup.is(':visible')) {\n      this.captionsPopup.hide();\n      this.$ccButton.focus();\n    }\n    if (this.prefsPopup && this.prefsPopup.is(':visible')) {\n      this.prefsPopup.hide();\n      this.$prefsButton.focus();\n    }\n    if (this.$windowPopup && this.$windowPopup.is(':visible')) {\n      this.$windowPopup.hide();\n      this.$windowButton.show().focus();\n    }\n    if (this.$volumeSlider && this.$volumeSlider.is(':visible')) {\n      this.$volumeSlider.hide().attr('aria-hidden','true');\n      this.$volumeAlert.text(this.tt.volumeSliderClosed);\n      this.$volumeButton.focus();\n    }\n  };\n\n  AblePlayer.prototype.setupPopups = function (which) {\n\n    // Create and fill in the popup menu forms for various controls.\n    // parameter 'which' is passed if refreshing content of an existing popup ('captions' or 'chapters')\n\n    var popups, thisObj, hasDefault, i, j,\n        tracks, trackList, trackItem, track,\n        radioName, radioId, trackButton, trackLabel,\n        prefCats, prefCat, prefLabel;\n\n    popups = [];\n    if (typeof which === 'undefined') {\n      popups.push('prefs');\n    }\n\n    if (which === 'captions' || (typeof which === 'undefined')) {\n      if (typeof this.ytCaptions !== 'undefined') { // setup popup for YouTube captions\n        if (this.ytCaptions.length) {\n          popups.push('ytCaptions');\n        }\n      }\n      else { // setup popup for local captions\n        if (this.captions.length > 0) {\n          popups.push('captions');\n        }\n      }\n    }\n    if (which === 'chapters' || (typeof which === 'undefined')) {\n      if (this.chapters.length > 0 && this.useChaptersButton) {\n        popups.push('chapters');\n      }\n    }\n    if (popups.length > 0) {\n      thisObj = this;\n      for (var i=0; i<popups.length; i++) {\n        var popup = popups[i];\n        hasDefault = false;\n        if (popup == 'prefs') {\n          this.prefsPopup = this.createPopup('prefs');\n        }\n        else if (popup == 'captions') {\n          if (typeof this.captionsPopup === 'undefined') {\n            this.captionsPopup = this.createPopup('captions');\n          }\n          tracks = this.captions;\n        }\n        else if (popup == 'chapters') {\n          if (typeof this.chaptersPopup === 'undefined') {\n            this.chaptersPopup = this.createPopup('chapters');\n          }\n          if (this.selectedChapters) {\n            tracks = this.selectedChapters.cues;\n          }\n          else if (this.chapters.length >= 1) {\n            tracks = this.chapters[0].cues;\n          }\n          else {\n            tracks = [];\n          }\n        }\n        else if (popup == 'ytCaptions') {\n          if (typeof this.captionsPopup === 'undefined') {\n            this.captionsPopup = this.createPopup('captions');\n          }\n          tracks = this.ytCaptions;\n        }\n        var trackList = $('<ul></ul>');\n        radioName = this.mediaId + '-' + popup + '-choice';\n        if (popup === 'prefs') {\n          prefCats = this.getPreferencesGroups();\n          for (j in prefCats) {\n            trackItem = $('<li></li>');\n            prefCat = prefCats[j];\n            if (prefCat === 'captions') {\n              prefLabel = this.tt.prefMenuCaptions;\n            }\n            else if (prefCat === 'descriptions') {\n              prefLabel = this.tt.prefMenuDescriptions;\n            }\n            else if (prefCat === 'keyboard') {\n              prefLabel = this.tt.prefMenuKeyboard;\n            }\n            else if (prefCat === 'transcript') {\n              prefLabel = this.tt.prefMenuTranscript;\n            }\n            radioId = this.mediaId + '-' + popup + '-' + j;\n            trackButton = $('<input>',{\n              'type': 'radio',\n              'val': prefCat,\n              'name': radioName,\n              'id': radioId\n            });\n            trackLabel = $('<label>',{\n              'for': radioId\n            });\n            trackLabel.text(prefLabel);\n            trackButton.click(function(event) {\n              var whichPref = $(this).attr('value');\n              thisObj.setFullscreen(false);\n              if (whichPref === 'captions') {\n                thisObj.captionPrefsDialog.show();\n              }\n              else if (whichPref === 'descriptions') {\n                thisObj.descPrefsDialog.show();\n              }\n              else if (whichPref === 'keyboard') {\n                thisObj.keyboardPrefsDialog.show();\n              }\n              else if (whichPref === 'transcript') {\n                thisObj.transcriptPrefsDialog.show();\n              }\n              thisObj.closePopups();\n            });\n            trackItem.append(trackButton,trackLabel);\n            trackList.append(trackItem);\n          }\n          this.prefsPopup.append(trackList);\n        }\n        else {\n          for (j in tracks) {\n            trackItem = $('<li></li>');\n            track = tracks[j];\n            radioId = this.mediaId + '-' + popup + '-' + j;\n            trackButton = $('<input>',{\n              'type': 'radio',\n              'val': j,\n              'name': radioName,\n              'id': radioId\n            });\n            if (track.def) {\n              trackButton.attr('checked','checked');\n              hasDefault = true;\n            }\n            trackLabel = $('<label>',{\n              'for': radioId\n            });\n            if (track.language !== 'undefined') {\n              trackButton.attr('lang',track.language);\n            }\n            if (popup == 'captions' || popup == 'ytCaptions') {\n              trackLabel.text(track.label || track.language);\n              trackButton.click(this.getCaptionClickFunction(track));\n            }\n            else if (popup == 'chapters') {\n              trackLabel.text(this.flattenCueForCaption(track) + ' - ' + this.formatSecondsAsColonTime(track.start));\n              var getClickFunction = function (time) {\n                return function () {\n                  thisObj.seekTo(time);\n                  // stopgap to prevent spacebar in Firefox from reopening popup\n                  // immediately after closing it (used in handleChapters())\n                  thisObj.hidingPopup = true;\n                  thisObj.chaptersPopup.hide();\n                  // Ensure stopgap gets cancelled if handleChapters() isn't called\n                  // e.g., if user triggered button with Enter or mouse click, not spacebar\n                  setTimeout(function() {\n                    thisObj.hidingPopup = false;\n                  }, 100);\n                  thisObj.$chaptersButton.focus();\n                }\n              }\n              trackButton.on('click keypress',getClickFunction(track.start));\n            }\n            trackItem.append(trackButton,trackLabel);\n            trackList.append(trackItem);\n          }\n          if (popup == 'captions' || popup == 'ytCaptions') {\n            // add a captions off button\n            radioId = this.mediaId + '-captions-off';\n            trackItem = $('<li></li>');\n            trackButton = $('<input>',{\n              'type': 'radio',\n              'name': radioName,\n              'id': radioId\n            });\n            trackLabel = $('<label>',{\n              'for': radioId\n            });\n            trackLabel.text(this.tt.captionsOff);\n            if (this.prefCaptions === 0) {\n              trackButton.attr('checked','checked');\n            }\n            trackButton.click(this.getCaptionOffFunction());\n            trackItem.append(trackButton,trackLabel);\n            trackList.append(trackItem);\n          }\n          if (!hasDefault) {\n            // check the first button\n            trackList.find('input').first().attr('checked','checked');\n          }\n          if (popup === 'captions' || popup === 'ytCaptions') {\n            this.captionsPopup.html(trackList);\n          }\n          else if (popup === 'chapters') {\n            this.chaptersPopup.html(trackList);\n          }\n        }\n      }\n    }\n  };\n\n  AblePlayer.prototype.provideFallback = function(reason) {\n\n    // provide ultimate fallback for users who are unable to play the media\n    // reason is a specific error message\n    // if reason is 'NO SUPPORT', use standard text from translation file\n\n    var $fallbackDiv, width, mediaClone, fallback, fallbackText,\n    showBrowserList, browsers, i, b, browserList;\n\n    // Could show list of supporting browsers if 99.9% confident the error is truly an outdated browser\n    // Too many sites say \"You need to update your browser\" when in fact I'm using a current version\n    showBrowserList = false;\n\n    $fallbackDiv = $('<div>',{\n      'class' : 'able-fallback',\n      'role' : 'alert',\n    });\n    // override default width of .able-fallback with player width, if known\n    if (typeof this.playerMaxWidth !== 'undefined') {\n      width = this.playerMaxWidth + 'px';\n    }\n    else if (this.$media.attr('width')) {\n      width = parseInt(this.$media.attr('width'), 10) + 'px';\n    }\n    else {\n      width = '100%';\n    }\n    $fallbackDiv.css('max-width',width);\n\n    // use fallback content that's nested inside the HTML5 media element, if there is any\n    mediaClone = this.$media.clone();\n    $('source, track', mediaClone).remove();\n    fallback = mediaClone.html().trim();\n    if (fallback.length) {\n      $fallbackDiv.html(fallback);\n    }\n    else if (reason == 'NO SUPPORT') {\n      // not using a supporting browser; use standard text from translation file\n      fallbackText =  this.tt.fallbackError1 + ' ' + this.tt[this.mediaType] + '. ';\n      fallbackText += this.tt.fallbackError2 + ':';\n      fallback = $('<p>').text(fallbackText);\n      $fallbackDiv.html(fallback);\n      showBrowserList = true;\n    }\n    else {\n      // show the reason\n      $fallbackDiv.text(reason);\n    }\n\n    if (showBrowserList) {\n      browserList = $('<ul>');\n      browsers = this.getSupportingBrowsers();\n      for (i=0; i<browsers.length; i++) {\n        b = $('<li>');\n        b.text(browsers[i].name + ' ' + browsers[i].minVersion + ' ' + this.tt.orHigher);\n        browserList.append(b);\n      }\n      $fallbackDiv.append(browserList);\n    }\n\n    // if there's a poster, show that as well\n    this.injectPoster($fallbackDiv, 'fallback');\n\n    // inject $fallbackDiv into the DOM and remove broken content\n    if (typeof this.$ableWrapper !== 'undefined') {\n      this.$ableWrapper.before($fallbackDiv);\n      this.$ableWrapper.remove();\n    }\n    else if (typeof this.$media !== 'undefined') {\n      this.$media.before($fallbackDiv);\n      this.$media.remove();\n    }\n    else {\n      $('body').prepend($fallbackDiv);\n    }\n  };\n\n  AblePlayer.prototype.getSupportingBrowsers = function() {\n\n    var browsers = [];\n    browsers[0] = {\n      name:'Chrome',\n      minVersion: '31'\n    };\n    browsers[1] = {\n      name:'Firefox',\n      minVersion: '34'\n    };\n    browsers[2] = {\n      name:'Internet Explorer',\n      minVersion: '10'\n    };\n    browsers[3] = {\n      name:'Opera',\n      minVersion: '26'\n    };\n    browsers[4] = {\n      name:'Safari for Mac OS X',\n      minVersion: '7.1'\n    };\n    browsers[5] = {\n      name:'Safari for iOS',\n      minVersion: '7.1'\n    };\n    browsers[6] = {\n      name:'Android Browser',\n      minVersion: '4.1'\n    };\n    browsers[7] = {\n      name:'Chrome for Android',\n      minVersion: '40'\n    };\n    return browsers;\n  }\n\n  // Calculates the layout for controls based on media and options.\n  // Returns an object with keys 'ul', 'ur', 'bl', 'br' for upper-left, etc.\n  // Each associated value is array of control names to put at that location.\n  AblePlayer.prototype.calculateControlLayout = function () {\n    // Removed rewind/forward in favor of seek bar.\n\n    var controlLayout = {\n      'ul': ['play','restart','rewind','forward'],\n      'ur': ['seek'],\n      'bl': [],\n      'br': []\n    }\n\n    // test for browser support for volume before displaying volume button\n    if (this.browserSupportsVolume()) {\n      // volume buttons are: 'mute','volume-soft','volume-medium','volume-loud'\n      // previously supported button were: 'volume-up','volume-down'\n      this.volumeButton = 'volume-' + this.getVolumeName(this.volume);\n      controlLayout['ur'].push('volume');\n    }\n    else {\n      this.volume = false;\n    }\n\n    // Calculate the two sides of the bottom-left grouping to see if we need separator pipe.\n    var bll = [];\n    var blr = [];\n\n    if (this.isPlaybackRateSupported()) {\n      bll.push('slower');\n      bll.push('faster');\n    }\n\n    if (this.mediaType === 'video') {\n      if (this.hasCaptions) {\n        bll.push('captions'); //closed captions\n      }\n      if (this.hasSignLanguage) {\n        bll.push('sign'); // sign language\n      }\n      if ((this.hasOpenDesc || this.hasClosedDesc) && (this.useDescriptionsButton)) {\n        bll.push('descriptions'); //audio description\n      }\n    }\n\n    if (this.transcriptType === 'popup') {\n      bll.push('transcript');\n    }\n\n    if (this.mediaType === 'video' && this.hasChapters && this.useChaptersButton) {\n      bll.push('chapters');\n    }\n\n    controlLayout['br'].push('preferences');\n\n    // TODO: JW currently has a bug with fullscreen, anything that can be done about this?\n    if (this.mediaType === 'video' && this.allowFullScreen && this.player !== 'jw') {\n      controlLayout['br'].push('fullscreen');\n    }\n\n    // Include the pipe only if we need to.\n    if (bll.length > 0 && blr.length > 0) {\n      controlLayout['bl'] = bll;\n      controlLayout['bl'].push('pipe');\n      controlLayout['bl'] = controlLayout['bl'].concat(blr);\n    }\n    else {\n      controlLayout['bl'] = bll.concat(blr);\n    }\n\n    return controlLayout;\n  };\n\n  AblePlayer.prototype.addControls = function() {\n\n    // determine which controls to show based on several factors:\n    // mediaType (audio vs video)\n    // availability of tracks (e.g., for closed captions & audio description)\n    // browser support (e.g., for sliders and speedButtons)\n    // user preferences (???)\n    // some controls are aligned on the left, and others on the right\n    var useSpeedButtons, useFullScreen,\n    i, j, k, controls, $controllerSpan, tooltipId, tooltipX, tooltipY, control,\n    buttonImg, buttonImgSrc, buttonTitle, newButton, iconClass, buttonIcon, buttonUse,\n    leftWidth, rightWidth, totalWidth, leftWidthStyle, rightWidthStyle,\n    controllerStyles, vidcapStyles, captionLabel, popupMenuId;\n\n    var thisObj = this;\n\n    var baseSliderWidth = 100;\n\n    // Initializes the layout into the this.controlLayout variable.\n    var controlLayout = this.calculateControlLayout();\n\n    var sectionByOrder = {0: 'ul', 1:'ur', 2:'bl', 3:'br'};\n\n    // add an empty div to serve as a tooltip\n    tooltipId = this.mediaId + '-tooltip';\n    this.$tooltipDiv = $('<div>',{\n      'id': tooltipId,\n      'class': 'able-tooltip'\n    });\n    this.$controllerDiv.append(this.$tooltipDiv);\n\n    // step separately through left and right controls\n    for (i = 0; i <= 3; i++) {\n      controls = controlLayout[sectionByOrder[i]];\n      if ((i % 2) === 0) {\n        $controllerSpan = $('<div>',{\n          'class': 'able-left-controls'\n        });\n      }\n      else {\n        $controllerSpan = $('<div>',{\n          'class': 'able-right-controls'\n        });\n      }\n      this.$controllerDiv.append($controllerSpan);\n      for (j=0; j<controls.length; j++) {\n        control = controls[j];\n        if (control === 'seek') {\n          var sliderDiv = $('<div class=\"able-seekbar\"></div>');\n          var sliderLabel = this.mediaType + ' ' + this.tt.seekbarLabel;\n          $controllerSpan.append(sliderDiv);\n          var duration = this.getDuration();\n          if (duration == 0) {\n            // set arbitrary starting duration, and change it when duration is known\n            duration = 100;\n          }\n          this.seekBar = new AccessibleSlider(this.mediaType, sliderDiv, 'horizontal', baseSliderWidth, 0, duration, this.seekInterval, sliderLabel, 'seekbar', true, 'visible');\n        }\n        else if (control === 'pipe') {\n          // TODO: Unify this with buttons somehow to avoid code duplication\n          var pipe = $('<span>', {\n            'tabindex': '-1',\n            'aria-hidden': 'true'\n          });\n          if (this.iconType === 'font') {\n            pipe.addClass('icon-pipe');\n          }\n          else {\n            var pipeImg = $('<img>', {\n              src: this.rootPath + '/button-icons/' + this.iconColor + '/pipe.png',\n              alt: '',\n              role: 'presentation'\n            });\n            pipe.append(pipeImg);\n          }\n          $controllerSpan.append(pipe);\n        }\n        else {\n          // this control is a button\n          if (control === 'volume') {\n            buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/' + this.volumeButton + '.png';\n          }\n          else if (control === 'fullscreen') {\n            buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/fullscreen-expand.png';\n          }\n          else if (control === 'slower') {\n            if (this.speedIcons === 'animals') {\n              buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/turtle.png';\n            }\n            else {\n              buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/slower.png';\n            }\n          }\n          else if (control === 'faster') {\n            if (this.speedIcons === 'animals') {\n              buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/rabbit.png';\n            }\n            else {\n              buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/faster.png';\n            }\n          }\n          else {\n            buttonImgSrc = this.rootPath + '/button-icons/' + this.iconColor + '/' + control + '.png';\n          }\n          buttonTitle = this.getButtonTitle(control);\n\n          // icomoon documentation recommends the following markup for screen readers:\n          // 1. link element (or in our case, button). Nested inside this element:\n          // 2. span that contains the icon font (in our case, buttonIcon)\n          // 3. span that contains a visually hidden label for screen readers (buttonLabel)\n          // In addition, we are adding aria-label to the button (but not title)\n          // And if iconType === 'image', we are replacing #2 with an image (with alt=\"\" and role=\"presentation\")\n          // This has been thoroughly tested and works well in all screen reader/browser combinations\n          // See https://github.com/ableplayer/ableplayer/issues/81\n          newButton = $('<button>',{\n            'type': 'button',\n            'tabindex': '0',\n            'aria-label': buttonTitle,\n            'class': 'able-button-handler-' + control\n          });\n          if (control === 'volume' || control === 'preferences') {\n            // This same ARIA for captions and chapters are added elsewhere\n            if (control == 'preferences') {\n              popupMenuId = this.mediaId + '-prefs-menu';\n            }\n            else if (control === 'volume') {\n              popupMenuId = this.mediaId + '-volume-slider';\n            }\n            newButton.attr({\n              'aria-controls': popupMenuId\n            });\n          }\n          if (this.iconType === 'font') {\n            if (control === 'volume') {\n              iconClass = 'icon-' + this.volumeButton;\n            }\n            else if (control === 'slower') {\n              if (this.speedIcons === 'animals') {\n                iconClass = 'icon-turtle';\n              }\n              else {\n                iconClass = 'icon-slower';\n              }\n            }\n            else if (control === 'faster') {\n              if (this.speedIcons === 'animals') {\n                iconClass = 'icon-rabbit';\n              }\n              else {\n                iconClass = 'icon-faster';\n              }\n            }\n            else {\n              iconClass = 'icon-' + control;\n            }\n            buttonIcon = $('<span>',{\n              'class': iconClass,\n              'aria-hidden': 'true'\n            });\n            newButton.append(buttonIcon);\n          }\n          else if (this.iconType === 'svg') {\n            if (control === 'volume') {\n              iconClass = 'svg-' + this.volumeButton;\n            }\n            else if (control === 'fullscreen') {\n              iconClass = 'svg-fullscreen-expand';\n            }\n            else if (control === 'slower') {\n              if (this.speedIcons === 'animals') {\n                iconClass = 'svg-turtle';\n              }\n              else {\n                iconClass = 'svg-slower';\n              }\n            }\n            else if (control === 'faster') {\n              if (this.speedIcons === 'animals') {\n                iconClass = 'svg-rabbit';\n              }\n              else {\n                iconClass = 'svg-faster';\n              }\n            }\n            else {\n              iconClass = 'svg-' + control;\n            }\n            buttonIcon = $('<svg>',{\n              'class': iconClass\n            });\n            buttonUse = $('<use>',{\n              'xlink:href': this.rootPath + '/icons/able-icons.svg#' + iconClass\n            });\n            buttonIcon.append(buttonUse);\n            newButton.html(buttonIcon);\n\n            // Final step: Need to refresh the DOM in order for browser to process & display the SVG\n            newButton.html(newButton.html());\n          }\n          else {\n            // use images\n            buttonImg = $('<img>',{\n              'src': buttonImgSrc,\n              'alt': '',\n              'role': 'presentation'\n            });\n            newButton.append(buttonImg);\n          }\n          // add the visibly-hidden label for screen readers that don't support aria-label on the button\n          var buttonLabel = $('<span>',{\n            'class': 'able-clipped'\n          }).text(buttonTitle);\n          newButton.append(buttonLabel);\n          // add an event listener that displays a tooltip on mouseenter or focus\n          newButton.on('mouseenter focus',function(event) {\n            var label = $(this).attr('aria-label');\n\n            // get position of this button\n            var position = $(this).position();\n            var buttonHeight = $(this).height();\n            var buttonWidth = $(this).width();\n            var tooltipY = position.top - buttonHeight - 15;\n            var centerTooltip = true;\n            if ($(this).closest('div').hasClass('able-right-controls')) {\n              // this control is on the right side\n              if ($(this).is(':last-child')) {\n                // this is the last control on the right\n                // position tooltip using the \"right\" property\n                centerTooltip = false;\n                var tooltipX = 0;\n                var tooltipStyle = {\n                  left: '',\n                  right: tooltipX + 'px',\n                  top: tooltipY + 'px'\n                };\n              }\n            }\n            else {\n              // this control is on the left side\n              if ($(this).is(':first-child')) {\n                // this is the first control on the left\n                centerTooltip = false;\n                var tooltipX = position.left;\n                var tooltipStyle = {\n                  left: tooltipX + 'px',\n                  right: '',\n                  top: tooltipY + 'px'\n                };\n              }\n            }\n            if (centerTooltip) {\n              // populate tooltip, then calculate its width before showing it\n              var tooltipWidth = $('#' + tooltipId).text(label).width();\n              // center the tooltip horizontally over the button\n              var tooltipX = position.left - tooltipWidth/2;\n              var tooltipStyle = {\n                left: tooltipX + 'px',\n                right: '',\n                top: tooltipY + 'px'\n              };\n            }\n            var tooltip = $('#' + tooltipId).text(label).css(tooltipStyle);\n            thisObj.showTooltip(tooltip);\n            $(this).on('mouseleave blur',function() {\n              $('#' + tooltipId).text('').hide();\n            })\n          });\n\n          if (control === 'captions') {\n            if (!this.prefCaptions || this.prefCaptions !== 1) {\n              // captions are available, but user has them turned off\n              if (this.captions.length > 1) {\n                captionLabel = this.tt.captions;\n              }\n              else {\n                captionLabel = this.tt.showCaptions;\n              }\n              newButton.addClass('buttonOff').attr('title',captionLabel);\n            }\n          }\n          else if (control === 'descriptions') {\n            if (!this.prefDesc || this.prefDesc !== 1) {\n              // user prefer non-audio described version\n              // Therefore, load media without description\n              // Description can be toggled on later with this button\n              newButton.addClass('buttonOff').attr('title',this.tt.turnOnDescriptions);\n            }\n          }\n\n          $controllerSpan.append(newButton);\n\n          // create variables of buttons that are referenced throughout the AblePlayer object\n          if (control === 'play') {\n            this.$playpauseButton = newButton;\n          }\n          else if (control === 'captions') {\n            this.$ccButton = newButton;\n          }\n          else if (control === 'sign') {\n            this.$signButton = newButton;\n            // gray out sign button if sign language window is not active\n            if (!(this.$signWindow.is(':visible'))) {\n              this.$signButton.addClass('buttonOff');\n            }\n          }\n          else if (control === 'descriptions') {\n            this.$descButton = newButton;\n            // button will be enabled or disabled in description.js > initDescription()\n          }\n          else if (control === 'mute') {\n            this.$muteButton = newButton;\n          }\n          else if (control === 'transcript') {\n            this.$transcriptButton = newButton;\n            // gray out transcript button if transcript is not active\n            if (!(this.$transcriptDiv.is(':visible'))) {\n              this.$transcriptButton.addClass('buttonOff').attr('title',this.tt.showTranscript);\n            }\n          }\n          else if (control === 'fullscreen') {\n            this.$fullscreenButton = newButton;\n          }\n          else if (control === 'chapters') {\n            this.$chaptersButton = newButton;\n          }\n          else if (control === 'preferences') {\n            this.$prefsButton = newButton;\n          }\n          else if (control === 'volume') {\n            this.$volumeButton = newButton;\n          }\n        }\n        if (control === 'volume') {\n          // in addition to the volume button, add a hidden slider\n          this.addVolumeSlider($controllerSpan);\n        }\n      }\n      if ((i % 2) == 1) {\n        this.$controllerDiv.append('<div style=\"clear:both;\"></div>');\n      }\n    }\n\n    if (this.mediaType === 'video') {\n\n      if (typeof this.$captionsDiv !== 'undefined') {\n        // stylize captions based on user prefs\n        this.stylizeCaptions(this.$captionsDiv);\n      }\n      if (typeof this.$descDiv !== 'undefined') {\n        // stylize descriptions based on user's caption prefs\n        this.stylizeCaptions(this.$descDiv);\n      }\n    }\n\n    // combine left and right controls arrays for future reference\n    this.controls = [];\n    for (var sec in controlLayout) {\n      this.controls = this.controls.concat(controlLayout[sec]);\n    }\n\n    // Update state-based display of controls.\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.useSvg = function () {\n\n    // Modified from IcoMoon.io svgxuse\n    // @copyright Copyright (c) 2016 IcoMoon.io\n    // @license   Licensed under MIT license\n    // See https://github.com/Keyamoon/svgxuse\n    // @version   1.1.16\n\n    var cache = Object.create(null); // holds xhr objects to prevent multiple requests\n    var checkUseElems,\n        tid; // timeout id\n    var debouncedCheck = function () {\n      clearTimeout(tid);\n      tid = setTimeout(checkUseElems, 100);\n    };\n    var unobserveChanges = function () {\n      return;\n    };\n    var observeChanges = function () {\n      var observer;\n      window.addEventListener('resize', debouncedCheck, false);\n      window.addEventListener('orientationchange', debouncedCheck, false);\n      if (window.MutationObserver) {\n        observer = new MutationObserver(debouncedCheck);\n        observer.observe(document.documentElement, {\n          childList: true,\n          subtree: true,\n          attributes: true\n        });\n        unobserveChanges = function () {\n          try {\n            observer.disconnect();\n            window.removeEventListener('resize', debouncedCheck, false);\n            window.removeEventListener('orientationchange', debouncedCheck, false);\n          } catch (ignore) {}\n        };\n      }\n      else {\n        document.documentElement.addEventListener('DOMSubtreeModified', debouncedCheck, false);\n        unobserveChanges = function () {\n          document.documentElement.removeEventListener('DOMSubtreeModified', debouncedCheck, false);\n          window.removeEventListener('resize', debouncedCheck, false);\n          window.removeEventListener('orientationchange', debouncedCheck, false);\n        };\n      }\n    };\n    var xlinkNS = 'http://www.w3.org/1999/xlink';\n    checkUseElems = function () {\n      var base,\n          bcr,\n          fallback = '', // optional fallback URL in case no base path to SVG file was given and no symbol definition was found.\n          hash,\n          i,\n          Request,\n          inProgressCount = 0,\n          isHidden,\n          url,\n          uses,\n          xhr;\n      if (window.XMLHttpRequest) {\n        Request = new XMLHttpRequest();\n        if (Request.withCredentials !== undefined) {\n          Request = XMLHttpRequest;\n        }\n        else {\n          Request = XDomainRequest || undefined;\n        }\n      }\n      if (Request === undefined) {\n        return;\n      }\n      function observeIfDone() {\n        // If done with making changes, start watching for chagnes in DOM again\n        inProgressCount -= 1;\n        if (inProgressCount === 0) { // if all xhrs were resolved\n          observeChanges(); // watch for changes to DOM\n        }\n      }\n      function attrUpdateFunc(spec) {\n        return function () {\n          if (cache[spec.base] !== true) {\n            spec.useEl.setAttributeNS(xlinkNS, 'xlink:href', '#' + spec.hash);\n          }\n        };\n      }\n      function onloadFunc(xhr) {\n        return function () {\n          var body = document.body;\n          var x = document.createElement('x');\n          var svg;\n          xhr.onload = null;\n          x.innerHTML = xhr.responseText;\n          svg = x.getElementsByTagName('svg')[0];\n          if (svg) {\n            svg.setAttribute('aria-hidden', 'true');\n            svg.style.position = 'absolute';\n            svg.style.width = 0;\n            svg.style.height = 0;\n            svg.style.overflow = 'hidden';\n            body.insertBefore(svg, body.firstChild);\n          }\n          observeIfDone();\n        };\n      }\n      function onErrorTimeout(xhr) {\n        return function () {\n          xhr.onerror = null;\n          xhr.ontimeout = null;\n          observeIfDone();\n        };\n      }\n      unobserveChanges(); // stop watching for changes to DOM\n      // find all use elements\n      uses = document.getElementsByTagName('use');\n      for (i = 0; i < uses.length; i += 1) {\n        try {\n          bcr = uses[i].getBoundingClientRect();\n        } catch (ignore) {\n          // failed to get bounding rectangle of the use element\n          bcr = false;\n        }\n        url = uses[i].getAttributeNS(xlinkNS, 'href').split('#');\n        base = url[0];\n        hash = url[1];\n        isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;\n        if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {\n          // the use element is empty\n          // if there is a reference to an external SVG, try to fetch it\n          // use the optional fallback URL if there is no reference to an external SVG\n          if (fallback && !base.length && hash && !document.getElementById(hash)) {\n            base = fallback;\n          }\n          if (base.length) {\n            // schedule updating xlink:href\n            xhr = cache[base];\n            if (xhr !== true) {\n              // true signifies that prepending the SVG was not required\n              setTimeout(attrUpdateFunc({\n                useEl: uses[i],\n                base: base,\n                hash: hash\n              }), 0);\n            }\n            if (xhr === undefined) {\n              xhr = new Request();\n              cache[base] = xhr;\n              xhr.onload = onloadFunc(xhr);\n              xhr.onerror = onErrorTimeout(xhr);\n              xhr.ontimeout = onErrorTimeout(xhr);\n              xhr.open('GET', base);\n              xhr.send();\n              inProgressCount += 1;\n            }\n          }\n        }\n        else {\n          if (!isHidden) {\n            if (cache[base] === undefined) {\n              // remember this URL if the use element was not empty and no request was sent\n              cache[base] = true;\n            }\n            else if (cache[base].onload) {\n              // if it turns out that prepending the SVG is not necessary,\n              // abort the in-progress xhr.\n              cache[base].abort();\n              cache[base].onload = undefined;\n              cache[base] = true;\n            }\n          }\n        }\n      }\n      uses = '';\n      inProgressCount += 1;\n      observeIfDone();\n    };\n/*\n    // The load event fires when all resources have finished loading, which allows detecting whether SVG use elements are empty.\n    window.addEventListener('load', function winLoad() {\n      window.removeEventListener('load', winLoad, false); // to prevent memory leaks\n      tid = setTimeout(checkUseElems, 0);\n    }, false);\n*/\n  };\n\n  AblePlayer.prototype.swapSource = function(sourceIndex) {\n\n    // Change media player source file, for instance when moving to the next element in a playlist.\n    // NOTE: Swapping source for audio description is handled elsewhere;\n    // see description.js > swapDescription()\n\n    var $newItem, itemTitle, itemLang, sources, s, jwSource, i, $newSource, nowPlayingSpan;\n\n    this.$media.find('source').remove();\n    $newItem = this.$playlist.eq(sourceIndex);\n    itemTitle = $newItem.html();\n    if ($newItem.attr('lang')) {\n      itemLang = $newItem.attr('lang');\n    }\n    sources = [];\n    s = 0; // index\n    if (this.mediaType === 'audio') {\n      if ($newItem.attr('data-mp3')) {\n        jwSource = $newItem.attr('data-mp3'); // JW Player can play this\n        sources[s] =  new Array('audio/mpeg',jwSource);\n        s++;\n      }\n      if ($newItem.attr('data-webm')) {\n        sources[s] = new Array('audio/webm',$newItem.attr('data-webm'));\n        s++;\n      }\n      if ($newItem.attr('data-webma')) {\n        sources[s] = new Array('audio/webm',$newItem.attr('data-webma'));\n        s++;\n      }\n      if ($newItem.attr('data-ogg')) {\n        sources[s] = new Array('audio/ogg',$newItem.attr('data-ogg'));\n        s++;\n      }\n      if ($newItem.attr('data-oga')) {\n        sources[s] = new Array('audio/ogg',$newItem.attr('data-oga'));\n        s++;\n      }\n      if ($newItem.attr('data-wav')) {\n        sources[s] = new Array('audio/wav',$newItem.attr('data-wav'));\n        s++;\n      }\n    }\n    else if (this.mediaType === 'video') {\n      if ($newItem.attr('data-mp4')) {\n        jwSource = $newItem.attr('data-mp4'); // JW Player can play this\n        sources[s] =  new Array('video/mp4',jwSource);\n        s++;\n      }\n      if ($newItem.attr('data-webm')) {\n        sources[s] = new Array('video/webm',$newItem.attr('data-webm'));\n        s++;\n      }\n      if ($newItem.attr('data-webmv')) {\n        sources[s] = new Array('video/webm',$newItem.attr('data-webmv'));\n        s++;\n      }\n      if ($newItem.attr('data-ogg')) {\n        sources[s] = new Array('video/ogg',$newItem.attr('data-ogg'));\n        s++;\n      }\n      if ($newItem.attr('data-ogv')) {\n        sources[s] = new Array('video/ogg',$newItem.attr('data-ogv'));\n        s++;\n      }\n    }\n    for (i=0; i<sources.length; i++) {\n      $newSource = $('<source>',{\n        type: sources[i][0],\n        src: sources[i][1]\n      });\n      this.$media.append($newSource);\n    }\n\n    // update playlist to indicate which item is playing\n    //$('.able-playlist li').removeClass('able-current');\n    this.$playlist.removeClass('able-current');\n    $newItem.addClass('able-current');\n\n    // update Now Playing div\n    if (this.showNowPlaying === true) {\n      nowPlayingSpan = $('<span>');\n      if (typeof itemLang !== 'undefined') {\n        nowPlayingSpan.attr('lang',itemLang);\n      }\n      nowPlayingSpan.html('<span>Selected track:</span>' + itemTitle);\n      this.$nowPlayingDiv.html(nowPlayingSpan);\n    }\n\n    // reload audio after sources have been updated\n    // if this.swappingSrc is true, media will autoplay when ready\n    if (this.initializing) { // this is the first track - user hasn't pressed play yet\n      this.swappingSrc = false;\n    }\n    else {\n      this.swappingSrc = true;\n      if (this.player === 'html5') {\n        this.media.load();\n      }\n      else if (this.player === 'jw') {\n        this.jwPlayer.load({file: jwSource});\n      }\n      else if (this.player === 'youtube') {\n        // Does nothing, can't swap source with youtube.\n        // TODO: Anything we need to do to prevent this happening?\n      }\n    }\n  };\n\n  AblePlayer.prototype.getButtonTitle = function(control) {\n\n    var captionsCount;\n\n    if (control === 'playpause') {\n      return this.tt.play;\n    }\n    else if (control === 'play') {\n      return this.tt.play;\n    }\n    else if (control === 'pause') {\n      return this.tt.pause;\n    }\n    else if (control === 'restart') {\n      return this.tt.restart;\n    }\n    else if (control === 'rewind') {\n      return this.tt.rewind;\n    }\n    else if (control === 'forward') {\n      return this.tt.forward;\n    }\n    else if (control === 'captions') {\n      if (this.usingYouTubeCaptions) {\n        captionsCount = this.ytCaptions.length;\n      }\n      else {\n        captionsCount = this.captions.length;\n      }\n      if (captionsCount > 1) {\n        return this.tt.captions;\n      }\n      else {\n        if (this.captionsOn) {\n          return this.tt.hideCaptions;\n        }\n        else {\n          return this.tt.showCaptions;\n        }\n      }\n    }\n    else if (control === 'descriptions') {\n      if (this.descOn) {\n        return this.tt.turnOffDescriptions;\n      }\n      else {\n        return this.tt.turnOnDescriptions;\n      }\n    }\n    else if (control === 'transcript') {\n      if (this.$transcriptDiv.is(':visible')) {\n        return this.tt.hideTranscript;\n      }\n      else {\n        return this.tt.showTranscript;\n      }\n    }\n    else if (control === 'chapters') {\n      return this.tt.chapters;\n    }\n    else if (control === 'sign') {\n      return this.tt.sign;\n    }\n    else if (control === 'volume') {\n      return this.tt.volume;\n    }\n    else if (control === 'faster') {\n      return this.tt.faster;\n    }\n    else if (control === 'slower') {\n      return this.tt.slower;\n    }\n    else if (control === 'preferences') {\n      return this.tt.preferences;\n    }\n    else if (control === 'help') {\n      // return this.tt.help;\n    }\n    else {\n      // there should be no other controls, but just in case:\n      // return the name of the control with first letter in upper case\n      // ultimately will need to get a translated label from this.tt\n      if (this.debug) {\n        console.log('Found an untranslated label: ' + control);\n      }\n      return control.charAt(0).toUpperCase() + control.slice(1);\n    }\n  };\n\n\n})(jQuery);\n\n(function ($) {\n  // Loads files referenced in track elements, and performs appropriate setup.\n  // For example, captions and text descriptions.\n  // This will be called whenever the player is recreated.\n  // Added in v2.2.23: Also handles YouTube caption tracks\n  AblePlayer.prototype.setupTracks = function() {\n\n    var thisObj = this;\n\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n    this.$tracks = this.$media.find('track');\n\n    this.captions = [];\n    this.captionLabels = [];\n    this.descriptions = [];\n    this.chapters = [];\n    this.meta = [];\n\n    var loadingPromises = [];\n    for (var ii = 0; ii < this.$tracks.length; ii++) {\n      var track = this.$tracks[ii];\n      var kind = track.getAttribute('kind');\n      var trackSrc = track.getAttribute('src');\n\n      var isDefaultTrack = track.getAttribute('default');\n\n      if (!trackSrc) {\n        // Nothing to load!\n        continue;\n      }\n\n      var loadingPromise = this.loadTextObject(trackSrc);\n      loadingPromises.push(loadingPromise);\n      loadingPromise.then((function (track, kind) {\n        return function (trackSrc, trackText) {\n          var cues = thisObj.parseWebVTT(trackSrc, trackText).cues;\n          if (kind === 'captions' || kind === 'subtitles') {\n            thisObj.setupCaptions(track, cues);\n          }\n          else if (kind === 'descriptions') {\n            thisObj.setupDescriptions(track, cues);\n          }\n          else if (kind === 'chapters') {\n            thisObj.setupChapters(track, cues);\n          }\n          else if (kind === 'metadata') {\n            thisObj.setupMetadata(track, cues);\n          }\n        }\n      })(track, kind));\n    }\n\n    $.when.apply($, loadingPromises).then(function () {\n      deferred.resolve();\n    });\n    return promise;\n  };\n\n  AblePlayer.prototype.setupCaptions = function (track, cues) {\n    this.hasCaptions = true;\n    // srcLang should always be included with <track>, but HTML5 spec doesn't require it\n    // if not provided, assume track is the same language as the default player language\n    var trackLang = track.getAttribute('srclang') || this.lang;\n    var trackLabel = track.getAttribute('label') || this.getLanguageName(trackLang);\n    if (typeof track.getAttribute('default') == 'string') {\n      var isDefaultTrack = true;\n      // Now remove 'default' attribute from <track>\n      // Otherwise, some browsers will display the track\n      track.removeAttribute('default');\n    }\n    else {\n      var isDefaultTrack = false;\n    }\n    // caption cues from WebVTT are used to build a transcript for both audio and video\n    // but captions are currently only supported for video\n    if (this.mediaType === 'video') {\n\n      // create a pair of nested divs for displaying captions\n      // includes aria-hidden=\"true\" because otherwise\n      // captions being added and removed causes sporadic changes to focus in JAWS\n      // (not a problem in NVDA or VoiceOver)\n      if (!this.$captionsDiv) {\n        this.$captionsDiv = $('<div>',{\n          'class': 'able-captions',\n        });\n        this.$captionsWrapper = $('<div>',{\n          'class': 'able-captions-wrapper',\n          'aria-hidden': 'true'\n        });\n        if (this.prefCaptionsPosition === 'below') {\n          this.$captionsWrapper.addClass('able-captions-below');\n        }\n        else {\n          this.$captionsWrapper.addClass('able-captions-overlay');\n        }\n        this.$captionsWrapper.append(this.$captionsDiv);\n        this.$vidcapContainer.append(this.$captionsWrapper);\n      }\n    }\n\n    this.currentCaption = -1;\n    if (this.prefCaptions === 1) {\n      // Captions default to on.\n      this.captionsOn = true;\n    }\n    else {\n      this.captionsOn = false;\n    }\n\n    if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n      // Remove the \"Unknown\" option from the select box.\n      if (this.$unknownTranscriptOption) {\n        this.$unknownTranscriptOption.remove();\n        this.$unknownTranscriptOption = null;\n      }\n      var option = $('<option></option>',{\n        value: trackLang,\n        lang: trackLang\n      }).text(trackLabel);\n    }\n    // alphabetize tracks by label\n    if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n      var options = this.$transcriptLanguageSelect.find('option');\n    }\n    if (this.captions.length === 0) { // this is the first\n      this.captions.push({\n        'cues': cues,\n        'language': trackLang,\n        'label': trackLabel,\n        'def': isDefaultTrack\n      });\n      if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n        if (isDefaultTrack) {\n          option.attr('selected', 'selected');\n        }\n        this.$transcriptLanguageSelect.append(option);\n      }\n      this.captionLabels.push(trackLabel);\n    }\n    else { // there are already tracks in the array\n      var inserted = false;\n      for (var i = 0; i < this.captions.length; i++) {\n        var capLabel = this.captionLabels[i];\n        if (trackLabel.toLowerCase() < this.captionLabels[i].toLowerCase()) {\n          // insert before track i\n          this.captions.splice(i,0,{\n            'cues': cues,\n            'language': trackLang,\n            'label': trackLabel,\n            'def': isDefaultTrack\n          });\n          if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n            if (isDefaultTrack) {\n              option.attr('selected', 'selected');\n            }\n            option.insertBefore(options.eq(i));\n          }\n          this.captionLabels.splice(i,0,trackLabel);\n          inserted = true;\n          break;\n        }\n      }\n      if (!inserted) {\n        // just add track to the end\n        this.captions.push({\n          'cues': cues,\n          'language': trackLang,\n          'label': trackLabel,\n          'def': isDefaultTrack\n        });\n        if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n          if (isDefaultTrack) {\n            option.attr('selected', 'selected');\n          }\n          this.$transcriptLanguageSelect.append(option);\n        }\n        this.captionLabels.push(trackLabel);\n      }\n    }\n    if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n      if (this.$transcriptLanguageSelect.find('option').length > 1) {\n        // More than one option now, so enable the select.\n        this.$transcriptLanguageSelect.prop('disabled', false);\n      }\n    }\n  };\n\n\n  AblePlayer.prototype.setupDescriptions = function (track, cues) {\n\n    // called via setupTracks() only if there is track with kind=\"descriptions\"\n    // prepares for delivery of text description , in case it's needed\n    // whether and how it's delivered is controlled within description.js > initDescription()\n\n    // srcLang should always be included with <track>, but HTML5 spec doesn't require it\n    // if not provided, assume track is the same language as the default player language\n    var trackLang = track.getAttribute('srclang') || this.lang;\n\n    this.hasClosedDesc = true;\n    this.currentDescription = -1;\n    this.descriptions.push({\n      cues: cues,\n      language: trackLang\n    });\n  };\n\n  AblePlayer.prototype.setupChapters = function (track, cues) {\n\n    // NOTE: WebVTT supports nested timestamps (to form an outline)\n    // This is not currently supported.\n\n    // srcLang should always be included with <track>, but HTML5 spec doesn't require it\n    // if not provided, assume track is the same language as the default player language\n    var trackLang = track.getAttribute('srclang') || this.lang;\n\n    this.hasChapters = true;\n\n    this.chapters.push({\n      cues: cues,\n      language: trackLang\n    });\n  };\n\n  AblePlayer.prototype.setupMetadata = function(track, cues) {\n    if (this.metaType === 'text') {\n      // Metadata is only supported if data-meta-div is provided\n      // The player does not display metadata internally\n      if (this.metaDiv) {\n        if ($('#' + this.metaDiv)) {\n          // container exists\n          this.$metaDiv = $('#' + this.metaDiv);\n          this.hasMeta = true;\n          this.meta = cues;\n        }\n      }\n    }\n    else if (this.metaType === 'selector') {\n      this.hasMeta = true;\n      this.visibleSelectors = [];\n      this.meta = cues;\n    }\n  };\n\n  AblePlayer.prototype.loadTextObject = function(src) {\n\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n    var thisObj = this;\n\n    // create a temp div for holding data\n    var $tempDiv = $('<div>',{\n      style: 'display:none'\n    });\n\n    $tempDiv.load(src, function (trackText, status, req) {\n      if (status === 'error') {\n        if (thisObj.debug) {\n          console.log ('error reading file ' + src + ': ' + status);\n        }\n        deferred.fail();\n      }\n      else {\n        deferred.resolve(src, trackText);\n      }\n      $tempDiv.remove();\n    });\n    return promise;\n  };\n\n  AblePlayer.prototype.setupAltCaptions = function() {\n    // setup captions from an alternative source (not <track> elements)\n    // only do this if no <track> captions are provided\n    // currently supports: YouTube\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n\n    if (this.captions.length === 0) {\n      if (this.player === 'youtube' && typeof youTubeDataAPIKey !== 'undefined') {\n        this.setupYouTubeCaptions().done(function() {\n          deferred.resolve();\n        });\n      }\n      else {\n        // repeat for other alt sources once supported (e.g., Vimeo, DailyMotion)\n        deferred.resolve();\n      }\n    }\n    else { // there are <track> captions, so no need for alt source captions\n      deferred.resolve();\n    }\n    return promise;\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.initYouTubePlayer = function () {\n\n    var thisObj, deferred, promise, youTubeId, googleApiPromise, json;\n    thisObj = this;\n\n    deferred = new $.Deferred();\n    promise = deferred.promise();\n\n    // if a described version is available && user prefers desription\n    // init player using the described version\n    if (this.youTubeDescId && this.prefDesc) {\n      youTubeId = this.youTubeDescId;\n    }\n    else {\n      youTubeId = this.youTubeId;\n    }\n    this.activeYouTubeId = youTubeId;\n    if (AblePlayer.youtubeIframeAPIReady) {\n      // Script already loaded and ready.\n      this.finalizeYoutubeInit().then(function() {\n        deferred.resolve();\n      });\n    }\n    else {\n      // Has another player already started loading the script? If so, abort...\n      if (!AblePlayer.loadingYoutubeIframeAPI) {\n        $.getScript('https://www.youtube.com/iframe_api').fail(function () {\n          deferred.fail();\n        });\n      }\n\n      // Otherwise, keeping waiting for script load event...\n      $('body').on('youtubeIframeAPIReady', function () {\n        thisObj.finalizeYoutubeInit().then(function() {\n          deferred.resolve();\n        });\n      });\n    }\n    return promise;\n  };\n\n  AblePlayer.prototype.finalizeYoutubeInit = function () {\n\n    // This is called once we're sure the Youtube iFrame API is loaded -- see above\n    var deferred, promise, thisObj, containerId, ccLoadPolicy, videoDimensions;\n\n    deferred = new $.Deferred();\n    promise = deferred.promise();\n\n    thisObj = this;\n\n    containerId = this.mediaId + '_youtube';\n\n    this.$mediaContainer.prepend($('<div>').attr('id', containerId));\n    // NOTE: Tried the following in place of the above in January 2016\n    // because in some cases two videos were being added to the DOM\n    // However, once v2.2.23 was fairly stable, unable to reptroduce that problem\n    // so maybe it's not an issue. This is preserved here temporarily, just in case it's needed...\n    // thisObj.$mediaContainer.html($('<div>').attr('id', containerId));\n\n    this.youTubeCaptionsReady = false;\n\n    // if captions are provided locally via <track> elements, use those\n    // and unload the captions provided by YouTube\n    // Advantages of using <track>:\n    // 1. Interactive transcript and searching within video is possible\n    // 2. User has greater control over captions' display\n    if (thisObj.captions.length) {\n      // initialize YouTube player with cc_load_policy = 0\n      // this doesn't disable captions;\n      // it just doesn't show them automatically (depends on user's preference on YouTube)\n      ccLoadPolicy = 0;\n      this.usingYouTubeCaptions = false;\n    }\n    else {\n      // set ccLoadPolicy to 1 only if captions are on;\n      // this forces them on, regardless of user's preference on YouTube\n      if (this.captionsOn) {\n        ccLoadPolicy = 1;\n      }\n      else {\n        ccLoadPolicy = 0;\n      }\n    }\n    videoDimensions = this.getYouTubeDimensions(this.activeYouTubeId, this.containerId);\n    if (videoDimensions) {\n      this.ytWidth = videoDimensions[0];\n      this.ytHeight = videoDimensions[1];\n      this.ytAspectRatio = thisObj.ytWidth / thisObj.ytHeight;\n    }\n    else {\n      // dimensions are initially unknown\n      // sending null values to YouTube results in a video that uses the default YouTube dimensions\n      // these can then be scraped from the iframe and applied to this.$ableWrapper\n      this.ytWidth = null;\n      this.ytHeight = null;\n    }\n    this.youTubePlayer = new YT.Player(containerId, {\n      videoId: this.activeYouTubeId,\n      width: this.ytWidth,\n      height: this.ytHeight,\n      playerVars: {\n        enablejsapi: 1,\n        start: this.startTime,\n        controls: 0, // no controls, using our own\n        cc_load_policy: ccLoadPolicy,\n        // enablejsapi: 1, // deprecated; but we don't even need it???\n        hl: this.lang, // use the default language UI\n        modestbranding: 1, // no YouTube logo in controller\n        rel: 0, // do not show related videos when video ends\n        html5: 1 // force html5 if browser supports it (undocumented parameter; 0 does NOT force Flash)\n      },\n      events: {\n        onReady: function () {\n          if (thisObj.swappingSrc) {\n            // swap is now complete\n            thisObj.swappingSrc = false;\n            if (thisObj.playing) {\n              // resume playing\n              thisObj.playMedia();\n            }\n          }\n          if (typeof thisObj.ytAspectRatio === 'undefined') {\n            thisObj.resizeYouTubePlayer(thisObj.activeYouTubeId, containerId);\n          }\n          deferred.resolve();\n        },\n        onError: function (x) {\n          deferred.fail();\n        },\n        onStateChange: function (x) {\n          var playerState = thisObj.getPlayerState(x.data);\n          if (playerState === 'playing') {\n            thisObj.playing = true;\n            thisObj.startedPlaying = true;\n          }\n          else {\n            thisObj.playing = false;\n          }\n          if (thisObj.stoppingYouTube && playerState === 'paused') {\n            if (typeof thisObj.$posterImg !== 'undefined') {\n              thisObj.$posterImg.show();\n            }\n            thisObj.stoppingYouTube = false;\n            thisObj.seeking = false;\n            thisObj.playing = false;\n          }\n        },\n        onPlaybackQualityChange: function () {\n          // do something\n        },\n        onApiChange: function (x) {\n          // As of Able Player v2.2.23, we are now getting caption data via the YouTube Data API\n          // prior to calling initYouTubePlayer()\n          // Previously we got caption data via the YouTube iFrame API, and doing so was an awful mess.\n          // onApiChange fires to indicate that the player has loaded (or unloaded) a module with exposed API methods\n          // it isn't fired until the video starts playing\n          // if captions are available for this video (automated captions don't count)\n          // the 'captions' (or 'cc') module is loaded. If no captions are available, this event never fires\n          // So, to trigger this event we had to play the video briefly, then pause, then reset.\n          // During that brief moment of playback, the onApiChange event was fired and we could setup captions\n          // The 'captions' and 'cc' modules are very different, and have different data and methods\n          // NOW, in v2.2.23, we still need to initialize the caption modules in order to control captions\n          // but we don't have to do that on load in order to get caption data\n          // Instead, we can wait until the video starts playing normally, then retrieve the modules\n          thisObj.initYouTubeCaptionModule();\n        }\n      }\n    });\n    thisObj.injectPoster(thisObj.$mediaContainer, 'youtube');\n    thisObj.$media.remove();\n    return promise;\n  };\n\n  AblePlayer.prototype.getYouTubeDimensions = function (youTubeId, youTubeContainerId) {\n\n    // get dimensions of YouTube video, return array with width & height\n    // Sources, in order of priority:\n    // 1. The width and height attributes on <video>\n    // 2. YouTube (not yet supported; can't seem to get this data via YouTube Data API without OAuth!)\n\n    var d, url, $iframe, width, height;\n\n    d = [];\n\n    if (typeof this.playerMaxWidth !== 'undefined' && typeof this.playerMaxHeight !== 'undefined') {\n      d[0] = this.playerMaxWidth;\n      d[1] = this.playerMaxHeight;\n      return d;\n    }\n    else {\n      if (typeof $('#' + youTubeContainerId) !== 'undefined') {\n        $iframe = $('#' + youTubeContainerId);\n        width = $iframe.attr('width');\n        height = $iframe.attr('height');\n        if (width > 0 && height > 0) {\n          d[0] = width;\n          d[1] = height;\n          return d;\n        }\n      }\n    }\n    return false;\n  };\n\n  AblePlayer.prototype.resizeYouTubePlayer = function(youTubeId, youTubeContainerId) {\n\n    // called after player is ready, if youTube dimensions were previously unknown\n    // Now need to get them from the iframe element that YouTube injected\n    // and resize Able Player to match\n\n    var d, width, height;\n\n    if (typeof this.ytAspectRatio !== 'undefined') {\n      // video dimensions have already been collected\n      if (this.restoringAfterFullScreen) {\n        // restore using saved values\n        if (this.youTubePlayer) {\n          this.youTubePlayer.setSize(this.ytWidth, this.ytHeight);\n        }\n        this.restoringAfterFullScreen = false;\n      }\n      else {\n        // resizing due to a change in window size, but not from fullscreen\n        // just recalculate with new wrapper size and re-assign CSS\n        width = this.$ableWrapper.width();\n        height = Math.round(width / this.ytAspectRatio);\n        if (this.youTubePlayer) {\n          this.youTubePlayer.setSize(width, height);\n        }\n      }\n    }\n    else {\n      d = this.getYouTubeDimensions(youTubeId, youTubeContainerId);\n      if (d) {\n        width = d[0];\n        height = d[1];\n        if (width > 0 && height > 0) {\n          this.$ableWrapper.css('max-width',width + 'px');\n          this.ytAspectRatio = width / height;\n          this.ytWidth = width;\n          this.ytHeight = height;\n          if (width !== this.$ableWrapper.width()) {\n            // now that we've retrieved YouTube's default width,\n            // need to adjust to fit the current player wrapper\n            width = this.$ableWrapper.width();\n            height = Math.round(width / this.ytAspectRatio);\n            if (this.youTubePlayer) {\n              this.youTubePlayer.setSize(width, height);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  AblePlayer.prototype.restoreYouTubePlayerSize = function() {\n\n    // called after exit from fullscreen mode\n\n    var d, width, height;\n\n    if (this.youTubePlayer && typeof this.ytWidth !== 'undefined' && typeof this.ytHeight !== 'undefined') {\n      this.youTubePlayer.setSize(this.ytWidth, this.ytHeight);\n    }\n  };\n\n\n  AblePlayer.prototype.setupYouTubeCaptions = function () {\n\n    // called from setupAltCaptions if player is YouTube and there are no <track> captions\n\n    // use YouTube Data API to get caption data from YouTube\n    // function is called only if these conditions are met:\n    // 1. this.player === 'youtube'\n    // 2. there are no <track> elements with kind=\"captions\"\n    // 3. youTubeDataApiKey is defined\n\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n\n    var thisObj, googleApiPromise, youTubeId, i;\n\n    thisObj = this;\n\n    // this.ytCaptions has the same structure as this.captions\n    // but unfortunately does not contain cues\n    // Google *does* offer a captions.download service for downloading captions in WebVTT\n    // https://developers.google.com/youtube/v3/docs/captions/download\n    // However, this requires OAUTH 2.0 (user must login and give consent)\n    // So, for now the best we can do is create an array of available caption/subtitle tracks\n    // and provide a button & popup menu to allow users to control them\n    this.ytCaptions = [];\n\n    // if a described version is available && user prefers desription\n    // Use the described version, and get its captions\n    if (this.youTubeDescId && this.prefDesc) {\n      youTubeId = this.youTubeDescId;\n    }\n    else {\n      youTubeId = this.youTubeId;\n    }\n\n    // Wait until Google Client API is loaded\n    // When loaded, it sets global var googleApiReady to true\n\n    // Thanks to Paul Tavares for $.doWhen()\n    // https://gist.github.com/purtuga/8257269\n    $.doWhen({\n      when: function(){\n        return googleApiReady;\n      },\n      interval: 100, // ms\n      attempts: 1000\n    })\n    .done(function(){\n      thisObj.getYouTubeCaptionData(youTubeId).done(function() {\n        deferred.resolve();\n      });\n    })\n    .fail(function(){\n      console.log('Unable to initialize Google API. YouTube captions are currently unavailable.');\n    });\n\n    return promise;\n  };\n\n  AblePlayer.prototype.getYouTubeCaptionData = function (youTubeId) {\n    // get data via YouTube Data API, and push data to this.ytCaptions\n    var deferred = new $.Deferred();\n    var promise = deferred.promise();\n\n    var thisObj, i, trackId, trackLang, trackLabel, trackKind, isDraft, isDefaultTrack;\n\n    thisObj = this;\n\n    gapi.client.setApiKey(youTubeDataAPIKey);\n    gapi.client\n      .load('youtube', 'v3')\n      .then(function() {\n        var request = gapi.client.youtube.captions.list({\n          'part': 'id, snippet',\n          'videoId': youTubeId\n        });\n        request.then(function(json) {\n          if (json.result.items.length) { // video has captions!\n            thisObj.hasCaptions = true;\n            thisObj.usingYouTubeCaptions = true;\n            if (thisObj.prefCaptions === 1) {\n              thisObj.captionsOn = true;\n            }\n            else {\n              thisObj.captionsOn = false;\n            }\n            // Step through results and add them to cues array\n            for (i=0; i < json.result.items.length; i++) {\n\n              trackId = json.result.items[i].id;\n              trackLabel = json.result.items[i].snippet.name; // always seems to be empty\n              trackLang = json.result.items[i].snippet.language;\n              trackKind = json.result.items[i].snippet.trackKind; // ASR, standard, forced\n              isDraft = json.result.items[i].snippet.isDraft; // Boolean\n              // Other variables that could potentially be collected from snippet:\n              // isCC - Boolean, always seems to be false\n              // isLarge - Boolean\n              // isEasyReader - Boolean\n              // isAutoSynced  Boolean\n              // status - string, always seems to be \"serving\"\n\n              if (trackKind !== 'ASR' && !isDraft) {\n\n                // if track name is empty (it always seems to be), assign a name based on trackLang\n                if (trackLabel === '') {\n                  trackLabel = thisObj.getLanguageName(trackLang);\n                }\n\n                // assign the default track based on language of the player\n                if (trackLang === thisObj.lang) {\n                  isDefaultTrack = true;\n                }\n                else {\n                  isDefaultTrack = false;\n                }\n\n                thisObj.ytCaptions.push({\n                  'language': trackLang,\n                  'label': trackLabel,\n                  'def': isDefaultTrack\n                });\n              }\n            }\n            // setupPopups again with new ytCaptions array, replacing original\n            thisObj.setupPopups('captions');\n            deferred.resolve();\n          }\n          else {\n            thisObj.hasCaptions = false;\n            thisObj.usingYouTubeCaptions = false;\n            deferred.resolve();\n          }\n        }, function (reason) {\n          console.log('Error: ' + reason.result.error.message);\n        });\n      });\n    return promise;\n  };\n\n  AblePlayer.prototype.initYouTubeCaptionModule = function () {\n    // This function is called when YouTube onApiChange event fires\n    // to indicate that the player has loaded (or unloaded) a module with exposed API methods\n    // it isn't fired until the video starts playing\n    // and only fires if captions are available for this video (automated captions don't count)\n    // If no captions are available, onApichange event never fires & this function is never called\n\n    // YouTube iFrame API documentation is incomplete related to captions\n    // Found undocumented features on user forums and by playing around\n    // Details are here: http://terrillthompson.com/blog/648\n    // Summary:\n    // User might get either the AS3 (Flash) or HTML5 YouTube player\n    // The API uses a different caption module for each player (AS3 = 'cc'; HTML5 = 'captions')\n    // There are differences in the data and methods available through these modules\n    // This function therefore is used to determine which captions module is being used\n    // If it's a known module, this.ytCaptionModule will be used elsewhere to control captions\n    var options, fontSize, displaySettings;\n\n    options = this.youTubePlayer.getOptions();\n    if (options.length) {\n      for (var i=0; i<options.length; i++) {\n        if (options[i] == 'cc') { // this is the AS3 (Flash) player\n          this.ytCaptionModule = 'cc';\n          if (!this.hasCaptions) {\n            // there are captions available via other sources (e.g., <track>)\n            // so use these\n            this.hasCaptions = true;\n            this.usingYouTubeCaptions = true;\n          }\n          break;\n        }\n        else if (options[i] == 'captions') { // this is the HTML5 player\n          this.ytCaptionModule = 'captions';\n          if (!this.hasCaptions) {\n            // there are captions available via other sources (e.g., <track>)\n            // so use these\n            this.hasCaptions = true;\n            this.usingYouTubeCaptions = true;\n          }\n          break;\n        }\n      }\n      if (typeof this.ytCaptionModule !== 'undefined') {\n        if (this.usingYouTubeCaptions) {\n          // set default languaage\n          this.youTubePlayer.setOption(this.ytCaptionModule, 'track', {'languageCode': this.captionLang});\n          // set font size using Able Player prefs (values are -1, 0, 1, 2, and 3, where 0 is default)\n          this.youTubePlayer.setOption(this.ytCaptionModule,'fontSize',this.translatePrefs('size',this.prefCaptionsSize,'youtube'));\n          // ideally could set other display options too, but no others seem to be supported by setOption()\n        }\n        else {\n          // now that we know which cc module was loaded, unload it!\n          // we don't want it if we're using local <track> elements for captions\n          this.youTubePlayer.unloadModule(this.ytCaptionModule)\n        }\n      }\n    }\n    else {\n      // no modules were loaded onApiChange\n      // unfortunately, gonna have to disable captions if we can't control them\n      this.hasCaptions = false;\n      this.usingYouTubeCaptions = false;\n    }\n    this.refreshControls();\n  };\n\n})(jQuery);\n\n(function ($) {\n\n\n  // Events:\n  //   startTracking(event, position)\n  //   tracking(event, position)\n  //   stopTracking(event, position)\n\n  window. AccessibleSlider = function(mediaType, div, orientation, length, min, max, bigInterval, label, className, trackingMedia, initialState) {\n\n    // mediaType is either 'audio' or 'video'\n    // div is the host element around which the slider will be built\n    // orientation is either 'horizontal' or 'vertical'\n    // length is the width or height of the slider, depending on orientation\n    // min is the low end of the slider scale\n    // max is the high end of the slider scale\n    // bigInterval is the number of steps supported by page up/page down (set to 0 if not supported)\n    // (smallInterval, defined as nextStep below, is always set to 1) - this is the interval supported by arrow keys\n    // label is used within an aria-label attribute to identify the slider to screen reader users\n    // className is used as the root within class names (e.g., 'able-' + classname + '-head')\n    // trackingMedia is true if this is a media timeline; otherwise false\n    // initialState is either 'visible' or 'hidden'\n\n    var thisObj;\n\n    thisObj = this;\n\n    // Initialize some variables.\n    this.position = 0; // Note: position does not change while tracking.\n    this.tracking = false;\n    this.trackDevice = null; // 'mouse' or 'keyboard'\n    this.keyTrackPosition = 0;\n    this.lastTrackPosition = 0;\n    this.nextStep = 1;\n    this.inertiaCount = 0;\n\n    this.bodyDiv = $(div);\n\n    // Add divs for tracking amount of media loaded and played\n    if (trackingMedia) {\n      this.loadedDiv = $('<div></div>');\n      this.playedDiv = $('<div></div>');\n    }\n\n    // Add a seekhead\n    this.seekHead = $('<div>',{\n      'orientation': orientation,\n      'class': 'able-' + className + '-head'\n    });\n\n    if (initialState === 'visible') {\n      this.seekHead.attr('tabindex', '0');\n    }\n    else {\n      this.seekHead.attr('tabindex', '-1');\n    }\n    // Since head is focusable, it gets the aria roles/titles.\n    this.seekHead.attr({\n      'role': 'slider',\n      'aria-label': label,\n      'aria-valuemin': min,\n      'aria-valuemax': max\n    });\n\n    this.timeTooltip = $('<div>');\n    this.bodyDiv.append(this.timeTooltip);\n\n    this.timeTooltip.attr('role', 'tooltip');\n    this.timeTooltip.addClass('able-tooltip');\n\n    this.bodyDiv.append(this.loadedDiv);\n    this.bodyDiv.append(this.playedDiv);\n    this.bodyDiv.append(this.seekHead);\n\n    this.bodyDiv.wrap('<div></div>');\n    this.wrapperDiv = this.bodyDiv.parent();\n\n    if (orientation === 'horizontal') {\n      this.wrapperDiv.width(length);\n      this.loadedDiv.width(0);\n    }\n    else {\n      this.wrapperDiv.height(length);\n      this.loadedDiv.height(0);\n    }\n    this.wrapperDiv.addClass('able-' + className + '-wrapper');\n\n    if (trackingMedia) {\n      this.loadedDiv.addClass('able-' + className + '-loaded');\n\n      this.playedDiv.width(0);\n      this.playedDiv.addClass('able-' + className + '-played');\n\n      // Set a default duration. User can call this dynamically if duration changes.\n      this.setDuration(max);\n    }\n\n    this.seekHead.hover(function (event) {\n      thisObj.overHead = true;\n      thisObj.refreshTooltip();\n    }, function (event) {\n      thisObj.overHead = false;\n\n      if (!thisObj.overBody && thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.stopTracking(thisObj.pageXToPosition(event.pageX));\n      }\n      thisObj.refreshTooltip();\n    });\n\n    this.seekHead.mousemove(function (event) {\n      if (thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.trackHeadAtPageX(event.pageX);\n      }\n    });\n\n    this.seekHead.focus(function (event) {\n      thisObj.overHead = true;\n      thisObj.refreshTooltip();\n    });\n\n    this.seekHead.blur(function (event) {\n      thisObj.overHead = false;\n      thisObj.refreshTooltip();\n    });\n\n    this.bodyDiv.hover(function () {\n      thisObj.overBody = true;\n      thisObj.refreshTooltip();\n    }, function (event) {\n      thisObj.overBody = false;\n      thisObj.overBodyMousePos = null;\n      thisObj.refreshTooltip();\n\n      if (!thisObj.overHead && thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.stopTracking(thisObj.pageXToPosition(event.pageX));\n      }\n    });\n\n    this.bodyDiv.mousemove(function (event) {\n      thisObj.overBodyMousePos = {\n        x: event.pageX,\n        y: event.pageY\n      };\n      if (thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.trackHeadAtPageX(event.pageX);\n      }\n      thisObj.refreshTooltip();\n    });\n\n    this.bodyDiv.mousedown(function (event) {\n      thisObj.startTracking('mouse', thisObj.pageXToPosition(event.pageX));\n      thisObj.trackHeadAtPageX(event.pageX);\n      if (!thisObj.seekHead.is(':focus')) {\n        thisObj.seekHead.focus();\n      }\n      event.preventDefault();\n    });\n\n    this.seekHead.mousedown(function (event) {\n      thisObj.startTracking('mouse', thisObj.pageXToPosition(thisObj.seekHead.offset() + (thisObj.seekHead.width() / 2)));\n      if (!thisObj.bodyDiv.is(':focus')) {\n        thisObj.bodyDiv.focus();\n      }\n      event.preventDefault();\n    });\n\n    this.bodyDiv.mouseup(function (event) {\n      if (thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.stopTracking(thisObj.pageXToPosition(event.pageX));\n      }\n    })\n\n    this.seekHead.mouseup(function (event) {\n      if (thisObj.tracking && thisObj.trackDevice === 'mouse') {\n        thisObj.stopTracking(thisObj.pageXToPosition(event.pageX));\n      }\n    });\n\n    this.bodyDiv.keydown(function (event) {\n      // Home\n      if (event.which === 36) {\n        thisObj.trackImmediatelyTo(0);\n      }\n      // End\n      else if (event.which === 35) {\n        thisObj.trackImmediatelyTo(thisObj.duration);\n      }\n      // Left arrow or down arrow\n      else if (event.which === 37 || event.which === 40) {\n        thisObj.arrowKeyDown(-1);\n      }\n      // Right arrow or up arrow\n      else if (event.which === 39 || event.which === 38) {\n        thisObj.arrowKeyDown(1);\n      }\n      // Page up\n      else if (event.which === 33 && bigInterval > 0) {\n        thisObj.arrowKeyDown(bigInterval);\n      }\n      // Page down\n      else if (event.which === 34 && bigInterval > 0) {\n        thisObj.arrowKeyDown(-bigInterval);\n      }\n\n      else {\n        return;\n      }\n      event.preventDefault();\n    });\n\n    this.bodyDiv.keyup(function (event) {\n      if (event.which >= 33 && event.which <= 40) {\n        if (thisObj.tracking && thisObj.trackDevice === 'keyboard') {\n          thisObj.stopTracking(thisObj.keyTrackPosition);\n        }\n        event.preventDefault();\n      }\n    });\n  }\n\n  AccessibleSlider.prototype.arrowKeyDown = function (multiplier) {\n    if (this.tracking && this.trackDevice === 'keyboard') {\n      this.keyTrackPosition = this.boundPos(this.keyTrackPosition + (this.nextStep * multiplier));\n      this.inertiaCount += 1;\n      if (this.inertiaCount === 20) {\n        this.inertiaCount = 0;\n        this.nextStep *= 2;\n      }\n      this.trackHeadAtPosition(this.keyTrackPosition);\n    }\n    else {\n      this.nextStep = 1;\n      this.inertiaCount = 0;\n      this.keyTrackPosition = this.boundPos(this.position + (this.nextStep * multiplier));\n      this.startTracking('keyboard', this.keyTrackPosition);\n      this.trackHeadAtPosition(this.keyTrackPosition);\n    }\n  };\n/*\n  AccessibleSlider.prototype.pageUp = function (multiplier) {\n    if (this.tracking && this.trackDevice === 'keyboard') {\n      this.keyTrackPosition = this.boundPos(this.keyTrackPosition + (this.nextStep * multiplier));\n      this.inertiaCount += 1;\n      if (this.inertiaCount === 20) {\n        this.inertiaCount = 0;\n        this.nextStep *= 2;\n      }\n      this.trackHeadAtPosition(this.keyTrackPosition);\n    }\n    else {\n      this.nextStep = 1;\n      this.inertiaCount = 0;\n      this.keyTrackPosition = this.boundPos(this.position + (this.nextStep * multiplier));\n      this.startTracking('keyboard', this.keyTrackPosition);\n      this.trackHeadAtPosition(this.keyTrackPosition);\n    }\n  };\n*/\n  AccessibleSlider.prototype.pageXToPosition = function (pageX) {\n    var offset = pageX - this.bodyDiv.offset().left;\n    var position = this.duration * (offset / this.bodyDiv.width());\n    return this.boundPos(position);\n  };\n\n  AccessibleSlider.prototype.boundPos = function (position) {\n    return Math.max(0, Math.min(position, this.duration));\n  }\n\n  AccessibleSlider.prototype.setDuration = function (duration) {\n    if (duration !== this.duration) {\n      this.duration = duration;\n      this.resetHeadLocation();\n      this.seekHead.attr('aria-valuemax', duration);\n    }\n  };\n\n  AccessibleSlider.prototype.setWidth = function (width) {\n    this.wrapperDiv.width(width);\n    this.resizeDivs();\n    this.resetHeadLocation();\n  };\n\n  AccessibleSlider.prototype.getWidth = function () {\n    return this.wrapperDiv.width();\n  };\n\n  AccessibleSlider.prototype.resizeDivs = function () {\n    this.playedDiv.width(this.bodyDiv.width() * (this.position / this.duration));\n    this.loadedDiv.width(this.bodyDiv.width() * this.buffered);\n  };\n\n  // Stops tracking, sets the head location to the current position.\n  AccessibleSlider.prototype.resetHeadLocation = function () {\n    var ratio = this.position / this.duration;\n    var center = this.bodyDiv.width() * ratio;\n    this.seekHead.css('left', center - (this.seekHead.width() / 2));\n\n    if (this.tracking) {\n      this.stopTracking(this.position);\n    }\n  };\n\n  AccessibleSlider.prototype.setPosition = function (position, updateLive) {\n    this.position = position;\n    this.resetHeadLocation();\n    this.refreshTooltip();\n    this.resizeDivs();\n    this.updateAriaValues(position, updateLive);\n  }\n\n  // TODO: Native HTML5 can have several buffered segments, and this actually happens quite often.  Change this to display them all.\n  AccessibleSlider.prototype.setBuffered = function (ratio) {\n    this.buffered = ratio;\n    this.redrawDivs;\n  }\n\n  AccessibleSlider.prototype.startTracking = function (device, position) {\n    if (!this.tracking) {\n      this.trackDevice = device;\n      this.tracking = true;\n      this.bodyDiv.trigger('startTracking', [position]);\n    }\n  };\n\n  AccessibleSlider.prototype.stopTracking = function (position) {\n    this.trackDevice = null;\n    this.tracking = false;\n    this.bodyDiv.trigger('stopTracking', [position]);\n    this.setPosition(position, true);\n  };\n\n  AccessibleSlider.prototype.trackHeadAtPageX = function (pageX) {\n    var position = this.pageXToPosition(pageX);\n    var newLeft = pageX - this.bodyDiv.offset().left - (this.seekHead.width() / 2);\n    newLeft = Math.max(0, Math.min(newLeft, this.bodyDiv.width() - this.seekHead.width()));\n    this.lastTrackPosition = position;\n    this.seekHead.css('left', newLeft);\n    this.reportTrackAtPosition(position);\n  };\n\n  AccessibleSlider.prototype.trackHeadAtPosition = function (position) {\n    var ratio = position / this.duration;\n    var center = this.bodyDiv.width() * ratio;\n    this.lastTrackPosition = position;\n    this.seekHead.css('left', center - (this.seekHead.width() / 2));\n    this.reportTrackAtPosition(position);\n  };\n\n  AccessibleSlider.prototype.reportTrackAtPosition = function (position) {\n    this.bodyDiv.trigger('tracking', [position]);\n    this.updateAriaValues(position, true);\n  };\n\n  AccessibleSlider.prototype.updateAriaValues = function (position, updateLive) {\n    // TODO: Localize, move to another function.\n    var pHours = Math.floor(position / 3600);\n    var pMinutes = Math.floor((position % 3600) / 60);\n    var pSeconds = Math.floor(position % 60);\n\n    var pHourWord = pHours === 1 ? 'hour' : 'hours';\n    var pMinuteWord = pMinutes === 1 ? 'minute' : 'minutes';\n    var pSecondWord = pSeconds === 1 ? 'second' : 'seconds';\n\n    var descriptionText;\n    if (pHours > 0) {\n      descriptionText = pHours +\n        ' ' + pHourWord +\n        ', ' + pMinutes +\n        ' ' + pMinuteWord +\n        ', ' + pSeconds +\n        ' ' + pSecondWord;\n    }\n    else if (pMinutes > 0) {\n      descriptionText  = pMinutes +\n        ' ' + pMinuteWord +\n        ', ' + pSeconds +\n        ' ' + pSecondWord;\n    }\n    else {\n      descriptionText = pSeconds + ' ' + pSecondWord;\n    }\n\n    /* Comment to stop live region from generating or being used. */\n    if (!this.liveAriaRegion) {\n      this.liveAriaRegion = $('<span>', {\n        'class': 'able-offscreen',\n        'aria-live': 'polite'\n      });\n      this.wrapperDiv.append(this.liveAriaRegion);\n    }\n    if (updateLive && (this.liveAriaRegion.text() !== descriptionText)) {\n      this.liveAriaRegion.text(descriptionText);\n    }\n\n    // Uncomment the following lines to use aria values instead of separate live region.\n    this.seekHead.attr('aria-valuetext', descriptionText);\n    this.seekHead.attr('aria-valuenow', Math.floor(position).toString());\n  };\n\n  AccessibleSlider.prototype.trackImmediatelyTo = function (position) {\n\n//console.log('trackImmediatelyTo');\n//console.log('Position: ' + this.position);\n\n    this.startTracking('keyboard', position);\n    this.trackHeadAtPosition(position);\n    this.keyTrackPosition = position;\n  };\n\n  AccessibleSlider.prototype.refreshTooltip = function () {\n    if (this.overHead) {\n      this.timeTooltip.show();\n      if (this.tracking) {\n        this.timeTooltip.text(this.positionToStr(this.lastTrackPosition));\n      }\n      else {\n        this.timeTooltip.text(this.positionToStr(this.position));\n      }\n      this.setTooltipPosition(this.seekHead.position().left + (this.seekHead.width() / 2));\n    }\n    else if (this.overBody && this.overBodyMousePos) {\n      this.timeTooltip.show();\n      this.timeTooltip.text(this.positionToStr(this.pageXToPosition(this.overBodyMousePos.x)));\n      this.setTooltipPosition(this.overBodyMousePos.x - this.bodyDiv.offset().left);\n    }\n    else {\n      this.timeTooltip.hide();\n    }\n  };\n\n  AccessibleSlider.prototype.setTooltipPosition = function (x) {\n    this.timeTooltip.css({\n      left: x - (this.timeTooltip.width() / 2) - 10,\n      bottom: this.seekHead.height() + 10\n    });\n  };\n\n  AccessibleSlider.prototype.positionToStr = function (seconds) {\n\n    // same logic as misc.js > formatSecondsAsColonTime()\n    var dHours = Math.floor(seconds / 3600);\n    var dMinutes = Math.floor(seconds / 60) % 60;\n    var dSeconds = Math.floor(seconds % 60);\n    if (dSeconds < 10) {\n      dSeconds = '0' + dSeconds;\n    }\n    if (dHours > 0) {\n      if (dMinutes < 10) {\n        dMinutes = '0' + dMinutes;\n      }\n      return dHours + ':' + dMinutes + ':' + dSeconds;\n    }\n    else {\n      return dMinutes + ':' + dSeconds;\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.addVolumeSlider = function($div) {\n\n    // input type=\"range\" requires IE10 and later\n    // and still isn't supported by Opera Mini as of v8\n    // Also, vertical orientation of slider requires CSS hacks\n    // and causes problems in some screen readers\n    // Therefore, building a custom vertical volume slider\n    var thisObj, volumeSliderId, volumeHelpId, x, y, volumePct;\n\n    thisObj = this;\n\n    // define a few variables\n    volumeSliderId = this.mediaId + '-volume-slider';\n    volumeHelpId = this.mediaId + '-volume-help';\n    this.volumeTrackHeight = 50; // must match CSS height for .able-volume-slider\n    this.volumeHeadHeight = 7; // must match CSS height for .able-volume-head\n    this.volumeTickHeight = this.volumeTrackHeight / 10;\n\n    this.$volumeSlider = $('<div>',{\n      'id': volumeSliderId,\n      'class': 'able-volume-slider',\n      'aria-hidden': 'true'\n    });\n    this.$volumeSliderTooltip = $('<div>',{\n      'class': 'able-tooltip',\n      'role': 'tooltip'\n    });\n    this.$volumeSliderTrack = $('<div>',{\n      'class': 'able-volume-track'\n    });\n    this.$volumeSliderTrackOn = $('<div>',{\n      'class': 'able-volume-track able-volume-track-on'\n    });\n    this.$volumeSliderHead = $('<div>',{\n      'class': 'able-volume-head',\n      'role': 'slider',\n      'aria-orientation': 'vertical',\n      'aria-label': this.tt.volumeUpDown,\n      'aria-valuemin': 0,\n      'aria-valuemax': 10,\n      'aria-valuenow': this.volume,\n      'tabindex': -1\n    });\n    this.$volumeSliderTrack.append(this.$volumeSliderTrackOn,this.$volumeSliderHead);\n    this.$volumeAlert = $('<div>',{\n      'class': 'able-offscreen',\n      'aria-live': 'assertive',\n      'aria-atomic': 'true'\n    });\n    volumePct = parseInt(thisObj.volume) / 10 * 100;\n    this.$volumeHelp = $('<div>',{\n      'id': volumeHelpId,\n      'class': 'able-volume-help'\n    }).text(volumePct + '%, ' + this.tt.volumeHelp);\n    this.$volumeButton.attr({\n      'aria-describedby': volumeHelpId\n    });\n    this.$volumeSlider.append(this.$volumeSliderTooltip,this.$volumeSliderTrack,this.$volumeAlert,this.$volumeHelp)\n    $div.append(this.$volumeSlider);\n\n    this.refreshVolumeSlider(this.volume);\n\n    // add event listeners\n    this.$volumeSliderHead.on('mousedown',function (event) {\n      thisObj.draggingVolume = true;\n      thisObj.volumeHeadPositionTop = $(this).offset().top;\n    });\n\n    $(document).on('mouseup',function (event) {\n      thisObj.draggingVolume = false;\n    });\n\n    $(document).on('mousemove',function (event) {\n      if (thisObj.draggingVolume) {\n        x = event.pageX;\n        y = event.pageY;\n        thisObj.moveVolumeHead(y);\n      }\n    });\n\n    this.$volumeSliderHead.on('keydown',function (event) {\n      // Left arrow or down arrow\n      if (event.which === 37 || event.which === 40) {\n        thisObj.handleVolume('down');\n      }\n      // Right arrow or up arrow\n      else if (event.which === 39 || event.which === 38) {\n        thisObj.handleVolume('up');\n      }\n      // Escape key or Enter key\n      else if (event.which === 27 || event.which === 13) {\n        // close popup\n        if (thisObj.$volumeSlider.is(':visible')) {\n          thisObj.hideVolumePopup();\n        }\n        else {\n          thisObj.showVolumePopup();\n        }\n      }\n      else {\n        return;\n      }\n      event.preventDefault();\n    });\n  };\n\n  AblePlayer.prototype.refreshVolumeSlider = function(volume) {\n\n    // adjust slider position based on current volume\n    var volumePct, volumePctText;\n    volumePct = (volume/10) * 100;\n    volumePctText = volumePct + '%';\n\n    var trackOnHeight, trackOnTop, headTop;\n    trackOnHeight = volume * this.volumeTickHeight;\n    trackOnTop = this.volumeTrackHeight - trackOnHeight;\n    headTop = trackOnTop - this.volumeHeadHeight;\n\n    this.$volumeSliderTrackOn.css({\n      'height': trackOnHeight + 'px',\n      'top': trackOnTop + 'px'\n    });\n    this.$volumeSliderHead.attr({\n      'aria-valuenow': volume,\n      'aria-valuetext': volumePctText\n    });\n    this.$volumeSliderHead.css({\n      'top': headTop + 'px'\n    });\n    this.$volumeAlert.text(volumePct + '%');\n\n  };\n\n  AblePlayer.prototype.refreshVolumeButton = function(volume) {\n\n    var volumeName, volumePct, volumeLabel, volumeIconClass, volumeImg;\n\n    volumeName = this.getVolumeName(volume);\n    volumePct = (volume/10) * 100;\n    volumeLabel = this.tt.volume + ' ' + volumePct + '%';\n\n    if (this.iconType === 'font') {\n      volumeIconClass = 'icon-volume-' + volumeName;\n      this.$volumeButton.find('span').first().removeClass().addClass(volumeIconClass);\n      this.$volumeButton.find('span.able-clipped').text(volumeLabel);\n    }\n    else {\n      volumeImg = this.imgPath + 'volume-' + volumeName + '.png';\n      this.$volumeButton.find('img').attr('src',volumeImg);\n    }\n  };\n\n  AblePlayer.prototype.moveVolumeHead = function(y) {\n\n    // y is current position after mousemove\n    var diff, direction, ticksDiff, newVolume, maxedOut;\n\n    var diff = this.volumeHeadPositionTop - y;\n\n    // only move the volume head if user had dragged at least one tick\n    // this is more efficient, plus creates a \"snapping' effect\n    if (Math.abs(diff) > this.volumeTickHeight) {\n      if (diff > 0) {\n        direction = 'up';\n      }\n      else {\n        direction = 'down';\n      }\n      if (direction == 'up' && this.volume == 10) {\n        // can't go any higher\n        return;\n      }\n      else if (direction == 'down' && this.volume == 0) {\n        // can't go any lower\n        return;\n      }\n      else {\n        ticksDiff = Math.round(Math.abs(diff) / this.volumeTickHeight);\n        if (direction == 'up') {\n          newVolume = this.volume + ticksDiff;\n          if (newVolume > 10) {\n            newVolume = 10;\n          }\n        }\n        else { // direction is down\n          newVolume = this.volume - ticksDiff;\n          if (newVolume < 0) {\n            newVolume = 0;\n          }\n        }\n        this.setVolume(newVolume); // this.volume will be updated after volumechange event fires (event.js)\n        this.refreshVolumeSlider(newVolume);\n        this.refreshVolumeButton(newVolume);\n        this.volumeHeadPositionTop = y;\n      }\n    }\n  };\n\n  AblePlayer.prototype.handleVolume = function(direction) {\n\n    // 'direction is either 'up','down', or an ASCII key code 49-57 (numeric keys 1-9)\n    // Action: calculate and change the volume\n    // Don't change this.volume and this.volumeButton yet - wait for 'volumechange' event to fire (event.js)\n\n    // If NO direction is provided, user has just clicked on the Volume button\n    // Action: show slider\n    var volume;\n\n    if (typeof direction === 'undefined') {\n      if (this.$volumeSlider.is(':visible')) {\n        this.hideVolumePopup();\n      }\n      else {\n        this.showVolumePopup();\n      }\n      return;\n    }\n\n    if (direction >= 49 && direction <= 57) {\n      volume = direction - 48;\n    }\n    else {\n\n      volume = this.getVolume();\n\n      if (direction === 'up' && volume < 10) {\n        volume += 1;\n      }\n      else if (direction === 'down' && volume > 0) {\n        volume -= 1;\n      }\n    }\n\n    if (this.isMuted() && volume > 0) {\n      this.setMute(false);\n    }\n    else if (volume === 0) {\n      this.setMute(true);\n    }\n    else {\n      this.setVolume(volume); // this.volume will be updated after volumechange event fires (event.js)\n      this.refreshVolumeSlider(volume);\n      this.refreshVolumeButton(volume);\n    }\n  };\n\n  AblePlayer.prototype.handleMute = function() {\n    if (this.isMuted()) {\n      this.setMute(false);\n    }\n    else {\n      this.setMute(true);\n    }\n  };\n\n  AblePlayer.prototype.showVolumePopup = function() {\n\n    this.closePopups();\n    this.$tooltipDiv.hide();\n    this.$volumeSlider.show().attr('aria-hidden','false');\n    this.$volumeSliderHead.attr('tabindex','0').focus();\n  };\n\n  AblePlayer.prototype.hideVolumePopup = function() {\n\n    this.$volumeSlider.hide().attr('aria-hidden','true');\n    this.$volumeSliderHead.attr('tabindex','-1');\n    this.$volumeButton.focus();\n  };\n\n  AblePlayer.prototype.isMuted = function () {\n\n    if (this.player === 'html5') {\n      return this.media.muted;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      return this.jwPlayer.getMute();\n    }\n    else if (this.player === 'youtube') {\n      return this.youTubePlayer.isMuted();\n    }\n  };\n\n  AblePlayer.prototype.setMute = function(mute) {\n\n    // mute is either true (muting) or false (unmuting)\n    if (mute) {\n      // save current volume so it can be restored after unmute\n      this.lastVolume = this.volume;\n      this.volume = 0;\n    }\n    else { // restore to previous volume\n      if (typeof this.lastVolume !== 'undefined') {\n        this.volume = this.lastVolume;\n      }\n    }\n\n    if (this.player === 'html5') {\n      this.media.muted = mute;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      this.jwPlayer.setMute(mute);\n    }\n    else if (this.player === 'youtube') {\n      if (mute) {\n        this.youTubePlayer.mute();\n      }\n      else {\n        this.youTubePlayer.unMute();\n      }\n    }\n    this.refreshVolumeSlider(this.volume);\n    this.refreshVolumeButton(this.volume);\n  };\n\n  AblePlayer.prototype.setVolume = function (volume) {\n\n    // volume is 1 to 10\n    // convert as needed depending on player\n\n    if (this.player === 'html5') {\n      this.media.volume = volume / 10;\n      if (this.hasSignLanguage && this.signVideo) {\n        this.signVideo.volume = 0; // always mute\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      this.jwPlayer.setVolume(volume * 10);\n    }\n    else if (this.player === 'youtube') {\n      this.youTubePlayer.setVolume(volume * 10);\n    }\n\n    this.lastVolume = volume;\n  };\n\n  AblePlayer.prototype.getVolume = function (volume) {\n\n    // return volume using common audio control scale 1 to 10\n\n    if (this.player === 'html5') {\n      // uses 0 to 1 scale\n      return this.media.volume * 10;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      // uses 0 to 100 scale\n      return this.jwPlayer.getVolume() / 10;\n    }\n    else if (this.player === 'youtube') {\n      // uses 0 to 100 scale\n      return this.youTubePlayer.getVolume() / 10;\n    }\n  };\n\n  AblePlayer.prototype.getVolumeName = function (volume) {\n\n    // returns 'mute','soft','medium', or 'loud' depending on volume level\n    if (volume == 0) {\n      return 'mute';\n    }\n    else if (volume == 10) {\n      return 'loud';\n    }\n    else if (volume < 5) {\n      return 'soft';\n    }\n    else {\n      return 'medium';\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n  var focusableElementsSelector = \"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]\";\n\n  // Based on the incredible accessible modal dialog.\n  window.AccessibleDialog = function(modalDiv, $returnElement, dialogRole, title, $descDiv, closeButtonLabel, width, fullscreen, escapeHook) {\n\n    this.title = title;\n    this.closeButtonLabel = closeButtonLabel;\n    this.focusedElementBeforeModal = $returnElement;\n    this.escapeHook = escapeHook;\n    this.baseId = $(modalDiv).attr('id') || Math.floor(Math.random() * 1000000000).toString();\n    var thisObj = this;\n    var modal = modalDiv;\n    this.modal = modal;\n    modal.css({\n      'width': width || '50%',\n      'top': (fullscreen ? '0' : '5%')\n    });\n    modal.addClass('able-modal-dialog');\n\n    if (!fullscreen) {\n      var closeButton = $('<button>',{\n         'class': 'modalCloseButton',\n         'title': thisObj.closeButtonLabel,\n         'aria-label': thisObj.closeButtonLabel\n      }).text('X');\n      closeButton.keydown(function (event) {\n        // Space key down\n        if (event.which === 32) {\n          thisObj.hide();\n        }\n      }).click(function () {\n        thisObj.hide();\n      });\n\n      var titleH1 = $('<h1></h1>');\n      titleH1.attr('id', 'modalTitle-' + this.baseId);\n      titleH1.css('text-align', 'center');\n      titleH1.text(title);\n\n      $descDiv.attr('id', 'modalDesc-' + this.baseId);\n\n      modal.attr({\n        'aria-labelledby': 'modalTitle-' + this.baseId,\n        'aria-describedby': 'modalDesc-' + this.baseId\n      });\n      modal.prepend(titleH1);\n      modal.prepend(closeButton);\n    }\n\n    modal.attr({\n      'aria-hidden': 'true',\n      'role': dialogRole\n    });\n\n    modal.keydown(function (event) {\n      // Escape\n      if (event.which === 27) {\n        if (thisObj.escapeHook) {\n          thisObj.escapeHook(event, this);\n        }\n        else {\n          thisObj.hide();\n          event.preventDefault();\n        }\n      }\n      // Tab\n      else if (event.which === 9) {\n        // Manually loop tab navigation inside the modal.\n        var parts = modal.find('*');\n        var focusable = parts.filter(focusableElementsSelector).filter(':visible');\n\n        if (focusable.length === 0) {\n          return;\n        }\n\n        var focused = $(':focus');\n        var currentIndex = focusable.index(focused);\n        if (event.shiftKey) {\n          // If backwards from first element, go to last.\n          if (currentIndex === 0) {\n            focusable.get(focusable.length - 1).focus();\n            event.preventDefault();\n          }\n        }\n        else {\n          if (currentIndex === focusable.length - 1) {\n            focusable.get(0).focus();\n            event.preventDefault();\n          }\n        }\n      }\n      event.stopPropagation();\n    });\n\n    $('body > *').not('.able-modal-overlay').not('.able-modal-dialog').attr('aria-hidden', 'false');\n  };\n\n  AccessibleDialog.prototype.show = function () {\n    if (!this.overlay) {\n      // Generate overlay.\n      var overlay = $('<div></div>').attr({\n         'class': 'able-modal-overlay',\n         'tabindex': '-1'\n      });\n      this.overlay = overlay;\n      $('body').append(overlay);\n\n      // Keep from moving focus out of dialog when clicking outside of it.\n      overlay.on('mousedown.accessibleModal', function (event) {\n        event.preventDefault();\n      });\n    }\n\n    $('body > *').not('.able-modal-overlay').not('.able-modal-dialog').attr('aria-hidden', 'true');\n\n    this.overlay.css('display', 'block');\n    this.modal.css('display', 'block');\n    this.modal.attr({\n      'aria-hidden': 'false',\n      'tabindex': '-1'\n    });\n\n    var focusable = this.modal.find(\"*\").filter(focusableElementsSelector).filter(':visible');\n    if (focusable.length === 0) {\n      this.focusedElementBeforeModal.blur();\n    }\n    var thisObj = this;\n    setTimeout(function () {\n      // originally set focus on the first focusable element\n      // thisObj.modal.find('button.modalCloseButton').first().focus();\n      // but setting focus on dialog seems to provide more reliable access to ALL content within\n      thisObj.modal.focus();\n    }, 300);\n  };\n\n  AccessibleDialog.prototype.hide = function () {\n    if (this.overlay) {\n      this.overlay.css('display', 'none');\n    }\n    this.modal.css('display', 'none');\n    this.modal.attr('aria-hidden', 'true');\n    $('body > *').not('.able-modal-overlay').not('.able-modal-dialog').attr('aria-hidden', 'false');\n\n    this.focusedElementBeforeModal.focus();\n  };\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.getNextHeadingLevel = function($element) {\n\n    // Finds the nearest heading in the ancestor tree\n    // Loops over each parent of the current element until a heading is found\n    // If multiple headings are found beneath a given parent, get the closest\n    // Returns an integer (1-6) representing the next available heading level\n\n    var $parents, $foundHeadings, numHeadings, headingType, headingNumber;\n\n    $parents = $element.parents();\n    $parents.each(function(){\n      $foundHeadings = $(this).children(':header');\n      numHeadings = $foundHeadings.length;\n      if (numHeadings) {\n        headingType = $foundHeadings.eq(numHeadings-1).prop('tagName');\n        return false;\n      }\n    });\n    if (typeof headingType === 'undefined') {\n      // page has no headings\n      headingNumber = 1;\n    }\n    else {\n      // Increment closest heading by one if less than 6.\n      headingNumber = parseInt(headingType[1]);\n      headingNumber += 1;\n      if (headingNumber > 6) {\n        headingNumber = 6;\n      }\n    }\n    return headingNumber;\n  };\n\n  AblePlayer.prototype.countProperties = function(obj) {\n    // returns the number of properties in an object\n    var count, prop;\n    count = 0;\n    for (prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        ++count;\n      }\n    }\n    return count;\n  };\n\n  // Takes seconds and converts to string of form hh:mm:ss\n  AblePlayer.prototype.formatSecondsAsColonTime = function (seconds) {\n\n    var dHours = Math.floor(seconds / 3600);\n    var dMinutes = Math.floor(seconds / 60) % 60;\n    var dSeconds = Math.floor(seconds % 60);\n    if (dSeconds < 10) {\n      dSeconds = '0' + dSeconds;\n    }\n    if (dHours > 0) {\n      if (dMinutes < 10) {\n        dMinutes = '0' + dMinutes;\n      }\n      return dHours + ':' + dMinutes + ':' + dSeconds;\n    }\n    else {\n      return dMinutes + ':' + dSeconds;\n    }\n  };\n\n  AblePlayer.prototype.capitalizeFirstLetter = function (string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.initDescription = function() {\n\n    // set default mode for delivering description (open vs closed)\n    // based on availability and user preference\n\n    // called when player is being built, or when a user\n    // toggles the Description button or changes a description-related preference\n    // In the latter two scendarios, this.refreshingDesc == true via control.js > handleDescriptionToggle()\n\n    // The following variables are applicable to delivery of description:\n    // prefDesc == 1 if user wants description (i.e., Description button is on); else 0\n    // prefDescFormat == either 'video' or 'text'\n    // prefDescPause == 1 to pause video when description starts; else 0\n    // prefVisibleDesc == 1 to visibly show text-based description area; else 0\n    // hasOpenDesc == true if a described version of video is available via data-desc-src attribute\n    // hasClosedDesc == true if a description text track is available\n    // this.useDescFormat == either 'video' or 'text'; the format ultimately delivered\n    // descOn == true if description of either type is on\n    if (!this.refreshingDesc) {\n      // this is the initial build\n      // first, check to see if there's an open-described version of this video\n      // checks only the first source since if a described version is provided,\n      // it must be provided for all sources\n      this.descFile = this.$sources.first().attr('data-desc-src');\n      if (typeof this.descFile !== 'undefined') {\n        this.hasOpenDesc = true;\n      }\n      else {\n        // there's no open-described version via data-desc-src, but what about data-youtube-desc-src?\n        if (this.youTubeDescId) {\n          this.hasOpenDesc = true;\n        }\n        else { // there are no open-described versions from any source\n          this.hasOpenDesc = false;\n        }\n      }\n    }\n    // update this.useDescFormat based on media availability & user preferences\n    if (this.prefDesc) {\n      if (this.hasOpenDesc && this.hasClosedDesc) {\n        // both formats are available. Use whichever one user prefers\n        this.useDescFormat = this.prefDescFormat;\n        this.descOn = true;\n      }\n      else if (this.hasOpenDesc) {\n        this.useDescFormat = 'video';\n        this.descOn = true;\n      }\n      else if (this.hasClosedDesc) {\n        this.useDescFormat = 'text';\n        this.descOn = true;\n      }\n    }\n    else { // description button is off\n      if (this.refreshingDesc) { // user just now toggled it off\n        this.prevDescFormat = this.useDescFormat;\n        this.useDescFormat = false;\n        this.descOn = false;\n      }\n      else { // desc has always been off\n        this.useDescFormat = false;\n      }\n    }\n\n    if (this.descOn) {\n\n      if (this.useDescFormat === 'video') {\n\n        if (!this.usingAudioDescription()) {\n          // switched from non-described to described version\n          this.swapDescription();\n        }\n        // hide description div\n        this.$descDiv.hide();\n        this.$descDiv.removeClass('able-clipped');\n      }\n      else if (this.useDescFormat === 'text') {\n        this.$descDiv.show();\n        if (this.prefVisibleDesc) { // make it visible to everyone\n          this.$descDiv.removeClass('able-clipped');\n        }\n        else { // keep it visible to screen readers, but hide from everyone else\n          this.$descDiv.addClass('able-clipped');\n        }\n        if (!this.swappingSrc) {\n          this.showDescription(this.getElapsed());\n        }\n      }\n    }\n    else { // description is off.\n\n      if (this.prevDescFormat === 'video') { // user was previously using description via video\n        if (this.usingAudioDescription()) {\n          this.swapDescription();\n        }\n      }\n      else if (this.prevDescFormat === 'text') { // user was previously using text description\n        // hide description div from everyone, including screen reader users\n        this.$descDiv.hide();\n        this.$descDiv.removeClass('able-clipped');\n      }\n    }\n    this.refreshingDesc = false;\n  };\n\n  // Returns true if currently using audio description, false otherwise.\n  AblePlayer.prototype.usingAudioDescription = function () {\n\n    if (this.player === 'youtube') {\n      return (this.activeYouTubeId === this.youTubeDescId);\n    }\n    else {\n      return (this.$sources.first().attr('data-desc-src') === this.$sources.first().attr('src'));\n    }\n  };\n\n  AblePlayer.prototype.swapDescription = function() {\n    // swap described and non-described source media, depending on which is playing\n    // this function is only called in two circumstances:\n    // 1. Swapping to described version when initializing player (based on user prefs & availability)\n    // 2. User is toggling description\n    var thisObj, i, origSrc, descSrc, srcType, jwSourceIndex, newSource;\n\n    thisObj = this;\n\n    // get current time, and start new video at the same time\n    // NOTE: There is some risk in resuming playback at the same start time\n    // since the described version might include extended audio description (with pauses)\n    // and might therefore be longer than the non-described version\n    // The benefits though would seem to outweigh this risk\n    this.swapTime = this.getElapsed(); // video will scrub to this time after loaded (see event.js)\n\n    if (this.descOn) {\n      // user has requested the described version\n      this.showAlert(this.tt.alertDescribedVersion);\n    }\n    else {\n      // user has requested the non-described version\n      this.showAlert(this.tt.alertNonDescribedVersion);\n    }\n\n    if (this.player === 'html5') {\n\n      if (this.usingAudioDescription()) {\n        // the described version is currently playing. Swap to non-described\n        for (i=0; i < this.$sources.length; i++) {\n          // for all <source> elements, replace src with data-orig-src\n          origSrc = this.$sources[i].getAttribute('data-orig-src');\n          srcType = this.$sources[i].getAttribute('type');\n          if (origSrc) {\n            this.$sources[i].setAttribute('src',origSrc);\n          }\n          if (srcType === 'video/mp4') {\n            jwSourceIndex = i;\n          }\n        }\n        // No need to check for this.initializing\n        // This function is only called during initialization\n        // if swapping from non-described to described\n        this.swappingSrc = true;\n      }\n      else {\n        // the non-described version is currently playing. Swap to described.\n        for (i=0; i < this.$sources.length; i++) {\n          // for all <source> elements, replace src with data-desc-src (if one exists)\n          // then store original source in a new data-orig-src attribute\n          origSrc = this.$sources[i].getAttribute('src');\n          descSrc = this.$sources[i].getAttribute('data-desc-src');\n          srcType = this.$sources[i].getAttribute('type');\n          if (descSrc) {\n            this.$sources[i].setAttribute('src',descSrc);\n            this.$sources[i].setAttribute('data-orig-src',origSrc);\n          }\n          if (srcType === 'video/mp4') {\n            jwSourceIndex = i;\n          }\n        }\n        this.swappingSrc = true;\n      }\n\n      // now reload the source file.\n      if (this.player === 'html5') {\n        this.media.load();\n      }\n      else if (this.player === 'youtube') {\n        // TODO: Load new youTubeId\n      }\n      else if (this.player === 'jw' && this.jwPlayer) {\n        newSource = this.$sources[jwSourceIndex].getAttribute('src');\n        this.jwPlayer.load({file: newSource});\n      }\n    }\n    else if (this.player === 'youtube') {\n\n      if (this.usingAudioDescription()) {\n        // the described version is currently playing. Swap to non-described\n        this.activeYouTubeId = this.youTubeId;\n        this.showAlert(this.tt.alertNonDescribedVersion);\n      }\n      else {\n        // the non-described version is currently playing. Swap to described.\n        this.activeYouTubeId = this.youTubeDescId;\n        this.showAlert(this.tt.alertDescribedVersion);\n      }\n      if (typeof this.youTubePlayer !== 'undefined') {\n\n        // retrieve/setup captions for the new video from YouTube\n        this.setupAltCaptions().then(function() {\n\n          if (thisObj.playing) {\n            // loadVideoById() loads and immediately plays the new video at swapTime\n            thisObj.youTubePlayer.loadVideoById(thisObj.activeYouTubeId,thisObj.swapTime);\n          }\n          else {\n            // cueVideoById() loads the new video and seeks to swapTime, but does not play\n            thisObj.youTubePlayer.cueVideoById(thisObj.activeYouTubeId,thisObj.swapTime);\n          }\n        });\n      }\n    }\n  };\n\n  AblePlayer.prototype.showDescription = function(now) {\n\n    // there's a lot of redundancy between this function and showCaptions\n    // Trying to combine them ended up in a mess though. Keeping as is for now.\n\n    if (this.swappingSrc) {\n      return;\n    }\n\n    var d, thisDescription;\n    var flattenComponentForDescription = function (component) {\n      var result = [];\n      if (component.type === 'string') {\n        result.push(component.value);\n      }\n      else {\n        for (var ii in component.children) {\n          result.push(flattenComponentForDescription(component.children[ii]));\n        }\n      }\n      return result.join('');\n    }\n\n    var cues;\n    if (this.selectedDescriptions) {\n      cues = this.selectedDescriptions.cues;\n    }\n    else if (this.descriptions.length >= 1) {\n      cues = this.descriptions[0].cues;\n    }\n    else {\n      cues = [];\n    }\n    for (d in cues) {\n      if ((cues[d].start <= now) && (cues[d].end > now)) {\n        thisDescription = d;\n        break;\n      }\n    }\n    if (typeof thisDescription !== 'undefined') {\n      if (this.currentDescription !== thisDescription) {\n        // temporarily remove aria-live from $status in order to prevent description from being interrupted\n        this.$status.removeAttr('aria-live');\n        // load the new description into the container div\n        this.$descDiv.html(flattenComponentForDescription(cues[thisDescription].components));\n        if (this.prefDescPause) {\n          this.pauseMedia();\n        }\n        this.currentDescription = thisDescription;\n      }\n    }\n    else {\n      this.$descDiv.html('');\n      this.currentDescription = -1;\n      // restore aria-live to $status\n      this.$status.attr('aria-live','polite');\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.getUserAgent = function() {\n\n    // Whenever possible we avoid browser sniffing. Better to do feature detection.\n    // However, in case it's needed...\n    // this function defines a userAgent array that can be used to query for common browsers and OSs\n    // NOTE: This would be much simpler with jQuery.browser but that was removed from jQuery 1.9\n    // http://api.jquery.com/jQuery.browser/\n    this.userAgent = {};\n    this.userAgent.browser = {};\n\n    // Test for common browsers\n    if (/Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)){ //test for Firefox/x.x or Firefox x.x (ignoring remaining digits);\n      this.userAgent.browser.name = 'Firefox';\n      this.userAgent.browser.version = RegExp.$1; // capture x.x portion\n    }\n    else if (/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)) { //test for MSIE x.x (IE10 or lower)\n      this.userAgent.browser.name = 'Internet Explorer';\n      this.userAgent.browser.version = RegExp.$1;\n    }\n    else if (/Trident.*rv[ :]*(\\d+\\.\\d+)/.test(navigator.userAgent)) { // test for IE11 or higher\n      this.userAgent.browser.name = 'Internet Explorer';\n      this.userAgent.browser.version = RegExp.$1;\n    }\n    else if (/Edge[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) { // test for MS Edge\n      this.userAgent.browser.name = 'Edge';\n      this.userAgent.browser.version = RegExp.$1;\n    }\n    else if (/OPR\\/(\\d+\\.\\d+)/i.test(navigator.userAgent)) { // Opera 15 or over\n      this.userAgent.browser.name = 'Opera';\n      this.userAgent.browser.version = RegExp.$1;\n    }\n    else if (/Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)) {\n      this.userAgent.browser.name = 'Chrome';\n      if (/Chrome[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n        this.userAgent.browser.version = RegExp.$1;\n      }\n    }\n    else if (/Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor)) {\n      this.userAgent.browser.name = 'Safari';\n      if (/Version[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent)) {\n        this.userAgent.browser.version = RegExp.$1;\n      }\n    }\n    else {\n      this.userAgent.browser.name = 'Unknown';\n      this.userAgent.browser.version = 'Unknown';\n    }\n\n    // Now test for common operating systems\n    if (window.navigator.userAgent.indexOf(\"Windows NT 6.2\") != -1) {\n      this.userAgent.os = \"Windows 8\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Windows NT 6.1\") != -1) {\n      this.userAgent.os = \"Windows 7\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Windows NT 6.0\") != -1) {\n      this.userAgent.os = \"Windows Vista\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Windows NT 5.1\") != -1) {\n      this.userAgent.os = \"Windows XP\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Windows NT 5.0\") != -1) {\n      this.userAgent.os = \"Windows 2000\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Mac\")!=-1) {\n      this.userAgent.os = \"Mac/iOS\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"X11\")!=-1) {\n      this.userAgent.os = \"UNIX\";\n    }\n    else if (window.navigator.userAgent.indexOf(\"Linux\")!=-1) {\n      this.userAgent.os = \"Linux\";\n    }\n    if (this.debug) {\n      console.log('User agent:' + navigator.userAgent);\n      console.log('Vendor: ' + navigator.vendor);\n      console.log('Browser: ' + this.userAgent.browser.name);\n      console.log('Version: ' + this.userAgent.browser.version);\n      console.log('OS: ' + this.userAgent.os);\n    }\n  };\n\n  AblePlayer.prototype.isUserAgent = function(which) {\n    var userAgent = navigator.userAgent.toLowerCase();\n    if (this.debug) {\n      console.log('User agent: ' + userAgent);\n    }\n    if (userAgent.indexOf(which.toLowerCase()) !== -1) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  };\n\n  AblePlayer.prototype.isIOS = function(version) {\n    // return true if this is IOS\n    // if version is provided check for a particular version\n\n    var userAgent, iOS;\n\n    userAgent = navigator.userAgent.toLowerCase();\n    iOS = /ipad|iphone|ipod/.exec(userAgent);\n    if (iOS) {\n      if (typeof version !== 'undefined') {\n        if (userAgent.indexOf('os ' + version) !== -1) {\n          // this is the target version of iOS\n          return true;\n        }\n        else {\n          return false;\n        }\n      }\n      else {\n        // no version was specified\n        return true;\n      }\n    }\n    else {\n      // this is not IOS\n      return false;\n    }\n  };\n\n  AblePlayer.prototype.browserSupportsVolume = function() {\n    // ideally we could test for volume support\n    // However, that doesn't seem to be reliable\n    // http://stackoverflow.com/questions/12301435/html5-video-tag-volume-support\n\n    var userAgent, noVolume;\n\n    userAgent = navigator.userAgent.toLowerCase();\n    noVolume = /ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(userAgent);\n    if (noVolume) {\n      if (noVolume[0] === 'android' && /firefox/.test(userAgent)) {\n        // Firefox on android DOES support changing the volume:\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n    else {\n      // as far as we know, this userAgent supports volume control\n      return true;\n    }\n  };\n\n  AblePlayer.prototype.nativeFullscreenSupported = function () {\n    if (this.player === 'jw') {\n      // JW player flash has problems with native fullscreen.\n      return false;\n    }\n    return document.fullscreenEnabled ||\n      document.webkitFullscreenEnabled ||\n      document.mozFullScreenEnabled ||\n      document.msFullscreenEnabled;\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.seekTo = function (newTime) {\n\n    this.seeking = true;\n    this.liveUpdatePending = true;\n\n    if (this.player === 'html5') {\n      var seekable;\n\n      this.startTime = newTime;\n      // Check HTML5 media \"seekable\" property to be sure media is seekable to startTime\n      seekable = this.media.seekable;\n      if (seekable.length > 0 && this.startTime >= seekable.start(0) && this.startTime <= seekable.end(0)) {\n        // ok to seek to startTime\n        // canplaythrough will be triggered when seeking is complete\n        // this.seeking will be set to false at that point\n        this.media.currentTime = this.startTime;\n        if (this.hasSignLanguage && this.signVideo) {\n          // keep sign languge video in sync\n          this.signVideo.currentTime = this.startTime;\n        }\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      // pause JW Player temporarily.\n      // When seek has successfully reached newTime,\n      // onSeek event will be called, and playback will be resumed\n      this.jwSeekPause = true;\n      this.jwPlayer.seek(newTime);\n    }\n    else if (this.player === 'youtube') {\n      this.youTubePlayer.seekTo(newTime,true);\n      if (newTime > 0) {\n        if (typeof this.$posterImg !== 'undefined') {\n          this.$posterImg.hide();\n        }\n      }\n    }\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.getDuration = function () {\n\n    var duration;\n    if (this.player === 'html5') {\n      duration = this.media.duration;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      duration = this.jwPlayer.getDuration();\n    }\n    else if (this.player === 'youtube' && this.youTubePlayer) {\n      duration = this.youTubePlayer.getDuration();\n    }\n    if (duration === undefined || isNaN(duration) || duration === -1) {\n      return 0;\n    }\n    return duration;\n  };\n\n  AblePlayer.prototype.getElapsed = function () {\n    var position;\n    if (this.player === 'html5') {\n      position = this.media.currentTime;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      if (this.jwPlayer.getState() === 'IDLE') {\n        return 0;\n      }\n      position = this.jwPlayer.getPosition();\n    }\n    else if (this.player === 'youtube') {\n      if (this.youTubePlayer) {\n        position = this.youTubePlayer.getCurrentTime();\n      }\n    }\n\n    if (position === undefined || isNaN(position) || position === -1) {\n      return 0;\n    }\n    return position;\n  };\n\n  // Returns one of the following states:\n  //  'stopped' - Not yet played for the first time, or otherwise reset to unplayed.\n  //  'ended' - Finished playing.\n  //  'paused' - Not playing, but not stopped or ended.\n  //  'buffering' - Momentarily paused to load, but will resume once data is loaded.\n  //  'playing' - Currently playing.\n  AblePlayer.prototype.getPlayerState = function () {\n    if (this.swappingSrc) {\n      return;\n    }\n    if (this.player === 'html5') {\n      if (this.media.paused) {\n        if (this.getElapsed() === 0) {\n          return 'stopped';\n        }\n        else if (this.media.ended) {\n          return 'ended';\n        }\n        else {\n          return 'paused';\n        }\n      }\n      else if (this.media.readyState !== 4) {\n        return 'buffering';\n      }\n      else {\n        return 'playing';\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      if (this.jwPlayer.getState() === 'PAUSED' || this.jwPlayer.getState() === 'IDLE' || this.jwPlayer.getState() === undefined) {\n\n        if (this.getElapsed() === 0) {\n          return 'stopped';\n        }\n        else if (this.getElapsed() === this.getDuration()) {\n          return 'ended';\n        }\n        else {\n          return 'paused';\n        }\n      }\n      else if (this.jwPlayer.getState() === 'BUFFERING') {\n        return 'buffering';\n      }\n      else if (this.jwPlayer.getState() === 'PLAYING') {\n        return 'playing';\n      }\n    }\n    else if (this.player === 'youtube' && this.youTubePlayer) {\n      var state = this.youTubePlayer.getPlayerState();\n      if (state === -1 || state === 5) {\n        return 'stopped';\n      }\n      else if (state === 0) {\n        return 'ended';\n      }\n      else if (state === 1) {\n        return 'playing';\n      }\n      else if (state === 2) {\n        return 'paused';\n      }\n      else if (state === 3) {\n        return 'buffering';\n      }\n    }\n  };\n\n  AblePlayer.prototype.isPlaybackRateSupported = function () {\n    if (this.player === 'html5') {\n      return this.media.playbackRate ? true : false;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      // Not directly supported by JW player; can hack for HTML5 version by finding the dynamically generated video tag, but decided not to do that.\n      return false;\n    }\n    else if (this.player === 'youtube') {\n      // Youtube always supports a finite list of playback rates.  Only expose controls if more than one is available.\n      return (this.youTubePlayer.getAvailablePlaybackRates().length > 1);\n    }\n  };\n\n  AblePlayer.prototype.setPlaybackRate = function (rate) {\n    rate = Math.max(0.5, rate);\n    if (this.player === 'html5') {\n      this.media.playbackRate = rate;\n    }\n    else if (this.player === 'youtube') {\n      this.youTubePlayer.setPlaybackRate(rate);\n    }\n    if (this.hasSignLanguage && this.signVideo) {\n      this.signVideo.playbackRate = rate;\n    }\n    this.$speed.text(this.tt.speed + ': ' + rate.toFixed(2).toString() + 'x');\n  };\n\n  AblePlayer.prototype.getPlaybackRate = function () {\n    if (this.player === 'html5') {\n      return this.media.playbackRate;\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      // Unsupported, always the normal rate.\n      return 1;\n    }\n    else if (this.player === 'youtube') {\n      return this.youTubePlayer.getPlaybackRate();\n    }\n  };\n\n  // Note there are three player states that count as paused in this sense,\n  // and one of them is named 'paused'.\n  // A better name would be 'isCurrentlyNotPlayingOrBuffering'\n  AblePlayer.prototype.isPaused = function () {\n    var state = this.getPlayerState();\n    return state === 'paused' || state === 'stopped' || state === 'ended';\n  };\n\n  AblePlayer.prototype.pauseMedia = function () {\n    if (this.player === 'html5') {\n      this.media.pause(true);\n      if (this.hasSignLanguage && this.signVideo) {\n        this.signVideo.pause(true);\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      this.jwPlayer.pause(true);\n    }\n    else if (this.player === 'youtube') {\n      this.youTubePlayer.pauseVideo();\n    }\n  };\n\n  AblePlayer.prototype.playMedia = function () {\n    if (this.player === 'html5') {\n      this.media.play(true);\n      if (this.hasSignLanguage && this.signVideo) {\n        this.signVideo.play(true);\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      this.jwPlayer.play(true);\n    }\n    else if (this.player === 'youtube') {\n      this.youTubePlayer.playVideo();\n      if (typeof this.$posterImg !== 'undefined') {\n        this.$posterImg.hide();\n      }\n      this.stoppingYouTube = false;\n    }\n    this.startedPlaying = true;\n  };\n\n  AblePlayer.prototype.refreshControls = function() {\n\n    var thisObj, duration, elapsed, lastChapterIndex, displayElapsed,\n      updateLive, textByState, timestamp, widthUsed,\n      leftControls, rightControls, seekbarWidth, seekbarSpacer, captionsCount,\n      buffered, newTop, svgLink, newSvgLink,\n      statusBarHeight, speedHeight, statusBarWidthBreakpoint;\n\n    thisObj = this;\n    if (this.swappingSrc) {\n      // wait until new source has loaded before refreshing controls\n      return;\n    }\n\n    duration = this.getDuration();\n    elapsed = this.getElapsed();\n\n    if (this.seekbarScope === 'chapter' && this.chapters.length) {\n      this.useChapterTimes = true;\n      this.chapterDuration = this.getChapterDuration();\n      this.chapterElapsed = this.getChapterElapsed();\n    }\n    else {\n      this.useChapterTimes = false;\n    }\n\n    if (this.useFixedSeekInterval === false && this.seekIntervalCalculated === false && duration > 0) {\n      // couldn't calculate seekInterval previously; try again.\n      this.setSeekInterval();\n    }\n\n    if (this.seekBar) {\n\n      if (this.useChapterTimes) {\n        lastChapterIndex = this.chapters.length-1;\n        if (this.chapters[lastChapterIndex] == this.currentChapter) {\n          // this is the last chapter\n          if (this.currentChapter.end !== duration) {\n            // chapter ends before or after video ends\n            // need to adjust seekbar duration to match video end\n            this.seekBar.setDuration(duration - this.currentChapter.start);\n          }\n          else {\n            this.seekBar.setDuration(this.chapterDuration);\n          }\n        }\n        else {\n          // this is not the last chapter\n          this.seekBar.setDuration(this.chapterDuration);\n        }\n      }\n      else {\n        this.seekBar.setDuration(duration);\n      }\n      if (!(this.seekBar.tracking)) {\n        // Only update the aria live region if we have an update pending (from a\n        // seek button control) or if the seekBar has focus.\n        // We use document.activeElement instead of $(':focus') due to a strange bug:\n        //  When the seekHead element is focused, .is(':focus') is failing and $(':focus') is returning an undefined element.\n        updateLive = this.liveUpdatePending || this.seekBar.seekHead.is($(document.activeElement));\n        this.liveUpdatePending = false;\n        if (this.useChapterTimes) {\n          this.seekBar.setPosition(this.chapterElapsed, updateLive);\n        }\n        else {\n          this.seekBar.setPosition(elapsed, updateLive);\n        }\n      }\n\n      // When seeking, display the seek bar time instead of the actual elapsed time.\n      if (this.seekBar.tracking) {\n        displayElapsed = this.seekBar.lastTrackPosition;\n      }\n      else {\n        if (this.useChapterTimes) {\n          displayElapsed = this.chapterElapsed;\n        }\n        else {\n          displayElapsed = elapsed;\n        }\n      }\n    }\n    if (this.useChapterTimes) {\n      this.$durationContainer.text(' / ' + this.formatSecondsAsColonTime(this.chapterDuration));\n    }\n    else {\n      this.$durationContainer.text(' / ' + this.formatSecondsAsColonTime(duration));\n    }\n    this.$elapsedTimeContainer.text(this.formatSecondsAsColonTime(displayElapsed));\n\n    textByState = {\n      'stopped': this.tt.statusStopped,\n      'paused': this.tt.statusPaused,\n      'playing': this.tt.statusPlaying,\n      'buffering': this.tt.statusBuffering,\n      'ended': this.tt.statusEnd\n    };\n\n    if (this.stoppingYouTube) {\n      // stoppingYouTube is true temporarily while video is paused and seeking to 0\n      // See notes in handleRestart()\n      // this.stoppingYouTube will be reset when seek to 0 is finished (in event.js > onMediaUpdateTime())\n      if (this.$status.text() !== this.tt.statusStopped) {\n        this.$status.text(this.tt.statusStopped);\n      }\n      if (this.$playpauseButton.find('span').first().hasClass('icon-pause')) {\n        if (this.iconType === 'font') {\n          this.$playpauseButton.find('span').first().removeClass('icon-pause').addClass('icon-play');\n          this.$playpauseButton.find('span.able-clipped').text(this.tt.play);\n        }\n        else if (this.iconType === 'svg') {\n          // TODO: Add play/pause toggle for SVG\n        }\n        else {\n          this.$playpauseButton.find('img').attr('src',this.playButtonImg);\n        }\n      }\n    }\n    else {\n      if (typeof this.$status !== 'undefined' && typeof this.seekBar !== 'undefined') {\n        // Update the text only if it's changed since it has role=\"alert\";\n        // also don't update while tracking, since this may Pause/Play the player but we don't want to send a Pause/Play update.\n        if (this.$status.text() !== textByState[this.getPlayerState()] && !this.seekBar.tracking) {\n          // Debounce updates; only update after status has stayed steadily different for 250ms.\n          timestamp = (new Date()).getTime();\n          if (!this.statusDebounceStart) {\n            this.statusDebounceStart = timestamp;\n            // Make sure refreshControls gets called again at the appropriate time to check.\n            this.statusTimeout = setTimeout(function () {\n              thisObj.refreshControls();\n            }, 300);\n          }\n          else if ((timestamp - this.statusDebounceStart) > 250) {\n            this.$status.text(textByState[this.getPlayerState()]);\n            this.statusDebounceStart = null;\n            clearTimeout(this.statusTimeout);\n            this.statusTimeout = null;\n          }\n        }\n        else {\n          this.statusDebounceStart = null;\n          clearTimeout(this.statusTimeout);\n          this.statusTimeout = null;\n        }\n\n        // Don't change play/pause button display while using the seek bar (or if YouTube stopped)\n        if (!this.seekBar.tracking && !this.stoppingYouTube) {\n          if (this.isPaused()) {\n            this.$playpauseButton.attr('aria-label',this.tt.play);\n\n            if (this.iconType === 'font') {\n              this.$playpauseButton.find('span').first().removeClass('icon-pause').addClass('icon-play');\n              this.$playpauseButton.find('span.able-clipped').text(this.tt.play);\n            }\n            else if (this.iconType === 'svg') {\n              // Not currently working. SVG is a work in progress\n              this.$playpauseButton.find('svg').removeClass('svg-pause').addClass('svg-play');\n              svgLink = this.$playpauseButton.find('use').attr('xlink:href');\n              newSvgLink = svgLink.replace('svg-pause','svg-play');\n              this.$playpauseButton.find('use').attr(newSvgLink);\n              this.$playpauseButton.find('span.able-clipped').text(this.tt.play);\n            }\n            else {\n              this.$playpauseButton.find('img').attr('src',this.playButtonImg);\n            }\n          }\n          else {\n            this.$playpauseButton.attr('aria-label',this.tt.pause);\n\n            if (this.iconType === 'font') {\n              this.$playpauseButton.find('span').first().removeClass('icon-play').addClass('icon-pause');\n              this.$playpauseButton.find('span.able-clipped').text(this.tt.pause);\n            }\n            else if (this.iconType === 'svg') {\n              // Not currently working. SVG is a work in progress\n              this.$playpauseButton.find('svg').removeClass('svg-play').addClass('svg-pause');\n              svgLink = this.$playpauseButton.find('use').attr('xlink:href');\n              newSvgLink = svgLink.replace('svg-play','svg-pause');\n              this.$playpauseButton.find('use').attr(newSvgLink);\n              this.$playpauseButton.find('span.able-clipped').text(this.tt.pause);\n            }\n            else {\n              this.$playpauseButton.find('img').attr('src',this.pauseButtonImg);\n            }\n          }\n        }\n      }\n    }\n\n    // Update seekbar width.\n    // To do this, we need to calculate the width of all buttons surrounding it.\n    if (this.seekBar) {\n      widthUsed = 0;\n      seekbarSpacer = 40; // adjust for discrepancies in browsers' calculated button widths\n\n      leftControls = this.seekBar.wrapperDiv.parent().prev('div.able-left-controls');\n      rightControls = leftControls.next('div.able-right-controls');\n      leftControls.children().each(function () {\n        if ($(this).prop('tagName')=='BUTTON') {\n          widthUsed += $(this).width();\n        }\n      });\n      rightControls.children().each(function () {\n        if ($(this).prop('tagName')=='BUTTON') {\n          widthUsed += $(this).width();\n        }\n      });\n      if (this.isFullscreen()) {\n        seekbarWidth = $(window).width() - widthUsed - seekbarSpacer;\n      }\n      else {\n        seekbarWidth = this.$ableWrapper.width() - widthUsed - seekbarSpacer;\n      }\n      // Sometimes some minor fluctuations based on browser weirdness, so set a threshold.\n      if (Math.abs(seekbarWidth - this.seekBar.getWidth()) > 5) {\n        this.seekBar.setWidth(seekbarWidth);\n      }\n    }\n\n    // Show/hide status bar content conditionally\n    if (!this.isFullscreen()) {\n      statusBarWidthBreakpoint = 300;\n      statusBarHeight = this.$statusBarDiv.height();\n      speedHeight = this.$statusBarDiv.find('span.able-speed').height();\n      if (speedHeight > (statusBarHeight + 5)) {\n        // speed bar is wrapping (happens often in German player)\n        this.$statusBarDiv.find('span.able-speed').hide();\n        this.hidingSpeed = true;\n      }\n      else {\n        if (this.hidingSpeed) {\n          this.$statusBarDiv.find('span.able-speed').show();\n          this.hidingSpeed = false;\n        }\n        if (this.$statusBarDiv.width() < statusBarWidthBreakpoint) {\n          // Player is too small for a speed span\n          this.$statusBarDiv.find('span.able-speed').hide();\n          this.hidingSpeed = true;\n        }\n        else {\n          if (this.hidingSpeed) {\n            this.$statusBarDiv.find('span.able-speed').show();\n            this.hidingSpeed = false;\n          }\n        }\n      }\n    }\n\n    if (this.$descButton) {\n      if (this.descOn) {\n        this.$descButton.removeClass('buttonOff').attr('aria-label',this.tt.turnOffDescriptions);\n        this.$descButton.find('span.able-clipped').text(this.tt.turnOffDescriptions);\n      }\n      else {\n        this.$descButton.addClass('buttonOff').attr('aria-label',this.tt.turnOnDescriptions);\n        this.$descButton.find('span.able-clipped').text(this.tt.turnOnDescriptions);\n      }\n    }\n\n    if (this.$ccButton) {\n      if (this.usingYouTubeCaptions) {\n        captionsCount = this.ytCaptions.length;\n      }\n      else {\n        captionsCount = this.captions.length;\n      }\n      // Button has a different title depending on the number of captions.\n      // If only one caption track, this is \"Show captions\" and \"Hide captions\"\n      // Otherwise, it is just always \"Captions\"\n      if (!this.captionsOn) {\n        this.$ccButton.addClass('buttonOff');\n        if (captionsCount === 1) {\n          this.$ccButton.attr('aria-label',this.tt.showCaptions);\n          this.$ccButton.find('span.able-clipped').text(this.tt.showCaptions);\n        }\n      }\n      else {\n        this.$ccButton.removeClass('buttonOff');\n        if (captionsCount === 1) {\n          this.$ccButton.attr('aria-label',this.tt.hideCaptions);\n          this.$ccButton.find('span.able-clipped').text(this.tt.hideCaptions);\n        }\n      }\n\n      if (captionsCount > 1) {\n        this.$ccButton.attr({\n          'aria-label': this.tt.captions,\n          'aria-haspopup': 'true',\n          'aria-controls': this.mediaId + '-captions-menu'\n        });\n        this.$ccButton.find('span.able-clipped').text(this.tt.captions);\n      }\n    }\n\n    if (this.$chaptersButton) {\n      this.$chaptersButton.attr({\n        'aria-label': this.tt.chapters,\n        'aria-haspopup': 'true',\n        'aria-controls': this.mediaId + '-chapters-menu'\n      });\n    }\n    if (this.$fullscreenButton) {\n      if (!this.isFullscreen()) {\n        this.$fullscreenButton.attr('aria-label', this.tt.enterFullScreen);\n        if (this.iconType === 'font') {\n          this.$fullscreenButton.find('span').first().removeClass('icon-fullscreen-collapse').addClass('icon-fullscreen-expand');\n          this.$fullscreenButton.find('span.able-clipped').text(this.tt.enterFullScreen);\n        }\n        else if (this.iconType === 'svg') {\n          // Not currently working. SVG is a work in progress.\n          this.$fullscreenButton.find('svg').removeClass('icon-fullscreen-collapse').addClass('icon-fullscreen-expand');\n          this.$fullscreenButton.find('span.able-clipped').text(this.tt.enterFullScreen);\n        }\n        else {\n          this.$fullscreenButton.find('img').attr('src',this.fullscreenExpandButtonImg);\n        }\n      }\n      else {\n        this.$fullscreenButton.attr('aria-label',this.tt.exitFullScreen);\n        if (this.iconType === 'font') {\n          this.$fullscreenButton.find('span').first().removeClass('icon-fullscreen-expand').addClass('icon-fullscreen-collapse');\n          this.$fullscreenButton.find('span.able-clipped').text(this.tt.exitFullScreen);\n        }\n        else if (this.iconType === 'svg') {\n          // Not currently working. SVG is a work in progress.\n          this.$fullscreenButton.find('svg').removeClass('icon-fullscreen-expand').addClass('icon-fullscreen-collapse');\n          this.$fullscreenButton.find('span.able-clipped').text(this.tt.exitFullScreen);\n        }\n        else {\n          this.$fullscreenButton.find('img').attr('src',this.fullscreenCollapseButtonImg);\n        }\n      }\n    }\n\n    if (typeof this.$bigPlayButton !== 'undefined') {\n      // Choose show/hide for big play button and adjust position.\n      if (this.isPaused() && !this.seekBar.tracking) {\n        if (!this.hideBigPlayButton) {\n          this.$bigPlayButton.show();\n        }\n        if (this.isFullscreen()) {\n          this.$bigPlayButton.width($(window).width());\n          this.$bigPlayButton.height($(window).height());\n        }\n        else {\n          this.$bigPlayButton.width(this.$mediaContainer.width());\n          this.$bigPlayButton.height(this.$mediaContainer.height());\n        }\n      }\n      else {\n        this.$bigPlayButton.hide();\n      }\n    }\n\n    if (this.transcriptType) {\n      // Sync checkbox and autoScrollTranscript with user preference\n      if (this.prefAutoScrollTranscript === 1) {\n        this.autoScrollTranscript = true;\n        this.$autoScrollTranscriptCheckbox.attr('checked','checked');\n      }\n      else {\n        this.autoScrollTranscript = false;\n        this.$autoScrollTranscriptCheckbox.removeAttr('checked');\n      }\n\n      // If transcript locked, scroll transcript to current highlight location.\n      if (this.autoScrollTranscript && this.currentHighlight) {\n        newTop = Math.floor($('.able-transcript').scrollTop() +\n                                $(this.currentHighlight).position().top -\n                                ($('.able-transcript').height() / 2) +\n                                ($(this.currentHighlight).height() / 2));\n        if (newTop !== Math.floor($('.able-transcript').scrollTop())) {\n          // Set a flag to ignore the coming scroll event.\n          // there's no other way I know of to differentiate programmatic and user-initiated scroll events.\n          this.scrollingTranscript = true;\n          $('.able-transcript').scrollTop(newTop);\n        }\n      }\n    }\n\n    // Update buffering progress.\n    // TODO: Currently only using the first HTML5 buffered interval, but this fails sometimes when buffering is split into two or more intervals.\n    if (this.player === 'html5') {\n      if (this.media.buffered.length > 0) {\n        buffered = this.media.buffered.end(0)\n        if (this.useChapterTimes) {\n          if (buffered > this.chapterDuration) {\n            buffered = this.chapterDuration;\n          }\n          if (this.seekBar) {\n            this.seekBar.setBuffered(buffered / this.chapterDuration);\n          }\n        }\n        else {\n          if (this.seekBar) {\n            this.seekBar.setBuffered(buffered / duration);\n          }\n        }\n      }\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      if (this.seekBar) {\n        this.seekBar.setBuffered(this.jwPlayer.getBuffer() / 100);\n      }\n    }\n    else if (this.player === 'youtube') {\n      if (this.seekBar) {\n        this.seekBar.setBuffered(this.youTubePlayer.getVideoLoadedFraction());\n      }\n    }\n  };\n\n  AblePlayer.prototype.getHiddenWidth = function($el) {\n\n    // jQuery returns for width() if element is hidden\n    // this function is a workaround\n\n    // save a reference to a cloned element that can be measured\n    var $hiddenElement = $el.clone().appendTo('body');\n\n    // calculate the width of the clone\n    var width = $hiddenElement.outerWidth();\n\n    // remove the clone from the DOM\n    $hiddenElement.remove();\n\n    return width;\n  };\n\n  AblePlayer.prototype.handlePlay = function(e) {\n    if (this.isPaused()) {\n      this.playMedia();\n    }\n    else {\n      this.pauseMedia();\n    }\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.handleRestart = function() {\n\n    this.seekTo(0);\n\n  /*\n    // Prior to 2.3.68, this function was handleStop()\n    // which was a bit more challenging to implement\n    // Preserved here in case Stop is ever cool again...\n\n    var thisObj = this;\n    if (this.player == 'html5') {\n      this.pauseMedia();\n      this.seekTo(0);\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      this.jwPlayer.stop();\n    }\n    else if (this.player === 'youtube') {\n      // YouTube API function stopVideo() does not reset video to 0\n      // Also, the stopped video is not seekable so seekTo(0) after stopping doesn't work\n      // Workaround is to use pauseVideo(), followed by seekTo(0) to emulate stopping\n      // However, the tradeoff is that YouTube doesn't restore the poster image when video is paused\n      // Added 12/29/15: After seekTo(0) is finished, stopVideo() to reset video and restore poster image\n      // This final step is handled in event.js > onMediaUpdate()\n      this.youTubePlayer.pauseVideo();\n      this.seekTo(0);\n      this.stoppingYouTube = true;\n    }\n  */\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.handleRewind = function() {\n\n    var elapsed, targetTime;\n\n    elapsed = this.getElapsed();\n    targetTime = elapsed - this.seekInterval;\n    if (this.useChapterTimes) {\n      if (targetTime < this.currentChapter.start) {\n        targetTime = this.currentChapter.start;\n      }\n    }\n    else {\n      if (targetTime < 0) {\n        targetTime = 0;\n      }\n    }\n    this.seekTo(targetTime);\n  };\n\n  AblePlayer.prototype.handleFastForward = function() {\n\n    var elapsed, duration, targetTime, lastChapterIndex;\n\n    elapsed = this.getElapsed();\n    duration = this.getDuration();\n    lastChapterIndex = this.chapters.length-1;\n    targetTime = elapsed + this.seekInterval;\n\n    if (this.useChapterTimes) {\n      if (this.chapters[lastChapterIndex] == this.currentChapter) {\n        // this is the last chapter\n        if (targetTime > duration || targetTime > this.currentChapter.end) {\n          // targetTime would exceed the end of the video (or chapter)\n          // scrub to end of whichever is earliest\n          targetTime = Math.min(duration, this.currentChapter.end);\n        }\n        else if (duration % targetTime < this.seekInterval) {\n          // nothing left but pocket change after seeking to targetTime\n          // go ahead and seek to end of video (or chapter), whichever is earliest\n          targetTime = Math.min(duration, this.currentChapter.end);\n        }\n      }\n      else {\n        // this is not the last chapter\n        if (targetTime > this.currentChapter.end) {\n          // targetTime would exceed the end of the chapter\n          // scrub exactly to end of chapter\n          targetTime = this.currentChapter.end;\n        }\n      }\n    }\n    else {\n      // not using chapter times\n      if (targetTime > duration) {\n        targetTime = duration;\n      }\n    }\n    this.seekTo(targetTime);\n  };\n\n  AblePlayer.prototype.handleRateIncrease = function() {\n    this.changeRate(1);\n  };\n\n  AblePlayer.prototype.handleRateDecrease = function() {\n    this.changeRate(-1);\n  };\n\n  // Increases or decreases playback rate, where dir is 1 or -1 indication direction.\n  AblePlayer.prototype.changeRate = function (dir) {\n    if (this.player === 'html5') {\n      this.setPlaybackRate(this.getPlaybackRate() + (0.25 * dir));\n    }\n    else if (this.player === 'youtube') {\n      var rates = this.youTubePlayer.getAvailablePlaybackRates();\n      var currentRate = this.getPlaybackRate();\n      var index = rates.indexOf(currentRate);\n      if (index === -1) {\n        console.log('ERROR: Youtube returning unknown playback rate ' + currentRate.toString());\n      }\n      else {\n        index += dir;\n        // Can only increase or decrease rate if there's another rate available.\n        if (index < rates.length && index >= 0) {\n          this.setPlaybackRate(rates[index]);\n        }\n      }\n    }\n  };\n\n  AblePlayer.prototype.handleCaptionToggle = function() {\n\n    var captions;\n\n    if (this.hidingPopup) {\n      // stopgap to prevent spacebar in Firefox from reopening popup\n      // immediately after closing it\n      this.hidingPopup = false;\n      return false;\n    }\n    if (this.captions.length) {\n      captions = this.captions;\n    }\n    else if (this.ytCaptions.length) {\n      captions = this.ytCaptions;\n    }\n    else {\n      captions = [];\n    }\n    if (captions.length === 1) {\n\n      // When there's only one set of captions, just do an on/off toggle.\n      if (this.captionsOn === true) {\n        // turn them off\n        this.captionsOn = false;\n        if (this.usingYouTubeCaptions) {\n          this.youTubePlayer.unloadModule(this.ytCaptionModule);\n        }\n        else {\n          this.$captionsWrapper.hide();\n        }\n      }\n      else {\n        // captions are off. Turn them on.\n        this.captionsOn = true;\n        if (this.usingYouTubeCaptions) {\n          if (typeof this.ytCaptionModule !== 'undefined') {\n            this.youTubePlayer.loadModule(this.ytCaptionModule);\n          }\n        }\n        else {\n          this.$captionsWrapper.show();\n        }\n        for (var i=0; i<captions.length; i++) {\n          if (captions[i].def === true) { // this is the default language\n            this.selectedCaptions = captions[i];\n          }\n        }\n        this.selectedCaptions = this.captions[0];\n        if (this.descriptions.length >= 0) {\n          this.selectedDescriptions = this.descriptions[0];\n        }\n      }\n      this.refreshControls();\n    }\n    else {\n\n      // there is more than one caption track.\n      // clicking on a track is handled via caption.js > getCaptionClickFunction()\n      if (this.captionsPopup.is(':visible')) {\n        this.captionsPopup.hide();\n        this.hidingPopup = false;\n        this.$ccButton.focus();\n      }\n      else {\n        this.closePopups();\n        this.captionsPopup.show();\n        this.captionsPopup.css('top', this.$ccButton.position().top - this.captionsPopup.outerHeight());\n        this.captionsPopup.css('left', this.$ccButton.position().left)\n        // Focus on the checked button, if any buttons are checked\n        // Otherwise, focus on the first button\n        this.captionsPopup.find('li').removeClass('able-focus');\n        if (this.captionsPopup.find('input:checked')) {\n          this.captionsPopup.find('input:checked').focus().parent().addClass('able-focus');\n        }\n        else {\n          this.captionsPopup.find('input').first().focus().parent().addClass('able-focus');\n        }\n      }\n    }\n  };\n\n  AblePlayer.prototype.handleChapters = function () {\n    if (this.hidingPopup) {\n      // stopgap to prevent spacebar in Firefox from reopening popup\n      // immediately after closing it\n      this.hidingPopup = false;\n      return false;\n    }\n    if (this.chaptersPopup.is(':visible')) {\n      this.chaptersPopup.hide();\n      this.hidingPopup = false;\n      this.$chaptersButton.focus();\n    }\n    else {\n      this.closePopups();\n      this.chaptersPopup.show();\n      this.chaptersPopup.css('top', this.$chaptersButton.position().top - this.chaptersPopup.outerHeight());\n      this.chaptersPopup.css('left', this.$chaptersButton.position().left)\n      // Focus on the checked button, if any buttons are checked\n      // Otherwise, focus on the first button\n      this.chaptersPopup.find('li').removeClass('able-focus');\n      if (this.chaptersPopup.find('input:checked')) {\n        this.chaptersPopup.find('input:checked').focus().parent().addClass('able-focus');\n      }\n      else {\n        this.chaptersPopup.find('input').first().focus().parent().addClass('able-focus');\n      }\n    }\n  };\n\n  AblePlayer.prototype.handleDescriptionToggle = function() {\n    this.descOn = !this.descOn;\n    this.prefDesc = + this.descOn; // convert boolean to integer\n    this.updateCookie('prefDesc');\n    this.refreshingDesc = true;\n    this.initDescription();\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.handlePrefsClick = function(pref) {\n\n    // NOTE: the prefs menu is positioned near the right edge of the player\n    // This assumes the Prefs button is also positioned in that vicinity\n    // (last or second-last button the right)\n\n    var prefsButtonPosition, prefsMenuRight, prefsMenuLeft;\n\n    if (this.hidingPopup) {\n      // stopgap to prevent spacebar in Firefox from reopening popup\n      // immediately after closing it\n      this.hidingPopup = false;\n      return false;\n    }\n    if (this.prefsPopup.is(':visible')) {\n      this.prefsPopup.hide();\n      this.hidingPopup = false;\n      this.$prefsButton.focus();\n    }\n    else {\n      this.closePopups();\n      this.prefsPopup.show();\n      prefsButtonPosition = this.$prefsButton.position();\n      prefsMenuRight = this.$ableDiv.width() - 5;\n      prefsMenuLeft = prefsMenuRight - this.prefsPopup.width();\n      this.prefsPopup.css('top', prefsButtonPosition.top - this.prefsPopup.outerHeight());\n      this.prefsPopup.css('left', prefsMenuLeft);\n      // remove prior focus and set focus on first item\n      this.prefsPopup.find('li').removeClass('able-focus');\n      this.prefsPopup.find('input').first().focus().parent().addClass('able-focus');\n    }\n  };\n\n  AblePlayer.prototype.handleHelpClick = function() {\n    this.setFullscreen(false);\n    this.helpDialog.show();\n  };\n\n  AblePlayer.prototype.handleTranscriptToggle = function () {\n    if (this.$transcriptDiv.is(':visible')) {\n      this.$transcriptArea.hide();\n      this.$transcriptButton.addClass('buttonOff').attr('aria-label',this.tt.showTranscript);\n      this.$transcriptButton.find('span.able-clipped').text(this.tt.showTranscript);\n      this.prefTranscript = 0;\n    }\n    else {\n      this.positionDraggableWindow('transcript');\n      this.$transcriptArea.show();\n      this.$transcriptButton.removeClass('buttonOff').attr('aria-label',this.tt.hideTranscript);\n      this.$transcriptButton.find('span.able-clipped').text(this.tt.hideTranscript);\n      this.prefTranscript = 1;\n    }\n    this.updateCookie('prefTranscript');\n  };\n\n  AblePlayer.prototype.handleSignToggle = function () {\n    if (this.$signWindow.is(':visible')) {\n      this.$signWindow.hide();\n      this.$signButton.addClass('buttonOff').attr('aria-label',this.tt.showSign);\n      this.$signButton.find('span.able-clipped').text(this.tt.showSign);\n      this.prefSign = 0;\n    }\n    else {\n      this.positionDraggableWindow('sign');\n      this.$signWindow.show();\n      this.$signButton.removeClass('buttonOff').attr('aria-label',this.tt.hideSign);\n      this.$signButton.find('span.able-clipped').text(this.tt.hideSign);\n      this.prefSign = 1;\n    }\n    this.updateCookie('prefSign');\n  };\n\n  AblePlayer.prototype.isFullscreen = function () {\n    if (this.nativeFullscreenSupported()) {\n      return (document.fullscreenElement ||\n              document.webkitFullscreenElement ||\n              document.webkitCurrentFullScreenElement ||\n              document.mozFullScreenElement ||\n              document.msFullscreenElement) ? true : false;\n    }\n    else {\n      return this.modalFullscreenActive ? true : false;\n    }\n  }\n\n  AblePlayer.prototype.setFullscreen = function (fullscreen) {\n\n    if (this.isFullscreen() == fullscreen) {\n      return;\n    }\n    var thisObj = this;\n    var $el = this.$ableWrapper;\n    var el = $el[0];\n\n    if (this.nativeFullscreenSupported()) {\n      // Note: many varying names for options for browser compatibility.\n      if (fullscreen) {\n        // If not in full screen, initialize it.\n        if (el.requestFullscreen) {\n          el.requestFullscreen();\n        }\n        else if (el.webkitRequestFullscreen) {\n          el.webkitRequestFullscreen();\n        }\n        else if (el.mozRequestFullScreen) {\n          el.mozRequestFullScreen();\n        }\n        else if (el.msRequestFullscreen) {\n          el.msRequestFullscreen();\n        }\n      }\n      else {\n        // If in fullscreen, exit it.\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        }\n        else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n        else if (document.webkitCancelFullScreen) {\n          document.webkitCancelFullScreen();\n        }\n        else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        }\n        else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n      // add event handlers for changes in full screen mode\n      // currently most changes are made in response to windowResize event\n      // However, that alone is not resulting in a properly restored player size in Opera Mac\n      // More on the Opera Mac bug: https://github.com/ableplayer/ableplayer/issues/162\n      // this fullscreen event handler added specifically for Opera Mac,\n      // but includes event listeners for all browsers in case its functionality could be expanded\n      // Added functionality in 2.3.45 for handling YouTube return from fullscreen as well\n      $(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange', function() {\n        if (!thisObj.isFullscreen()) {\n          // user has just exited full screen\n          if (thisObj.player === 'youtube') {\n            thisObj.restoringAfterFullscreen = true;\n            thisObj.resizePlayer(thisObj.ytWidth, thisObj.ytHeight);\n          }\n          else {\n            thisObj.resizePlayer(thisObj.$ableWrapper.width(), thisObj.$ableWrapper.height());\n          }\n        }\n      });\n    }\n    else {\n      // Non-native fullscreen support through modal dialog.\n      // Create dialog on first run through.\n      if (!this.fullscreenDialog) {\n        var $dialogDiv = $('<div>');\n        // create a hidden alert, communicated to screen readers via aria-describedby\n        var $fsDialogAlert = $('<p>',{\n          'class': 'able-screenreader-alert'\n        }).text(this.tt.fullscreen); // In English: \"Full screen\"; TODO: Add alert text that is more descriptive\n        $dialogDiv.append($fsDialogAlert);\n        // now render this as a dialog\n        this.fullscreenDialog = new AccessibleDialog($dialogDiv, this.$fullscreenButton, 'dialog', 'Fullscreen video player', $fsDialogAlert, this.tt.exitFullScreen, '100%', true, function () { thisObj.handleFullscreenToggle() });\n        $('body').append($dialogDiv);\n      }\n\n      // Track whether paused/playing before moving element; moving the element can stop playback.\n      var wasPaused = this.isPaused();\n\n      if (fullscreen) {\n        this.modalFullscreenActive = true;\n        this.fullscreenDialog.show();\n\n        // Move player element into fullscreen dialog, then show.\n        // Put a placeholder element where player was.\n        this.$modalFullscreenPlaceholder = $('<div class=\"placeholder\">');\n        this.$modalFullscreenPlaceholder.insertAfter($el);\n        $el.appendTo(this.fullscreenDialog.modal);\n\n        // Column left css is 50% by default; set to 100% for full screen.\n        if ($el === this.$ableColumnLeft) {\n          $el.width('100%');\n        }\n        var newHeight = $(window).height() - this.$playerDiv.height();\n        if (!this.$descDiv.is(':hidden')) {\n          newHeight -= this.$descDiv.height();\n        }\n        this.resizePlayer($(window).width(), newHeight);\n      }\n      else {\n        this.modalFullscreenActive = false;\n        if ($el === this.$ableColumnLeft) {\n          $el.width('50%');\n        }\n        $el.insertAfter(this.$modalFullscreenPlaceholder);\n        this.$modalFullscreenPlaceholder.remove();\n        this.fullscreenDialog.hide();\n        this.resizePlayer(this.$ableWrapper.width(), this.$ableWrapper.height());\n      }\n\n      // TODO: JW Player freezes after being moved on iPads (instead of being reset as in most browsers)\n      // Need to call setup again after moving?\n\n      // Resume playback if moving stopped it.\n      if (!wasPaused && this.isPaused()) {\n        this.playMedia();\n      }\n    }\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.handleFullscreenToggle = function () {\n    var stillPaused = this.isPaused(); //add boolean variable reading return from isPaused function\n    this.setFullscreen(!this.isFullscreen());\n    if (stillPaused) {\n      this.pauseMedia(); // when toggling fullscreen and media is just paused, keep media paused.\n    }\n    else if (!stillPaused) {\n      this.playMedia(); // when toggling fullscreen and media is playing, continue playing.\n    }\n  };\n\n  AblePlayer.prototype.handleTranscriptLockToggle = function (val) {\n\n    this.autoScrollTranscript = val; // val is boolean\n    this.prefAutoScrollTranscript = +val; // convert boolean to numeric 1 or 0 for cookie\n    this.updateCookie('prefAutoScrollTranscript');\n    this.refreshControls();\n  };\n\n\n  AblePlayer.prototype.showTooltip = function($tooltip) {\n\n    if (($tooltip).is(':animated')) {\n      $tooltip.stop(true,true).show().delay(4000).fadeOut(1000);\n    }\n    else {\n      $tooltip.stop().show().delay(4000).fadeOut(1000);\n    }\n  };\n\n  AblePlayer.prototype.showAlert = function( msg, location ) {\n\n    // location is either of the following:\n    // 'main' (default)\n    // 'screenreader\n    // 'sign' (sign language window)\n    // 'transcript' (trasncript window)\n    var thisObj, $alertBox, $parentWindow, alertLeft, alertTop;\n\n    thisObj = this;\n\n    if (location === 'transcript') {\n      $alertBox = this.$transcriptAlert;\n      $parentWindow = this.$transcriptArea;\n    }\n    else if (location === 'sign') {\n      $alertBox = this.$signAlert;\n      $parentWindow = this.$signWindow;\n    }\n    else if (location === 'screenreader') {\n      $alertBox = this.$srAlertBox;\n    }\n    else {\n      $alertBox = this.$alertBox;\n    }\n    $alertBox.show();\n    $alertBox.text(msg);\n    if (location == 'transcript' || location === 'sign') {\n      if ($parentWindow.width() > $alertBox.width()) {\n        alertLeft = $parentWindow.width() / 2 - $alertBox.width() / 2;\n      }\n      else {\n        // alert box is wider than its container. Position it far left and let it wrap\n        alertLeft = 10;\n      }\n      if (location === 'sign') {\n        // position alert in the lower third of the sign window (to avoid covering the signer)\n        alertTop = ($parentWindow.height() / 3) * 2;\n      }\n      else if (location === 'transcript') {\n        // position alert just beneath the toolbar to avoid getting lost among transcript text\n        alertTop = this.$transcriptToolbar.height() + 30;\n      }\n      $alertBox.css({\n        top: alertTop + 'px',\n        left: alertLeft + 'px'\n      });\n    }\n    else if (location !== 'screenreader') {\n      // The original formula incorporated offset() into the calculation\n      // but at some point this began resulting in an alert that's off-centered\n      // Changed in v2.2.17, but here's the original for reference in case needed:\n      // left: this.$playerDiv.offset().left + (this.$playerDiv.width() / 2) - ($alertBox.width() / 2)\n      $alertBox.css({\n        left: (this.$playerDiv.width() / 2) - ($alertBox.width() / 2)\n      });\n    }\n    if (location !== 'screenreader') {\n      setTimeout(function () {\n        $alertBox.fadeOut(300);\n      }, 3000);\n    }\n  };\n\n  AblePlayer.prototype.showedAlert = function (which) {\n\n    // returns true if the target alert has already been shown\n    // useful for throttling alerts that only need to be shown once\n    // e.g., move alerts with instructions for dragging a window\n\n    if (which === 'transcript') {\n      if (this.showedTranscriptAlert) {\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n    else if (which === 'sign') {\n      if (this.showedSignAlert) {\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  // Resizes all relevant player attributes.\n  AblePlayer.prototype.resizePlayer = function (width, height) {\n\n    var jwHeight, captionSizeOkMin, captionSizeOkMax, captionSize, newCaptionSize, newLineHeight;\n\n    if (this.isFullscreen()) {\n      if (typeof this.$vidcapContainer !== 'undefined') {\n        this.$ableWrapper.css({\n          'width': width + 'px',\n          'max-width': ''\n        })\n        this.$vidcapContainer.css({\n          'height': height + 'px',\n          'width': width\n        });\n        this.$media.css({\n          'height': height + 'px',\n          'width': width\n        })\n      }\n      if (typeof this.$transcriptArea !== 'undefined') {\n        this.retrieveOffscreenWindow('transcript',width,height);\n      }\n      if (typeof this.$signWindow !== 'undefined') {\n        this.retrieveOffscreenWindow('sign',width,height);\n      }\n    }\n    else {\n      // player resized, but not fullscreen\n      // in case restoring from fullscreen, reset CSS to responsive\n      if (this.player === 'youtube') {\n        this.$ableWrapper.css({\n          'max-width': width + 'px',\n          'width': ''\n        });\n      }\n      else if (this.player === 'jw') {\n        // JW Player has a funny way of expanding height disproportionately as width changes\n        // couldn't isolate the cause, but forcing height to preserve default aspect ratio works\n        jwHeight = Math.round(width/this.fallbackRatio, 0);\n        this.$fallbackWrapper.css({\n          'width': width,\n          'height': jwHeight\n        });\n      }\n      else {\n        this.$ableWrapper.css({\n          'max-width': this.playerMaxWidth + 'px',\n          'width': ''\n        });\n      }\n      if (typeof this.$vidcapContainer !== 'undefined') {\n        this.$vidcapContainer.css({\n          'height': '',\n          'width': ''\n        });\n      }\n      this.$media.css({\n        'width': '100%',\n        'height': 'auto'\n      });\n    }\n\n    if (typeof this.$captionsDiv !== 'undefined') {\n\n      // Font-size is too small in full screen view & too large in small-width view\n      // The following vars define a somewhat arbitary zone outside of which\n      // caption size requires adjustment\n      captionSizeOkMin = 400;\n      captionSizeOkMax = 1000;\n      captionSize = parseInt(this.prefCaptionsSize,10);\n\n      // TODO: Need a better formula so that it scales proportionally to viewport\n      if (width > captionSizeOkMax) {\n        newCaptionSize = captionSize * 1.5;\n      }\n      else if (width < captionSizeOkMin) {\n        newCaptionSize = captionSize / 1.5;\n      }\n      else {\n        newCaptionSize = captionSize;\n      }\n      newLineHeight = newCaptionSize + 25;\n      this.$captionsDiv.css('font-size',newCaptionSize + '%');\n      this.$captionsWrapper.css('line-height',newLineHeight + '%');\n    }\n\n    if (this.player === 'youtube' && this.youTubePlayer) {\n      this.resizeYouTubePlayer();\n    }\n    else if (this.player === 'jw' && this.jwPlayer) {\n      if (this.mediaType === 'audio') {\n        // keep height set to 0 to prevent JW PLayer from showing its own player\n        this.jwPlayer.resize(width,0);\n      }\n      else {\n        this.jwPlayer.resize(width, jwHeight);\n      }\n    }\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.retrieveOffscreenWindow = function( which, width, height ) {\n\n    // check to be sure popup windows ('transcript' or 'sign') are positioned on-screen\n    // (they sometimes disappear off-screen when entering fullscreen mode)\n    // if off-screen, recalculate so they are back on screen\n\n    var window, windowPos, windowTop, windowLeft, windowRight, windowWidth, windowBottom, windowHeight;\n\n    if (which == 'transcript') {\n      window = this.$transcriptArea;\n    }\n    else if (which == 'sign') {\n      window = this.$signWindow;\n    }\n    windowWidth = window.width();\n    windowHeight = window.height();\n    windowPos = window.position();\n    windowTop = windowPos.top;\n    windowLeft = windowPos.left;\n    windowRight = windowLeft + windowWidth;\n    windowBottom = windowTop + windowHeight;\n\n    if (windowTop < 0) { // off-screen to the top\n      windowTop = 10;\n      window.css('top',windowTop);\n    }\n    if (windowLeft < 0) { // off-screen to the left\n      windowLeft = 10;\n      window.css('left',windowLeft);\n    }\n    if (windowRight > width) { // off-screen to the right\n      windowLeft = (width - 20) - windowWidth;\n      window.css('left',windowLeft);\n    }\n    if (windowBottom > height) { // off-screen to the bottom\n      windowTop = (height - 10) - windowHeight;\n      window.css('top',windowTop);\n    }\n  };\n\n  AblePlayer.prototype.getHighestZIndex = function() {\n\n    // returns the highest z-index on page\n    // used to ensure dialogs (or potentially other windows) are on top\n\n    var max, $elements, z;\n    max = 0;\n\n    // exclude the Able Player dialogs\n    $elements = $('body *').not('.able-modal-dialog,.able-modal-dialog *,.able-modal-overlay,.able-modal-overlay *');\n\n    $elements.each(function(){\n      z = $(this).css('z-index');\n      if (Number.isInteger(+z)) { // work only with integer values, not 'auto'\n        if (parseInt(z) > max) {\n          max = parseInt(z);\n        }\n      }\n    });\n    return max;\n  };\n\n  AblePlayer.prototype.updateZIndex = function(which) {\n\n    // update z-index of 'transcript' or 'sign', relative to each other\n    // direction is always 'up' (i.e., move window to top)\n    // windows come to the top when the user clicks on them\n\n    var transcriptZ, signZ, newHighZ, newLowZ;\n\n    if (typeof this.$transcriptArea === 'undefined' || typeof this.$signWindow === 'undefined' ) {\n      // at least one of the windows doesn't exist, so there's no conflict\n      return false;\n    }\n\n    // get current values\n    transcriptZ = parseInt(this.$transcriptArea.css('z-index'));\n    signZ = parseInt(this.$signWindow.css('z-index'));\n\n    if (transcriptZ === signZ) {\n      // the two windows are equal; move the target window the top\n      newHighZ = transcriptZ + 1000;\n      newLowZ = transcriptZ;\n    }\n    else if (transcriptZ > signZ) {\n      if (which === 'transcript') {\n        // transcript is already on top; nothing to do\n        return false;\n      }\n      else {\n        // swap z's\n        newHighZ = transcriptZ;\n        newLowZ = signZ;\n      }\n    }\n    else { // signZ is greater\n      if (which === 'sign') {\n        return false;\n      }\n      else {\n        newHighZ = signZ;\n        newLowZ = transcriptZ;\n      }\n    }\n\n    // now assign the new values\n    if (which === 'transcript') {\n      this.$transcriptArea.css('z-index',newHighZ);\n      this.$signWindow.css('z-index',newLowZ);\n    }\n    else if (which === 'sign') {\n      this.$signWindow.css('z-index',newHighZ);\n      this.$transcriptArea.css('z-index',newLowZ);\n    }\n  };\n\n  AblePlayer.prototype.syncTrackLanguages = function (source, language) {\n\n    // this function is called when the player is built (source == 'init')\n    // and again when user changes the language of either 'captions' or 'transcript'\n    // It syncs the languages of chapters, descriptions, and metadata tracks\n    // NOTE: Caption and transcript languages are somewhat independent from one another\n    // If a user changes the caption language, the transcript follows\n    // However, if a user changes the transcript language, this only affects the transcript\n    // This was a group decision based on the belief that users may want a transcript\n    // that is in a different language than the captions\n\n    var i, captions, descriptions, chapters, meta;\n\n    // Captions\n    for (i in this.captions) {\n      if (this.captions[i].language === language) {\n        captions = this.captions[i];\n      }\n    }\n    // Chapters\n    for (i in this.chapters) {\n      if (this.chapters[i].language === language) {\n        chapters = this.chapters[i];\n      }\n    }\n    // Descriptions\n    for (var i in this.descriptions) {\n      if (this.descriptions[i].language === language) {\n        descriptions = this.descriptions[i];\n      }\n    }\n    // Metadata\n    for (var i in this.meta) {\n      if (this.meta[i].language === language) {\n        meta = this.meta[i];\n      }\n    }\n\n    // regardless of source...\n    this.transcriptLang = language;\n\n    if (source === 'init' || source === 'captions') {\n      this.captionLang = language;\n      this.selectedCaptions = captions;\n      this.selectedChapters = chapters;\n      this.selectedDescriptions = descriptions;\n      this.selectedMeta = meta;\n      this.transcriptCaptions = captions;\n      this.transcriptChapters = chapters;\n      this.transcriptDescriptions = descriptions;\n      this.updateChaptersList();\n      this.setupPopups('chapters');\n    }\n    else if (source === 'transcript') {\n      this.transcriptCaptions = captions;\n      this.transcriptChapters = chapters;\n      this.transcriptDescriptions = descriptions;\n    }\n    this.updateTranscript();\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.updateCaption = function (time) {\n    if (!this.usingYouTubeCaptions && (typeof this.$captionsWrapper !== 'undefined')) {\n      if (this.captionsOn) {\n        this.$captionsWrapper.show();\n        this.showCaptions(time || this.getElapsed());\n      }\n      else if (this.$captionsWrapper) {\n        this.$captionsWrapper.hide();\n        this.prefCaptions = 0;\n      }\n    }\n  };\n\n  // Returns the function used when a caption is clicked in the captions menu.\n  // Not called if user clicks \"Captions off\". Instead, that triggers getCaptionOffFunction()\n  AblePlayer.prototype.getCaptionClickFunction = function (track) {\n    var thisObj = this;\n    return function () {\n      thisObj.selectedCaptions = track;\n      thisObj.captionLang = track.language;\n      thisObj.currentCaption = -1;\n\n      if (thisObj.usingYouTubeCaptions) {\n        if (thisObj.captionsOn) {\n          if (typeof thisObj.ytCaptionModule !== 'undefined') {\n            // captions are already on. Just need to change the language\n            thisObj.youTubePlayer.setOption(thisObj.ytCaptionModule, 'track', {'languageCode': thisObj.captionLang});\n          }\n          else {\n            // need to wait for caption module to be loaded to change the language\n            // caption module will be loaded after video starts playing, triggered by onApiChange event\n            // at that point, thosObj.captionLang will be passed to the module as the default language\n          }\n        }\n        else {\n          // captions are off (i.e., captions module has been unloaded; need to reload it)\n          // user's selected language will be reset after module has successfully loaded\n          // (the onApiChange event will be fired -- see initialize.js > initYouTubePlayer())\n          thisObj.resettingYouTubeCaptions = true;\n          thisObj.youTubePlayer.loadModule(thisObj.ytCaptionModule);\n        }\n      }\n      else {\n        thisObj.syncTrackLanguages('captions',thisObj.captionLang);\n        if (!this.swappingSrc) {\n          thisObj.updateCaption();\n          thisObj.showDescription(thisObj.getElapsed());\n        }\n      }\n      thisObj.captionsOn = true;\n      // stopgap to prevent spacebar in Firefox from reopening popup\n      // immediately after closing it (used in handleCaptionToggle())\n      thisObj.hidingPopup = true;\n      thisObj.captionsPopup.hide();\n      // Ensure stopgap gets cancelled if handleCaptionToggle() isn't called\n      // e.g., if user triggered button with Enter or mouse click, not spacebar\n      setTimeout(function() {\n        thisObj.hidingPopup = false;\n      }, 100);\n      thisObj.$ccButton.focus();\n\n      // save preference to cookie\n      thisObj.prefCaptions = 1;\n      thisObj.updateCookie('prefCaptions');\n\n      thisObj.refreshControls();\n    }\n  };\n\n  // Returns the function used when the \"Captions Off\" button is clicked in the captions tooltip.\n  AblePlayer.prototype.getCaptionOffFunction = function () {\n    var thisObj = this;\n    return function () {\n      if (thisObj.player == 'youtube') {\n        thisObj.youTubePlayer.unloadModule(thisObj.ytCaptionModule);\n      }\n      thisObj.captionsOn = false;\n      thisObj.currentCaption = -1;\n      // stopgap to prevent spacebar in Firefox from reopening popup\n      // immediately after closing it (used in handleCaptionToggle())\n      thisObj.hidingPopup = true;\n      thisObj.captionsPopup.hide();\n      // Ensure stopgap gets cancelled if handleCaptionToggle() isn't called\n      // e.g., if user triggered button with Enter or mouse click, not spacebar\n      setTimeout(function() {\n        thisObj.hidingPopup = false;\n      }, 100);\n      thisObj.$ccButton.focus();\n\n      // save preference to cookie\n      thisObj.prefCaptions = 0;\n      thisObj.updateCookie('prefCaptions');\n      if (!this.swappingSrc) {\n        thisObj.refreshControls();\n        thisObj.updateCaption();\n      }\n    }\n  };\n\n  AblePlayer.prototype.showCaptions = function(now) {\n    var c, thisCaption, captionText;\n    var cues;\n    if (this.selectedCaptions) {\n      cues = this.selectedCaptions.cues;\n    }\n    else if (this.captions.length >= 1) {\n      cues = this.captions[0].cues;\n    }\n    else {\n      cues = [];\n    }\n    for (c in cues) {\n      if ((cues[c].start <= now) && (cues[c].end > now)) {\n        thisCaption = c;\n        break;\n      }\n    }\n    if (typeof thisCaption !== 'undefined') {\n      if (this.currentCaption !== thisCaption) {\n        // it's time to load the new caption into the container div\n        captionText = this.flattenCueForCaption(cues[thisCaption]).replace('\\n', '<br>');\n        this.$captionsDiv.html(captionText);\n        this.currentCaption = thisCaption;\n        if (captionText.length === 0) {\n          // hide captionsDiv; otherwise background-color is visible due to padding\n          this.$captionsDiv.css('display','none');\n        }\n        else {\n          this.$captionsDiv.css('display','inline-block');\n        }\n      }\n    }\n    else {\n      this.$captionsDiv.html('');\n      this.currentCaption = -1;\n    }\n  };\n\n  AblePlayer.prototype.flattenCueForCaption = function (cue) {\n\n    // Takes a cue and returns the caption text to display\n    // Also used for chapters\n\n    // Support for 'i' and 'b' tags added in 2.3.66\n    // TODO: Add support for 'c' (class) and 'ruby'\n\n    // c (class): <c.myClass1.myClass2>Some text</c>\n    // Classes can be used to modify other tags too (e.g., <v.loud>)\n    // If <c> tag, should be rendered as a <span>\n\n    // ruby: http://www.w3schools.com/tags/tag_ruby.asp\n\n    // WebVTT also supports 'u' (underline)\n    // I see no reason to support that in Able Player.\n    // If it's available authors are likely to use it incorrectly\n    // where <i> or <b> should be used instead\n    // Here are the rare use cases where an underline is appropriate on the web:\n    // http://html5doctor.com/u-element/\n\n    var result = [];\n\n    var flattenComponent = function (component) {\n      var result = [];\n      if (component.type === 'string') {\n        result.push(component.value);\n      }\n      else if (component.type === 'v') {\n        result.push('(' + component.value + ')');\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n      }\n      else if (component.type === 'i') {\n        result.push('<em>');\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n        result.push('</em>');\n      }\n      else if (component.type === 'b') {\n        result.push('<strong>');\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n        result.push('</strong>');\n      }\n      else {\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n      }\n      return result.join('');\n    }\n\n    if (typeof cue.components !== 'undefined') {\n      for (var ii in cue.components.children) {\n        result.push(flattenComponent(cue.components.children[ii]));\n      }\n    }\n    return result.join('');\n  };\n\n  AblePlayer.prototype.getCaptionsOptions = function(pref) {\n\n    var options = [];\n\n    switch (pref) {\n\n      case 'prefCaptionsFont':\n        options[0] = this.tt.serif;\n        options[1] = this.tt.sans;\n        options[3] = this.tt.cursive;\n        options[4] = this.tt.fantasy;\n        options[2] = this.tt.monospace;\n        break;\n\n      case 'prefCaptionsColor':\n      case 'prefCaptionsBGColor':\n        // HTML color values must be in English\n        options[0] = ['white',this.tt.white];\n        options[1] = ['yellow',this.tt.yellow];\n        options[2] = ['green',this.tt.green];\n        options[3] = ['cyan',this.tt.cyan];\n        options[4] = ['blue',this.tt.blue];\n        options[5] = ['magenta',this.tt.magenta];\n        options[6] = ['red',this.tt.red];\n        options[7] = ['black',this.tt.black];\n        break;\n\n      case 'prefCaptionsSize':\n        options[0] = '75%';\n        options[1] = '100%';\n        options[2] = '125%';\n        options[3] = '150%';\n        options[4] = '200%';\n        break;\n\n      case 'prefCaptionsOpacity':\n        options[0] = '0%';\n        options[1] = '25%';\n        options[2] = '50%';\n        options[3] = '75%';\n        options[4] = '100%';\n        break;\n\n      case 'prefCaptionsStyle':\n        options[0] = this.tt.captionsStylePopOn;\n        options[1] = this.tt.captionsStyleRollUp;\n        break;\n\n      case 'prefCaptionsPosition':\n        options[0] = 'overlay';\n        options[1] = 'below';\n        break;\n\n    }\n    return options;\n  };\n\n  AblePlayer.prototype.translatePrefs = function(pref, value, outputFormat) {\n\n    // translate current value of pref to a value supported by outputformat\n    if (outputFormat == 'youtube') {\n      if (pref === 'size') {\n        // YouTube font sizes are a range from -1 to 3 (0 = default)\n        switch (value) {\n          case '75%':\n            return -1;\n          case '100%':\n            return 0;\n          case '125%':\n            return 1;\n          case '150%':\n            return 2;\n          case '200%':\n            return 3;\n        }\n      }\n    }\n    return false;\n  }\n\n  AblePlayer.prototype.stylizeCaptions = function($element, pref) {\n\n    // $element is the jQuery element containing the captions\n    // this function handles stylizing of the sample caption text in the Prefs dialog\n    // plus the actual production captions\n    // TODO: consider applying the same user prefs to visible text-based description\n    var property, newValue, opacity, lineHeight;\n\n    if (typeof $element !== 'undefined') {\n      if (pref == 'prefCaptionsPosition') {\n        this.positionCaptions();\n      }\n      else if (typeof pref !== 'undefined') {\n        // just change the one property that user just changed\n        if (pref === 'prefCaptionsFont') {\n          property = 'font-family';\n        }\n        else if (pref === 'prefCaptionsSize') {\n          property = 'font-size';\n        }\n        else if (pref === 'prefCaptionsColor') {\n          property = 'color';\n        }\n        else if (pref === 'prefCaptionsBGColor') {\n          property = 'background-color';\n        }\n        else if (pref === 'prefCaptionsOpacity') {\n          property = 'opacity';\n        }\n        if (pref === 'prefCaptionsOpacity') {\n          newValue = parseFloat($('#' + this.mediaId + '_' + pref).val()) / 100.0;\n        }\n        else {\n          newValue = $('#' + this.mediaId + '_' + pref).val();\n        }\n        $element.css(property, newValue);\n      }\n      else { // no property was specified, update all styles with current saved prefs\n        opacity = parseFloat(this.prefCaptionsOpacity) / 100.0;\n        $element.css({\n          'font-family': this.prefCaptionsFont,\n          'font-size': this.prefCaptionsSize,\n          'color': this.prefCaptionsColor,\n          'background-color': this.prefCaptionsBGColor,\n          'opacity': opacity\n        });\n        if ($element === this.$captionsDiv) {\n          if (typeof this.$captionWrapper !== 'undefined') {\n            lineHeight = parseInt(this.prefCaptionsSize,10) + 25;\n            this.$captionsWrapper.css('line-height',lineHeight + '%');\n          }\n        }\n        if (this.prefCaptionsPosition === 'below') {\n          // also need to add the background color to the wrapper div\n          if (typeof this.$captionWrapper !== 'undefined') {\n            this.$captionsWrapper.css({\n              'background-color': this.prefCaptionsBGColor,\n              'opacity': '1'\n            });\n          }\n        }\n        else if (this.prefCaptionsPosition === 'overlay') {\n          // no background color for overlay wrapper, captions are displayed in-line\n          if (typeof this.$captionWrapper !== 'undefined') {\n            this.$captionsWrapper.css({\n              'background-color': 'transparent',\n              'opacity': ''\n            });\n          }\n        }\n        this.positionCaptions();\n      }\n    }\n  };\n  AblePlayer.prototype.positionCaptions = function(position) {\n\n    // set caption position to either 'overlay' or 'below'\n    // if position parameter was passed to this function, use that\n    // otherwise use user preference\n    if (typeof position === 'undefined') {\n      position = this.prefCaptionsPosition;\n    }\n    if (typeof this.$captionsWrapper !== 'undefined') {\n\n      if (position == 'below') {\n        this.$captionsWrapper.removeClass('able-captions-overlay').addClass('able-captions-below');\n        // also need to update in-line styles\n        this.$captionsWrapper.css({\n          'background-color': this.prefCaptionsBGColor,\n          'opacity': '1'\n        });\n      }\n      else {\n        this.$captionsWrapper.removeClass('able-captions-below').addClass('able-captions-overlay');\n        this.$captionsWrapper.css({\n          'background-color': 'transparent',\n          'opacity': ''\n        });\n      }\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.populateChaptersDiv = function() {\n\n    var headingLevel, headingType, headingId, $chaptersHeading,\n      $chaptersList;\n\n    if ($('#' + this.chaptersDivLocation)) {\n      this.$chaptersDiv = $('#' + this.chaptersDivLocation);\n      this.$chaptersDiv.addClass('able-chapters-div');\n\n      // add optional header\n      if (this.chaptersTitle) {\n        headingLevel = this.getNextHeadingLevel(this.$chaptersDiv);\n        headingType = 'h' + headingLevel.toString();\n        headingId = this.mediaId + '-chapters-heading';\n        $chaptersHeading = $('<' + headingType + '>', {\n          'class': 'able-chapters-heading',\n          'id': headingId\n        }).text(this.chaptersTitle);\n        this.$chaptersDiv.append($chaptersHeading);\n      }\n\n      this.$chaptersNav = $('<nav>');\n      if (this.chaptersTitle) {\n        this.$chaptersNav.attr('aria-labelledby',headingId);\n      }\n      else {\n        this.$chaptersNav.attr('aria-label',this.tt.chapters);\n      }\n      this.$chaptersDiv.append(this.$chaptersNav);\n\n      // populate this.$chaptersNav with a list of chapters\n      this.updateChaptersList();\n    }\n  };\n\n  AblePlayer.prototype.updateChaptersList = function() {\n\n    var thisObj, cues, $chaptersList, c, thisChapter,\n      $chapterItem, $chapterButton, buttonId, hasDefault,\n      getClickFunction, $clickedItem, $chaptersList, thisChapterIndex;\n\n    thisObj = this;\n\n    if (!this.$chaptersNav) {\n      return false;\n    }\n\n    if (this.selectedChapters) {\n      cues = this.selectedChapters.cues;\n    }\n    else if (this.chapters.length >= 1) {\n      cues = this.chapters[0].cues;\n    }\n    else {\n      cues = [];\n    }\n    if (cues.length > 0) {\n      $chaptersList = $('<ul>');\n      for (c in cues) {\n        thisChapter = c;\n        $chapterItem = $('<li></li>');\n        $chapterButton = $('<button>',{\n          'type': 'button',\n          'val': thisChapter\n        }).text(this.flattenCueForCaption(cues[thisChapter]));\n\n        // add event listeners\n        getClickFunction = function (time) {\n          return function () {\n            $clickedItem = $(this).closest('li');\n            $chaptersList = $(this).closest('ul').find('li');\n            thisChapterIndex = $chaptersList.index($clickedItem);\n            $chaptersList.removeClass('able-current-chapter').attr('aria-selected','');\n            $clickedItem.addClass('able-current-chapter').attr('aria-selected','true');\n            // Don't update this.currentChapter here; just seekTo chapter's start time;\n            // chapter will be updated via chapters.js > updateChapter()\n            thisObj.seekTo(time);\n          }\n        };\n        $chapterButton.on('click',getClickFunction(cues[thisChapter].start)); // works with Enter too\n        $chapterButton.on('focus',function() {\n          $(this).closest('ul').find('li').removeClass('able-focus');\n          $(this).closest('li').addClass('able-focus');\n        });\n        $chapterItem.on('hover',function() {\n          $(this).closest('ul').find('li').removeClass('able-focus');\n          $(this).addClass('able-focus');\n        });\n        $chapterItem.on('mouseleave',function() {\n          $(this).removeClass('able-focus');\n        });\n        $chapterButton.on('blur',function() {\n          $(this).closest('li').removeClass('able-focus');\n        });\n\n        // put it all together\n        $chapterItem.append($chapterButton);\n        $chaptersList.append($chapterItem);\n        if (this.defaultChapter == cues[thisChapter].id) {\n          $chapterButton.attr('aria-selected','true').parent('li').addClass('able-current-chapter');\n          hasDefault = true;\n        }\n      }\n      if (!hasDefault) {\n        // select the first button\n        $chaptersList.find('button').first().attr('aria-selected','true')\n          .parent('li').addClass('able-current-chapter');\n      }\n      this.$chaptersNav.html($chaptersList);\n    }\n    return false;\n  };\n\n  AblePlayer.prototype.seekToDefaultChapter = function() {\n    // this function is only called if this.defaultChapter is not null\n    // step through chapters looking for default\n    var i=0;\n    while (i < this.chapters.length) {\n      if (this.chapters[i].id === this.defaultChapter) {\n        // found the default chapter! Seek to it\n        this.seekTo(this.chapters[i].start);\n      }\n      i++;\n    }\n  };\n\n  AblePlayer.prototype.updateChapter = function (now) {\n\n    // as time-synced chapters change during playback, track changes in current chapter\n\n    if (typeof this.chapters === 'undefined') {\n      return;\n    }\n\n    var chapters, i, thisChapterIndex, chapterLabel;\n\n    chapters = this.chapters;\n    for (i in chapters) {\n      if ((chapters[i].start <= now) && (chapters[i].end > now)) {\n        thisChapterIndex = i;\n        break;\n      }\n    }\n    if (typeof thisChapterIndex !== 'undefined') {\n      if (this.currentChapter !== chapters[thisChapterIndex]) {\n        // this is a new chapter\n        this.currentChapter = chapters[thisChapterIndex];\n        if (this.useChapterTimes) {\n          this.chapterDuration = this.getChapterDuration();\n          this.seekIntervalCalculated = false; // will be recalculated in setSeekInterval()\n        }\n        if (typeof this.$chaptersDiv !== 'undefined') {\n          // chapters are listed in an external container\n          this.$chaptersDiv.find('ul').find('li').removeClass('able-current-chapter').attr('aria-selected','');\n          this.$chaptersDiv.find('ul').find('li').eq(thisChapterIndex)\n            .addClass('able-current-chapter').attr('aria-selected','true');\n        }\n        // announce new chapter via ARIA alert\n        chapterLabel = this.tt.newChapter + ': ' + this.flattenCueForCaption(this.currentChapter);\n        this.showAlert(chapterLabel,'screenreader');\n      }\n    }\n  };\n\n  AblePlayer.prototype.getChapterDuration = function () {\n\n    // called if this.seekbarScope === 'chapter'\n    // get duration of the current chapter\n\n    var videoDuration, lastChapterIndex, chapterEnd;\n\n    if (typeof this.currentChapter === 'undefined') {\n      return 0;\n    }\n    videoDuration = this.getDuration();\n    lastChapterIndex = this.chapters.length-1;\n    if (this.chapters[lastChapterIndex] == this.currentChapter) {\n      // this is the last chapter\n      if (this.currentChapter.end !== videoDuration) {\n        // chapter ends before or after video ends, adjust chapter end to match video end\n        chapterEnd = videoDuration;\n        this.currentChapter.end = videoDuration;\n      }\n      else {\n        chapterEnd = this.currentChapter.end;\n      }\n    }\n    else { // this is not the last chapter\n      chapterEnd = this.currentChapter.end;\n    }\n    return chapterEnd - this.currentChapter.start;\n  };\n\n  AblePlayer.prototype.getChapterElapsed = function () {\n\n    // called if this.seekbarScope === 'chapter'\n    // get current elapsed time, relative to the current chapter duration\n    if (typeof this.currentChapter === 'undefined') {\n      return 0;\n    }\n    var videoDuration = this.getDuration();\n    var videoElapsed = this.getElapsed();\n    if (videoElapsed > this.currentChapter.start) {\n      return videoElapsed - this.currentChapter.start;\n    }\n    else {\n      return 0;\n    }\n  };\n\n  AblePlayer.prototype.convertChapterTimeToVideoTime = function (chapterTime) {\n\n    // chapterTime is the time within the current chapter\n    // return the same time, relative to the entire video\n    if (typeof this.currentChapter !== 'undefined') {\n      var newTime = this.currentChapter.start + chapterTime;\n      if (newTime > this.currentChapter.end) {\n        return this.currentChapter.end;\n      }\n      else {\n        return newTime;\n      }\n    }\n    else {\n      return chapterTime;\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.updateMeta = function (time) {\n    if (this.hasMeta) {\n      if (this.metaType === 'text') {\n        this.$metaDiv.show();\n        this.showMeta(time || this.getElapsed());\n      }\n      else {\n        this.showMeta(time || this.getElapsed());\n      }\n    }\n  };\n\n  AblePlayer.prototype.showMeta = function(now) {\n    var m, thisMeta, cues, cueText, cueLines, i, line, focusTarget;\n    if (this.meta.length >= 1) {\n      cues = this.meta;\n    }\n    else {\n      cues = [];\n    }\n    for (m in cues) {\n      if ((cues[m].start <= now) && (cues[m].end > now)) {\n        thisMeta = m;\n        break;\n      }\n    }\n    if (typeof thisMeta !== 'undefined') {\n      if (this.currentMeta !== thisMeta) {\n        if (this.metaType === 'text') {\n          // it's time to load the new metadata cue into the container div\n          this.$metaDiv.html(this.flattenCueForMeta(cues[thisMeta]).replace('\\n', '<br>'));\n        }\n        else if (this.metaType === 'selector') {\n          // it's time to show content referenced by the designated selector(s)\n          cueText = this.flattenCueForMeta(cues[thisMeta]);\n          cueLines = cueText.split('\\n');\n          for (i=0; i<cueLines.length; i++) {\n            line = $.trim(cueLines[i]);\n            if (line.toLowerCase().trim() === 'pause') {\n              // don't show big play button when pausing via metadata\n              this.hideBigPlayButton = true;\n              this.pauseMedia();\n            }\n            else if (line.toLowerCase().substring(0,6) == 'focus:') {\n              focusTarget = line.substring(6).trim();\n              if ($(focusTarget).length) {\n                $(focusTarget).focus();\n              }\n            }\n            else {\n              if ($(line).length) {\n                // selector exists\n                $(line).show();\n                // add to array of visible selectors so it can be hidden at end time\n                this.visibleSelectors.push(line);\n              }\n            }\n          }\n        }\n        this.currentMeta = thisMeta;\n      }\n    }\n    else {\n      if (typeof this.$metaDiv !== 'undefined') {\n        this.$metaDiv.html('');\n      }\n      if (this.visibleSelectors && this.visibleSelectors.length) {\n        for (i=0; i<this.visibleSelectors.length; i++) {\n          $(this.visibleSelectors[i]).hide();\n        }\n        // reset array\n        this.visibleSelectors = [];\n      }\n      this.currentMeta = -1;\n    }\n  };\n\n  // Takes a cue and returns the metadata text to display for it.\n  AblePlayer.prototype.flattenCueForMeta = function (cue) {\n    var result = [];\n\n    var flattenComponent = function (component) {\n      var result = [];\n      if (component.type === 'string') {\n        result.push(component.value);\n      }\n      else if (component.type === 'v') {\n        result.push('[' + component.value + ']');\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n      }\n      else {\n        for (var ii in component.children) {\n          result.push(flattenComponent(component.children[ii]));\n        }\n      }\n      return result.join('');\n    }\n\n    for (var ii in cue.components.children) {\n      result.push(flattenComponent(cue.components.children[ii]));\n    }\n\n    return result.join('');\n  };\n\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.injectTranscriptArea = function() {\n\n    var thisObj = this;\n\n    this.$transcriptArea = $('<div>', {\n      'class': 'able-transcript-area',\n      'tabindex': '-1'\n    });\n\n    this.$transcriptToolbar = $('<div>', {\n      'class': 'able-window-toolbar able-' + this.toolbarIconColor + '-controls'\n    });\n\n    this.$transcriptDiv = $('<div>', {\n      'class' : 'able-transcript'\n    });\n\n    // Transcript toolbar content:\n    this.$autoScrollTranscriptCheckbox = $('<input id=\"autoscroll-transcript-checkbox\" type=\"checkbox\">');\n    this.$transcriptToolbar.append($('<label for=\"autoscroll-transcript-checkbox\">' + this.tt.autoScroll + ': </label>'), this.$autoScrollTranscriptCheckbox);\n\n    // Add field for selecting a transcript language\n    // This will be deleted in initialize.js > recreatePlayer() if there are no languages\n    this.$transcriptLanguageSelect = $('<select id=\"transcript-language-select\">');\n    // Add a default \"Unknown\" option; this will be deleted later if there are any\n    // elements with a language.\n    this.$unknownTranscriptOption = $('<option val=\"unknown\">' + this.tt.unknown + '</option>');\n    this.$transcriptLanguageSelect.append(this.$unknownTranscriptOption);\n    this.$transcriptLanguageSelect.prop('disabled', true);\n\n    var languageSelectWrapper = $('<div class=\"transcript-language-select-wrapper\">');\n    this.$transcriptLanguageSelectContainer = languageSelectWrapper;\n\n    languageSelectWrapper.append($('<label for=\"transcript-language-select\">' + this.tt.language + ': </label>'), this.$transcriptLanguageSelect);\n    this.$transcriptToolbar.append(languageSelectWrapper);\n\n    this.$transcriptArea.append(this.$transcriptToolbar, this.$transcriptDiv);\n\n    // If client has provided separate transcript location, put it there.\n    // Otherwise append it to the body\n    if (this.transcriptDivLocation) {\n      $('#' + this.transcriptDivLocation).append(this.$transcriptArea);\n    }\n    else {\n      this.$ableWrapper.append(this.$transcriptArea);\n    }\n\n    // make it draggable (popup only; NOT external transcript)\n    if (!this.transcriptDivLocation) {\n      this.initDragDrop('transcript');\n      if (this.prefTranscript === 1) {\n        // transcript is on. Go ahead and position it\n        this.positionDraggableWindow('transcript',this.getDefaultWidth('transcript'));\n      }\n    }\n\n    // If client has provided separate transcript location, override user's preference for hiding transcript\n    if (!this.prefTranscript && !this.transcriptDivLocation) {\n      this.$transcriptArea.hide();\n    }\n  };\n\n  AblePlayer.prototype.addTranscriptAreaEvents = function() {\n\n    var thisObj = this;\n\n    this.$autoScrollTranscriptCheckbox.click(function () {\n      thisObj.handleTranscriptLockToggle(thisObj.$autoScrollTranscriptCheckbox.prop('checked'));\n    });\n\n    this.$transcriptDiv.bind('mousewheel DOMMouseScroll click scroll', function (event) {\n      // Propagation is stopped in transcript click handler, so clicks are on the scrollbar\n      // or outside of a clickable span.\n      if (!thisObj.scrollingTranscript) {\n        thisObj.autoScrollTranscript = false;\n        thisObj.refreshControls();\n      }\n      thisObj.scrollingTranscript = false;\n    });\n\n    if (typeof this.$transcriptLanguageSelect !== 'undefined') {\n\n      this.$transcriptLanguageSelect.on('click mousedown',function (event) {\n        // execute default behavior\n        // prevent propagation of mouse event to toolbar or window\n        event.stopPropagation();\n      });\n\n      this.$transcriptLanguageSelect.on('change',function () {\n\n        var language = thisObj.$transcriptLanguageSelect.val();\n\n        thisObj.syncTrackLanguages('transcript',language);\n      });\n    }\n  };\n\n  AblePlayer.prototype.transcriptSrcHasRequiredParts = function() {\n\n    // check the external transcript to be sure it has all required components\n    // return true or false\n    // in the process, define all the needed variables and properties\n\n    if ($('#' + this.transcriptSrc).length) {\n      this.$transcriptArea = $('#' + this.transcriptSrc);\n      if (this.$transcriptArea.find('.able-window-toolbar').length) {\n        this.$transcriptToolbar = this.$transcriptArea.find('.able-window-toolbar').eq(0);\n        if (this.$transcriptArea.find('.able-transcript').length) {\n          this.$transcriptDiv = this.$transcriptArea.find('.able-transcript').eq(0);\n          if (this.$transcriptArea.find('.able-transcript-seekpoint').length) {\n            this.$transcriptSeekpoints = this.$transcriptArea.find('.able-transcript-seekpoint');\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  AblePlayer.prototype.setupManualTranscript = function() {\n\n    // Add an auto-scroll checkbox to the toolbar\n\n    this.$autoScrollTranscriptCheckbox = $('<input id=\"autoscroll-transcript-checkbox\" type=\"checkbox\">');\n    this.$transcriptToolbar.append($('<label for=\"autoscroll-transcript-checkbox\">' + this.tt.autoScroll + ': </label>'), this.$autoScrollTranscriptCheckbox);\n\n  };\n\n  AblePlayer.prototype.updateTranscript = function() {\n\n    if (!this.transcriptType) {\n      return;\n    }\n\n    if (this.transcriptType === 'external' || this.transcriptType === 'popup') {\n\n      var chapters, captions, descriptions;\n\n      // Language of transcript might be different than language of captions\n      // But both are in sync by default\n      if (this.transcriptLang) {\n        captions = this.transcriptCaptions.cues;\n      }\n      else {\n        if (this.transcriptCaptions) {\n          this.transcriptLang = this.transcriptCaptions.language;\n          captions = this.transcriptCaptions.cues;\n        }\n        else if (this.selectedCaptions) {\n          this.transcriptLang = this.captionLang;\n          captions = this.selectedCaptions.cues;\n        }\n      }\n\n      // setup chapters\n      if (this.transcriptChapters) {\n        chapters = this.transcriptChapters.cues;\n      }\n      else if (this.chapters.length > 0) {\n        // Try and match the caption language.\n        if (this.transcriptLang) {\n          for (var ii in this.chapters) {\n            if (this.chapters[ii].language === this.transcriptLang) {\n              chapters = this.chapters[ii].cues;\n            }\n          }\n        }\n        if (typeof chapters === 'undefined') {\n          chapters = this.chapters[0].cues || [];\n        }\n      }\n\n      // setup descriptions\n      if (this.transcriptDescriptions) {\n        descriptions = this.transcriptDescriptions.cues;\n      }\n      else if (this.descriptions.length > 0) {\n        // Try and match the caption language.\n        if (this.transcriptLang) {\n          for (var ii in this.descriptions) {\n            if (this.descriptions[ii].language === this.transcriptLang) {\n              descriptions = this.descriptions[ii].cues;\n            }\n          }\n        }\n        if (!descriptions) {\n          descriptions = this.descriptions[0].cues || [];\n        }\n      }\n\n      var div = this.generateTranscript(chapters || [], captions || [], descriptions || []);\n\n      this.$transcriptDiv.html(div);\n      // reset transcript selected <option> to this.transcriptLang\n      if (this.$transcriptLanguageSelect) {\n        this.$transcriptLanguageSelect.find('option:selected').attr('selected','');\n        this.$transcriptLanguageSelect.find('option[lang=' + this.transcriptLang + ']').attr('selected','selected');\n      }\n    }\n\n    var thisObj = this;\n\n    // Make transcript tabbable if preference is turned on.\n    if (this.prefTabbable === 1) {\n      $('.able-transcript span.able-transcript-seekpoint').attr('tabindex','0');\n    }\n\n    // handle clicks on text within transcript\n    // Note: This event listeners handles clicks only, not keydown events\n    // Pressing Enter on an element that is not natively clickable does NOT trigger click()\n    // Keydown events are handled elsehwere, both globally (ableplayer-base.js) and locally (event.js)\n    if (this.$transcriptArea.length > 0) {\n      this.$transcriptArea.find('span.able-transcript-seekpoint').click(function(event) {\n        var spanStart = parseFloat($(this).attr('data-start'));\n        // Add a tiny amount so that we're inside the span.\n        spanStart += .01;\n        thisObj.seekTo(spanStart);\n      });\n    }\n  };\n\n  AblePlayer.prototype.highlightTranscript = function (currentTime) {\n\n    //show highlight in transcript marking current caption\n\n    if (!this.transcriptType) {\n      return;\n    }\n\n    var start, end;\n    var thisObj = this;\n\n    currentTime = parseFloat(currentTime);\n\n    // Highlight the current transcript item.\n    this.$transcriptArea.find('span.able-transcript-caption').each(function() {\n      start = parseFloat($(this).attr('data-start'));\n      end = parseFloat($(this).attr('data-end'));\n      if (currentTime >= start && currentTime <= end) {\n        // move all previous highlights before adding one to current span\n        thisObj.$transcriptArea.find('.able-highlight').removeClass('able-highlight');\n        $(this).addClass('able-highlight');\n        return false;\n      }\n    });\n    thisObj.currentHighlight = $('.able-highlight');\n    if (thisObj.currentHighlight.length === 0) {\n      // Nothing highlighted.\n      thisObj.currentHighlight = null;\n    }\n  };\n\n  AblePlayer.prototype.generateTranscript = function(chapters, captions, descriptions) {\n\n    var thisObj = this;\n\n    var $main = $('<div class=\"able-transcript-container\"></div>');\n    var transcriptTitle;\n\n    if (typeof this.transcriptTitle !== 'undefined') {\n      transcriptTitle = this.transcriptTitle;\n    }\n    else if (this.lyricsMode) {\n      transcriptTitle = this.tt.lyricsTitle;\n    }\n    else {\n      transcriptTitle = this.tt.transcriptTitle;\n    }\n\n    if (typeof this.transcriptDivLocation === 'undefined') {\n      // only add an HTML heading to internal transcript\n      // external transcript is expected to have its own heading\n      var headingNumber = this.playerHeadingLevel;\n      headingNumber += 1;\n      var chapterHeadingNumber = headingNumber + 1;\n\n      if (headingNumber <= 6) {\n        var transcriptHeading = 'h' + headingNumber.toString();\n      }\n      else {\n        var transcriptHeading = 'div';\n      }\n      // var transcriptHeadingTag = '<' + transcriptHeading + ' class=\"able-transcript-heading\">';\n      var $transcriptHeadingTag = $('<' + transcriptHeading + '>');\n      $transcriptHeadingTag.addClass('able-transcript-heading');\n      if (headingNumber > 6) {\n        $transcriptHeadingTag.attr({\n          'role': 'heading',\n          'aria-level': headingNumber\n        });\n      }\n      $transcriptHeadingTag.text(transcriptTitle);\n\n      $main.append($transcriptHeadingTag);\n    }\n\n    var nextChapter = 0;\n    var nextCap = 0;\n    var nextDesc = 0;\n\n    var addChapter = function(div, chap) {\n\n      if (chapterHeadingNumber <= 6) {\n        var chapterHeading = 'h' + chapterHeadingNumber.toString();\n      }\n      else {\n        var chapterHeading = 'div';\n      }\n\n      var $chapterHeadingTag = $('<' + chapterHeading + '>',{\n        'class': 'able-transcript-chapter-heading'\n      });\n      if (chapterHeadingNumber > 6) {\n        $chapterHeadingTag.attr({\n          'role': 'heading',\n          'aria-level': chapterHeadingNumber\n        });\n      }\n\n      var flattenComponentForChapter = function(comp) {\n\n        var result = [];\n        if (comp.type === 'string') {\n          result.push(comp.value);\n        }\n        else {\n          for (var ii in comp.children) {\n            result = result.concat(flattenComponentForChapter(comp.children[ii]));\n          }\n        }\n        return result;\n      }\n\n      var $chapSpan = $('<span>',{\n        'class': 'able-transcript-seekpoint'\n      });\n      for (var ii in chap.components.children) {\n        var results = flattenComponentForChapter(chap.components.children[ii]);\n        for (var jj in results) {\n          $chapSpan.append(results[jj]);\n        }\n      }\n      $chapSpan.attr('data-start', chap.start.toString());\n      $chapSpan.attr('data-end', chap.end.toString());\n      $chapterHeadingTag.append($chapSpan);\n\n      div.append($chapterHeadingTag);\n    };\n\n    var addDescription = function(div, desc) {\n      var $descDiv = $('<div>', {\n        'class': 'able-transcript-desc'\n      });\n      var $descHiddenSpan = $('<span>',{\n        'class': 'able-hidden'\n      });\n      $descHiddenSpan.text('Description: ');\n      $descDiv.append($descHiddenSpan);\n\n      var flattenComponentForDescription = function(comp) {\n\n        var result = [];\n        if (comp.type === 'string') {\n          result.push(comp.value);\n        }\n        else {\n          for (var ii in comp.children) {\n            result = result.concat(flattenComponentForDescription(comp.children[ii]));\n          }\n        }\n        return result;\n      }\n\n      var $descSpan = $('<span>',{\n        'class': 'able-transcript-seekpoint'\n      });\n      for (var ii in desc.components.children) {\n        var results = flattenComponentForDescription(desc.components.children[ii]);\n        for (var jj in results) {\n          $descSpan.append(results[jj]);\n        }\n      }\n      $descSpan.attr('data-start', desc.start.toString());\n      $descSpan.attr('data-end', desc.end.toString());\n      $descDiv.append($descSpan);\n\n      div.append($descDiv);\n    };\n\n    var addCaption = function(div, cap) {\n\n      var $capSpan = $('<span>',{\n        'class': 'able-transcript-seekpoint able-transcript-caption'\n      });\n\n      var flattenComponentForCaption = function(comp) {\n\n        var result = [];\n\n        var flattenString = function (str) {\n          var result = [];\n          if (str === '') {\n            return result;\n          }\n          var openBracket = str.indexOf('[');\n          var closeBracket = str.indexOf(']');\n          var openParen = str.indexOf('(');\n          var closeParen = str.indexOf(')');\n\n          var hasBrackets = openBracket !== -1 && closeBracket !== -1;\n          var hasParens = openParen !== -1 && closeParen !== -1;\n\n          if ((hasParens && hasBrackets && openBracket < openParen) || hasBrackets) {\n            result = result.concat(flattenString(str.substring(0, openBracket)));\n            var $silentSpan = $('<span>',{\n              'class': 'able-unspoken'\n            });\n            $silentSpan.text(str.substring(openBracket, closeBracket + 1));\n            result.push($silentSpan);\n            result = result.concat(flattenString(str.substring(openParen, closeParen + 1)));\n          }\n          else if (hasParens) {\n            result = result.concat(flattenString(str.substring(0, openParen)));\n            var $silentSpan = $('<span>',{\n              'class': 'able-unspoken'\n            });\n            $silentSpan.text(str.substring(openBracket, closeBracket + 1));\n            result.push($silentSpan);\n            result = result.concat(flattenString(str.substring(closeParen + 1)));\n          }\n          else {\n            result.push(str);\n          }\n          return result;\n        };\n\n        if (comp.type === 'string') {\n          result = result.concat(flattenString(comp.value));\n        }\n        else if (comp.type === 'v') {\n          var $vSpan = $('<span>',{\n            'class': 'able-unspoken'\n          });\n          $vSpan.text('(' + comp.value + ')');\n          result.push($vSpan);\n          for (var ii in comp.children) {\n            var subResults = flattenComponentForCaption(comp.children[ii]);\n            for (var jj in subResults) {\n              result.push(subResults[jj]);\n            }\n          }\n        }\n        else if (comp.type === 'b' || comp.type === 'i') {\n          if (comp.type === 'b') {\n            var $tag = $('<strong>');\n          }\n          else if (comp.type === 'i') {\n            var $tag = $('<em>');\n          }\n          for (var ii in comp.children) {\n            var subResults = flattenComponentForCaption(comp.children[ii]);\n            for (var jj in subResults) {\n              $tag.append(subResults[jj]);\n            }\n          }\n          if (comp.type === 'b' || comp.type == 'i') {\n            result.push($tag);\n          }\n        }\n        else {\n          for (var ii in comp.children) {\n            result = result.concat(flattenComponentForCaption(comp.children[ii]));\n          }\n        }\n        return result;\n      };\n\n      for (var ii in cap.components.children) {\n        var results = flattenComponentForCaption(cap.components.children[ii]);\n        for (var jj in results) {\n          var result = results[jj];\n          if (typeof result === 'string') {\n            if (thisObj.lyricsMode) {\n              // add <br> BETWEEN each caption and WITHIN each caption (if payload includes \"\\n\")\n              result = result.replace('\\n','<br>') + '<br>';\n            }\n            else {\n              // just add a space between captions\n              result += ' ';\n            }\n          }\n          $capSpan.append(result);\n        }\n      }\n      $capSpan.attr('data-start', cap.start.toString());\n      $capSpan.attr('data-end', cap.end.toString());\n      div.append($capSpan);\n      div.append(' \\n');\n    };\n\n    // keep looping as long as any one of the three arrays has content\n    while ((nextChapter < chapters.length) || (nextDesc < descriptions.length) || (nextCap < captions.length)) {\n\n      if ((nextChapter < chapters.length) && (nextDesc < descriptions.length) && (nextCap < captions.length)) {\n        // they all three have content\n        var firstStart = Math.min(chapters[nextChapter].start,descriptions[nextDesc].start,captions[nextCap].start);\n      }\n      else if ((nextChapter < chapters.length) && (nextDesc < descriptions.length)) {\n        // chapters & descriptions have content\n        var firstStart = Math.min(chapters[nextChapter].start,descriptions[nextDesc].start);\n      }\n      else if ((nextChapter < chapters.length) && (nextCap < captions.length)) {\n        // chapters & captions have content\n        var firstStart = Math.min(chapters[nextChapter].start,captions[nextCap].start);\n      }\n      else if ((nextDesc < descriptions.length) && (nextCap < captions.length)) {\n        // descriptions & captions have content\n        var firstStart = Math.min(descriptions[nextDesc].start,captions[nextCap].start);\n      }\n      else {\n        var firstStart = null;\n      }\n      if (firstStart !== null) {\n        if (typeof chapters[nextChapter] !== 'undefined' && chapters[nextChapter].start === firstStart) {\n          addChapter($main, chapters[nextChapter]);\n          nextChapter += 1;\n        }\n        else if (typeof descriptions[nextDesc] !== 'undefined' && descriptions[nextDesc].start === firstStart) {\n          addDescription($main, descriptions[nextDesc]);\n          nextDesc += 1;\n        }\n        else {\n          addCaption($main, captions[nextCap]);\n          nextCap += 1;\n        }\n      }\n      else {\n        if (nextChapter < chapters.length) {\n          addChapter($main, chapters[nextChapter]);\n          nextChapter += 1;\n        }\n        else if (nextDesc < descriptions.length) {\n          addDescription($main, descriptions[nextDesc]);\n          nextDesc += 1;\n        }\n        else if (nextCap < captions.length) {\n          addCaption($main, captions[nextCap]);\n          nextCap += 1;\n        }\n      }\n    }\n    // organize transcript into blocks using [] and () as starting points\n    var $components = $main.children();\n    var spanCount = 0;\n    var openBlock = true;\n    $components.each(function() {\n      if ($(this).hasClass('able-transcript-caption')) {\n        if ($(this).text().indexOf('[') !== -1 || $(this).text().indexOf('(') !== -1) {\n          // this caption includes a bracket or parenth. Start a new block\n          // close the previous block first\n          if (spanCount > 0) {\n            $main.find('.able-block-temp').removeClass('able-block-temp').wrapAll('<div class=\"able-transcript-block\"></div>');\n            spanCount = 0;\n          }\n        }\n        $(this).addClass('able-block-temp');\n        spanCount++;\n      }\n      else {\n        // this is not a caption. Close the caption block\n        if (spanCount > 0) {\n          $main.find('.able-block-temp').removeClass('able-block-temp').wrapAll('<div class=\"able-transcript-block\"></div>');\n          spanCount = 0;\n        }\n      }\n    });\n    return $main;\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.showSearchResults = function() {\n\n    // search VTT file for all instances of searchTerms\n    // Currently just supports search terms separated with one or more spaces\n\n    // TODO: Add support for more robust search syntax:\n    // Search terms wrapped in quotation marks (\"\") must occur exactly as they appear in the quotes\n    // Search terms with an attached minus sign (e.g., -term) are to be excluded from results\n    // Boolean AND/OR operators\n    // ALSO: Add localization support\n\n    var thisObj = this;\n\n    if (this.searchDiv && this.searchString) {\n      if ($('#' + this.SearchDiv)) {\n        var resultsArray = this.searchFor(this.searchString);\n        if (resultsArray.length > 0) {\n          var resultsSummary = $('<p>',{\n            'class': 'able-search-results-summary'\n          });\n          var resultsSummaryText = 'Found <strong>' + resultsArray.length + '</strong> matching items. ';\n          resultsSummaryText += 'Click the time associated with any item ';\n          resultsSummaryText += 'to play the video from that point.';\n          resultsSummary.html(resultsSummaryText);\n          var resultsList = $('<ul>');\n          for (var i in resultsArray) {\n            var resultsItem = $('<li>',{\n            });\n            var itemStartTime = this.secondsToTime(resultsArray[i]['start']);\n            var itemStartSpan = $('<span>',{\n              'class': 'able-search-results-time',\n              'data-start': resultsArray[i]['start'],\n              'title': itemStartTime['title'],\n              'tabindex': '0'\n            });\n            itemStartSpan.text(itemStartTime['value']);\n            // add a listener for clisk on itemStart\n            itemStartSpan.click(function(event) {\n              var spanStart = parseFloat($(this).attr('data-start'));\n              // Add a tiny amount so that we're inside the span.\n              spanStart += .01;\n              thisObj.seeking = true;\n              thisObj.seekTo(spanStart);\n            });\n\n            var itemText = $('<span>',{\n              'class': 'able-search-result-text'\n            })\n            itemText.html('...' + resultsArray[i]['caption'] + '...');\n            resultsItem.append(itemStartSpan, itemText);\n            resultsList.append(resultsItem);\n          }\n          $('#' + this.searchDiv).append(resultsSummary, resultsList);\n        }\n        else {\n          var noResults = $('<p>').text('No results found.');\n          $('#' + this.searchDiv).append(noResults);\n        }\n      }\n    }\n  };\n\n  AblePlayer.prototype.searchFor = function(searchString) {\n\n    // return chronological array of caption cues that match searchTerms\n\n    var captionLang, captions, results, caption, c, i, j;\n\n    // split searchTerms into an array\n    var searchTerms = searchString.split(' ');\n    if (this.captions.length > 0) {\n      captionLang = this.captions[0].language; // in case it's needed later\n      captions = this.captions[0].cues;\n      if (captions.length > 0) {\n        var results = [];\n        c = 0;\n        for (i in captions) {\n          if ($.inArray(captions[i].components.children[0]['type'], ['string','i','b','u','v','c']) !== -1) {\n            caption = this.flattenCueForCaption(captions[i]);\n            for (j in searchTerms) {\n              if (caption.indexOf(searchTerms[j]) !== -1) {\n                results[c] = [];\n                results[c]['start'] = captions[i].start;\n                results[c]['caption'] = this.highlightSearchTerm(searchTerms,j,caption);\n                c++;\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return results;\n  };\n\n  AblePlayer.prototype.highlightSearchTerm = function(searchTerms, index, resultString) {\n\n    // highlight ALL found searchTerms in the current resultString\n    // index is the first index in the searchTerm array where a match has already been found\n    // Need to step through the remaining terms to see if they're present as well\n\n    var i, searchTerm, termIndex, termLength, str1, str2, str3;\n\n    for (i=index; i<searchTerms.length; i++) {\n\n      searchTerm = searchTerms[i];\n      termIndex = resultString.indexOf(searchTerm);\n      if (termIndex !== -1) {\n        termLength = searchTerm.length;\n        if (termLength > 0) {\n          str1 = resultString.substring(0, termIndex);\n          str2 = '<span class=\"able-search-term\">' + searchTerm + '</span>';\n          str3 = resultString.substring(termIndex+termLength);\n          resultString = str1 + str2 + str3;\n        }\n        else {\n          str1 = '<span class=\"able-search-term\">' + searchTerm + '</span>';\n          str2 = resultString.substring(termIndex+termLength);\n          resultString = str1 + str2;\n        }\n      }\n    }\n    return resultString;\n  };\n\n  AblePlayer.prototype.secondsToTime = function(totalSeconds) {\n\n    // return an array of totalSeconds converted into two formats\n    // time['value'] = HH:MM:SS with hours dropped if there are none\n    // time['title'] = a speakable rendering, so speech rec users can easily speak the link\n\n    // first, round down to nearest second\n    var totalSeconds = Math.floor(totalSeconds);\n\n    var hours = parseInt( totalSeconds / 3600 , 10) % 24;\n    var minutes = parseInt( totalSeconds / 60 , 10) % 60;\n    var seconds = totalSeconds % 60;\n    var value = '';\n    var title = '';\n    if (hours > 0) {\n      value += hours + ':';\n      title + hours + ' hours ';\n    }\n    if (minutes < 10) {\n      value += '0' + minutes + ':';\n      if (minutes > 0) {\n        title += minutes + ' minutes ';\n      }\n    }\n    else {\n      value += minutes + ':';\n      title += minutes + ' minutes ';\n    }\n    if (seconds < 10) {\n      value += '0' + seconds;\n      if (seconds > 0) {\n        title += seconds + ' seconds ';\n      }\n    }\n    else {\n      value += seconds;\n      title += seconds + ' seconds ';\n    }\n    var time = [];\n    time['value'] = value;\n    time['title'] = title;\n    return time;\n  };\n})(jQuery);\n\n(function ($) {\n  // Media events\n  AblePlayer.prototype.onMediaUpdateTime = function () {\n\n    var currentTime = this.getElapsed();\n    if (this.swappingSrc && (typeof this.swapTime !== 'undefined')) {\n      if (this.swapTime === currentTime) {\n        // described version been swapped and media has scrubbed to time of previous version\n        if (this.playing) {\n          // resume playback\n          this.playMedia();\n          // reset vars\n          this.swappingSrc = false;\n          this.swapTime = null;\n        }\n      }\n    }\n    else if (this.startedPlaying) {\n      // do all the usual time-sync stuff during playback\n      if (this.prefHighlight === 1) {\n        this.highlightTranscript(currentTime);\n      }\n      this.updateCaption();\n      this.showDescription(currentTime);\n      this.updateChapter(currentTime);\n      this.updateMeta();\n      this.refreshControls();\n    }\n    else if (this.seeking) {\n      if (this.startTime === currentTime) {\n        // media has scrubbed to start time\n        this.seeking = false;\n        if (this.autoplay || this.playing) {\n          this.playMedia();\n        }\n      }\n    }\n    else { // not swapping src, not started playing, not seeking\n      if (this.autoplay) {\n        this.playMedia();\n      }\n    }\n  };\n\n  AblePlayer.prototype.onMediaPause = function () {\n    // do something\n  };\n\n  AblePlayer.prototype.onMediaComplete = function () {\n    // if there's a playlist, advance to next item and start playing\n    if (this.hasPlaylist) {\n      if (this.playlistIndex === (this.$playlist.length - 1)) {\n        // this is the last track in the playlist\n        if (this.loop) {\n          this.playlistIndex = 0;\n          this.swapSource(0);\n        }\n      }\n      else {\n        // this is not the last track. Play the next one.\n        this.playlistIndex++;\n        this.swapSource(this.playlistIndex)\n      }\n    }\n    this.refreshControls();\n  };\n\n  AblePlayer.prototype.onMediaNewSourceLoad = function () {\n\n    if (this.swappingSrc === true) {\n      // new source file has just been loaded\n      if (this.swapTime > 0) {\n        // this.swappingSrc will be set to false after seek is complete\n        // see onMediaUpdateTime()\n        this.seekTo(this.swapTime);\n      }\n      else {\n        if (this.playing) {\n          // should be able to resume playback\n          if (this.player === 'jw') {\n            var player = this.jwPlayer;\n            // Seems to be a bug in JW player, where this doesn't work when fired immediately.\n            // Thus have to use a setTimeout\n            setTimeout(function () {\n              player.play(true);\n            }, 500);\n          }\n          else {\n            this.playMedia();\n          }\n        }\n        this.swappingSrc = false; // swapping is finished\n        this.refreshControls();\n      }\n    }\n  };\n\n  // End Media events\n\n  AblePlayer.prototype.onWindowResize = function () {\n    if (this.isFullscreen()) {\n\n      var newWidth, newHeight;\n\n      newWidth = $(window).width();\n\n      // haven't isolated why, but some browsers return an innerHeight that's 20px too tall in fullscreen mode\n      // Test results:\n      // Browsers that require a 20px adjustment: Firefox, IE11 (Trident), Edge\n      if (this.isUserAgent('Firefox') || this.isUserAgent('Trident') || this.isUserAgent('Edge')) {\n        newHeight = window.innerHeight - this.$playerDiv.outerHeight() - 20;\n      }\n      else if (window.outerHeight >= window.innerHeight) {\n        // Browsers that do NOT require adjustment: Chrome, Safari, Opera, MSIE 10\n        newHeight = window.innerHeight - this.$playerDiv.outerHeight();\n      }\n      else {\n        // Observed in Safari 9.0.1 on Mac OS X: outerHeight is actually less than innerHeight\n        // Maybe a bug, or maybe window.outerHeight is already adjusted for controller height(?)\n        // No longer observed in Safari 9.0.2\n        newHeight = window.outerHeight;\n      }\n      if (!this.$descDiv.is(':hidden')) {\n        newHeight -= this.$descDiv.height();\n      }\n      this.positionCaptions('overlay');\n    }\n    else { // not fullscreen\n      newWidth = this.$ableWrapper.width();\n      newHeight = this.$ableWrapper.height();\n      this.positionCaptions(); // reset with this.prefCaptionsPosition\n    }\n    this.resizePlayer(newWidth, newHeight);\n  };\n\n  AblePlayer.prototype.addSeekbarListeners = function () {\n    var thisObj = this;\n\n    // Handle seek bar events.\n    this.seekBar.bodyDiv.on('startTracking', function (event) {\n      thisObj.pausedBeforeTracking = thisObj.isPaused();\n      thisObj.pauseMedia();\n    }).on('tracking', function (event, position) {\n      // Scrub transcript, captions, and metadata.\n      thisObj.highlightTranscript(position);\n      thisObj.updateCaption(position);\n      thisObj.showDescription(position);\n      thisObj.updateChapter(thisObj.convertChapterTimeToVideoTime(position));\n      thisObj.updateMeta(position);\n      thisObj.refreshControls();\n    }).on('stopTracking', function (event, position) {\n      if (thisObj.useChapterTimes) {\n        thisObj.seekTo(thisObj.convertChapterTimeToVideoTime(position));\n      }\n      else {\n        thisObj.seekTo(position);\n      }\n      if (!thisObj.pausedBeforeTracking) {\n        setTimeout(function () {\n          thisObj.playMedia();\n        }, 200);\n      }\n    });\n  };\n\n  AblePlayer.prototype.onClickPlayerButton = function (el) {\n    // TODO: This is super-fragile since we need to know the length of the class name to split off; update this to other way of dispatching?\n    var whichButton = $(el).attr('class').split(' ')[0].substr(20);\n    if (whichButton === 'play') {\n      this.handlePlay();\n    }\n    else if (whichButton === 'restart') {\n      this.handleRestart();\n    }\n    else if (whichButton === 'rewind') {\n      this.handleRewind();\n    }\n    else if (whichButton === 'forward') {\n      this.handleFastForward();\n    }\n    else if (whichButton === 'mute') {\n      this.handleMute();\n    }\n    else if (whichButton === 'volume') {\n      this.handleVolume();\n    }\n    else if (whichButton === 'faster') {\n      this.handleRateIncrease();\n    }\n    else if (whichButton === 'slower') {\n      this.handleRateDecrease();\n    }\n    else if (whichButton === 'captions') {\n      this.handleCaptionToggle();\n    }\n    else if (whichButton === 'chapters') {\n      this.handleChapters();\n    }\n    else if (whichButton === 'descriptions') {\n      this.handleDescriptionToggle();\n    }\n    else if (whichButton === 'sign') {\n      this.handleSignToggle();\n    }\n    else if (whichButton === 'preferences') {\n      this.handlePrefsClick();\n    }\n    else if (whichButton === 'help') {\n      this.handleHelpClick();\n    }\n    else if (whichButton === 'transcript') {\n      this.handleTranscriptToggle();\n    }\n    else if (whichButton === 'fullscreen') {\n      this.handleFullscreenToggle();\n    }\n  };\n\n  AblePlayer.prototype.okToHandleKeyPress = function () {\n\n    // returns true unless user's focus is on a UI element\n    // that is likely to need supported keystrokes, including space\n    var activeElement = $(document.activeElement).prop('tagName');\n    if (activeElement === 'INPUT') {\n      return false;\n    }\n    else {\n      return true;\n    }\n  }\n\n  AblePlayer.prototype.onPlayerKeyPress = function (e) {\n    // handle keystrokes (using DHTML Style Guide recommended key combinations)\n    // http://dev.aol.com/dhtml_style_guide/#mediaplayer\n    // Modifier keys Alt + Ctrl are on by default, but can be changed within Preferences\n    // NOTE #1: Style guide only supports Play/Pause, Stop, Mute, Captions, & Volume Up & Down\n    // The rest are reasonable best choices\n    // NOTE #2: If there are multiple players on a single page, keystroke handlers\n    // are only bound to the FIRST player\n    if (!this.okToHandleKeyPress()) {\n      return false;\n    }\n    // Convert to lower case.\n    var which = e.which;\n\n    if (which >= 65 && which <= 90) {\n      which += 32;\n    }\n    if (which === 27) {\n      this.closePopups();\n    }\n    else if (which === 32) { // spacebar = play/pause\n      if (!($('.able-controller button').is(':focus'))) {\n        // only toggle play if a button does not have focus\n        // if a button has focus, space should activate that button\n        this.handlePlay();\n      }\n    }\n    else if (which === 112) { // p = play/pause\n      if (this.usingModifierKeys(e)) {\n        this.handlePlay();\n      }\n    }\n    else if (which === 115) { // s = stop (now restart)\n      if (this.usingModifierKeys(e)) {\n        this.handleRestart();\n      }\n    }\n    else if (which === 109) { // m = mute\n      if (this.usingModifierKeys(e)) {\n        this.handleMute();\n      }\n    }\n    else if (which === 118) { // v = volume\n      if (this.usingModifierKeys(e)) {\n        this.handleVolume();\n      }\n    }\n    else if (which >= 49 && which <= 57) { // set volume 1-9\n      if (this.usingModifierKeys(e)) {\n        this.handleVolume(which);\n      }\n    }\n    else if (which === 99) { // c = caption toggle\n      if (this.usingModifierKeys(e)) {\n        this.handleCaptionToggle();\n      }\n    }\n    else if (which === 100) { // d = description\n      if (this.usingModifierKeys(e)) {\n        this.handleDescriptionToggle();\n      }\n    }\n    else if (which === 102) { // f = forward\n      if (this.usingModifierKeys(e)) {\n        this.handleFastForward();\n      }\n    }\n    else if (which === 114) { // r = rewind\n      if (this.usingModifierKeys(e)) {\n        this.handleRewind();\n      }\n    }\n    else if (which === 101) { // e = preferences\n      if (this.usingModifierKeys(e)) {\n        this.handlePrefsClick();\n      }\n    }\n    else if (which === 13) { // Enter\n      var thisElement = $(document.activeElement);\n      if (thisElement.prop('tagName') === 'SPAN') {\n        // register a click on this SPAN\n        // if it's a transcript span the transcript span click handler will take over\n        thisElement.click();\n      }\n      else if (thisElement.prop('tagName') === 'LI') {\n        thisElement.click();\n      }\n    }\n  };\n\n  AblePlayer.prototype.addHtml5MediaListeners = function () {\n    var thisObj = this;\n\n    // NOTE: iOS does not support autoplay,\n    // and no events are triggered until media begins to play\n    this.$media\n      .on('emptied',function() {\n        // do something\n      })\n      .on('loadedmetadata',function() {\n        thisObj.onMediaNewSourceLoad();\n      })\n      .on('canplay',function() {\n        // previously handled seeking to startTime here\n        // but it's probably safer to wait for canplaythrough\n        // so we know player can seek ahead to anything\n      })\n      .on('canplaythrough',function() {\n        if (thisObj.startTime && !thisObj.startedPlaying) {\n          if (thisObj.seeking) {\n            // a seek has already been initiated\n            // since canplaythrough has been triggered, the seek is complete\n            thisObj.seeking = false;\n          }\n          else {\n            // haven't started seeking yet\n            thisObj.seekTo(thisObj.startTime);\n          }\n        }\n      })\n      .on('playing',function() {\n        thisObj.playing = true;\n        thisObj.refreshControls();\n      })\n      .on('ended',function() {\n        thisObj.onMediaComplete();\n      })\n      .on('progress', function() {\n        thisObj.refreshControls();\n      })\n      .on('waiting',function() {\n        thisObj.refreshControls();\n      })\n      .on('durationchange',function() {\n        // Display new duration.\n        thisObj.refreshControls();\n      })\n      .on('timeupdate',function() {\n        thisObj.onMediaUpdateTime();\n      })\n      .on('play',function() {\n        if (thisObj.debug) {\n          console.log('media play event');\n        }\n      })\n      .on('pause',function() {\n        thisObj.onMediaPause();\n      })\n      .on('ratechange',function() {\n        // do something\n      })\n      .on('volumechange',function() {\n        thisObj.volume = thisObj.getVolume();\n        if (thisObj.debug) {\n          console.log('media volume change to ' + thisObj.volume + ' (' + thisObj.volumeButton + ')');\n        }\n      })\n      .on('error',function() {\n        if (thisObj.debug) {\n          switch (thisObj.media.error.code) {\n            case 1:\n              console.log('HTML5 Media Error: MEDIA_ERR_ABORTED');\n              break;\n            case 2:\n              console.log('HTML5 Media Error: MEDIA_ERR_NETWORK ');\n              break;\n            case 3:\n              console.log('HTML5 Media Error: MEDIA_ERR_DECODE ');\n              break;\n            case 4:\n              console.log('HTML5 Media Error: MEDIA_ERR_SRC_NOT_SUPPORTED ');\n              break;\n          }\n        }\n      });\n  };\n\n  AblePlayer.prototype.addJwMediaListeners = function () {\n    var thisObj = this;\n    // add listeners for JW Player events\n    this.jwPlayer\n      .onTime(function() {\n        thisObj.onMediaUpdateTime();\n      })\n      .onComplete(function() {\n        thisObj.onMediaComplete();\n      })\n      .onReady(function() {\n        if (thisObj.debug) {\n          console.log('JW Player onReady event fired');\n        }\n        // remove JW Player from tab order.\n        // We don't want users tabbing into the Flash object and getting trapped\n        $('#' + thisObj.jwId).removeAttr('tabindex');\n\n        // JW Player was initialized with no explicit width or height; get them now\n        thisObj.$fallbackWrapper = $('#' + thisObj.mediaId + '_fallback_wrapper');\n        thisObj.fallbackDefaultWidth = thisObj.$fallbackWrapper.width();\n        thisObj.fallbackDefaultHeight = thisObj.$fallbackWrapper.height();\n        thisObj.fallbackRatio = thisObj.fallbackDefaultWidth / thisObj.fallbackDefaultHeight;\n\n        if (thisObj.startTime > 0 && !thisObj.startedPlaying) {\n          thisObj.seekTo(thisObj.startTime);\n          thisObj.startedPlaying = true;\n        }\n        thisObj.refreshControls();\n      })\n      .onSeek(function(event) {\n        // this is called when user scrubs ahead or back,\n        // after the target offset is reached\n        if (thisObj.debug) {\n          console.log('Seeking to ' + event.position + '; target: ' + event.offset);\n        }\n\n        if (thisObj.jwSeekPause) {\n          // media was temporarily paused\n          thisObj.jwSeekPause = false;\n          thisObj.playMedia();\n        }\n\n        setTimeout(function () {\n          thisObj.refreshControls();\n        }, 300);\n      })\n      .onPlay(function() {\n        if (thisObj.debug) {\n          console.log('JW Player onPlay event fired');\n        }\n        thisObj.refreshControls();\n      })\n      .onPause(function() {\n        thisObj.onMediaPause();\n      })\n      .onBuffer(function() {\n        if (thisObj.debug) {\n          console.log('JW Player onBuffer event fired');\n        }\n        thisObj.refreshControls();\n      })\n      .onBufferChange(function() {\n        thisObj.refreshControls();\n      })\n      .onIdle(function(e) {\n        if (thisObj.debug) {\n          console.log('JW Player onIdle event fired');\n        }\n        thisObj.refreshControls();\n      })\n      .onMeta(function() {\n        if (thisObj.debug) {\n          console.log('JW Player onMeta event fired');\n        }\n      })\n      .onPlaylist(function() {\n        if (thisObj.debug) {\n          console.log('JW Player onPlaylist event fired');\n        }\n\n        // Playlist change includes new media source.\n        thisObj.onMediaNewSourceLoad();\n      });\n  };\n\n  AblePlayer.prototype.addEventListeners = function () {\n    var thisObj, whichButton, thisElement;\n\n    // Save the current object context in thisObj for use with inner functions.\n    thisObj = this;\n\n    // Appropriately resize media player for full screen.\n    $(window).resize(function () {\n      thisObj.onWindowResize();\n    });\n\n    // Refresh player if it changes from hidden to visible\n    // There is no event triggered by a change in visibility\n    // but MutationObserver works in most browsers:\n    // http://caniuse.com/#feat=mutationobserver\n    var target = this.$ableDiv[0];\n    var observer = new MutationObserver(function(mutations) {\n      mutations.forEach(function(mutation) {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {\n          // the player's style attribute has changed. Check to see if it's visible\n          if (thisObj.$ableDiv.is(':visible')) {\n            thisObj.refreshControls();\n          }\n        }\n      });\n    });\n    var config = { attributes: true, childList: true, characterData: true };\n    observer.observe(target, config);\n\n    this.addSeekbarListeners();\n\n    // handle clicks on player buttons\n    this.$controllerDiv.find('button').on('click',function(){\n      thisObj.onClickPlayerButton(this);\n    });\n\n    // handle local keydown events if this isn't the only player on the page;\n    // otherwise these are dispatched by global handler (see ableplayer-base,js)\n    this.$ableDiv.keydown(function (e) {\n      if (AblePlayer.nextIndex > 1) {\n        thisObj.onPlayerKeyPress(e);\n      }\n    });\n\n    // transcript is not a child of this.$ableDiv\n    // therefore, must be added separately\n    if (this.$transcriptArea) {\n      this.$transcriptArea.keydown(function (e) {\n        if (AblePlayer.nextIndex > 1) {\n          thisObj.onPlayerKeyPress(e);\n        }\n      });\n    }\n\n    // handle clicks on playlist items\n    if (this.$playlist) {\n      this.$playlist.click(function() {\n        thisObj.playlistIndex = $(this).index();\n        thisObj.swapSource(thisObj.playlistIndex);\n      });\n    }\n\n    // Also play/pause when clicking on the media.\n    this.$media.click(function () {\n      thisObj.handlePlay();\n    });\n\n    // add listeners for media events\n    if (this.player === 'html5') {\n      this.addHtml5MediaListeners();\n    }\n    else if (this.player === 'jw') {\n      this.addJwMediaListeners();\n    }\n    else if (this.player === 'youtube') {\n      // Youtube doesn't give us time update events, so we just periodically generate them ourselves\n      setInterval(function () {\n        thisObj.onMediaUpdateTime();\n      }, 300);\n    }\n  };\n})(jQuery);\n\n(function ($) {\n\n  AblePlayer.prototype.initDragDrop = function ( which ) {\n\n    // supported values of which: 'sign', 'transcript'\n\n    // NOTE: \"Drag and Drop\" for Able Player is a metaphor only!!!\n    // HTML5 Drag & Drop API enables moving elements to new locations in the DOM\n    // Thats not our purpose; we're simply changing the visible position on-screen\n    // Therefore, the drag & drop interface was overhauled in v2.3.41 to simple\n    // use mouse (and keyboard) events to change CSS positioning properties\n\n    // There are nevertheless lessons to be learned from Drag & Drop about accessibility:\n    // http://dev.opera.com/articles/accessible-drag-and-drop/\n\n    var thisObj, $window, $toolbar, windowName, $resizeHandle, resizeZIndex;\n\n    thisObj = this;\n\n    if (which === 'transcript') {\n      $window = this.$transcriptArea;\n      windowName = 'transcript-window';\n      $toolbar = this.$transcriptToolbar;\n    }\n    else if (which === 'sign') {\n      $window = this.$signWindow;\n      windowName = 'sign-window';\n      $toolbar = this.$signToolbar;\n    }\n\n    // add class to trigger change in cursor on hover\n    $toolbar.addClass('able-draggable');\n\n    // add resize handle selector to bottom right corner\n    $resizeHandle = $('<div>',{\n      'class': 'able-resizable'\n    });\n    // assign z-index that's slightly higher than parent window\n    resizeZIndex = parseInt($window.css('z-index')) + 100;\n    $resizeHandle.css('z-index',resizeZIndex);\n    $window.append($resizeHandle);\n\n    // add event listener to toolbar to start and end drag\n    // other event listeners will be added when drag starts\n    $toolbar.on('mousedown', function(event) {\n      event.stopPropagation();\n      if (!thisObj.windowMenuClickRegistered) {\n        thisObj.windowMenuClickRegistered = true;\n        thisObj.startMouseX = event.pageX;\n        thisObj.startMouseY = event.pageY;\n        thisObj.dragDevice = 'mouse';\n        thisObj.startDrag(which, $window);\n      }\n      return false;\n    });\n    $toolbar.on('mouseup', function(event) {\n      event.stopPropagation();\n      if (thisObj.dragging && thisObj.dragDevice === 'mouse') {\n        thisObj.endDrag(which);\n      }\n      return false;\n    });\n\n    // add event listeners for resizing\n    $resizeHandle.on('mousedown', function(event) {\n      event.stopPropagation();\n      if (!thisObj.windowMenuClickRegistered) {\n        thisObj.windowMenuClickRegistered = true;\n        thisObj.startMouseX = event.pageX;\n        thisObj.startMouseY = event.pageY;\n        thisObj.startResize(which, $window);\n        return false;\n      }\n    });\n    $resizeHandle.on('mouseup', function(event) {\n      event.stopPropagation();\n      if (thisObj.resizing) {\n        thisObj.endResize(which);\n      }\n      return false;\n    });\n\n    // whenever a window is clicked, bring it to the foreground\n    $window.on('click', function() {\n      if (!thisObj.windowMenuClickRegistered && !thisObj.finishingDrag) {\n        thisObj.updateZIndex(which);\n      }\n      thisObj.finishingDrag = false;\n    });\n\n    this.addWindowMenu(which,$window,windowName);\n  };\n\n  AblePlayer.prototype.addWindowMenu = function(which, $window, windowName) {\n\n\n    var thisObj, $windowAlert, $newButton, $buttonIcon, buttonImgSrc, $buttonImg,\n      $buttonLabel, tooltipId, $tooltip, $popup,\n      label, position, buttonHeight, buttonWidth, tooltipY, tooltipX, tooltipStyle, tooltip,\n      $optionList, radioName, options, i, $optionItem, option,\n      radioId, $radioButton, $radioLabel;\n\n    thisObj = this;\n\n    // Add a Boolean that will be set to true temporarily if window button or a menu item is clicked\n    // This will prevent the click event from also triggering a mousedown event on the toolbar\n    // (which would unexpectedly send the window into drag mode)\n    this.windowMenuClickRegistered = false;\n\n    // Add another Boolean that will be set to true temporarily when mouseup fires at the end of a drag\n    // this will prevent the click event from being triggered\n    this.finishingDrag = false;\n\n    // create an alert div and add it to window\n    $windowAlert = $('<div role=\"alert\"></div>');\n    $windowAlert.addClass('able-alert');\n    $windowAlert.appendTo(this.$activeWindow);\n    $windowAlert.css({\n      top: $window.offset().top\n    });\n\n    // add button to draggable window which triggers a popup menu\n    // for now, re-use preferences icon for this purpose\n    $newButton = $('<button>',{\n      'type': 'button',\n      'tabindex': '0',\n      'aria-label': this.tt.windowButtonLabel,\n      'class': 'able-button-handler-preferences'\n    });\n    if (this.iconType === 'font') {\n      $buttonIcon = $('<span>',{\n        'class': 'icon-preferences',\n        'aria-hidden': 'true'\n      });\n      $newButton.append($buttonIcon);\n    }\n    else {\n      // use image\n      buttonImgSrc = this.rootPath + '/icons/' + this.toolbarIconColor + '/preferences.png';\n      $buttonImg = $('<img>',{\n        'src': buttonImgSrc,\n        'alt': '',\n        'role': 'presentation'\n      });\n      $newButton.append($buttonImg);\n    }\n\n    // add the visibly-hidden label for screen readers that don't support aria-label on the button\n    $buttonLabel = $('<span>',{\n      'class': 'able-clipped'\n    }).text(this.tt.windowButtonLabel);\n    $newButton.append($buttonLabel);\n\n    // add a tooltip that displays aria-label on mouseenter or focus\n    tooltipId = this.mediaId + '-' + windowName + '-tooltip';\n    $tooltip = $('<div>',{\n      'class' : 'able-tooltip',\n      'id' : tooltipId\n    });\n    $newButton.on('mouseenter focus',function(event) {\n      var label = $(this).attr('aria-label');\n      // get position of this button\n      var position = $(this).position();\n      var buttonHeight = $(this).height();\n      var buttonWidth = $(this).width();\n      var tooltipY = position.top - buttonHeight - 5;\n      var tooltipX = 0;\n      var tooltipStyle = {\n        left: '',\n        right: tooltipX + 'px',\n        top: tooltipY + 'px'\n      };\n      var tooltip = $('#' + tooltipId).text(label).css(tooltipStyle);\n      thisObj.showTooltip(tooltip);\n      $(this).on('mouseleave blur',function() {\n        $('#' + tooltipId).text('').hide();\n      });\n    });\n\n    // add a popup menu\n    var $popup = this.createPopup(windowName);\n    var $optionList = $('<ul></ul>');\n    var radioName = this.mediaId + '-' + windowName + '-choice';\n\n    var options = [];\n    options.push({\n      'name': 'move',\n      'label': this.tt.windowMove\n    });\n    options.push({\n      'name': 'resize',\n      'label': this.tt.windowResize\n    });\n    for (var i in options) {\n      var $optionItem = $('<li></li>');\n      var option = options[i];\n      var radioId = radioName + '-' + i;\n      var $radioButton = $('<input>',{\n        'type': 'radio',\n        'val': option.name,\n        'name': radioName,\n        'id': radioId\n      });\n      var $radioLabel = $('<label>',{\n        'for': radioId\n      });\n      $radioLabel.text(option.label);\n      $radioButton.on('focus',function(e) {\n        $(this).parents('ul').children('li').removeClass('able-focus');\n        $(this).parent('li').addClass('able-focus');\n      });\n      $radioButton.on('click',function(e) {\n        e.stopPropagation();\n        if (!thisObj.windowMenuClickRegistered && !thisObj.finishingDrag) {\n          thisObj.windowMenuClickRegistered = true;\n          thisObj.handleMenuChoice( which, $(this).val(), e.type);\n        }\n      });\n      // due to an apparent bug (in jquery?) clicking the label\n      // does not result in a click event on the associated radio button\n      // Observed this in Firefox 45.0.2 and Chrome 50\n      // It works fine on a simple test page so this could be an Able Player bug\n      // Added the following as a workaround rather than mess with isolating the bug\n      $radioLabel.on('click mousedown', function() {\n        var clickedId = $(this).attr('for');\n        $('#' + clickedId).click();\n      })\n      $optionItem.append($radioButton,$radioLabel);\n      $optionList.append($optionItem);\n    }\n    $popup.append($optionList);\n    $newButton.on('click mousedown keydown',function(e) {\n      e.stopPropagation();\n      if (!thisObj.windowMenuClickRegistered && !thisObj.finishingDrag) {\n        // don't set windowMenuClickRegistered yet; that happens in handler function\n        thisObj.handleWindowButtonClick(which, e);\n      }\n      thisObj.finishingDrag = false;\n    });\n\n    // define vars and assemble all the parts\n    if (which === 'transcript') {\n      this.$transcriptAlert = $windowAlert;\n      this.$transcriptPopupButton = $newButton;\n      this.$transcriptPopup = $popup;\n      this.$transcriptToolbar.append($windowAlert,$newButton,$tooltip,$popup);\n    }\n    else if (which === 'sign') {\n      this.$signAlert = $windowAlert;\n      this.$signPopupButton = $newButton;\n      this.$signPopup = $popup;\n      this.$signToolbar.append($windowAlert,$newButton,$tooltip,$popup);\n    }\n\n    this.addResizeDialog(which, $window);\n  };\n\n  AblePlayer.prototype.addResizeDialog = function (which, $window) {\n\n    var thisObj, $windowPopup, $windowButton,\n      widthId, heightId, startingWidth, startingHeight, aspectRatio,\n      $resizeForm, $resizeWrapper,\n      $resizeWidthDiv, $resizeWidthInput, $resizeWidthLabel,\n      $resizeHeightDiv, $resizeHeightInput, $resizeHeightLabel,\n      tempWidth, tempHeight,\n      $saveButton, $cancelButton, newWidth, newHeight, resizeDialog;\n\n    thisObj = this;\n\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n      $windowButton = this.$transcriptPopupButton;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n      $windowButton = this.$signPopupButton;\n    }\n\n    widthId = this.mediaId + '-resize-' + which + '-width';\n    heightId = this.mediaId + '-resize-' + which + '-height';\n    startingWidth = $window.width();\n    startingHeight = $window.height();\n    aspectRatio = startingWidth / startingHeight;\n\n    $resizeForm = $('<div></div>',{\n      'class' : 'able-resize-form'\n    });\n\n    // inner container for all content, will be assigned to modal div's aria-describedby\n    $resizeWrapper = $('<div></div>');\n\n    // width field\n    $resizeWidthDiv = $('<div></div>');\n    $resizeWidthInput = $('<input>',{\n      'type': 'text',\n      'id': widthId,\n      'value': startingWidth\n    });\n    $resizeWidthLabel = $('<label>',{\n      'for': widthId\n    }).text(this.tt.width);\n\n    // height field\n    $resizeHeightDiv = $('<div></div>');\n    $resizeHeightInput = $('<input>',{\n      'type': 'text',\n      'id': heightId,\n      'value': startingHeight\n    });\n    $resizeHeightLabel = $('<label>',{\n      'for': heightId\n    }).text(this.tt.height);\n\n    if (which === 'sign') {\n      // make height a read-only field\n      // and calculate its value based on width to preserve aspect ratio\n      $resizeHeightInput.prop('readonly',true);\n      $resizeWidthInput.on('input',function() {\n        tempWidth = $(this).val();\n        tempHeight = Math.round(tempWidth/aspectRatio, 0);\n        $resizeHeightInput.val(tempHeight);\n      })\n    }\n\n    // Add save and cancel buttons.\n    $saveButton = $('<button class=\"modal-button\">' + this.tt.save + '</button>');\n    $cancelButton = $('<button class=\"modal-button\">' + this.tt.cancel + '</button>');\n    $saveButton.on('click',function () {\n      newWidth = $('#' + widthId).val();\n      newHeight = $('#' + heightId).val();\n      if (newWidth !== startingWidth || newHeight !== startingHeight) {\n        $window.css({\n          'width': newWidth + 'px',\n          'height': newHeight + 'px'\n        });\n        thisObj.updateCookie(which);\n      }\n      resizeDialog.hide();\n      $windowPopup.hide();\n      $windowButton.focus();\n    });\n    $cancelButton.on('click',function () {\n      resizeDialog.hide();\n      $windowPopup.hide();\n      $windowButton.focus();\n    });\n\n    // Now assemble all the parts\n    $resizeWidthDiv.append($resizeWidthLabel,$resizeWidthInput);\n    $resizeHeightDiv.append($resizeHeightLabel,$resizeHeightInput);\n    $resizeWrapper.append($resizeWidthDiv,$resizeHeightDiv);\n    $resizeForm.append($resizeWrapper,'<hr>',$saveButton,$cancelButton);\n\n    // must be appended to the BODY!\n    // otherwise when aria-hidden=\"true\" is applied to all background content\n    // that will include an ancestor of the dialog,\n    // which will render the dialog unreadable by screen readers\n    $('body').append($resizeForm);\n    resizeDialog = new AccessibleDialog($resizeForm, $windowButton, 'alert', this.tt.windowResizeHeading, $resizeWrapper, this.tt.closeButtonLabel, '20em');\n    if (which === 'transcript') {\n      this.transcriptResizeDialog = resizeDialog;\n    }\n    else if (which === 'sign') {\n      this.signResizeDialog = resizeDialog;\n    }\n  };\n\n  AblePlayer.prototype.handleWindowButtonClick = function (which, e) {\n\n    var thisObj, $windowPopup, $windowButton, $toolbar, popupTop;\n\n    thisObj = this;\n\n    if (e.type === 'keydown') {\n      // user pressed a key\n      if (e.which === 32 || e.which === 13 || e.which === 27) {\n        // this was Enter, space, or escape\n        this.windowMenuClickRegistered = true;\n      }\n      else {\n        return false;\n      }\n    }\n    else {\n      // this was a mouse event\n      this.windowMenuClickRegistered = true;\n    }\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n      $windowButton = this.$transcriptPopupButton;\n      $toolbar = this.$transcriptToolbar;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n      $windowButton = this.$signPopupButton;\n      $toolbar = this.$signToolbar;\n    }\n\n    if ($windowPopup.is(':visible')) {\n      $windowPopup.hide(200,'',function() {\n        thisObj.windowMenuClickRegistered = false; // reset\n      });\n      $windowPopup.find('li').removeClass('able-focus');\n      $windowButton.focus();\n    }\n    else {\n      // first, be sure window is on top\n      this.updateZIndex(which);\n      popupTop = $windowButton.position().top + $windowButton.outerHeight();\n      $windowPopup.css('top', popupTop);\n      $windowPopup.show(200,'',function() {\n        $(this).find('input').first().focus().parent().addClass('able-focus');\n        thisObj.windowMenuClickRegistered = false; // reset\n      });\n    }\n  };\n\n  AblePlayer.prototype.handleMenuChoice = function (which, choice, eventType) {\n\n    var thisObj, $window, $windowPopup, $windowButton, resizeDialog, $thisRadio;\n\n    thisObj = this;\n\n    if (which === 'transcript') {\n      $window = this.$transcriptArea;\n      $windowPopup = this.$transcriptPopup;\n      $windowButton = this.$transcriptPopupButton;\n      resizeDialog = this.transcriptResizeDialog;\n    }\n    else if (which === 'sign') {\n      $window = this.$signWindow;\n      $windowPopup = this.$signPopup;\n      $windowButton = this.$signPopupButton;\n      resizeDialog = this.signResizeDialog;\n    }\n\n    // hide the popup menu, and reset the Boolean\n    $windowPopup.hide('fast', function() {\n       thisObj.windowMenuClickRegistered = false; // reset\n    });\n    $windowButton.focus();\n\n    if (choice === 'move') {\n      if (!this.showedAlert(which)) {\n        this.showAlert(this.tt.windowMoveAlert,which);\n        if (which === 'transcript') {\n          this.showedTranscriptAlert = true;\n        }\n        else if (which === 'sign') {\n          this.showedSignAlert = true;\n        }\n      }\n      if (eventType === 'keydown') {\n        this.dragDevice = 'keyboard';\n      }\n      else {\n        this.dragDevice = 'mouse';\n      }\n      this.startDrag(which, $window);\n      $windowPopup.hide().parent().focus();\n    }\n    else if (choice == 'resize') {\n      // resize through the menu uses a form, not drag\n      resizeDialog.show();\n    }\n  };\n\n  AblePlayer.prototype.startDrag = function(which, $element) {\n\n    var thisObj, $windowPopup, zIndex, startPos, newX, newY;\n    thisObj = this;\n\n    this.$activeWindow = $element;\n    this.dragging = true;\n\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n    }\n\n    if (!this.showedAlert(which)) {\n      this.showAlert(this.tt.windowMoveAlert,which);\n      if (which === 'transcript') {\n        this.showedTranscriptAlert = true;\n      }\n      else if (which === 'sign') {\n        this.showedSignAlert = true;\n      }\n    }\n\n    // if window's popup menu is open, close it\n    if ($windowPopup.is(':visible')) {\n      $windowPopup.hide();\n    }\n\n    // be sure this window is on top\n    this.updateZIndex(which);\n\n    // get starting position of element\n    startPos = this.$activeWindow.position();\n    this.dragStartX = startPos.left;\n    this.dragStartY = startPos.top;\n\n    if (typeof this.startMouseX === 'undefined') {\n      this.dragDevice = 'keyboard';\n      this.dragKeyX = this.dragStartX;\n      this.dragKeyY = this.dragStartY;\n      // add stopgap to prevent the Enter that triggered startDrag() from also triggering dragEnd()\n      this.startingDrag = true;\n    }\n    else {\n      this.dragDevice = 'mouse';\n      // get offset between mouse position and top left corner of draggable element\n      this.dragOffsetX = this.startMouseX - this.dragStartX;\n      this.dragOffsetY = this.startMouseY - this.dragStartY;\n    }\n\n    // prepare element for dragging\n    this.$activeWindow.addClass('able-drag').css({\n      'position': 'absolute',\n      'top': this.dragStartY + 'px',\n      'left': this.dragStartX + 'px'\n    }).focus();\n\n    // add device-specific event listeners\n    if (this.dragDevice === 'mouse') {\n      $(document).on('mousemove',function(e) {\n        if (thisObj.dragging) {\n          // calculate new top left based on current mouse position - offset\n          newX = e.pageX - thisObj.dragOffsetX;\n          newY = e.pageY - thisObj.dragOffsetY;\n          thisObj.resetDraggedObject( newX, newY );\n        }\n      });\n    }\n    else if (this.dragDevice === 'keyboard') {\n      this.$activeWindow.on('keydown',function(e) {\n        if (thisObj.dragging) {\n          thisObj.dragKeys(which, e);\n        }\n      });\n    }\n    return false;\n  };\n\n  AblePlayer.prototype.dragKeys = function(which, e) {\n\n    var key, keySpeed;\n\n    var thisObj = this;\n\n    // stopgap to prevent firing on initial Enter or space\n    // that selected \"Move\" from menu\n    if (this.startingDrag) {\n      this.startingDrag = false;\n      return false;\n    }\n    key = e.which;\n    keySpeed = 10; // pixels per keypress event\n\n    switch (key) {\n\t\t  case 37:\t// left\n      case 63234:\n\t\t\t  this.dragKeyX -= keySpeed;\n        break;\n      case 38:\t// up\n      case 63232:\n\t\t\t\tthis.dragKeyY -= keySpeed;\n        break;\n      case 39:\t// right\n      case 63235:\n\t\t\t\tthis.dragKeyX += keySpeed;\n        break;\n      case 40:\t// down\n      case 63233:\n\t\t\t\tthis.dragKeyY += keySpeed;\n        break;\n      case 13: \t// enter\n      case 27: \t// escape\n\t\t\t\tthis.endDrag(which);\n        return false;\n      default:\n\t\t\t\treturn false;\n\t\t}\n    this.resetDraggedObject(this.dragKeyX,this.dragKeyY);\n    if (e.preventDefault) {\n  \t\te.preventDefault();\n    }\n    return false;\n  };\n\n  AblePlayer.prototype.resetDraggedObject = function ( x, y) {\n    this.$activeWindow.css({\n      'left': x + 'px',\n      'top': y + 'px'\n    });\n  },\n\n  AblePlayer.prototype.resizeObject = function ( which, width, height ) {\n\n    var innerHeight;\n\n    // which is either 'transcript' or 'sign'\n    this.$activeWindow.css({\n      'width': width + 'px',\n      'height': height + 'px'\n    });\n\n    if (which === 'transcript') {\n      // $activeWindow is the outer $transcriptArea\n      // but the inner able-transcript also needs to be resized proporitionally\n      // (it's 50px less than its outer container)\n      innerHeight = height - 50;\n      this.$transcriptDiv.css('height', innerHeight + 'px');\n    }\n  };\n\n  AblePlayer.prototype.endDrag = function(which) {\n\n    var $window, $windowPopup, $windowButton;\n\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n      $windowButton = this.$transcriptPopupButton;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n      $windowButton = this.$signPopupButton;\n    }\n\n    $(document).off('mousemove mouseup');\n    this.$activeWindow.off('keydown').removeClass('able-drag');\n\n    if (this.dragDevice === 'keyboard') {\n      $windowButton.focus();\n    }\n    this.dragging = false;\n\n    // save final position of dragged element\n    this.updateCookie(which);\n\n    // reset starting mouse positions\n    this.startMouseX = undefined;\n    this.startMouseY = undefined;\n\n    // Boolean to stop stray events from firing\n    this.windowMenuClickRegistered = false;\n    this.finishingDrag = true; // will be reset after window click event\n\n    // finishingDrag should e reset after window click event,\n    // which is triggered automatically after mouseup\n    // However, in case that's not reliable in some browsers\n    // need to ensure this gets cancelled\n    setTimeout(function() {\n      this.finishingDrag = false;\n    }, 100);\n  };\n\n  AblePlayer.prototype.isCloseToCorner = function($window, mouseX, mouseY) {\n\n    // return true if mouse is close to bottom right corner (resize target)\n    var tolerance, position, top, left, width, height, bottom, right;\n\n    tolerance = 10; // number of pixels in both directions considered \"close enough\"\n\n    // first, get position of element\n    position = $window.offset();\n    top = position.top;\n    left = position.left;\n    width = $window.width();\n    height = $window.height();\n    bottom = top + height;\n    right = left + width;\n    if ((Math.abs(bottom-mouseY) <= tolerance) && (Math.abs(right-mouseX) <= tolerance)) {\n      return true;\n    }\n    return false;\n  };\n\n  AblePlayer.prototype.startResize = function(which, $element) {\n\n    var thisObj, $windowPopup, zIndex, startPos, newWidth, newHeight;\n    thisObj = this;\n\n    this.$activeWindow = $element;\n    this.resizing = true;\n\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n    }\n\n    // if window's popup menu is open, close it & place focus on button (???)\n    if ($windowPopup.is(':visible')) {\n      $windowPopup.hide().parent().focus();\n    }\n\n    // get starting width and height\n    startPos = this.$activeWindow.position();\n    this.dragKeyX = this.dragStartX;\n    this.dragKeyY = this.dragStartY;\n    this.dragStartWidth = this.$activeWindow.width();\n    this.dragStartHeight = this.$activeWindow.height();\n\n    // add event listeners\n    $(document).on('mousemove',function(e) {\n      if (thisObj.resizing) {\n        // calculate new width and height based on changes to mouse position\n        newWidth = thisObj.dragStartWidth + (e.pageX - thisObj.startMouseX);\n        newHeight = thisObj.dragStartHeight + (e.pageY - thisObj.startMouseY);\n        thisObj.resizeObject( which, newWidth, newHeight );\n      }\n    });\n    return false;\n  };\n\n  AblePlayer.prototype.endResize = function(which) {\n\n    var $window, $windowPopup, $windowButton;\n\n    if (which === 'transcript') {\n      $windowPopup = this.$transcriptPopup;\n      $windowButton = this.$transcriptPopupButton;\n    }\n    else if (which === 'sign') {\n      $windowPopup = this.$signPopup;\n      $windowButton = this.$signPopupButton;\n    }\n\n    $(document).off('mousemove mouseup');\n    this.$activeWindow.off('keydown');\n\n    $windowButton.show().focus();\n    this.resizing = false;\n    this.$activeWindow.removeClass('able-resize');\n\n    // save final width and height of dragged element\n    this.updateCookie(which);\n\n    // Booleans for preventing stray events\n    this.windowMenuClickRegistered = false;\n    this.finishingDrag = true;\n\n    // finishingDrag should e reset after window click event,\n    // which is triggered automatically after mouseup\n    // However, in case that's not reliable in some browsers\n    // need to ensure this gets cancelled\n    setTimeout(function() {\n      this.finishingDrag = false;\n    }, 100);\n  };\n\n})(jQuery);\n\n(function ($) {\n  AblePlayer.prototype.initSignLanguage = function() {\n    // Sign language is only currently supported in HTML5 player, not fallback or YouTube\n    if (this.player === 'html5') {\n      // check to see if there's a sign language video accompanying this video\n      // check only the first source\n      // If sign language is provided, it must be provided for all sources\n      this.signFile = this.$sources.first().attr('data-sign-src');\n      if (this.signFile) {\n        if (this.debug) {\n          console.log('This video has an accompanying sign language video: ' + this.signFile);\n        }\n        this.hasSignLanguage = true;\n        this.injectSignPlayerCode();\n      }\n      else {\n        this.hasSignLanguage = false;\n      }\n    }\n  };\n\n  AblePlayer.prototype.injectSignPlayerCode = function() {\n\n    // create and inject surrounding HTML structure\n    // If IOS:\n    //  If video:\n    //   IOS does not support any of the player's functionality\n    //   - everything plays in its own player\n    //   Therefore, AblePlayer is not loaded & all functionality is disabled\n    //   (this all determined. If this is IOS && video, this function is never called)\n    //  If audio:\n    //   HTML cannot be injected as a *parent* of the <audio> element\n    //   It is therefore injected *after* the <audio> element\n    //   This is only a problem in IOS 6 and earlier,\n    //   & is a known bug, fixed in IOS 7\n\n    var thisObj, signVideoId, signVideoWidth, i, signSrc, srcType, $signSource;\n\n    thisObj = this;\n\n    signVideoWidth = this.getDefaultWidth('sign');\n\n    signVideoId = this.mediaId + '-sign';\n    this.$signVideo = $('<video>',{\n      'id' : signVideoId,\n      'tabindex' : '-1'\n    });\n    this.signVideo = this.$signVideo[0];\n    // for each original <source>, add a <source> to the sign <video>\n    for (i=0; i < this.$sources.length; i++) {\n      signSrc = this.$sources[i].getAttribute('data-sign-src');\n      srcType = this.$sources[i].getAttribute('type');\n      if (signSrc) {\n        $signSource = $('<source>',{\n          'src' : signSrc,\n          'type' : srcType\n        });\n        this.$signVideo.append($signSource);\n      }\n      else {\n        // source is missing a sign language version\n        // can't include sign language\n        this.hasSignLanguage = false;\n        break;\n      }\n    }\n\n    this.$signWindow = $('<div>',{\n      'class' : 'able-sign-window',\n      'tabindex': '-1'\n    });\n    this.$signToolbar = $('<div>',{\n      'class': 'able-window-toolbar'\n    });\n\n    this.$signWindow.append(this.$signToolbar, this.$signVideo);\n\n    this.$ableWrapper.append(this.$signWindow);\n\n    // make it draggable\n    this.initDragDrop('sign');\n\n    if (this.prefSign === 1) {\n      // sign window is on. Go ahead and position it and show it\n      this.positionDraggableWindow('sign',this.getDefaultWidth('sign'));\n    }\n    else {\n      this.$signWindow.hide();\n    }\n  };\n\n})(jQuery);\n\n(function ($) {\n  // Look up ISO 639-1 language codes to be used as subtitle labels\n  // @author Phil Teare\n  // using wikipedia data\n  // In some instances \"name\" has been trunctation for readability\n  // http://stackoverflow.com/questions/3217492/list-of-language-codes-in-yaml-or-json/4900304#4900304\n\n  var isoLangs = {\n    \"ab\":{\n        \"name\":\"Abkhaz\",\n        \"nativeName\":\"аҧсуа\"\n    },\n    \"aa\":{\n        \"name\":\"Afar\",\n        \"nativeName\":\"Afaraf\"\n    },\n    \"af\":{\n        \"name\":\"Afrikaans\",\n        \"nativeName\":\"Afrikaans\"\n    },\n    \"ak\":{\n        \"name\":\"Akan\",\n        \"nativeName\":\"Akan\"\n    },\n    \"sq\":{\n        \"name\":\"Albanian\",\n        \"nativeName\":\"Shqip\"\n    },\n    \"am\":{\n        \"name\":\"Amharic\",\n        \"nativeName\":\"አማርኛ\"\n    },\n    \"ar\":{\n        \"name\":\"Arabic\",\n        \"nativeName\":\"العربية\"\n    },\n    \"an\":{\n        \"name\":\"Aragonese\",\n        \"nativeName\":\"Aragonés\"\n    },\n    \"hy\":{\n        \"name\":\"Armenian\",\n        \"nativeName\":\"Հայերեն\"\n    },\n    \"as\":{\n        \"name\":\"Assamese\",\n        \"nativeName\":\"অসমীয়া\"\n    },\n    \"av\":{\n        \"name\":\"Avaric\",\n        \"nativeName\":\"авар мацӀ, магӀарул мацӀ\"\n    },\n    \"ae\":{\n        \"name\":\"Avestan\",\n        \"nativeName\":\"avesta\"\n    },\n    \"ay\":{\n        \"name\":\"Aymara\",\n        \"nativeName\":\"aymar aru\"\n    },\n    \"az\":{\n        \"name\":\"Azerbaijani\",\n        \"nativeName\":\"azərbaycan dili\"\n    },\n    \"bm\":{\n        \"name\":\"Bambara\",\n        \"nativeName\":\"bamanankan\"\n    },\n    \"ba\":{\n        \"name\":\"Bashkir\",\n        \"nativeName\":\"башҡорт теле\"\n    },\n    \"eu\":{\n        \"name\":\"Basque\",\n        \"nativeName\":\"euskara, euskera\"\n    },\n    \"be\":{\n        \"name\":\"Belarusian\",\n        \"nativeName\":\"Беларуская\"\n    },\n    \"bn\":{\n        \"name\":\"Bengali\",\n        \"nativeName\":\"বাংলা\"\n    },\n    \"bh\":{\n        \"name\":\"Bihari\",\n        \"nativeName\":\"भोजपुरी\"\n    },\n    \"bi\":{\n        \"name\":\"Bislama\",\n        \"nativeName\":\"Bislama\"\n    },\n    \"bs\":{\n        \"name\":\"Bosnian\",\n        \"nativeName\":\"bosanski jezik\"\n    },\n    \"br\":{\n        \"name\":\"Breton\",\n        \"nativeName\":\"brezhoneg\"\n    },\n    \"bg\":{\n        \"name\":\"Bulgarian\",\n        \"nativeName\":\"български език\"\n    },\n    \"my\":{\n        \"name\":\"Burmese\",\n        \"nativeName\":\"ဗမာစာ\"\n    },\n    \"ca\":{\n        \"name\":\"Catalan\",\n        \"nativeName\":\"Català\"\n    },\n    \"ch\":{\n        \"name\":\"Chamorro\",\n        \"nativeName\":\"Chamoru\"\n    },\n    \"ce\":{\n        \"name\":\"Chechen\",\n        \"nativeName\":\"нохчийн мотт\"\n    },\n    \"ny\":{\n        \"name\":\"Chichewa\",\n        \"nativeName\":\"chiCheŵa, chinyanja\"\n    },\n    \"zh\":{\n        \"name\":\"Chinese\",\n        \"nativeName\":\"中文 (Zhōngwén), 汉语, 漢語\"\n    },\n    \"cv\":{\n        \"name\":\"Chuvash\",\n        \"nativeName\":\"чӑваш чӗлхи\"\n    },\n    \"kw\":{\n        \"name\":\"Cornish\",\n        \"nativeName\":\"Kernewek\"\n    },\n    \"co\":{\n        \"name\":\"Corsican\",\n        \"nativeName\":\"corsu, lingua corsa\"\n    },\n    \"cr\":{\n        \"name\":\"Cree\",\n        \"nativeName\":\"ᓀᐦᐃᔭᐍᐏᐣ\"\n    },\n    \"hr\":{\n        \"name\":\"Croatian\",\n        \"nativeName\":\"hrvatski\"\n    },\n    \"cs\":{\n        \"name\":\"Czech\",\n        \"nativeName\":\"česky, čeština\"\n    },\n    \"da\":{\n        \"name\":\"Danish\",\n        \"nativeName\":\"dansk\"\n    },\n    \"dv\":{\n        \"name\":\"Divehi\",\n        \"nativeName\":\"ދިވެހި\"\n    },\n    \"nl\":{\n        \"name\":\"Dutch\",\n        \"nativeName\":\"Nederlands, Vlaams\"\n    },\n    \"en\":{\n        \"name\":\"English\",\n        \"nativeName\":\"English\"\n    },\n    \"eo\":{\n        \"name\":\"Esperanto\",\n        \"nativeName\":\"Esperanto\"\n    },\n    \"et\":{\n        \"name\":\"Estonian\",\n        \"nativeName\":\"eesti, eesti keel\"\n    },\n    \"ee\":{\n        \"name\":\"Ewe\",\n        \"nativeName\":\"Eʋegbe\"\n    },\n    \"fo\":{\n        \"name\":\"Faroese\",\n        \"nativeName\":\"føroyskt\"\n    },\n    \"fj\":{\n        \"name\":\"Fijian\",\n        \"nativeName\":\"vosa Vakaviti\"\n    },\n    \"fi\":{\n        \"name\":\"Finnish\",\n        \"nativeName\":\"suomi, suomen kieli\"\n    },\n    \"fr\":{\n        \"name\":\"French\",\n        \"nativeName\":\"français, langue française\"\n    },\n    \"ff\":{\n        \"name\":\"Fula\",\n        \"nativeName\":\"Fulfulde, Pulaar, Pular\"\n    },\n    \"gl\":{\n        \"name\":\"Galician\",\n        \"nativeName\":\"Galego\"\n    },\n    \"ka\":{\n        \"name\":\"Georgian\",\n        \"nativeName\":\"ქართული\"\n    },\n    \"de\":{\n        \"name\":\"German\",\n        \"nativeName\":\"Deutsch\"\n    },\n    \"el\":{\n        \"name\":\"Greek\",\n        \"nativeName\":\"Ελληνικά\"\n    },\n    \"gn\":{\n        \"name\":\"Guaraní\",\n        \"nativeName\":\"Avañeẽ\"\n    },\n    \"gu\":{\n        \"name\":\"Gujarati\",\n        \"nativeName\":\"ગુજરાતી\"\n    },\n    \"ht\":{\n        \"name\":\"Haitian\",\n        \"nativeName\":\"Kreyòl ayisyen\"\n    },\n    \"ha\":{\n        \"name\":\"Hausa\",\n        \"nativeName\":\"Hausa, هَوُسَ\"\n    },\n    \"he\":{\n        \"name\":\"Hebrew\",\n        \"nativeName\":\"עברית\"\n    },\n    \"hz\":{\n        \"name\":\"Herero\",\n        \"nativeName\":\"Otjiherero\"\n    },\n    \"hi\":{\n        \"name\":\"Hindi\",\n        \"nativeName\":\"हिन्दी, हिंदी\"\n    },\n    \"ho\":{\n        \"name\":\"Hiri Motu\",\n        \"nativeName\":\"Hiri Motu\"\n    },\n    \"hu\":{\n        \"name\":\"Hungarian\",\n        \"nativeName\":\"Magyar\"\n    },\n    \"ia\":{\n        \"name\":\"Interlingua\",\n        \"nativeName\":\"Interlingua\"\n    },\n    \"id\":{\n        \"name\":\"Indonesian\",\n        \"nativeName\":\"Bahasa Indonesia\"\n    },\n    \"ie\":{\n        \"name\":\"Interlingue\",\n        \"nativeName\":\"Originally called Occidental; then Interlingue after WWII\"\n    },\n    \"ga\":{\n        \"name\":\"Irish\",\n        \"nativeName\":\"Gaeilge\"\n    },\n    \"ig\":{\n        \"name\":\"Igbo\",\n        \"nativeName\":\"Asụsụ Igbo\"\n    },\n    \"ik\":{\n        \"name\":\"Inupiaq\",\n        \"nativeName\":\"Iñupiaq, Iñupiatun\"\n    },\n    \"io\":{\n        \"name\":\"Ido\",\n        \"nativeName\":\"Ido\"\n    },\n    \"is\":{\n        \"name\":\"Icelandic\",\n        \"nativeName\":\"Íslenska\"\n    },\n    \"it\":{\n        \"name\":\"Italian\",\n        \"nativeName\":\"Italiano\"\n    },\n    \"iu\":{\n        \"name\":\"Inuktitut\",\n        \"nativeName\":\"ᐃᓄᒃᑎᑐᑦ\"\n    },\n    \"ja\":{\n        \"name\":\"Japanese\",\n        \"nativeName\":\"日本語 (にほんご／にっぽんご)\"\n    },\n    \"jv\":{\n        \"name\":\"Javanese\",\n        \"nativeName\":\"basa Jawa\"\n    },\n    \"kl\":{\n        \"name\":\"Kalaallisut\",\n        \"nativeName\":\"kalaallisut, kalaallit oqaasii\"\n    },\n    \"kn\":{\n        \"name\":\"Kannada\",\n        \"nativeName\":\"ಕನ್ನಡ\"\n    },\n    \"kr\":{\n        \"name\":\"Kanuri\",\n        \"nativeName\":\"Kanuri\"\n    },\n    \"ks\":{\n        \"name\":\"Kashmiri\",\n        \"nativeName\":\"कश्मीरी, كشميري‎\"\n    },\n    \"kk\":{\n        \"name\":\"Kazakh\",\n        \"nativeName\":\"Қазақ тілі\"\n    },\n    \"km\":{\n        \"name\":\"Khmer\",\n        \"nativeName\":\"ភាសាខ្មែរ\"\n    },\n    \"ki\":{\n        \"name\":\"Kikuyu\",\n        \"nativeName\":\"Gĩkũyũ\"\n    },\n    \"rw\":{\n        \"name\":\"Kinyarwanda\",\n        \"nativeName\":\"Ikinyarwanda\"\n    },\n    \"ky\":{\n        \"name\":\"Kyrgyz\",\n        \"nativeName\":\"кыргыз тили\"\n    },\n    \"kv\":{\n        \"name\":\"Komi\",\n        \"nativeName\":\"коми кыв\"\n    },\n    \"kg\":{\n        \"name\":\"Kongo\",\n        \"nativeName\":\"KiKongo\"\n    },\n    \"ko\":{\n        \"name\":\"Korean\",\n        \"nativeName\":\"한국어 (韓國語), 조선말 (朝鮮語)\"\n    },\n    \"ku\":{\n        \"name\":\"Kurdish\",\n        \"nativeName\":\"Kurdî, كوردی‎\"\n    },\n    \"kj\":{\n        \"name\":\"Kuanyama\",\n        \"nativeName\":\"Kuanyama\"\n    },\n    \"la\":{\n        \"name\":\"Latin\",\n        \"nativeName\":\"latine, lingua latina\"\n    },\n    \"lb\":{\n        \"name\":\"Luxembourgish\",\n        \"nativeName\":\"Lëtzebuergesch\"\n    },\n    \"lg\":{\n        \"name\":\"Luganda\",\n        \"nativeName\":\"Luganda\"\n    },\n    \"li\":{\n        \"name\":\"Limburgish\",\n        \"nativeName\":\"Limburgs\"\n    },\n    \"ln\":{\n        \"name\":\"Lingala\",\n        \"nativeName\":\"Lingála\"\n    },\n    \"lo\":{\n        \"name\":\"Lao\",\n        \"nativeName\":\"ພາສາລາວ\"\n    },\n    \"lt\":{\n        \"name\":\"Lithuanian\",\n        \"nativeName\":\"lietuvių kalba\"\n    },\n    \"lu\":{\n        \"name\":\"Luba-Katanga\",\n        \"nativeName\":\"\"\n    },\n    \"lv\":{\n        \"name\":\"Latvian\",\n        \"nativeName\":\"latviešu valoda\"\n    },\n    \"gv\":{\n        \"name\":\"Manx\",\n        \"nativeName\":\"Gaelg, Gailck\"\n    },\n    \"mk\":{\n        \"name\":\"Macedonian\",\n        \"nativeName\":\"македонски јазик\"\n    },\n    \"mg\":{\n        \"name\":\"Malagasy\",\n        \"nativeName\":\"Malagasy fiteny\"\n    },\n    \"ms\":{\n        \"name\":\"Malay\",\n        \"nativeName\":\"bahasa Melayu, بهاس ملايو‎\"\n    },\n    \"ml\":{\n        \"name\":\"Malayalam\",\n        \"nativeName\":\"മലയാളം\"\n    },\n    \"mt\":{\n        \"name\":\"Maltese\",\n        \"nativeName\":\"Malti\"\n    },\n    \"mi\":{\n        \"name\":\"Māori\",\n        \"nativeName\":\"te reo Māori\"\n    },\n    \"mr\":{\n        \"name\":\"Marathi\",\n        \"nativeName\":\"मराठी\"\n    },\n    \"mh\":{\n        \"name\":\"Marshallese\",\n        \"nativeName\":\"Kajin M̧ajeļ\"\n    },\n    \"mn\":{\n        \"name\":\"Mongolian\",\n        \"nativeName\":\"монгол\"\n    },\n    \"na\":{\n        \"name\":\"Nauru\",\n        \"nativeName\":\"Ekakairũ Naoero\"\n    },\n    \"nv\":{\n        \"name\":\"Navajo\",\n        \"nativeName\":\"Diné bizaad, Dinékʼehǰí\"\n    },\n    \"nb\":{\n        \"name\":\"Norwegian Bokmål\",\n        \"nativeName\":\"Norsk bokmål\"\n    },\n    \"nd\":{\n        \"name\":\"North Ndebele\",\n        \"nativeName\":\"isiNdebele\"\n    },\n    \"ne\":{\n        \"name\":\"Nepali\",\n        \"nativeName\":\"नेपाली\"\n    },\n    \"ng\":{\n        \"name\":\"Ndonga\",\n        \"nativeName\":\"Owambo\"\n    },\n    \"nn\":{\n        \"name\":\"Norwegian Nynorsk\",\n        \"nativeName\":\"Norsk nynorsk\"\n    },\n    \"no\":{\n        \"name\":\"Norwegian\",\n        \"nativeName\":\"Norsk\"\n    },\n    \"ii\":{\n        \"name\":\"Nuosu\",\n        \"nativeName\":\"ꆈꌠ꒿ Nuosuhxop\"\n    },\n    \"nr\":{\n        \"name\":\"South Ndebele\",\n        \"nativeName\":\"isiNdebele\"\n    },\n    \"oc\":{\n        \"name\":\"Occitan\",\n        \"nativeName\":\"Occitan\"\n    },\n    \"oj\":{\n        \"name\":\"Ojibwe\",\n        \"nativeName\":\"ᐊᓂᔑᓈᐯᒧᐎᓐ\"\n    },\n    \"cu\":{\n        \"name\":\"Church Slavonic\",\n        \"nativeName\":\"ѩзыкъ словѣньскъ\"\n    },\n    \"om\":{\n        \"name\":\"Oromo\",\n        \"nativeName\":\"Afaan Oromoo\"\n    },\n    \"or\":{\n        \"name\":\"Oriya\",\n        \"nativeName\":\"ଓଡ଼ିଆ\"\n    },\n    \"os\":{\n        \"name\":\"Ossetian\",\n        \"nativeName\":\"ирон æвзаг\"\n    },\n    \"pa\":{\n        \"name\":\"Punjabi\",\n        \"nativeName\":\"ਪੰਜਾਬੀ, پنجابی‎\"\n    },\n    \"pi\":{\n        \"name\":\"Pāli\",\n        \"nativeName\":\"पाऴि\"\n    },\n    \"fa\":{\n        \"name\":\"Persian\",\n        \"nativeName\":\"فارسی\"\n    },\n    \"pl\":{\n        \"name\":\"Polish\",\n        \"nativeName\":\"polski\"\n    },\n    \"ps\":{\n        \"name\":\"Pashto\",\n        \"nativeName\":\"پښتو\"\n    },\n    \"pt\":{\n        \"name\":\"Portuguese\",\n        \"nativeName\":\"Português\"\n    },\n    \"qu\":{\n        \"name\":\"Quechua\",\n        \"nativeName\":\"Runa Simi, Kichwa\"\n    },\n    \"rm\":{\n        \"name\":\"Romansh\",\n        \"nativeName\":\"rumantsch grischun\"\n    },\n    \"rn\":{\n        \"name\":\"Kirundi\",\n        \"nativeName\":\"kiRundi\"\n    },\n    \"ro\":{\n        \"name\":\"Romanian\",\n        \"nativeName\":\"română\"\n    },\n    \"ru\":{\n        \"name\":\"Russian\",\n        \"nativeName\":\"русский язык\"\n    },\n    \"sa\":{\n        \"name\":\"Sanskrit\",\n        \"nativeName\":\"संस्कृतम्\"\n    },\n    \"sc\":{\n        \"name\":\"Sardinian\",\n        \"nativeName\":\"sardu\"\n    },\n    \"sd\":{\n        \"name\":\"Sindhi\",\n        \"nativeName\":\"सिन्धी, سنڌي، سندھی‎\"\n    },\n    \"se\":{\n        \"name\":\"Northern Sami\",\n        \"nativeName\":\"Davvisámegiella\"\n    },\n    \"sm\":{\n        \"name\":\"Samoan\",\n        \"nativeName\":\"gagana faa Samoa\"\n    },\n    \"sg\":{\n        \"name\":\"Sango\",\n        \"nativeName\":\"yângâ tî sängö\"\n    },\n    \"sr\":{\n        \"name\":\"Serbian\",\n        \"nativeName\":\"српски језик\"\n    },\n    \"gd\":{\n        \"name\":\"Gaelic\",\n        \"nativeName\":\"Gàidhlig\"\n    },\n    \"sn\":{\n        \"name\":\"Shona\",\n        \"nativeName\":\"chiShona\"\n    },\n    \"si\":{\n        \"name\":\"Sinhalese\",\n        \"nativeName\":\"සිංහල\"\n    },\n    \"sk\":{\n        \"name\":\"Slovak\",\n        \"nativeName\":\"slovenčina\"\n    },\n    \"sl\":{\n        \"name\":\"Slovene\",\n        \"nativeName\":\"slovenščina\"\n    },\n    \"so\":{\n        \"name\":\"Somali\",\n        \"nativeName\":\"Soomaaliga, af Soomaali\"\n    },\n    \"st\":{\n        \"name\":\"Southern Sotho\",\n        \"nativeName\":\"Sesotho\"\n    },\n    \"es\":{\n        \"name\":\"Spanish\",\n        \"nativeName\":\"español, castellano\"\n    },\n    \"su\":{\n        \"name\":\"Sundanese\",\n        \"nativeName\":\"Basa Sunda\"\n    },\n    \"sw\":{\n        \"name\":\"Swahili\",\n        \"nativeName\":\"Kiswahili\"\n    },\n    \"ss\":{\n        \"name\":\"Swati\",\n        \"nativeName\":\"SiSwati\"\n    },\n    \"sv\":{\n        \"name\":\"Swedish\",\n        \"nativeName\":\"svenska\"\n    },\n    \"ta\":{\n        \"name\":\"Tamil\",\n        \"nativeName\":\"தமிழ்\"\n    },\n    \"te\":{\n        \"name\":\"Telugu\",\n        \"nativeName\":\"తెలుగు\"\n    },\n    \"tg\":{\n        \"name\":\"Tajik\",\n        \"nativeName\":\"тоҷикӣ, toğikī, تاجیکی‎\"\n    },\n    \"th\":{\n        \"name\":\"Thai\",\n        \"nativeName\":\"ไทย\"\n    },\n    \"ti\":{\n        \"name\":\"Tigrinya\",\n        \"nativeName\":\"ትግርኛ\"\n    },\n    \"bo\":{\n        \"name\":\"Tibetan\",\n        \"nativeName\":\"བོད་ཡིག\"\n    },\n    \"tk\":{\n        \"name\":\"Turkmen\",\n        \"nativeName\":\"Türkmen, Түркмен\"\n    },\n    \"tl\":{\n        \"name\":\"Tagalog\",\n        \"nativeName\":\"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔\"\n    },\n    \"tn\":{\n        \"name\":\"Tswana\",\n        \"nativeName\":\"Setswana\"\n    },\n    \"to\":{\n        \"name\":\"Tonga\",\n        \"nativeName\":\"faka Tonga\"\n    },\n    \"tr\":{\n        \"name\":\"Turkish\",\n        \"nativeName\":\"Türkçe\"\n    },\n    \"ts\":{\n        \"name\":\"Tsonga\",\n        \"nativeName\":\"Xitsonga\"\n    },\n    \"tt\":{\n        \"name\":\"Tatar\",\n        \"nativeName\":\"татарча, tatarça, تاتارچا‎\"\n    },\n    \"tw\":{\n        \"name\":\"Twi\",\n        \"nativeName\":\"Twi\"\n    },\n    \"ty\":{\n        \"name\":\"Tahitian\",\n        \"nativeName\":\"Reo Tahiti\"\n    },\n    \"ug\":{\n        \"name\":\"Uyghur\",\n        \"nativeName\":\"Uyƣurqə, ئۇيغۇرچە‎\"\n    },\n    \"uk\":{\n        \"name\":\"Ukrainian\",\n        \"nativeName\":\"українська\"\n    },\n    \"ur\":{\n        \"name\":\"Urdu\",\n        \"nativeName\":\"اردو\"\n    },\n    \"uz\":{\n        \"name\":\"Uzbek\",\n        \"nativeName\":\"zbek, Ўзбек, أۇزبېك‎\"\n    },\n    \"ve\":{\n        \"name\":\"Venda\",\n        \"nativeName\":\"Tshivenḓa\"\n    },\n    \"vi\":{\n        \"name\":\"Vietnamese\",\n        \"nativeName\":\"Tiếng Việt\"\n    },\n    \"vo\":{\n        \"name\":\"Volapük\",\n        \"nativeName\":\"Volapük\"\n    },\n    \"wa\":{\n        \"name\":\"Walloon\",\n        \"nativeName\":\"Walon\"\n    },\n    \"cy\":{\n        \"name\":\"Welsh\",\n        \"nativeName\":\"Cymraeg\"\n    },\n    \"wo\":{\n        \"name\":\"Wolof\",\n        \"nativeName\":\"Wollof\"\n    },\n    \"fy\":{\n        \"name\":\"Western Frisian\",\n        \"nativeName\":\"Frysk\"\n    },\n    \"xh\":{\n        \"name\":\"Xhosa\",\n        \"nativeName\":\"isiXhosa\"\n    },\n    \"yi\":{\n        \"name\":\"Yiddish\",\n        \"nativeName\":\"ייִדיש\"\n    },\n    \"yo\":{\n        \"name\":\"Yoruba\",\n        \"nativeName\":\"Yorùbá\"\n    },\n    \"za\":{\n        \"name\":\"Zhuang\",\n        \"nativeName\":\"Saɯ cueŋƅ, Saw cuengh\"\n    }\n  }\n\n  AblePlayer.prototype.getLanguageName = function (key) {\n\t\tkey = key.slice(0,2);\n\t\tvar lang = isoLangs[key];\n\t\treturn lang ? lang.name : undefined;\n\t};\n  AblePlayer.prototype.getLanguageNativeName = function (key) {\n\t\tkey = key.slice(0,2);\n\t\tvar lang = isoLangs[key];\n\t\treturn lang ? lang.nativeName : undefined;\n\t}\n\n})(jQuery);\n(function ($) {\n  AblePlayer.prototype.getSupportedLangs = function() {\n    // returns an array of languages for which AblePlayer has translation tables\n    // Removing 'nl' as of 2.3.54, pending updates\n    var langs = ['de','en','es','fr','ja'];\n    return langs;\n  };\n\n  AblePlayer.prototype.getTranslationText = function() {\n\n    // determine language, then get labels and prompts from corresponding translation var\n    var gettingText, lang, thisObj, msg;\n\n    gettingText = $.Deferred();\n\n    // override this.lang to language of the web page, if known and supported\n    // otherwise this.lang will continue using default\n    if (!this.forceLang) {\n      if ($('body').attr('lang')) {\n        lang = $('body').attr('lang');\n      }\n      else if ($('html').attr('lang')) {\n        lang = $('html').attr('lang');\n      }\n      if (lang !== this.lang) {\n        msg = 'Language of web page (' + lang +') ';\n        if ($.inArray(lang,this.getSupportedLangs()) !== -1) {\n          // this is a supported lang\n          msg += ' has a translation table available.';\n          this.lang = lang;\n        }\n        else {\n          msg += ' is not currently supported. Using default language (' + this.lang + ')';\n        }\n        if (this.debug) {\n          console.log(msg);\n        }\n      }\n    }\n\n    // in final build, all language variables are contatenated into this function below...\n    // translation2.js is then contanenated onto the end to finish this function\n\n\nvar de = {\r\r\"playerHeading\": \"Media Player\",\r\r\"faster\": \"Schneller\",\r\r\"slower\": \"Langsamer\",\r\r\"chapters\": \"Kapitel\",\r\r\"newChapter\": \"Neues Kapitel\",\r\r\"play\": \"Abspielen\",\r\r\"pause\": \"Pause\",\r\r\"stop\": \"Anhalten\",\r\r\"restart\": \"Neustart\",\r\r\"prevChapter\": \"Vorheriges Kapitel\",\r\r\"nextChapter\": \"Nächste Kapitel\",\r\r\"prevTrack\": \"Vorheriges track\",\r\r\"nextTrack\": \"Nächste Titel\",\r\r\"rewind\": \"Zurück springen\",\r\r\"forward\": \"Vorwärts springen\",\r\r\"captions\": \"Untertitel\",\r\r\"showCaptions\": \"Untertitel anzeigen\",\r\r\"hideCaptions\": \"Untertitel verstecken\",\r\r\"captionsOff\": \"Untertitel ausschalten\",\r\r\"showTranscript\": \"Transkription anzeigen\",\r\r\"hideTranscript\": \"Transkription entfernen\",\r\r\"turnOnDescriptions\": \"Audiodeskription einschalten\",\r\r\"turnOffDescriptions\": \"Audiodeskription ausschalten\",\r\r\"language\": \"Sprache\",\r\r\"sign\": \"Gebärdensprache\",\r\r\"showSign\": \"Gebärdensprache anzeigen\",\r\r\"hideSign\": \"Gebärdensprache verstecken\",\r\r\"seekbarLabel\": \"timeline\",\r\r\"mute\": \"Ton ausschalten\",\r\r\"unmute\": \"Ton einschalten\",\r\r\"volume\": \"Lautstärke\",\r\r\"volumeHelp\": \"Eingabetaste drücken, um den Lautstärkeregler zu bedienen\",\r\r\"volumeUpDown\": \"Lautstärkeregler\",\r\r\"volumeSliderClosed\": \"Lautstärkeregler verlassen\",\r\r\"preferences\": \"Einstellungen\",\r\r\"enterFullScreen\": \"Vollbildmodus einschalten\",\r\r\"exitFullScreen\": \"Vollbildmodus verlassen\",\r\r\"fullScreen\": \"Vollbildmodus\",\r\r\"speed\": \"Geschwindigkeit\",\r\r\"and\": \"und\",\r\r\"or\": \"oder\",\r\r\"spacebar\": \"Leertaste\",\r\r\"transcriptTitle\": \"Transkription\",\r\r\"lyricsTitle\": \"Text\",\r\r\"autoScroll\": \"Automatisch scrollen\",\r\r\"unknown\": \"Unbekannt\",\r\r\"statusPlaying\": \"Gestartet\",\r\r\"statusPaused\": \"Pausiert\",\r\r\"statusStopped\": \"Angehalten\",\r\r\"statusWaiting\": \"Wartend\",\r\r\"statusBuffering\": \"Daten werden empfangen...\",\r\r\"statusUsingDesc\": \"Video mit Audiodeskription wird verwendet\",\r\r\"statusLoadingDesc\": \"Video mit Audiodeskription wird geladen\",\r\r\"statusUsingNoDesc\": \"Video ohne Audiodeskription wird verwendet\",\r\r\"statusLoadingNoDesc\": \"Video ohne Audiodeskription wird geladen\",\r\r\"statusLoadingNext\": \"Der nächste Titel wird geladen\",\r\r\"statusEnd\": \"Ende des Titels\",\r\r\"selectedTrack\": \"Ausgewählter Titel\",\r\r\"alertDescribedVersion\": \"Das Video wird mit Audiodeskription abgespielt\",\r\r\"alertNonDescribedVersion\": \"Das Video wird ohne Audiodeskription abgespielt\",\r\r\"fallbackError1\": \"Abspielen ist mit diesem Browser nicht möglich\",\r\r\"fallbackError2\": \"Folgende Browser wurden mit AblePlayer getestet\",\r\r\"orHigher\": \"oder höher\",\r\r\"prefMenuCaptions\": \"Untertitel\",\r\r\"prefMenuDescriptions\": \"Audiodeskriptionen\",\r\r\"prefMenuKeyboard\": \"Tastatur\",\r\r\"prefMenuTranscript\": \"Transkription\",\r\r\"prefTitleCaptions\": \"Untertitel Einstellungen\",\r\r\"prefTitleDescriptions\": \"Audiodeskription Einstellungen\",\r\r\"prefTitleKeyboard\": \"Tastatur Einstellungen\",\r\r\"prefTitleTranscript\": \"Transkription Einstellungen\",\r\r\"prefIntroCaptions\": \"Diese Einstellungen beeinflussen die Darstellung von Untertiteln:\",\r\r\"prefIntroDescription1\": \"Dieser Media Player unterstützt zwei Arten von Untertiteln: \",\r\r\"prefIntroDescription2\": \"Das aktuelle Video hat \",\r\r\"prefIntroDescriptionNone\": \"Das aktuelle Video hat keine Audiodeskription.\",\r\r\"prefIntroDescription3\": \"Mit der folgenden Auswahl steuern Sie das Abspielen der Audiodeskription.\",\r\r\"prefIntroDescription4\": \"Wenn die Audiodeskription aktiviert ist, kann sie per Schaltfläche ein- und ausgeschaltet werden.\",\r\r\"prefIntroKeyboard1\": \"Dieser Media Player lässt sich innerhalb der gesamten Seite per Tastenkürzel bedienen (siehe unten).\",\r\r\"prefIntroKeyboard2\": \"Die Modifikatortasten (Umschalt, Alt, und Strg) können hier zugeordnet werden.\",\r\r\"prefIntroKeyboard3\": \"Beachte: Einige Tastenkombinationen sind je nach Browser und Betriebssystem nicht möglich. Versuchen Sie gegebenenfalls andere Kombinationen.\",\r\r\"prefIntroTranscript\": \"Diese Einstellungen beeinflussen die interaktiven Transkriptionen.\",\r\r\"prefCookieWarning\": \"Cookies werden benötigt, um Ihre Einstellungen abzuspeichern.\",\r\r\"prefHeadingKeyboard1\": \"Modifikatortasten für die Tastenkürzel\",\r\r\"prefHeadingKeyboard2\": \"Aktuell eingestellte Tastenkürzel\",\r\r\"prefHeadingDescription\": \"Audiodeskription\",\r\r\"prefHeadingTextDescription\": \"Textbasierte Audiodeskription\",\r\r\"prefHeadingCaptions\": \"Untertitel\",\r\r\"prefHeadingTranscript\": \"Interaktive Transkription\",\r\r\"prefAltKey\": \"Alt\",\r\r\"prefCtrlKey\": \"Strg\",\r\r\"prefShiftKey\": \"Umschalttaste\",\r\r\"escapeKey\": \"ESC Taste\",\r\r\"escapeKeyFunction\": \"Dialogfenster schließen\",\r\r\"prefDescFormat\": \"Bevorzugtes Format\",\r\r\"prefDescFormatHelp\": \"Wenn beide Formate vorhanden sind, wird nur eines verwendet.\",\r\r\"prefDescFormatOption1\": \"Version des Videos, die eine Audiodeskription enthält\",\r\r\"prefDescFormatOption1b\": \"eine alternative Version der Audiodeskription\",\r\r\"prefDescFormatOption2\": \"Textbasierte Audiodeskription, die vom Screen-Reader vorgelesen wird\",\r\r\"prefDescFormatOption2b\": \"eine textbasierte Audiodeskription\",\r\r\"prefDescPause\": \"Video automatisch anhalten, wenn Szenenbeschreibungen eingeblendet werden\",\r\r\"prefVisibleDesc\": \"Textbasierte Szenenbeschreibungen einblenden, wenn diese aktiviert sind\",\r\r\"prefHighlight\": \"Transkription hervorheben, während das Medium abgespielt wird\",\r\r\"prefTabbable\": \"Transkription per Tastatur ein-/ausschaltbar machen\",\r\r\"prefCaptionsFont\": \"Schriftart\",\r\r\"prefCaptionsColor\": \"Schriftfarbe\",\r\r\"prefCaptionsBGColor\": \"Hintergrund\",\r\r\"prefCaptionsSize\": \"Schriftgrad\",\r\r\"prefCaptionsOpacity\": \"Deckkraft\",\r\r\"prefCaptionsStyle\": \"Stil\",\r\r\"serif\": \"Serifenschrift\",\r\r\"sans\": \"Serifenlose Schrift\",\r\r\"cursive\": \"kursiv\",\r\r\"fantasy\": \"Fantasieschrift\",\r\r\"monospace\": \"nichtproportionale Schrift\",\r\r\"white\": \"weiß\",\r\r\"yellow\": \"gelb\",\r\r\"green\": \"grün\",\r\r\"cyan\": \"cyan\",\r\r\"blue\": \"blau\",\r\r\"magenta\": \"magenta\",\r\r\"red\": \"rot\",\r\r\"black\": \"schwarz\",\r\r\"transparent\": \"transparent\",\r\r\"solid\": \"undurchsichtig\",\r\r\"captionsStylePopOn\": \"Pop-on\",\r\r\"captionsStyleRollUp\": \"Roll-up\",\r\r\"prefCaptionsPosition\": \"Position\",\r\r\"captionsPositionOverlay\": \"Überlagert\",\r\r\"captionsPositionBelow\": \"Unterhalb\",\r\r\"sampleCaptionText\": \"Textbeispiel\",\r\r\"prefSuccess\": \"Ihre Änderungen wurden gespeichert.\",\r\r\"prefNoChange\": \"Es gab keine Änderungen zu speichern.\",\r\r\"help\": \"Hilfe\",\r\r\"helpTitle\": \"Hilfe\",\r\r\"save\": \"Speichern\",\r\r\"cancel\": \"Abbrechen\",\r\r\"ok\": \"Ok\",\r\r\"done\": \"Fertig\",\r\r\"closeButtonLabel\": \"Schließen\",\r\r\"windowButtonLabel\": \"Fenster Manipulationen\",\r\r\"windowMove\": \"Verschieben\",\r\r\"windowMoveAlert\": \"Fenster mit Pfeiltasten oder Maus verschieben; beenden mit Eingabetaste\",\r\r\"windowResize\": \"Größe verändern\",\r\r\"windowResizeHeading\": \"Größe des Gebärdensprache-Fenster\",\r\r\"windowResizeAlert\": \"Die Größe wurde angepasst.\",\r\r\"width\": \"Breite\",\r\r\"height\": \"Höhe\",\r\r\"windowSendBack\": \"In den Hintergrund verschieben\",\r\r\"windowSendBackAlert\": \"Dieses Fenster ist jetzt im Hintergrund und wird von anderen Fenstern verdeckt.\",\r\r\"windowBringTop\": \"In den Vordergrund holen\",\r\r\"windowBringTopAlert\": \"Dieses Fenster ist jetzt im Vordergrund.\"\r\r};\r\nvar en = {\n\n\"playerHeading\": \"Media player\",\n\n\"faster\": \"Faster\",\n\n\"slower\": \"Slower\",\n\n\"play\": \"Play\",\n\n\"pause\": \"Pause\",\n\n\"stop\": \"Stop\",\n\n\"restart\": \"Restart\",\n\n\"prevChapter\": \"Previous chapter\",\n\n\"nextChapter\": \"Next chapter\",\n\n\"prevTrack\": \"Previous track\",\n\n\"nextTrack\": \"Next track\",\n\n\"rewind\": \"Rewind\",\n\n\"forward\": \"Forward\",\n\n\"captions\": \"Captions\",\n\n\"showCaptions\": \"Show captions\",\n\n\"hideCaptions\": \"Hide captions\",\n\n\"captionsOff\": \"Captions off\",\n\n\"showTranscript\": \"Show transcript\",\n\n\"hideTranscript\": \"Hide transcript\",\n\n\"turnOnDescriptions\": \"Turn on descriptions\",\n\n\"turnOffDescriptions\": \"Turn off descriptions\",\n\n\"chapters\": \"Chapters\",\n\n\"newChapter\": \"New chapter\",\n\n\"language\": \"Language\",\n\n\"sign\": \"Sign language\",\n\n\"showSign\": \"Show sign language\",\n\n\"hideSign\": \"Hide sign language\",\n\n\"seekbarLabel\": \"timeline\",\n\n\"mute\": \"Mute\",\n\n\"unmute\": \"Unmute\",\n\n\"volume\": \"Volume\",\n\n\"volumeHelp\": \"Click to access volume slider\",\n\n\"volumeUpDown\": \"Volume up down\",\n\n\"volumeSliderClosed\": \"Volume slider closed\",\n\n\"preferences\": \"Preferences\",\n\n\"enterFullScreen\": \"Enter full screen\",\n\n\"exitFullScreen\": \"Exit full screen\",\n\n\"fullScreen\": \"Full screen\",\n\n\"speed\": \"Speed\",\n\n\"and\": \"and\",\n\n\"or\": \"or\",\n\n\"spacebar\": \"spacebar\",\n\n\"transcriptTitle\": \"Transcript\",\n\n\"lyricsTitle\": \"Lyrics\",\n\n\"autoScroll\": \"Auto scroll\",\n\n\"unknown\": \"Unknown\",\n\n\"statusPlaying\": \"Playing\",\n\n\"statusPaused\": \"Paused\",\n\n\"statusStopped\": \"Stopped\",\n\n\"statusWaiting\": \"Waiting\",\n\n\"statusBuffering\": \"Buffering\",\n\n\"statusUsingDesc\": \"Using described version\",\n\n\"statusLoadingDesc\": \"Loading described version\",\n\n\"statusUsingNoDesc\": \"Using non-described version\",\n\n\"statusLoadingNoDesc\": \"Loading non-described version\",\n\n\"statusLoadingNext\": \"Loading next track\",\n\n\"statusEnd\": \"End of track\",\n\n\"selectedTrack\": \"Selected Track\",\n\n\"alertDescribedVersion\": \"Using the audio described version of this video\",\n\n\"alertNonDescribedVersion\": \"Using the non-described version of this video\",\n\n\"fallbackError1\": \"Sorry, your browser is unable to play this\",\n\n\"fallbackError2\": \"The following browsers are known to work with this media player\",\n\n\"orHigher\": \"or higher\",\n\n\"prefMenuCaptions\": \"Captions\",\n\n\"prefMenuDescriptions\": \"Descriptions\",\n\n\"prefMenuKeyboard\": \"Keyboard\",\n\n\"prefMenuTranscript\": \"Transcript\",\n\n\"prefTitleCaptions\": \"Captions Preferences\",\n\n\"prefTitleDescriptions\": \"Audio Description Preferences\",\n\n\"prefTitleKeyboard\": \"Keyboard Preferences\",\n\n\"prefTitleTranscript\": \"Transcript Preferences\",\n\n\"prefIntroCaptions\": \"The following preferences control how captions are displayed.\",\n\n\"prefIntroDescription1\": \"This media player supports audio description in two ways: \",\n\n\"prefIntroDescription2\": \"The current video has \",\n\n\"prefIntroDescriptionNone\": \"The current video has no audio description in either format.\",\n\n\"prefIntroDescription3\": \"Use the following form to set your preferences related to audio description.\",\n\n\"prefIntroDescription4\": \"After you save your settings, audio description can be toggled on/off using the Description button.\",\n\n\"prefIntroKeyboard1\": \"The media player on this web page can be operated from anywhere on the page using keyboard shortcuts (see below for a list).\",\n\n\"prefIntroKeyboard2\": \"Modifier keys (Shift, Alt, and Control) can be assigned below.\",\n\n\"prefIntroKeyboard3\": \"NOTE: Some key combinations might conflict with keys used by your browser and/or other software applications. Try various combinations of modifier keys to find one that works for you.\",\n\n\"prefIntroTranscript\": \"The following preferences affect the interactive transcript.\",\n\n\"prefCookieWarning\": \"Saving your preferences requires cookies.\",\n\n\"prefHeadingKeyboard1\": \"Modifier keys used for shortcuts\",\n\n\"prefHeadingKeyboard2\": \"Current keyboard shortcuts\",\n\n\"prefHeadingDescription\": \"Audio description\",\n\n\"prefHeadingTextDescription\": \"Text-based audio description\",\n\n\"prefHeadingCaptions\": \"Captions\",\n\n\"prefHeadingTranscript\": \"Interactive Transcript\",\n\n\"prefAltKey\": \"Alt\",\n\n\"prefCtrlKey\": \"Control\",\n\n\"prefShiftKey\": \"Shift\",\n\n\"escapeKey\": \"Escape\",\n\n\"escapeKeyFunction\": \"Close current dialog or popup menu\",\n\n\"prefDescFormat\": \"Preferred format\",\n\n\"prefDescFormatHelp\": \"If both formats are avaialable, only one will be used.\",\n\n\"prefDescFormatOption1\": \"alternative described version of video\",\n\n\"prefDescFormatOption1b\": \"an alternative described version\",\n\n\"prefDescFormatOption2\": \"text-based description, announced by screen reader\",\n\n\"prefDescFormatOption2b\": \"text-based description\",\n\n\"prefDescPause\": \"Automatically pause video when description starts\",\n\n\"prefVisibleDesc\": \"Make description visible\",\n\n\"prefHighlight\": \"Highlight transcript as media plays\",\n\n\"prefTabbable\": \"Keyboard-enable transcript\",\n\n\"prefCaptionsFont\": \"Font\",\n\n\"prefCaptionsColor\": \"Text Color\",\n\n\"prefCaptionsBGColor\": \"Background\",\n\n\"prefCaptionsSize\": \"Font Size\",\n\n\"prefCaptionsOpacity\": \"Opacity\",\n\n\"prefCaptionsStyle\": \"Style\",\n\n\"serif\": \"serif\",\n\n\"sans\": \"sans-serif\",\n\n\"cursive\": \"cursive\",\n\n\"fantasy\": \"fantasy\",\n\n\"monospace\": \"monospace\",\n\n\"white\": \"white\",\n\n\"yellow\": \"yellow\",\n\n\"green\": \"green\",\n\n\"cyan\": \"cyan\",\n\n\"blue\": \"blue\",\n\n\"magenta\": \"magenta\",\n\n\"red\": \"red\",\n\n\"black\": \"black\",\n\n\"transparent\": \"transparent\",\n\n\"solid\": \"solid\",\n\n\"captionsStylePopOn\": \"Pop-on\",\n\n\"captionsStyleRollUp\": \"Roll-up\",\n\n\"prefCaptionsPosition\": \"Position\",\n\n\"captionsPositionOverlay\": \"Overlay\",\n\n\"captionsPositionBelow\": \"Below video\",\n\n\"sampleCaptionText\": \"Sample caption text\",\n\n\"prefSuccess\": \"Your changes have been saved.\",\n\n\"prefNoChange\": \"You didn't make any changes.\",\n\n\"help\": \"Help\",\n\n\"helpTitle\": \"Help\",\n\n\"save\": \"Save\",\n\n\"cancel\": \"Cancel\",\n\n\"ok\": \"ok\",\n\n\"done\": \"Done\",\n\n\"closeButtonLabel\": \"Close dialog\",\n\n\"windowButtonLabel\": \"Window options\",\n\n\"windowMove\": \"Move\",\n\n\"windowMoveAlert\": \"Drag or use arrow keys to move the window; Enter to stop\",\n\n\"windowResize\": \"Resize\",\n\n\"windowResizeHeading\": \"Resize Window\",\n\n\"windowResizeAlert\": \"The window has been resized.\",\n\n\"width\": \"Width\",\n\n\"height\": \"Height\",\n\n\"windowSendBack\": \"Send to back\",\n\n\"windowSendBackAlert\": \"This window is now behind other objects on the page.\",\n\n\"windowBringTop\": \"Bring to front\",\n\n\"windowBringTopAlert\": \"This window is now in front of other objects on the page.\"\n\n};\n\nvar es = {\n\n\"playerHeading\": \"Media player\",\n\n\"faster\": \"Rápido\",\n\n\"slower\": \"Lento\",\n\n\"play\": \"Play\",\n\n\"pause\": \"Pausa\",\n\n\"stop\": \"Detener\",\n\n\"restart\": \"Reiniciar\",\n\n\"prevChapter\": \"Capítulo Anterior\",\n\n\"nextChapter\": \"Siguiente Capítulo\",\n\n\"prevTrack\": \"Pista Anterior\",\n\n\"nextTrack\": \"Siguiente Pista\",\n\n\"rewind\": \"Rebobinar\",\n\n\"forward\": \"Adelantar\",\n\n\"captions\": \"Subtítulos\",\n\n\"showCaptions\": \"Mostrar subtítulos\",\n\n\"hideCaptions\": \"Ocultar subtítulos\",\n\n\"captionsOff\": \"Sin subtítulos\",\n\n\"showTranscript\": \"Mostrar transcripción\",\n\n\"hideTranscript\": \"Ocultar transcripción\",\n\n\"turnOnDescriptions\": \"Habilitar descripciones\",\n\n\"turnOffDescriptions\": \"Deshabilitar descripciones\",\n\n\"chapters\": \"Capítulos\",\n\n\"newChapter\": \"Nuevo capítulo\",\n\n\"language\": \"Idioma\",\n\n\"sign\": \"Lengua de señas\",\n\n\"showSign\": \"Mostrar lengua de señas\",\n\n\"hideSign\": \"Ocultar lengua de señas\",\n\n\"seekbarLabel\": \"timeline\",\n\n\"mute\": \"Silenciar\",\n\n\"unmute\": \"Habilitar sonido\",\n\n\"volume\": \"Volumen\",\n\n\"volumeHelp\": \"Clic para acceder a la barra de volumen\",\n\n\"volumeUpDown\": \"Bajar sonido\",\n\n\"volumeSliderClosed\": \"Barra de volumen cerrada\",\n\n\"preferences\": \"Preferencias\",\n\n\"enterFullScreen\": \"Ver a pantalla completa\",\n\n\"exitFullScreen\": \"Salir de pantalla completa\",\n\n\"fullScreen\": \"Pantalla completa\",\n\n\"speed\": \"Velocidad\",\n\n\"and\": \"y\",\n\n\"or\": \"o\",\n\n\"spacebar\": \"Barra espaciadora\",\n\n\"transcriptTitle\": \"Transcript\",\n\n\"lyricsTitle\": \"Letra\",\n\n\"autoScroll\": \"Desplazamiento automático\",\n\n\"unknown\": \"Desconocido\",\n\n\"statusPlaying\": \"Reproduciendo\",\n\n\"statusPaused\": \"Pausado\",\n\n\"statusStopped\": \"Detenido\",\n\n\"statusWaiting\": \"Esperando\",\n\n\"statusBuffering\": \"Almacenando\",\n\n\"statusUsingDesc\": \"Utilizando versión descrita\",\n\n\"statusLoadingDesc\": \"Cargando versión descrita\",\n\n\"statusUsingNoDesc\": \"Utilizando versión no descrita\",\n\n\"statusLoadingNoDesc\": \"Cargando versión no descrita\",\n\n\"statusLoadingNext\": \"Cargando la siguiente pista\",\n\n\"statusEnd\": \"Fin de pista\",\n\n\"selectedTrack\": \"Pista seleccionada\",\n\n\"alertDescribedVersion\": \"Utilizando la versión audiodescrita del vídeo\",\n\n\"alertNonDescribedVersion\": \"Utilizando la versión no descrita de este vídeo\",\n\n\"fallbackError1\": \"Lo sentimos, su navegador no puede reproducir esto\",\n\n\"fallbackError2\": \"Los siguientes navegadores se sabe pueden trabajar con este reproductor\",\n\n\"orHigher\": \"o superior\",\n\n\"prefMenuCaptions\": \"Subtítulos\",\n\n\"prefMenuDescriptions\": \"Descripciones\",\n\n\"prefMenuKeyboard\": \"Teclado\",\n\n\"prefMenuTranscript\": \"Transcripción\",\n\n\"prefTitleCaptions\": \"Preferencias de subtítulos\",\n\n\"prefTitleDescriptions\": \"Preferencias de audiodescripción\",\n\n\"prefTitleKeyboard\": \"Preferencias de teclado\",\n\n\"prefTitleTranscript\": \"Preferencias de transcripción\",\n\n\"prefIntroCaptions\": \"Las siguientes preferencias controlan cómo se presentan los subtítulos.\",\n\n\"prefIntroDescription1\": \"Este reproductor soporta la audiodescripción de dos maneras: \",\n\n\"prefIntroDescription2\": \"El vídeo actual tiene \",\n\n\"prefIntroDescriptionNone\": \"El vídeo actual no tiene audiodescripción de ninguna manera.\",\n\n\"prefIntroDescription3\": \"Utilice el siguiente formulario para establecer sus preferencias en cuanto a la audiodescripción.\",\n\n\"prefIntroDescription4\": \"Una vez guardadas sus preferencias, la audiodescripción puede habilitarse o deshabilitarse mediante el botón Descripción.\",\n\n\"prefIntroKeyboard1\": \"El reproductor en esta página puede manejarse desde cualquier parte de la página utilizando los atajos de teclado (vea la lista más abajo).\",\n\n\"prefIntroKeyboard2\": \"Las teclas modificadoras (Mayúsculas, Alt, Control) pueden definirse más abajo.\",\n\n\"prefIntroKeyboard3\": \"NOTA: Algunas combinaciones de teclas pueden entrar en conflicto con teclas utilizadas por su navegador y/o otras aplicaciones. Intente varias combinaciones de teclas modificadoras para encontrar la que funciona bien en su caso.\",\n\n\"prefIntroTranscript\": \"Las siguientes preferencias afectan a la transcripción interactiva.\",\n\n\"prefCookieWarning\": \"Gurdar sus preferencias requiere el uso de cookies.\",\n\n\"prefHeadingKeyboard1\": \"Teclas modificadoras utilizadas para atajos de teclado\",\n\n\"prefHeadingKeyboard2\": \"Atajos de teclado definidos actualmente\",\n\n\"prefHeadingDescription\": \"Audiodescrita\",\n\n\"prefHeadingTextDescription\": \"Audiodescrita en texto\",\n\n\"prefHeadingCaptions\": \"Subtítulos\",\n\n\"prefHeadingTranscript\": \"Transcripción interactiva\",\n\n\"prefAltKey\": \"Alt\",\n\n\"prefCtrlKey\": \"Control\",\n\n\"prefShiftKey\": \"Mayúsculas\",\n\n\"escapeKey\": \"Escape\",\n\n\"escapeKeyFunction\": \"Cerrar el cuadro de diálogo o menú contextual\",\n\n\"prefDescFormat\": \"Formato preferido\",\n\n\"prefDescFormatHelp\": \"Si ambos formatos están disponibles, se usará sólo uno de ello.\",\n\n\"prefDescFormatOption1\": \"versión alternativa del vídeo, descrito\",\n\n\"prefDescFormatOption1b\": \"una versión alternativa con descripción\",\n\n\"prefDescFormatOption2\": \"descripción en texto, leída por el lector de pantalla\",\n\n\"prefDescFormatOption2b\": \"descripción en texto\",\n\n\"prefDescPause\": \"Pausar automáticamente el video cuando arranque una descripción\",\n\n\"prefVisibleDesc\": \"Hacer visibles las descripciones en texto si se están usando\",\n\n\"prefHighlight\": \"Resaltar la transcripción según avanza el contenido\",\n\n\"prefTabbable\": \"Transcripción manejable por teclado\",\n\n\"prefCaptionsFont\": \"Fuente\",\n\n\"prefCaptionsColor\": \"Color del texto\",\n\n\"prefCaptionsBGColor\": \"Fondo\",\n\n\"prefCaptionsSize\": \"Tamaño de Fuente\",\n\n\"prefCaptionsOpacity\": \"Opacidad\",\n\n\"prefCaptionsStyle\": \"Estilo\",\n\n\"serif\": \"serif\",\n\n\"sans\": \"sans-serif\",\n\n\"cursive\": \"cursiva\",\n\n\"fantasy\": \"fantasía\",\n\n\"monospace\": \"mono espaciada\",\n\n\"white\": \"blanco\",\n\n\"yellow\": \"amarillo\",\n\n\"green\": \"verde\",\n\n\"cyan\": \"cyan\",\n\n\"blue\": \"azul\",\n\n\"magenta\": \"magenta\",\n\n\"red\": \"rojo\",\n\n\"black\": \"negro\",\n\n\"transparent\": \"transparente\",\n\n\"solid\": \"sólido\",\n\n\"captionsStylePopOn\": \"Pop-on\",\n\n\"captionsStyleRollUp\": \"Roll-up\",\n\n\"prefCaptionsPosition\": \"Posición\",\n\n\"captionsPositionOverlay\": \"Cubrir\",\n\n\"captionsPositionBelow\": \"Debajo del vídeo\",\n\n\"sampleCaptionText\": \"Texto de ejemplo de subtítulo\",\n\n\"prefSuccess\": \"Los cambios han sido guardados.\",\n\n\"prefNoChange\": \"No se ha hecho ningún cambio.\",\n\n\"help\": \"Ayuda\",\n\n\"helpTitle\": \"Ayuda\",\n\n\"save\": \"Guardar\",\n\n\"cancel\": \"Cancelar\",\n\n\"ok\": \"ok\",\n\n\"done\": \"Hecho\",\n\n\"closeButtonLabel\": \"Cerrar cuadro de diálogo\",\n\n\"windowButtonLabel\": \"Opciones en Windows\",\n\n\"windowMove\": \"Mover\",\n\n\"windowMoveAlert\": \"Arrastre o use las teclas de flecha para mover la ventana, pulse Enter para parar.\",\n\n\"windowResize\": \"Redimensionar\",\n\n\"windowResizeHeading\": \"Redimensionar la ventana con el intérprete\",\n\n\"windowResizeAlert\": \"La ventana ha sido redimensionada.\",\n\n\"width\": \"Ancho\",\n\n\"height\": \"Alto\",\n\n\"windowSendBack\": \"Enviar atrás\",\n\n\"windowSendBackAlert\": \"Esta ventana no se encuentra tras otros objetos en la página.\",\n\n\"windowBringTop\": \"Traer al frente\",\n\n\"windowBringTopAlert\": \"Esta ventan está ahora en el frente de otros objetos en la página.\"\n\n};\n\nvar fr = {\n\n\"playerHeading\": \"Lecteur multimédia\",\n\n\"faster\": \"Plus rapidement\",\n\n\"slower\": \"Plus lentement\",\n\n\"play\": \"Lecture\",\n\n\"pause\": \"Pause\",\n\n\"stop\": \"Arrêt\",\n\n\"restart\": \"Redémarrer\",\n\n\"prevChapter\": \"Chapitre Précédente\",\n\n\"nextChapter\": \"Chapitre Suivante\",\n\n\"prevTrack\": \"Piste Précédente\",\n\n\"nextTrack\": \"Piste Suivante\",\n\n\"rewind\": \"Reculer\",\n\n\"forward\": \"Avancer\",\n\n\"captions\": \"Sous-titres\",\n\n\"showCaptions\": \"Afficher les sous-titres\",\n\n\"hideCaptions\": \"Masquer les sous-titres\",\n\n\"captionsOff\": \"Sous-titres désactivés\",\n\n\"showTranscript\": \"Afficher la transcription\",\n\n\"hideTranscript\": \"Masquer la transcription\",\n\n\"turnOnDescriptions\": \"Activer les descriptions\",\n\n\"turnOffDescriptions\": \"Désactiver les descriptions\",\n\n\"chapters\": \"Chapitres\",\n\n\"newChapter\": \"Nouveau chapitre\",\n\n\"language\": \"Langue\",\n\n\"sign\": \"Langage gestuel\",\n\n\"showSign\": \"Afficher le langage gestuel\",\n\n\"hideSign\": \"Masque le langage gestuel\",\n\n\"seekbarLabel\": \"timeline\",\n\n\"mute\": \"Son désactivé\",\n\n\"unmute\": \"Son activé\",\n\n\"volume\": \"Volume\",\n\n\"volumeHelp\": \"Cliquer pour accéder au réglage du volume\",\n\n\"volumeUpDown\": \"Monter baisser le volume\",\n\n\"volumeSliderClosed\": \"Réglage du volume fermé\",\n\n\"preferences\": \"Préférences\",\n\n\"enterFullScreen\": \"Activer le mode plein écran\",\n\n\"exitFullScreen\": \"Quitter le mode plein écran\",\n\n\"fullScreen\": \"Plein écran\",\n\n\"speed\": \"Vitesse\",\n\n\"and\": \"et\",\n\n\"or\": \"ou\",\n\n\"spacebar\": \"barre d’espacement\",\n\n\"transcriptTitle\": \"Transcription\",\n\n\"lyricsTitle\": \"Paroles\",\n\n\"autoScroll\": \"Défilement automatique\",\n\n\"unknown\": \"Inconnu\",\n\n\"statusPlaying\": \"Lecture en cours\",\n\n\"statusPaused\": \"Lecture sur pause\",\n\n\"statusStopped\": \"Lecture interrompue\",\n\n\"statusWaiting\": \"Attente\",\n\n\"statusBuffering\": \"Tamponnage\",\n\n\"statusUsingDesc\": \"Utilisation de la version décrite\",\n\n\"statusLoadingDesc\": \"Chargement de la version décrite\",\n\n\"statusUsingNoDesc\": \"Utilisation de la version non décrite\",\n\n\"statusLoadingNoDesc\": \"Chargement de la version non décrite\",\n\n\"statusLoadingNext\": \"Chargement de la prochaine piste\",\n\n\"statusEnd\": \"Fin de la piste\",\n\n\"selectedTrack\": \"Piste choisie\",\n\n\"alertDescribedVersion\": \"Utilisation de la version avec description sonore de cette vidéo\",\n\n\"alertNonDescribedVersion\": \"Utilisation de la version non décrite de cette vidéo\",\n\n\"fallbackError1\": \"Désolé, votre navigateur ne peut pas lire cette piste\",\n\n\"fallbackError2\": \"Les navigateurs suivants fonctionnent habituellement avec ce lecteur multimédia\",\n\n\"orHigher\": \"ou des versions plus récentes\",\n\n\"prefMenuCaptions\": \"Sous-titres\",\n\n\"prefMenuDescriptions\": \"Descriptions\",\n\n\"prefMenuKeyboard\": \"Clavier\",\n\n\"prefMenuTranscript\": \"Transcription\",\n\n\"prefTitleCaptions\": \"Préférences liées au sous-titrage\",\n\n\"prefTitleDescriptions\": \"Préférences liées aux descriptions sonores\",\n\n\"prefTitleKeyboard\": \"Préférences liées au clavier\",\n\n\"prefTitleTranscript\": \"Préférence liées à la transcription\",\n\n\"prefIntroCaptions\": \"Les préférences contrôlent la façon dont les sous-titres sont affichés.\",\n\n\"prefIntroDescription1\": \"Ce lecteur multimédia permet d’entendre les descriptions sonores de deux façons:\",\n\n\"prefIntroDescription2\": \"Il y a une version \",\n\n\"prefIntroDescriptionNone\": \"Il n’y a pas de version avec description sonore (dans ni l’un ni l’autre des formats) de la présente vidéo.\",\n\n\"prefIntroDescription3\": \"Utilisez le formulaire suivant pour établir vos préférences liées aux descriptions sonores.\",\n\n\"prefIntroDescription4\": \"Après avoir enregistré vos préférences, vous pouvez activer ou désactiver la description sonore avec le bouton Description.\",\n\n\"prefIntroKeyboard1\": \"Le lecteur multimédia de cette page Web peut être utilisé à partir de n’importe quel endroit sur la page avec des raccourcis du clavier (voir la liste ci-dessous).\",\n\n\"prefIntroKeyboard2\": \"Des rôles peuvent être assignés aux touches de modification (Shift, Alt, Ctrl) ci-dessous.\",\n\n\"prefIntroKeyboard3\": \"Certaines combinaisons de touches pourraient entrer en conflit avec les touches utilisées par votre navigateur ou autres applications logicielles. Essayez diverses combinaisons de touches de modification pour en trouver qui fonctionnent pour vous.\",\n\n\"prefIntroTranscript\": \"Les préférences suivantes ont un effet sur la transcription interactive.\",\n\n\"prefCookieWarning\": \"Il faut que les témoins soient activés pour enregistrer vos préférences.\",\n\n\"prefHeadingKeyboard1\": \"Touches de modification utilisées pour des raccourcis\",\n\n\"prefHeadingKeyboard2\": \"Raccourcis du clavier assignés actuellement\",\n\n\"prefHeadingDescription\": \"Description sonore\",\n\n\"prefHeadingTextDescription\": \"Description sonore textuelle\",\n\n\"prefHeadingCaptions\": \"Sous-titres\",\n\n\"prefHeadingTranscript\": \"Transcription interactive\",\n\n\"prefAltKey\": \"Alt\",\n\n\"prefCtrlKey\": \"Ctrl\",\n\n\"prefShiftKey\": \"Shift\",\n\n\"escapeKey\": \"Esc\",\n\n\"escapeKeyFunction\": \"Fermer la fenêtre de dialogue ou le menu contextuel\",\n\n\"prefDescFormat\": \"Format privilégié\",\n\n\"prefDescFormatHelp\": \"Si les deux formats sont offerts, un seul sera utilisé.\",\n\n\"prefDescFormatOption1\": \"autre version de la vidéo avec description\",\n\n\"prefDescFormatOption1b\": \"autre version avec description\",\n\n\"prefDescFormatOption2\": \"description textuelle, lue à l’aide d’un lecteur d’écran\",\n\n\"prefDescFormatOption2b\": \"description textuelle\",\n\n\"prefDescPause\": \"Mettre la vidéo en pause automatiquement quand la description commence\",\n\n\"prefVisibleDesc\": \"Affichez la description\",\n\n\"prefHighlight\": \"Surligner la transcription pendant la lecture\",\n\n\"prefTabbable\": \"Transcription activée par clavier\",\n\n\"prefCaptionsFont\": \"Police de caractères\",\n\n\"prefCaptionsColor\": \"Couleur du texte\",\n\n\"prefCaptionsBGColor\": \"Arrière-plan\",\n\n\"prefCaptionsSize\": \"Taille de la police\",\n\n\"prefCaptionsOpacity\": \"Opacité\",\n\n\"prefCaptionsStyle\": \"Style\",\n\n\"serif\": \"avec empattement\",\n\n\"sans\": \"sans empattement\",\n\n\"cursive\": \"écriture cursive\",\n\n\"fantasy\": \"écriture de fantaisie\",\n\n\"monospace\": \"à taille fixe\",\n\n\"white\": \"blanc\",\n\n\"yellow\": \"jaune\",\n\n\"green\": \"vert\",\n\n\"cyan\": \"cyan\",\n\n\"blue\": \"bleu\",\n\n\"magenta\": \"magenta\",\n\n\"red\": \"rouge\",\n\n\"black\": \"noir\",\n\n\"transparent\": \"transparent\",\n\n\"solid\": \"solide\",\n\n\"captionsStylePopOn\": \"Pop-on\",\n\n\"captionsStyleRollUp\": \"Roll-up\",\n\n\"prefCaptionsPosition\": \"Position\",\n\n\"captionsPositionOverlay\": \"Superposés\",\n\n\"captionsPositionBelow\": \"Sous la vidéo\",\n\n\"sampleCaptionText\": \"Échantillon de sous-titre\",\n\n\"prefSuccess\": \"Vos changements ont été enregistrés.\",\n\n\"prefNoChange\": \"Vous n’avez pas fait de changements.\",\n\n\"help\": \"Aide\",\n\n\"helpTitle\": \"Aide\",\n\n\"save\": \"Enregistrer\",\n\n\"cancel\": \"Annuler\",\n\n\"ok\": \"ok\",\n\n\"done\": \"Terminé\",\n\n\"closeButtonLabel\": \"Fermer le dialogue\",\n\n\"windowButtonLabel\": \"Options de fenêtre\",\n\n\"windowMove\": \"Déplacer\",\n\n\"windowMoveAlert\": \"Faites glisser avec la souris ou utilisez les touches fléchées pour déplacer la fenêtre; appuyez sur « Enter » pour arrêter.\",\n\n\"windowResize\": \"Redimensionner\",\n\n\"windowResizeHeading\": \"Redimensionner la fenêtre de l’interprète\",\n\n\"windowResizeAlert\": \"La fenêtre a été redimensionnée.\",\n\n\"width\": \"Largeur\",\n\n\"height\": \"Hauteur\",\n\n\"windowSendBack\": \"Mettre en arrière-plan\",\n\n\"windowSendBackAlert\": \"Cette fenêtre est maintenant derrière d’autres objets sur la page.\",\n\n\"windowBringTop\": \"Mettre au premier plan\",\n\n\"windowBringTopAlert\": \"Cette fenêtre est maintenant devant d’autres objets sur la page.\",\n\n};\n\nvar ja = {\n\n\"playerHeading\": \"メディアプレイヤー\",\n\n\"faster\": \"はやく\",\n\n\"slower\": \"おそく\",\n\n\"play\": \"再生\",\n\n\"pause\": \"一時停止\",\n\n\"stop\": \"停止\",\n\n\"restart\": \"再開\",\n\n\"prevChapter\": \"前のチャプター\",\n\n\"nextChapter\": \"次のチャプター\",\n\n\"prevTrack\": \"前のトラック\",\n\n\"nextTrack\": \"次のトラック\",\n\n\"rewind\": \"巻き戻し\",\n\n\"forward\": \"早送り\",\n\n\"captions\": \"キャプション\",\n\n\"showCaptions\": \"キャプションを表示する\",\n\n\"hideCaptions\": \"キャプションを非表示にする\",\n\n\"captionsOff\": \"キャプションを消す\",\n\n\"showTranscript\": \"書き起こしの表示\",\n\n\"hideTranscript\": \"書き起こしを非表示にする\",\n\n\"turnOnDescriptions\": \"音声解説を出す\",\n\n\"turnOffDescriptions\": \"音声解説を出さない\",\n\n\"chapters\": \"チャプター\",\n\n\"newChapter\": \"新しいチャプター\",\n\n\"language\": \"言語\",\n\n\"sign\": \"手話\",\n\n\"showSign\": \"手話を表示\",\n\n\"hideSign\": \"手話を非表示\",\n\n\"seekbarLabel\": \"timeline\",\n\n\"mute\": \"消音\",\n\n\"unmute\": \"消音解除\",\n\n\"volume\": \"音量\",\n\n\"volumeHelp\": \"クリックして音量スライダーを操作します\",\n\n\"volumeUpDown\": \"音量の上下\",\n\n\"volumeSliderClosed\": \"音量スライダー終了\",\n\n\"preferences\": \"設定\",\n\n\"enterFullScreen\": \"全画面表示\",\n\n\"exitFullScreen\": \"全画面表示の終了\",\n\n\"fullScreen\": \"全画面表示\",\n\n\"speed\": \"再生速度\",\n\n\"and\": \"と\",\n\n\"or\": \"または\",\n\n\"spacebar\": \"スペースキー\",\n\n\"transcriptTitle\": \"書き起こし\",\n\n\"lyricsTitle\": \"歌詞\",\n\n\"autoScroll\": \"自動スクロール\",\n\n\"unknown\": \"不明\",\n\n\"statusPlaying\": \"再生中\",\n\n\"statusPaused\": \"一時停止中\",\n\n\"statusStopped\": \"停止\",\n\n\"statusWaiting\": \"待機中\",\n\n\"statusBuffering\": \"バッファリング中\",\n\n\"statusUsingDesc\": \"解説付き動画を使います\",\n\n\"statusLoadingDesc\": \"解説付き動画を読み込み中\",\n\n\"statusUsingNoDesc\": \"解説なしのバージョンを使います\",\n\n\"statusLoadingNoDesc\": \"解説なしのバージョンを読み込んでいます\",\n\n\"statusLoadingNext\": \"次のトラックを読み込んでいます\",\n\n\"statusEnd\": \"トラックの終わり\",\n\n\"selectedTrack\": \"選択されたトラック\",\n\n\"alertDescribedVersion\": \"この動画の音声解説付きバージョンを使います\",\n\n\"alertNonDescribedVersion\": \"この動画の解説なしバージョンを使います\",\n\n\"fallbackError1\": \"申し訳ございません。あなたのブラウザはこれを再生できません\",\n\n\"fallbackError2\": \"以下のブラウザではこのプレイヤーが利用可能であることが知られています\",\n\n\"orHigher\": \"以降\",\n\n\"prefMenuCaptions\": \"キャプション\",\n\n\"prefMenuDescriptions\": \"音声解説\",\n\n\"prefMenuKeyboard\": \"キーボード\",\n\n\"prefMenuTranscript\": \"字幕\",\n\n\"prefTitleCaptions\": \"キャプションの設定\",\n\n\"prefTitleDescriptions\": \"音声解説の設定\",\n\n\"prefTitleKeyboard\": \"キーボードの設定\",\n\n\"prefTitleTranscript\": \"字幕の設定\",\n\n\"prefIntroCaptions\": \"以下の設定は、キャプションがどう表示されるかをコントロールします。\",\n\n\"prefIntroDescription1\": \"このメディアプレイヤーは次の2つの方法で音声解説をサポートします: \",\n\n\"prefIntroDescription2\": \"現在の動画では次の方法が選択可能です: \",\n\n\"prefIntroDescriptionNone\": \"現在の動画にはどちらの形式の音声解説も含まれていません。\",\n\n\"prefIntroDescription3\": \"次のフォームを使って、音声解説に関連する設定を保存できます。\",\n\n\"prefIntroDescription4\": \"設定が保存されたら、音声解説ボタンによって音声解説の表示・非表示を切り替えることができます。\",\n\n\"prefIntroKeyboard1\": \"このページのメディアプレイヤーは、キーボード・ショートカットを使ってこのページのどこからでも操作できます(下の一覧を参照してください)。\",\n\n\"prefIntroKeyboard2\": \"修飾キー(Shift、Alt と Control) は以下で割り当てることができます。\",\n\n\"prefIntroKeyboard3\": \"注意: いくつかのキーの組み合わせは、ブラウザやアプリケーション・ソフトで使われているものと衝突する可能性があります。ご利用の環境で正しく動作する、様々なキーの組み合わせを試してください。\",\n\n\"prefIntroTranscript\": \"以下の設定はインタラクティブな字幕に作用します。\",\n\n\"prefCookieWarning\": \"設定を変更するにはCookieが必要です。\",\n\n\"prefHeadingKeyboard1\": \"ショートカットの修飾キー\",\n\n\"prefHeadingKeyboard2\": \"現在のキーボード・ショートカット\",\n\n\"prefHeadingDescription\": \"音声解説\",\n\n\"prefHeadingTextDescription\": \"テキストによる音声解説\",\n\n\"prefHeadingCaptions\": \"キャプション\",\n\n\"prefHeadingTranscript\": \"インタラクティブな字幕\",\n\n\"prefAltKey\": \"Alt\",\n\n\"prefCtrlKey\": \"Control\",\n\n\"prefShiftKey\": \"Shift\",\n\n\"escapeKey\": \"Escape\",\n\n\"escapeKeyFunction\": \"現在のダイアログやポップアップメニューを閉じる\",\n\n\"prefDescFormat\": \"フォーマットの選択\",\n\n\"prefDescFormatHelp\": \"両方のフォーマットが利用可能な場合、どちらかのみ利用されます。\",\n\n\"prefDescFormatOption1\": \"解説付きの代替バージョンのビデオ\",\n\n\"prefDescFormatOption1b\": \"解説付きの代替バージョン\",\n\n\"prefDescFormatOption2\": \"テキストによる解説(スクリーンリーダーによって読み上げられる)\",\n\n\"prefDescFormatOption2b\": \"テキストによる解説\",\n\n\"prefDescPause\": \"解説が表示されたら動画を自動的に停止する\",\n\n\"prefVisibleDesc\": \"解説が見えるようにする\",\n\n\"prefHighlight\": \"メディアの再生に合わせて字幕をハイライトする\",\n\n\"prefTabbable\": \"キーボード操作可能な字幕\",\n\n\"prefCaptionsFont\": \"フォント\",\n\n\"prefCaptionsColor\": \"文字色\",\n\n\"prefCaptionsBGColor\": \"背景色\",\n\n\"prefCaptionsSize\": \"フォントサイズ\",\n\n\"prefCaptionsOpacity\": \"不透明度\",\n\n\"prefCaptionsStyle\": \"書式\",\n\n\"serif\": \"serif\",\n\n\"sans\": \"sans-serif\",\n\n\"cursive\": \"cursive\",\n\n\"fantasy\": \"fantasy\",\n\n\"monospace\": \"monospace\",\n\n\"white\": \"白\",\n\n\"yellow\": \"黄色\",\n\n\"green\": \"緑\",\n\n\"cyan\": \"シアン\",\n\n\"blue\": \"青\",\n\n\"magenta\": \"マゼンタ\",\n\n\"red\": \"赤\",\n\n\"black\": \"黒\",\n\n\"transparent\": \"透明\",\n\n\"solid\": \"不透明\",\n\n\"captionsStylePopOn\": \"ポップ・オン\",\n\n\"captionsStyleRollUp\": \"ロール・アップ\",\n\n\"prefCaptionsPosition\": \"位置\",\n\n\"captionsPositionOverlay\": \"オーバーレイ表示\",\n\n\"captionsPositionBelow\": \"動画の下部\",\n\n\"sampleCaptionText\": \"キャプション表示の例\",\n\n\"prefSuccess\": \"変更が保存されました。\",\n\n\"prefNoChange\": \"設定が変更されていません。\",\n\n\"help\": \"ヘルプ\",\n\n\"helpTitle\": \"ヘルプ\",\n\n\"save\": \"保存\",\n\n\"cancel\": \"キャンセル\",\n\n\"ok\": \"ok\",\n\n\"done\": \"終了\",\n\n\"closeButtonLabel\": \"ダイアログを閉じる\",\n\n\"windowButtonLabel\": \"ウィンドウの設定\",\n\n\"windowMove\": \"移動\",\n\n\"windowMoveAlert\": \"マウスをドラッグするか矢印キーでウィンドウを移動できます; Enterで終了\",\n\n\"windowResize\": \"サイズを変える\",\n\n\"windowResizeHeading\": \"ウィンドウのサイズ変更\",\n\n\"windowResizeAlert\": \"ウィンドウのサイズが変更されました。\",\n\n\"width\": \"幅\",\n\n\"height\": \"高さ\",\n\n\"windowSendBack\": \"背面へ移動\",\n\n\"windowSendBackAlert\": \"このウィンドウはこのページの他のオブジェクトより背面になりました。\",\n\n\"windowBringTop\": \"前面へ移動\",\n\n\"windowBringTopAlert\": \"このウィンドウはこのページの他のオブジェクトより前面になりました。\"\n\n};\n\n// end getTranslationText function, which began in translation1.js\n\n    this.tt = eval(this.lang);\n\n    // resolve deferred variable\n    gettingText.resolve();\n    return gettingText.promise();\n  };\n})(jQuery);\n\n/*! Copyright (c) 2014 - Paul Tavares - purtuga - @paul_tavares - MIT License */\n;(function($){\n\n    /**\n     * Delays the execution of a function until an expression returns true.\n     * The expression is checked every 100 milliseconds for as many tries\n     * as defined in in the attempts option\n     *\n     * @param {Object} options\n     * @param {Function} options.when\n     *                      Function to execute on every interval.\n     *                      Must return true (boolean) in order for\n     *                      options.do to be executed.\n     * @param {Function} [options.exec]\n     *                      Function to be executed once options.when()\n     *                      returns true.\n     * @param {Interger} [options.interval=100]\n     *                      How long to wait in-between tries.\n     * @param {Interger} [options.attempts=100]\n     *                      How many tries to use before its considered\n     *                      a failure.\n     * @param {Interger} [options.delayed=0]\n     *                      Number of miliseconds to wait before execution\n                            is started. Default is imediately.\n     *\n     * @return {jQuery.Promise}\n     *\n     * @example\n     *\n     *      $.doWhen({\n     *          when: function(){\n     *              return false;\n     *          },\n     *          exec: function(){\n     *              alert(\"never called given false response on when param!\");\n     *          }\n     *      })\n     *      .fail(function(){\n     *          alert('ALERT: FAILED CONDITION');\n     *      })\n     *      .then(function(){\n     *          alert(\"resolved.\");\n     *      });\n     *\n     */\n    $.doWhen = function(options) {\n\n        return $.Deferred(function(dfd){\n\n            var opt = $.extend({}, {\n                    when:       null,\n                    exec:       function(){},\n                    interval:   100,\n                    attempts:   100,\n                    delayed:    0\n                },\n                options,\n                {\n                    checkId: null\n                }),\n                startChecking = function(){\n\n                    // Check condition now and if true, then resolve object\n                    if (opt.when() === true) {\n\n                        opt.exec.call(dfd.promise());\n                        dfd.resolve();\n                        return;\n\n                    }\n\n                    // apply minimal UI and hide the overlay\n                    opt.checkId = setInterval(function(){\n\n                            if (opt.attempts === 0) {\n\n                                clearInterval(opt.checkId);\n                                dfd.reject();\n\n                            } else {\n\n                                --opt.attempts;\n\n                                if (opt.when() === true) {\n\n                                    opt.attempts = 0;\n                                    clearInterval(opt.checkId);\n                                    opt.exec.call(dfd.promise());\n                                    dfd.resolve();\n\n                                }\n\n                            }\n\n                        }, opt.interval);\n\n                };\n\n            if (opt.delayed > 0) {\n\n                setTimeout(startChecking, Number(opt.delayed));\n\n            } else {\n\n                startChecking();\n\n            }\n\n        }).promise();\n\n    };\n\n})(jQuery);"]}